function M8(Z){this.content=Z}M8.prototype={constructor:M8,find:function(Z){for(var X=0;X<this.content.length;X+=2)if(this.content[X]===Z)return X;return-1},get:function(Z){var X=this.find(Z);return X==-1?void 0:this.content[X+1]},update:function(Z,X,K){var z=K&&K!=Z?this.remove(K):this,J=z.find(Z),Q=z.content.slice();if(J==-1)Q.push(K||Z,X);else if(Q[J+1]=X,K)Q[J]=K;return new M8(Q)},remove:function(Z){var X=this.find(Z);if(X==-1)return this;var K=this.content.slice();return K.splice(X,2),new M8(K)},addToStart:function(Z,X){return new M8([Z,X].concat(this.remove(Z).content))},addToEnd:function(Z,X){var K=this.remove(Z).content.slice();return K.push(Z,X),new M8(K)},addBefore:function(Z,X,K){var z=this.remove(X),J=z.content.slice(),Q=z.find(Z);return J.splice(Q==-1?J.length:Q,0,X,K),new M8(J)},forEach:function(Z){for(var X=0;X<this.content.length;X+=2)Z(this.content[X],this.content[X+1])},prepend:function(Z){if(Z=M8.from(Z),!Z.size)return this;return new M8(Z.content.concat(this.subtract(Z).content))},append:function(Z){if(Z=M8.from(Z),!Z.size)return this;return new M8(this.subtract(Z).content.concat(Z.content))},subtract:function(Z){var X=this;Z=M8.from(Z);for(var K=0;K<Z.content.length;K+=2)X=X.remove(Z.content[K]);return X},toObject:function(){var Z={};return this.forEach(function(X,K){Z[X]=K}),Z},get size(){return this.content.length>>1}};M8.from=function(Z){if(Z instanceof M8)return Z;var X=[];if(Z)for(var K in Z)X.push(K,Z[K]);return new M8(X)};var v1=M8;function _4(Z,X,K){for(let z=0;;z++){if(z==Z.childCount||z==X.childCount)return Z.childCount==X.childCount?null:K;let J=Z.child(z),Q=X.child(z);if(J==Q){K+=J.nodeSize;continue}if(!J.sameMarkup(Q))return K;if(J.isText&&J.text!=Q.text){for(let Y=0;J.text[Y]==Q.text[Y];Y++)K++;return K}if(J.content.size||Q.content.size){let Y=_4(J.content,Q.content,K+1);if(Y!=null)return Y}K+=J.nodeSize}}function m4(Z,X,K,z){for(let J=Z.childCount,Q=X.childCount;;){if(J==0||Q==0)return J==Q?null:{a:K,b:z};let Y=Z.child(--J),q=X.child(--Q),G=Y.nodeSize;if(Y==q){K-=G,z-=G;continue}if(!Y.sameMarkup(q))return{a:K,b:z};if(Y.isText&&Y.text!=q.text){let U=0,V=Math.min(Y.text.length,q.text.length);while(U<V&&Y.text[Y.text.length-U-1]==q.text[q.text.length-U-1])U++,K--,z--;return{a:K,b:z}}if(Y.content.size||q.content.size){let U=m4(Y.content,q.content,K-1,z-1);if(U)return U}K-=G,z-=G}}class M{constructor(Z,X){if(this.content=Z,this.size=X||0,X==null)for(let K=0;K<Z.length;K++)this.size+=Z[K].nodeSize}nodesBetween(Z,X,K,z=0,J){for(let Q=0,Y=0;Y<X;Q++){let q=this.content[Q],G=Y+q.nodeSize;if(G>Z&&K(q,z+Y,J||null,Q)!==!1&&q.content.size){let U=Y+1;q.nodesBetween(Math.max(0,Z-U),Math.min(q.content.size,X-U),K,z+U)}Y=G}}descendants(Z){this.nodesBetween(0,this.size,Z)}textBetween(Z,X,K,z){let J="",Q=!0;return this.nodesBetween(Z,X,(Y,q)=>{let G=Y.isText?Y.text.slice(Math.max(Z,q)-q,X-q):!Y.isLeaf?"":z?typeof z==="function"?z(Y):z:Y.type.spec.leafText?Y.type.spec.leafText(Y):"";if(Y.isBlock&&(Y.isLeaf&&G||Y.isTextblock)&&K)if(Q)Q=!1;else J+=K;J+=G},0),J}append(Z){if(!Z.size)return this;if(!this.size)return Z;let X=this.lastChild,K=Z.firstChild,z=this.content.slice(),J=0;if(X.isText&&X.sameMarkup(K))z[z.length-1]=X.withText(X.text+K.text),J=1;for(;J<Z.content.length;J++)z.push(Z.content[J]);return new M(z,this.size+Z.size)}cut(Z,X=this.size){if(Z==0&&X==this.size)return this;let K=[],z=0;if(X>Z)for(let J=0,Q=0;Q<X;J++){let Y=this.content[J],q=Q+Y.nodeSize;if(q>Z){if(Q<Z||q>X)if(Y.isText)Y=Y.cut(Math.max(0,Z-Q),Math.min(Y.text.length,X-Q));else Y=Y.cut(Math.max(0,Z-Q-1),Math.min(Y.content.size,X-Q-1));K.push(Y),z+=Y.nodeSize}Q=q}return new M(K,z)}cutByIndex(Z,X){if(Z==X)return M.empty;if(Z==0&&X==this.content.length)return this;return new M(this.content.slice(Z,X))}replaceChild(Z,X){let K=this.content[Z];if(K==X)return this;let z=this.content.slice(),J=this.size+X.nodeSize-K.nodeSize;return z[Z]=X,new M(z,J)}addToStart(Z){return new M([Z].concat(this.content),this.size+Z.nodeSize)}addToEnd(Z){return new M(this.content.concat(Z),this.size+Z.nodeSize)}eq(Z){if(this.content.length!=Z.content.length)return!1;for(let X=0;X<this.content.length;X++)if(!this.content[X].eq(Z.content[X]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(Z){let X=this.content[Z];if(!X)throw new RangeError("Index "+Z+" out of range for "+this);return X}maybeChild(Z){return this.content[Z]||null}forEach(Z){for(let X=0,K=0;X<this.content.length;X++){let z=this.content[X];Z(z,K,X),K+=z.nodeSize}}findDiffStart(Z,X=0){return _4(this,Z,X)}findDiffEnd(Z,X=this.size,K=Z.size){return m4(this,Z,X,K)}findIndex(Z,X=-1){if(Z==0)return o3(0,Z);if(Z==this.size)return o3(this.content.length,Z);if(Z>this.size||Z<0)throw new RangeError(`Position ${Z} outside of fragment (${this})`);for(let K=0,z=0;;K++){let J=this.child(K),Q=z+J.nodeSize;if(Q>=Z){if(Q==Z||X>0)return o3(K+1,Q);return o3(K,z)}z=Q}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((Z)=>Z.toJSON()):null}static fromJSON(Z,X){if(!X)return M.empty;if(!Array.isArray(X))throw new RangeError("Invalid input for Fragment.fromJSON");return new M(X.map(Z.nodeFromJSON))}static fromArray(Z){if(!Z.length)return M.empty;let X,K=0;for(let z=0;z<Z.length;z++){let J=Z[z];if(K+=J.nodeSize,z&&J.isText&&Z[z-1].sameMarkup(J)){if(!X)X=Z.slice(0,z);X[X.length-1]=J.withText(X[X.length-1].text+J.text)}else if(X)X.push(J)}return new M(X||Z,K)}static from(Z){if(!Z)return M.empty;if(Z instanceof M)return Z;if(Array.isArray(Z))return this.fromArray(Z);if(Z.attrs)return new M([Z],Z.nodeSize);throw new RangeError("Can not convert "+Z+" to a Fragment"+(Z.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}M.empty=new M([],0);var $1={index:0,offset:0};function o3(Z,X){return $1.index=Z,$1.offset=X,$1}function e3(Z,X){if(Z===X)return!0;if(!(Z&&typeof Z=="object")||!(X&&typeof X=="object"))return!1;let K=Array.isArray(Z);if(Array.isArray(X)!=K)return!1;if(K){if(Z.length!=X.length)return!1;for(let z=0;z<Z.length;z++)if(!e3(Z[z],X[z]))return!1}else{for(let z in Z)if(!(z in X)||!e3(Z[z],X[z]))return!1;for(let z in X)if(!(z in Z))return!1}return!0}class f{constructor(Z,X){this.type=Z,this.attrs=X}addToSet(Z){let X,K=!1;for(let z=0;z<Z.length;z++){let J=Z[z];if(this.eq(J))return Z;if(this.type.excludes(J.type)){if(!X)X=Z.slice(0,z)}else if(J.type.excludes(this.type))return Z;else{if(!K&&J.type.rank>this.type.rank){if(!X)X=Z.slice(0,z);X.push(this),K=!0}if(X)X.push(J)}}if(!X)X=Z.slice();if(!K)X.push(this);return X}removeFromSet(Z){for(let X=0;X<Z.length;X++)if(this.eq(Z[X]))return Z.slice(0,X).concat(Z.slice(X+1));return Z}isInSet(Z){for(let X=0;X<Z.length;X++)if(this.eq(Z[X]))return!0;return!1}eq(Z){return this==Z||this.type==Z.type&&e3(this.attrs,Z.attrs)}toJSON(){let Z={type:this.type.name};for(let X in this.attrs){Z.attrs=this.attrs;break}return Z}static fromJSON(Z,X){if(!X)throw new RangeError("Invalid input for Mark.fromJSON");let K=Z.marks[X.type];if(!K)throw new RangeError(`There is no mark type ${X.type} in this schema`);let z=K.create(X.attrs);return K.checkAttrs(z.attrs),z}static sameSet(Z,X){if(Z==X)return!0;if(Z.length!=X.length)return!1;for(let K=0;K<Z.length;K++)if(!Z[K].eq(X[K]))return!1;return!0}static setFrom(Z){if(!Z||Array.isArray(Z)&&Z.length==0)return f.none;if(Z instanceof f)return[Z];let X=Z.slice();return X.sort((K,z)=>K.type.rank-z.type.rank),X}}f.none=[];class y0 extends Error{}class S{constructor(Z,X,K){this.content=Z,this.openStart=X,this.openEnd=K}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(Z,X){let K=c4(this.content,Z+this.openStart,X);return K&&new S(K,this.openStart,this.openEnd)}removeBetween(Z,X){return new S(l4(this.content,Z+this.openStart,X+this.openStart),this.openStart,this.openEnd)}eq(Z){return this.content.eq(Z.content)&&this.openStart==Z.openStart&&this.openEnd==Z.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let Z={content:this.content.toJSON()};if(this.openStart>0)Z.openStart=this.openStart;if(this.openEnd>0)Z.openEnd=this.openEnd;return Z}static fromJSON(Z,X){if(!X)return S.empty;let K=X.openStart||0,z=X.openEnd||0;if(typeof K!="number"||typeof z!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new S(M.fromJSON(Z,X.content),K,z)}static maxOpen(Z,X=!0){let K=0,z=0;for(let J=Z.firstChild;J&&!J.isLeaf&&(X||!J.type.spec.isolating);J=J.firstChild)K++;for(let J=Z.lastChild;J&&!J.isLeaf&&(X||!J.type.spec.isolating);J=J.lastChild)z++;return new S(Z,K,z)}}S.empty=new S(M.empty,0,0);function l4(Z,X,K){let{index:z,offset:J}=Z.findIndex(X),Q=Z.maybeChild(z),{index:Y,offset:q}=Z.findIndex(K);if(J==X||Q.isText){if(q!=K&&!Z.child(Y).isText)throw new RangeError("Removing non-flat range");return Z.cut(0,X).append(Z.cut(K))}if(z!=Y)throw new RangeError("Removing non-flat range");return Z.replaceChild(z,Q.copy(l4(Q.content,X-J-1,K-J-1)))}function c4(Z,X,K,z){let{index:J,offset:Q}=Z.findIndex(X),Y=Z.maybeChild(J);if(Q==X||Y.isText){if(z&&!z.canReplace(J,J,K))return null;return Z.cut(0,X).append(K).append(Z.cut(X))}let q=c4(Y.content,X-Q-1,K);return q&&Z.replaceChild(J,Y.copy(q))}function yY(Z,X,K){if(K.openStart>Z.depth)throw new y0("Inserted content deeper than insertion position");if(Z.depth-K.openStart!=X.depth-K.openEnd)throw new y0("Inconsistent open depths");return p4(Z,X,K,0)}function p4(Z,X,K,z){let J=Z.index(z),Q=Z.node(z);if(J==X.index(z)&&z<Z.depth-K.openStart){let Y=p4(Z,X,K,z+1);return Q.copy(Q.content.replaceChild(J,Y))}else if(!K.content.size)return t5(Q,Z7(Z,X,z));else if(!K.openStart&&!K.openEnd&&Z.depth==z&&X.depth==z){let Y=Z.parent,q=Y.content;return t5(Y,q.cut(0,Z.parentOffset).append(K.content).append(q.cut(X.parentOffset)))}else{let{start:Y,end:q}=NY(K,Z);return t5(Q,d4(Z,Y,q,X,z))}}function i4(Z,X){if(!X.type.compatibleContent(Z.type))throw new y0("Cannot join "+X.type.name+" onto "+Z.type.name)}function f1(Z,X,K){let z=Z.node(K);return i4(z,X.node(K)),z}function o5(Z,X){let K=X.length-1;if(K>=0&&Z.isText&&Z.sameMarkup(X[K]))X[K]=Z.withText(X[K].text+Z.text);else X.push(Z)}function R3(Z,X,K,z){let J=(X||Z).node(K),Q=0,Y=X?X.index(K):J.childCount;if(Z){if(Q=Z.index(K),Z.depth>K)Q++;else if(Z.textOffset)o5(Z.nodeAfter,z),Q++}for(let q=Q;q<Y;q++)o5(J.child(q),z);if(X&&X.depth==K&&X.textOffset)o5(X.nodeBefore,z)}function t5(Z,X){return Z.type.checkContent(X),Z.copy(X)}function d4(Z,X,K,z,J){let Q=Z.depth>J&&f1(Z,X,J+1),Y=z.depth>J&&f1(K,z,J+1),q=[];if(R3(null,Z,J,q),Q&&Y&&X.index(J)==K.index(J))i4(Q,Y),o5(t5(Q,d4(Z,X,K,z,J+1)),q);else{if(Q)o5(t5(Q,Z7(Z,X,J+1)),q);if(R3(X,K,J,q),Y)o5(t5(Y,Z7(K,z,J+1)),q)}return R3(z,null,J,q),new M(q)}function Z7(Z,X,K){let z=[];if(R3(null,Z,K,z),Z.depth>K){let J=f1(Z,X,K+1);o5(t5(J,Z7(Z,X,K+1)),z)}return R3(X,null,K,z),new M(z)}function NY(Z,X){let K=X.depth-Z.openStart,J=X.node(K).copy(Z.content);for(let Q=K-1;Q>=0;Q--)J=X.node(Q).copy(M.from(J));return{start:J.resolveNoCache(Z.openStart+K),end:J.resolveNoCache(J.content.size-Z.openEnd-K)}}class B3{constructor(Z,X,K){this.pos=Z,this.path=X,this.parentOffset=K,this.depth=X.length/3-1}resolveDepth(Z){if(Z==null)return this.depth;if(Z<0)return this.depth+Z;return Z}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(Z){return this.path[this.resolveDepth(Z)*3]}index(Z){return this.path[this.resolveDepth(Z)*3+1]}indexAfter(Z){return Z=this.resolveDepth(Z),this.index(Z)+(Z==this.depth&&!this.textOffset?0:1)}start(Z){return Z=this.resolveDepth(Z),Z==0?0:this.path[Z*3-1]+1}end(Z){return Z=this.resolveDepth(Z),this.start(Z)+this.node(Z).content.size}before(Z){if(Z=this.resolveDepth(Z),!Z)throw new RangeError("There is no position before the top-level node");return Z==this.depth+1?this.pos:this.path[Z*3-1]}after(Z){if(Z=this.resolveDepth(Z),!Z)throw new RangeError("There is no position after the top-level node");return Z==this.depth+1?this.pos:this.path[Z*3-1]+this.path[Z*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let Z=this.parent,X=this.index(this.depth);if(X==Z.childCount)return null;let K=this.pos-this.path[this.path.length-1],z=Z.child(X);return K?Z.child(X).cut(K):z}get nodeBefore(){let Z=this.index(this.depth),X=this.pos-this.path[this.path.length-1];if(X)return this.parent.child(Z).cut(0,X);return Z==0?null:this.parent.child(Z-1)}posAtIndex(Z,X){X=this.resolveDepth(X);let K=this.path[X*3],z=X==0?0:this.path[X*3-1]+1;for(let J=0;J<Z;J++)z+=K.child(J).nodeSize;return z}marks(){let Z=this.parent,X=this.index();if(Z.content.size==0)return f.none;if(this.textOffset)return Z.child(X).marks;let K=Z.maybeChild(X-1),z=Z.maybeChild(X);if(!K){let Y=K;K=z,z=Y}let J=K.marks;for(var Q=0;Q<J.length;Q++)if(J[Q].type.spec.inclusive===!1&&(!z||!J[Q].isInSet(z.marks)))J=J[Q--].removeFromSet(J);return J}marksAcross(Z){let X=this.parent.maybeChild(this.index());if(!X||!X.isInline)return null;let K=X.marks,z=Z.parent.maybeChild(Z.index());for(var J=0;J<K.length;J++)if(K[J].type.spec.inclusive===!1&&(!z||!K[J].isInSet(z.marks)))K=K[J--].removeFromSet(K);return K}sharedDepth(Z){for(let X=this.depth;X>0;X--)if(this.start(X)<=Z&&this.end(X)>=Z)return X;return 0}blockRange(Z=this,X){if(Z.pos<this.pos)return Z.blockRange(this);for(let K=this.depth-(this.parent.inlineContent||this.pos==Z.pos?1:0);K>=0;K--)if(Z.pos<=this.end(K)&&(!X||X(this.node(K))))return new N0(this,Z,K);return null}sameParent(Z){return this.pos-this.parentOffset==Z.pos-Z.parentOffset}max(Z){return Z.pos>this.pos?Z:this}min(Z){return Z.pos<this.pos?Z:this}toString(){let Z="";for(let X=1;X<=this.depth;X++)Z+=(Z?"/":"")+this.node(X).type.name+"_"+this.index(X-1);return Z+":"+this.parentOffset}static resolve(Z,X){if(!(X>=0&&X<=Z.content.size))throw new RangeError("Position "+X+" out of range");let K=[],z=0,J=X;for(let Q=Z;;){let{index:Y,offset:q}=Q.content.findIndex(J),G=J-q;if(K.push(Q,Y,z+q),!G)break;if(Q=Q.child(Y),Q.isText)break;J=G-1,z+=q+1}return new B3(X,K,J)}static resolveCached(Z,X){let K=T4.get(Z);if(K)for(let J=0;J<K.elts.length;J++){let Q=K.elts[J];if(Q.pos==X)return Q}else T4.set(Z,K=new s4);let z=K.elts[K.i]=B3.resolve(Z,X);return K.i=(K.i+1)%TY,z}}class s4{constructor(){this.elts=[],this.i=0}}var TY=12,T4=new WeakMap;class N0{constructor(Z,X,K){this.$from=Z,this.$to=X,this.depth=K}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}var xY=Object.create(null);class v8{constructor(Z,X,K,z=f.none){this.type=Z,this.attrs=X,this.marks=z,this.content=K||M.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(Z){return this.content.child(Z)}maybeChild(Z){return this.content.maybeChild(Z)}forEach(Z){this.content.forEach(Z)}nodesBetween(Z,X,K,z=0){this.content.nodesBetween(Z,X,K,z,this)}descendants(Z){this.nodesBetween(0,this.content.size,Z)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(Z,X,K,z){return this.content.textBetween(Z,X,K,z)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(Z){return this==Z||this.sameMarkup(Z)&&this.content.eq(Z.content)}sameMarkup(Z){return this.hasMarkup(Z.type,Z.attrs,Z.marks)}hasMarkup(Z,X,K){return this.type==Z&&e3(this.attrs,X||Z.defaultAttrs||xY)&&f.sameSet(this.marks,K||f.none)}copy(Z=null){if(Z==this.content)return this;return new v8(this.type,this.attrs,Z,this.marks)}mark(Z){return Z==this.marks?this:new v8(this.type,this.attrs,this.content,Z)}cut(Z,X=this.content.size){if(Z==0&&X==this.content.size)return this;return this.copy(this.content.cut(Z,X))}slice(Z,X=this.content.size,K=!1){if(Z==X)return S.empty;let z=this.resolve(Z),J=this.resolve(X),Q=K?0:z.sharedDepth(X),Y=z.start(Q),G=z.node(Q).content.cut(z.pos-Y,J.pos-Y);return new S(G,z.depth-Q,J.depth-Q)}replace(Z,X,K){return yY(this.resolve(Z),this.resolve(X),K)}nodeAt(Z){for(let X=this;;){let{index:K,offset:z}=X.content.findIndex(Z);if(X=X.maybeChild(K),!X)return null;if(z==Z||X.isText)return X;Z-=z+1}}childAfter(Z){let{index:X,offset:K}=this.content.findIndex(Z);return{node:this.content.maybeChild(X),index:X,offset:K}}childBefore(Z){if(Z==0)return{node:null,index:0,offset:0};let{index:X,offset:K}=this.content.findIndex(Z);if(K<Z)return{node:this.content.child(X),index:X,offset:K};let z=this.content.child(X-1);return{node:z,index:X-1,offset:K-z.nodeSize}}resolve(Z){return B3.resolveCached(this,Z)}resolveNoCache(Z){return B3.resolve(this,Z)}rangeHasMark(Z,X,K){let z=!1;if(X>Z)this.nodesBetween(Z,X,(J)=>{if(K.isInSet(J.marks))z=!0;return!z});return z}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let Z=this.type.name;if(this.content.size)Z+="("+this.content.toStringInner()+")";return n4(this.marks,Z)}contentMatchAt(Z){let X=this.type.contentMatch.matchFragment(this.content,0,Z);if(!X)throw new Error("Called contentMatchAt on a node with invalid content");return X}canReplace(Z,X,K=M.empty,z=0,J=K.childCount){let Q=this.contentMatchAt(Z).matchFragment(K,z,J),Y=Q&&Q.matchFragment(this.content,X);if(!Y||!Y.validEnd)return!1;for(let q=z;q<J;q++)if(!this.type.allowsMarks(K.child(q).marks))return!1;return!0}canReplaceWith(Z,X,K,z){if(z&&!this.type.allowsMarks(z))return!1;let J=this.contentMatchAt(Z).matchType(K),Q=J&&J.matchFragment(this.content,X);return Q?Q.validEnd:!1}canAppend(Z){if(Z.content.size)return this.canReplace(this.childCount,this.childCount,Z.content);else return this.type.compatibleContent(Z.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let Z=f.none;for(let X=0;X<this.marks.length;X++){let K=this.marks[X];K.type.checkAttrs(K.attrs),Z=K.addToSet(Z)}if(!f.sameSet(Z,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map((X)=>X.type.name)}`);this.content.forEach((X)=>X.check())}toJSON(){let Z={type:this.type.name};for(let X in this.attrs){Z.attrs=this.attrs;break}if(this.content.size)Z.content=this.content.toJSON();if(this.marks.length)Z.marks=this.marks.map((X)=>X.toJSON());return Z}static fromJSON(Z,X){if(!X)throw new RangeError("Invalid input for Node.fromJSON");let K=void 0;if(X.marks){if(!Array.isArray(X.marks))throw new RangeError("Invalid mark data for Node.fromJSON");K=X.marks.map(Z.markFromJSON)}if(X.type=="text"){if(typeof X.text!="string")throw new RangeError("Invalid text node in JSON");return Z.text(X.text,K)}let z=M.fromJSON(Z,X.content),J=Z.nodeType(X.type).create(X.attrs,z,K);return J.type.checkAttrs(J.attrs),J}}v8.prototype.text=void 0;class X7 extends v8{constructor(Z,X,K,z){super(Z,X,null,z);if(!K)throw new RangeError("Empty text nodes are not allowed");this.text=K}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);return n4(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(Z,X){return this.text.slice(Z,X)}get nodeSize(){return this.text.length}mark(Z){return Z==this.marks?this:new X7(this.type,this.attrs,this.text,Z)}withText(Z){if(Z==this.text)return this;return new X7(this.type,this.attrs,Z,this.marks)}cut(Z=0,X=this.text.length){if(Z==0&&X==this.text.length)return this;return this.withText(this.text.slice(Z,X))}eq(Z){return this.sameMarkup(Z)&&this.text==Z.text}toJSON(){let Z=super.toJSON();return Z.text=this.text,Z}}function n4(Z,X){for(let K=Z.length-1;K>=0;K--)X=Z[K].type.name+"("+X+")";return X}class e5{constructor(Z){this.validEnd=Z,this.next=[],this.wrapCache=[]}static parse(Z,X){let K=new a4(Z,X);if(K.next==null)return e5.empty;let z=r4(K);if(K.next)K.err("Unexpected trailing text");let J=fY(hY(z));return _Y(J,K),J}matchType(Z){for(let X=0;X<this.next.length;X++)if(this.next[X].type==Z)return this.next[X].next;return null}matchFragment(Z,X=0,K=Z.childCount){let z=this;for(let J=X;z&&J<K;J++)z=z.matchType(Z.child(J).type);return z}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let Z=0;Z<this.next.length;Z++){let{type:X}=this.next[Z];if(!(X.isText||X.hasRequiredAttrs()))return X}return null}compatible(Z){for(let X=0;X<this.next.length;X++)for(let K=0;K<Z.next.length;K++)if(this.next[X].type==Z.next[K].type)return!0;return!1}fillBefore(Z,X=!1,K=0){let z=[this];function J(Q,Y){let q=Q.matchFragment(Z,K);if(q&&(!X||q.validEnd))return M.from(Y.map((G)=>G.createAndFill()));for(let G=0;G<Q.next.length;G++){let{type:U,next:V}=Q.next[G];if(!(U.isText||U.hasRequiredAttrs())&&z.indexOf(V)==-1){z.push(V);let W=J(V,Y.concat(U));if(W)return W}}return null}return J(this,[])}findWrapping(Z){for(let K=0;K<this.wrapCache.length;K+=2)if(this.wrapCache[K]==Z)return this.wrapCache[K+1];let X=this.computeWrapping(Z);return this.wrapCache.push(Z,X),X}computeWrapping(Z){let X=Object.create(null),K=[{match:this,type:null,via:null}];while(K.length){let z=K.shift(),J=z.match;if(J.matchType(Z)){let Q=[];for(let Y=z;Y.type;Y=Y.via)Q.push(Y.type);return Q.reverse()}for(let Q=0;Q<J.next.length;Q++){let{type:Y,next:q}=J.next[Q];if(!Y.isLeaf&&!Y.hasRequiredAttrs()&&!(Y.name in X)&&(!z.type||q.validEnd))K.push({match:Y.contentMatch,type:Y,via:z}),X[Y.name]=!0}}return null}get edgeCount(){return this.next.length}edge(Z){if(Z>=this.next.length)throw new RangeError(`There's no ${Z}th edge in this content match`);return this.next[Z]}toString(){let Z=[];function X(K){Z.push(K);for(let z=0;z<K.next.length;z++)if(Z.indexOf(K.next[z].next)==-1)X(K.next[z].next)}return X(this),Z.map((K,z)=>{let J=z+(K.validEnd?"*":" ")+" ";for(let Q=0;Q<K.next.length;Q++)J+=(Q?", ":"")+K.next[Q].type.name+"->"+Z.indexOf(K.next[Q].next);return J}).join(`
`)}}e5.empty=new e5(!0);class a4{constructor(Z,X){if(this.string=Z,this.nodeTypes=X,this.inline=null,this.pos=0,this.tokens=Z.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]=="")this.tokens.pop();if(this.tokens[0]=="")this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(Z){return this.next==Z&&(this.pos++||!0)}err(Z){throw new SyntaxError(Z+" (in content expression '"+this.string+"')")}}function r4(Z){let X=[];do X.push(gY(Z));while(Z.eat("|"));return X.length==1?X[0]:{type:"choice",exprs:X}}function gY(Z){let X=[];do X.push(uY(Z));while(Z.next&&Z.next!=")"&&Z.next!="|");return X.length==1?X[0]:{type:"seq",exprs:X}}function uY(Z){let X=$Y(Z);for(;;)if(Z.eat("+"))X={type:"plus",expr:X};else if(Z.eat("*"))X={type:"star",expr:X};else if(Z.eat("?"))X={type:"opt",expr:X};else if(Z.eat("{"))X=wY(Z,X);else break;return X}function x4(Z){if(/\D/.test(Z.next))Z.err("Expected number, got '"+Z.next+"'");let X=Number(Z.next);return Z.pos++,X}function wY(Z,X){let K=x4(Z),z=K;if(Z.eat(","))if(Z.next!="}")z=x4(Z);else z=-1;if(!Z.eat("}"))Z.err("Unclosed braced range");return{type:"range",min:K,max:z,expr:X}}function vY(Z,X){let K=Z.nodeTypes,z=K[X];if(z)return[z];let J=[];for(let Q in K){let Y=K[Q];if(Y.isInGroup(X))J.push(Y)}if(J.length==0)Z.err("No node type or group '"+X+"' found");return J}function $Y(Z){if(Z.eat("(")){let X=r4(Z);if(!Z.eat(")"))Z.err("Missing closing paren");return X}else if(!/\W/.test(Z.next)){let X=vY(Z,Z.next).map((K)=>{if(Z.inline==null)Z.inline=K.isInline;else if(Z.inline!=K.isInline)Z.err("Mixing inline and block content");return{type:"name",value:K}});return Z.pos++,X.length==1?X[0]:{type:"choice",exprs:X}}else Z.err("Unexpected token '"+Z.next+"'")}function hY(Z){let X=[[]];return J(Q(Z,0),K()),X;function K(){return X.push([])-1}function z(Y,q,G){let U={term:G,to:q};return X[Y].push(U),U}function J(Y,q){Y.forEach((G)=>G.to=q)}function Q(Y,q){if(Y.type=="choice")return Y.exprs.reduce((G,U)=>G.concat(Q(U,q)),[]);else if(Y.type=="seq")for(let G=0;;G++){let U=Q(Y.exprs[G],q);if(G==Y.exprs.length-1)return U;J(U,q=K())}else if(Y.type=="star"){let G=K();return z(q,G),J(Q(Y.expr,G),G),[z(G)]}else if(Y.type=="plus"){let G=K();return J(Q(Y.expr,q),G),J(Q(Y.expr,G),G),[z(G)]}else if(Y.type=="opt")return[z(q)].concat(Q(Y.expr,q));else if(Y.type=="range"){let G=q;for(let U=0;U<Y.min;U++){let V=K();J(Q(Y.expr,G),V),G=V}if(Y.max==-1)J(Q(Y.expr,G),G);else for(let U=Y.min;U<Y.max;U++){let V=K();z(G,V),J(Q(Y.expr,G),V),G=V}return[z(G)]}else if(Y.type=="name")return[z(q,void 0,Y.value)];else throw new Error("Unknown expr type")}}function o4(Z,X){return X-Z}function g4(Z,X){let K=[];return z(X),K.sort(o4);function z(J){let Q=Z[J];if(Q.length==1&&!Q[0].term)return z(Q[0].to);K.push(J);for(let Y=0;Y<Q.length;Y++){let{term:q,to:G}=Q[Y];if(!q&&K.indexOf(G)==-1)z(G)}}}function fY(Z){let X=Object.create(null);return K(g4(Z,0));function K(z){let J=[];z.forEach((Y)=>{Z[Y].forEach(({term:q,to:G})=>{if(!q)return;let U;for(let V=0;V<J.length;V++)if(J[V][0]==q)U=J[V][1];g4(Z,G).forEach((V)=>{if(!U)J.push([q,U=[]]);if(U.indexOf(V)==-1)U.push(V)})})});let Q=X[z.join(",")]=new e5(z.indexOf(Z.length-1)>-1);for(let Y=0;Y<J.length;Y++){let q=J[Y][1].sort(o4);Q.next.push({type:J[Y][0],next:X[q.join(",")]||K(q)})}return Q}}function _Y(Z,X){for(let K=0,z=[Z];K<z.length;K++){let J=z[K],Q=!J.validEnd,Y=[];for(let q=0;q<J.next.length;q++){let{type:G,next:U}=J.next[q];if(Y.push(G.name),Q&&!(G.isText||G.hasRequiredAttrs()))Q=!1;if(z.indexOf(U)==-1)z.push(U)}if(Q)X.err("Only non-generatable nodes ("+Y.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function t4(Z){let X=Object.create(null);for(let K in Z){let z=Z[K];if(!z.hasDefault)return null;X[K]=z.default}return X}function e4(Z,X){let K=Object.create(null);for(let z in Z){let J=X&&X[z];if(J===void 0){let Q=Z[z];if(Q.hasDefault)J=Q.default;else throw new RangeError("No value supplied for attribute "+z)}K[z]=J}return K}function ZZ(Z,X,K,z){for(let J in X)if(!(J in Z))throw new RangeError(`Unsupported attribute ${J} for ${K} of type ${J}`);for(let J in Z){let Q=Z[J];if(Q.validate)Q.validate(X[J])}}function XZ(Z,X){let K=Object.create(null);if(X)for(let z in X)K[z]=new KZ(Z,z,X[z]);return K}class K7{constructor(Z,X,K){this.name=Z,this.schema=X,this.spec=K,this.markSet=null,this.groups=K.group?K.group.split(" "):[],this.attrs=XZ(Z,K.attrs),this.defaultAttrs=t4(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(K.inline||Z=="text"),this.isText=Z=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==e5.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(Z){return this.groups.indexOf(Z)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let Z in this.attrs)if(this.attrs[Z].isRequired)return!0;return!1}compatibleContent(Z){return this==Z||this.contentMatch.compatible(Z.contentMatch)}computeAttrs(Z){if(!Z&&this.defaultAttrs)return this.defaultAttrs;else return e4(this.attrs,Z)}create(Z=null,X,K){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new v8(this,this.computeAttrs(Z),M.from(X),f.setFrom(K))}createChecked(Z=null,X,K){return X=M.from(X),this.checkContent(X),new v8(this,this.computeAttrs(Z),X,f.setFrom(K))}createAndFill(Z=null,X,K){if(Z=this.computeAttrs(Z),X=M.from(X),X.size){let Q=this.contentMatch.fillBefore(X);if(!Q)return null;X=Q.append(X)}let z=this.contentMatch.matchFragment(X),J=z&&z.fillBefore(M.empty,!0);if(!J)return null;return new v8(this,Z,X.append(J),f.setFrom(K))}validContent(Z){let X=this.contentMatch.matchFragment(Z);if(!X||!X.validEnd)return!1;for(let K=0;K<Z.childCount;K++)if(!this.allowsMarks(Z.child(K).marks))return!1;return!0}checkContent(Z){if(!this.validContent(Z))throw new RangeError(`Invalid content for node ${this.name}: ${Z.toString().slice(0,50)}`)}checkAttrs(Z){ZZ(this.attrs,Z,"node",this.name)}allowsMarkType(Z){return this.markSet==null||this.markSet.indexOf(Z)>-1}allowsMarks(Z){if(this.markSet==null)return!0;for(let X=0;X<Z.length;X++)if(!this.allowsMarkType(Z[X].type))return!1;return!0}allowedMarks(Z){if(this.markSet==null)return Z;let X;for(let K=0;K<Z.length;K++)if(!this.allowsMarkType(Z[K].type)){if(!X)X=Z.slice(0,K)}else if(X)X.push(Z[K]);return!X?Z:X.length?X:f.none}static compile(Z,X){let K=Object.create(null);Z.forEach((J,Q)=>K[J]=new K7(J,X,Q));let z=X.spec.topNode||"doc";if(!K[z])throw new RangeError("Schema is missing its top node type ('"+z+"')");if(!K.text)throw new RangeError("Every schema needs a 'text' type");for(let J in K.text.attrs)throw new RangeError("The text node type should not have attributes");return K}}function mY(Z,X,K){let z=K.split("|");return(J)=>{let Q=J===null?"null":typeof J;if(z.indexOf(Q)<0)throw new RangeError(`Expected value of type ${z} for attribute ${X} on type ${Z}, got ${Q}`)}}class KZ{constructor(Z,X,K){this.hasDefault=Object.prototype.hasOwnProperty.call(K,"default"),this.default=K.default,this.validate=typeof K.validate=="string"?mY(Z,X,K.validate):K.validate}get isRequired(){return!this.hasDefault}}class P3{constructor(Z,X,K,z){this.name=Z,this.rank=X,this.schema=K,this.spec=z,this.attrs=XZ(Z,z.attrs),this.excluded=null;let J=t4(this.attrs);this.instance=J?new f(this,J):null}create(Z=null){if(!Z&&this.instance)return this.instance;return new f(this,e4(this.attrs,Z))}static compile(Z,X){let K=Object.create(null),z=0;return Z.forEach((J,Q)=>K[J]=new P3(J,z++,X,Q)),K}removeFromSet(Z){for(var X=0;X<Z.length;X++)if(Z[X].type==this)Z=Z.slice(0,X).concat(Z.slice(X+1)),X--;return Z}isInSet(Z){for(let X=0;X<Z.length;X++)if(Z[X].type==this)return Z[X]}checkAttrs(Z){ZZ(this.attrs,Z,"mark",this.name)}excludes(Z){return this.excluded.indexOf(Z)>-1}}class z7{constructor(Z){this.linebreakReplacement=null,this.cached=Object.create(null);let X=this.spec={};for(let z in Z)X[z]=Z[z];X.nodes=v1.from(Z.nodes),X.marks=v1.from(Z.marks||{}),this.nodes=K7.compile(this.spec.nodes,this),this.marks=P3.compile(this.spec.marks,this);let K=Object.create(null);for(let z in this.nodes){if(z in this.marks)throw new RangeError(z+" can not be both a node and a mark");let J=this.nodes[z],Q=J.spec.content||"",Y=J.spec.marks;if(J.contentMatch=K[Q]||(K[Q]=e5.parse(Q,this.nodes)),J.inlineContent=J.contentMatch.inlineContent,J.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!J.isInline||!J.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=J}J.markSet=Y=="_"?null:Y?u4(this,Y.split(" ")):Y==""||!J.inlineContent?[]:null}for(let z in this.marks){let J=this.marks[z],Q=J.spec.excludes;J.excluded=Q==null?[J]:Q==""?[]:u4(this,Q.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(Z,X=null,K,z){if(typeof Z=="string")Z=this.nodeType(Z);else if(!(Z instanceof K7))throw new RangeError("Invalid node type: "+Z);else if(Z.schema!=this)throw new RangeError("Node type from different schema used ("+Z.name+")");return Z.createChecked(X,K,z)}text(Z,X){let K=this.nodes.text;return new X7(K,K.defaultAttrs,Z,f.setFrom(X))}mark(Z,X){if(typeof Z=="string")Z=this.marks[Z];return Z.create(X)}nodeFromJSON(Z){return v8.fromJSON(this,Z)}markFromJSON(Z){return f.fromJSON(this,Z)}nodeType(Z){let X=this.nodes[Z];if(!X)throw new RangeError("Unknown node type: "+Z);return X}}function u4(Z,X){let K=[];for(let z=0;z<X.length;z++){let J=X[z],Q=Z.marks[J],Y=Q;if(Q)K.push(Q);else for(let q in Z.marks){let G=Z.marks[q];if(J=="_"||G.spec.group&&G.spec.group.split(" ").indexOf(J)>-1)K.push(Y=G)}if(!Y)throw new SyntaxError("Unknown mark type: '"+X[z]+"'")}return K}function lY(Z){return Z.tag!=null}function cY(Z){return Z.style!=null}class Z5{constructor(Z,X){this.schema=Z,this.rules=X,this.tags=[],this.styles=[];let K=this.matchedStyles=[];X.forEach((z)=>{if(lY(z))this.tags.push(z);else if(cY(z)){let J=/[^=]*/.exec(z.style)[0];if(K.indexOf(J)<0)K.push(J);this.styles.push(z)}}),this.normalizeLists=!this.tags.some((z)=>{if(!/^(ul|ol)\b/.test(z.tag)||!z.node)return!1;let J=Z.nodes[z.node];return J.contentMatch.matchType(J)})}parse(Z,X={}){let K=new m1(this,X,!1);return K.addAll(Z,f.none,X.from,X.to),K.finish()}parseSlice(Z,X={}){let K=new m1(this,X,!0);return K.addAll(Z,f.none,X.from,X.to),S.maxOpen(K.finish())}matchTag(Z,X,K){for(let z=K?this.tags.indexOf(K)+1:0;z<this.tags.length;z++){let J=this.tags[z];if(dY(Z,J.tag)&&(J.namespace===void 0||Z.namespaceURI==J.namespace)&&(!J.context||X.matchesContext(J.context))){if(J.getAttrs){let Q=J.getAttrs(Z);if(Q===!1)continue;J.attrs=Q||void 0}return J}}}matchStyle(Z,X,K,z){for(let J=z?this.styles.indexOf(z)+1:0;J<this.styles.length;J++){let Q=this.styles[J],Y=Q.style;if(Y.indexOf(Z)!=0||Q.context&&!K.matchesContext(Q.context)||Y.length>Z.length&&(Y.charCodeAt(Z.length)!=61||Y.slice(Z.length+1)!=X))continue;if(Q.getAttrs){let q=Q.getAttrs(X);if(q===!1)continue;Q.attrs=q||void 0}return Q}}static schemaRules(Z){let X=[];function K(z){let J=z.priority==null?50:z.priority,Q=0;for(;Q<X.length;Q++){let Y=X[Q];if((Y.priority==null?50:Y.priority)<J)break}X.splice(Q,0,z)}for(let z in Z.marks){let J=Z.marks[z].spec.parseDOM;if(J)J.forEach((Q)=>{if(K(Q=v4(Q)),!(Q.mark||Q.ignore||Q.clearMark))Q.mark=z})}for(let z in Z.nodes){let J=Z.nodes[z].spec.parseDOM;if(J)J.forEach((Q)=>{if(K(Q=v4(Q)),!(Q.node||Q.ignore||Q.mark))Q.node=z})}return X}static fromSchema(Z){return Z.cached.domParser||(Z.cached.domParser=new Z5(Z,Z5.schemaRules(Z)))}}var zZ={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},pY={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},JZ={ol:!0,ul:!0},E3=1,_1=2,F3=4;function w4(Z,X,K){if(X!=null)return(X?E3:0)|(X==="full"?_1:0);return Z&&Z.whitespace=="pre"?E3|_1:K&~F3}class j3{constructor(Z,X,K,z,J,Q){this.type=Z,this.attrs=X,this.marks=K,this.solid=z,this.options=Q,this.content=[],this.activeMarks=f.none,this.match=J||(Q&F3?null:Z.contentMatch)}findWrapping(Z){if(!this.match){if(!this.type)return[];let X=this.type.contentMatch.fillBefore(M.from(Z));if(X)this.match=this.type.contentMatch.matchFragment(X);else{let K=this.type.contentMatch,z;if(z=K.findWrapping(Z.type))return this.match=K,z;else return null}}return this.match.findWrapping(Z.type)}finish(Z){if(!(this.options&E3)){let K=this.content[this.content.length-1],z;if(K&&K.isText&&(z=/[ \t\r\n\u000c]+$/.exec(K.text))){let J=K;if(K.text.length==z[0].length)this.content.pop();else this.content[this.content.length-1]=J.withText(J.text.slice(0,J.text.length-z[0].length))}}let X=M.from(this.content);if(!Z&&this.match)X=X.append(this.match.fillBefore(M.empty,!0));return this.type?this.type.create(this.attrs,X,this.marks):X}inlineContext(Z){if(this.type)return this.type.inlineContent;if(this.content.length)return this.content[0].isInline;return Z.parentNode&&!zZ.hasOwnProperty(Z.parentNode.nodeName.toLowerCase())}}class m1{constructor(Z,X,K){this.parser=Z,this.options=X,this.isOpen=K,this.open=0,this.localPreserveWS=!1;let z=X.topNode,J,Q=w4(null,X.preserveWhitespace,0)|(K?F3:0);if(z)J=new j3(z.type,z.attrs,f.none,!0,X.topMatch||z.type.contentMatch,Q);else if(K)J=new j3(null,null,f.none,!0,null,Q);else J=new j3(Z.schema.topNodeType,null,f.none,!0,null,Q);this.nodes=[J],this.find=X.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(Z,X){if(Z.nodeType==3)this.addTextNode(Z,X);else if(Z.nodeType==1)this.addElement(Z,X)}addTextNode(Z,X){let K=Z.nodeValue,z=this.top,J=z.options&_1?"full":this.localPreserveWS||(z.options&E3)>0;if(J==="full"||z.inlineContext(Z)||/[^ \t\r\n\u000c]/.test(K)){if(!J){if(K=K.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(K)&&this.open==this.nodes.length-1){let Q=z.content[z.content.length-1],Y=Z.previousSibling;if(!Q||Y&&Y.nodeName=="BR"||Q.isText&&/[ \t\r\n\u000c]$/.test(Q.text))K=K.slice(1)}}else if(J!=="full")K=K.replace(/\r?\n|\r/g," ");else K=K.replace(/\r\n?/g,`
`);if(K)this.insertNode(this.parser.schema.text(K),X,!/\S/.test(K));this.findInText(Z)}else this.findInside(Z)}addElement(Z,X,K){let z=this.localPreserveWS,J=this.top;if(Z.tagName=="PRE"||/pre/.test(Z.style&&Z.style.whiteSpace))this.localPreserveWS=!0;let Q=Z.nodeName.toLowerCase(),Y;if(JZ.hasOwnProperty(Q)&&this.parser.normalizeLists)iY(Z);let q=this.options.ruleFromNode&&this.options.ruleFromNode(Z)||(Y=this.parser.matchTag(Z,this,K));Z:if(q?q.ignore:pY.hasOwnProperty(Q))this.findInside(Z),this.ignoreFallback(Z,X);else if(!q||q.skip||q.closeParent){if(q&&q.closeParent)this.open=Math.max(0,this.open-1);else if(q&&q.skip.nodeType)Z=q.skip;let G,U=this.needsBlock;if(zZ.hasOwnProperty(Q)){if(J.content.length&&J.content[0].isInline&&this.open)this.open--,J=this.top;if(G=!0,!J.type)this.needsBlock=!0}else if(!Z.firstChild){this.leafFallback(Z,X);break Z}let V=q&&q.skip?X:this.readStyles(Z,X);if(V)this.addAll(Z,V);if(G)this.sync(J);this.needsBlock=U}else{let G=this.readStyles(Z,X);if(G)this.addElementByRule(Z,q,G,q.consuming===!1?Y:void 0)}this.localPreserveWS=z}leafFallback(Z,X){if(Z.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent)this.addTextNode(Z.ownerDocument.createTextNode(`
`),X)}ignoreFallback(Z,X){if(Z.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent))this.findPlace(this.parser.schema.text("-"),X,!0)}readStyles(Z,X){let K=Z.style;if(K&&K.length)for(let z=0;z<this.parser.matchedStyles.length;z++){let J=this.parser.matchedStyles[z],Q=K.getPropertyValue(J);if(Q)for(let Y=void 0;;){let q=this.parser.matchStyle(J,Q,this,Y);if(!q)break;if(q.ignore)return null;if(q.clearMark)X=X.filter((G)=>!q.clearMark(G));else X=X.concat(this.parser.schema.marks[q.mark].create(q.attrs));if(q.consuming===!1)Y=q;else break}}return X}addElementByRule(Z,X,K,z){let J,Q;if(X.node){if(Q=this.parser.schema.nodes[X.node],!Q.isLeaf){let q=this.enter(Q,X.attrs||null,K,X.preserveWhitespace);if(q)J=!0,K=q}else if(!this.insertNode(Q.create(X.attrs),K,Z.nodeName=="BR"))this.leafFallback(Z,K)}else{let q=this.parser.schema.marks[X.mark];K=K.concat(q.create(X.attrs))}let Y=this.top;if(Q&&Q.isLeaf)this.findInside(Z);else if(z)this.addElement(Z,K,z);else if(X.getContent)this.findInside(Z),X.getContent(Z,this.parser.schema).forEach((q)=>this.insertNode(q,K,!1));else{let q=Z;if(typeof X.contentElement=="string")q=Z.querySelector(X.contentElement);else if(typeof X.contentElement=="function")q=X.contentElement(Z);else if(X.contentElement)q=X.contentElement;this.findAround(Z,q,!0),this.addAll(q,K),this.findAround(Z,q,!1)}if(J&&this.sync(Y))this.open--}addAll(Z,X,K,z){let J=K||0;for(let Q=K?Z.childNodes[K]:Z.firstChild,Y=z==null?null:Z.childNodes[z];Q!=Y;Q=Q.nextSibling,++J)this.findAtPoint(Z,J),this.addDOM(Q,X);this.findAtPoint(Z,J)}findPlace(Z,X,K){let z,J;for(let Q=this.open,Y=0;Q>=0;Q--){let q=this.nodes[Q],G=q.findWrapping(Z);if(G&&(!z||z.length>G.length+Y)){if(z=G,J=q,!G.length)break}if(q.solid){if(K)break;Y+=2}}if(!z)return null;this.sync(J);for(let Q=0;Q<z.length;Q++)X=this.enterInner(z[Q],null,X,!1);return X}insertNode(Z,X,K){if(Z.isInline&&this.needsBlock&&!this.top.type){let J=this.textblockFromContext();if(J)X=this.enterInner(J,null,X)}let z=this.findPlace(Z,X,K);if(z){this.closeExtra();let J=this.top;if(J.match)J.match=J.match.matchType(Z.type);let Q=f.none;for(let Y of z.concat(Z.marks))if(J.type?J.type.allowsMarkType(Y.type):$4(Y.type,Z.type))Q=Y.addToSet(Q);return J.content.push(Z.mark(Q)),!0}return!1}enter(Z,X,K,z){let J=this.findPlace(Z.create(X),K,!1);if(J)J=this.enterInner(Z,X,K,!0,z);return J}enterInner(Z,X,K,z=!1,J){this.closeExtra();let Q=this.top;Q.match=Q.match&&Q.match.matchType(Z);let Y=w4(Z,J,Q.options);if(Q.options&F3&&Q.content.length==0)Y|=F3;let q=f.none;return K=K.filter((G)=>{if(Q.type?Q.type.allowsMarkType(G.type):$4(G.type,Z))return q=G.addToSet(q),!1;return!0}),this.nodes.push(new j3(Z,X,q,z,null,Y)),this.open++,K}closeExtra(Z=!1){let X=this.nodes.length-1;if(X>this.open){for(;X>this.open;X--)this.nodes[X-1].content.push(this.nodes[X].finish(Z));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(Z){for(let X=this.open;X>=0;X--)if(this.nodes[X]==Z)return this.open=X,!0;else if(this.localPreserveWS)this.nodes[X].options|=E3;return!1}get currentPos(){this.closeExtra();let Z=0;for(let X=this.open;X>=0;X--){let K=this.nodes[X].content;for(let z=K.length-1;z>=0;z--)Z+=K[z].nodeSize;if(X)Z++}return Z}findAtPoint(Z,X){if(this.find){for(let K=0;K<this.find.length;K++)if(this.find[K].node==Z&&this.find[K].offset==X)this.find[K].pos=this.currentPos}}findInside(Z){if(this.find){for(let X=0;X<this.find.length;X++)if(this.find[X].pos==null&&Z.nodeType==1&&Z.contains(this.find[X].node))this.find[X].pos=this.currentPos}}findAround(Z,X,K){if(Z!=X&&this.find){for(let z=0;z<this.find.length;z++)if(this.find[z].pos==null&&Z.nodeType==1&&Z.contains(this.find[z].node)){if(X.compareDocumentPosition(this.find[z].node)&(K?2:4))this.find[z].pos=this.currentPos}}}findInText(Z){if(this.find){for(let X=0;X<this.find.length;X++)if(this.find[X].node==Z)this.find[X].pos=this.currentPos-(Z.nodeValue.length-this.find[X].offset)}}matchesContext(Z){if(Z.indexOf("|")>-1)return Z.split(/\s*\|\s*/).some(this.matchesContext,this);let X=Z.split("/"),K=this.options.context,z=!this.isOpen&&(!K||K.parent.type==this.nodes[0].type),J=-(K?K.depth+1:0)+(z?0:1),Q=(Y,q)=>{for(;Y>=0;Y--){let G=X[Y];if(G==""){if(Y==X.length-1||Y==0)continue;for(;q>=J;q--)if(Q(Y-1,q))return!0;return!1}else{let U=q>0||q==0&&z?this.nodes[q].type:K&&q>=J?K.node(q-J).type:null;if(!U||U.name!=G&&!U.isInGroup(G))return!1;q--}}return!0};return Q(X.length-1,this.open)}textblockFromContext(){let Z=this.options.context;if(Z)for(let X=Z.depth;X>=0;X--){let K=Z.node(X).contentMatchAt(Z.indexAfter(X)).defaultType;if(K&&K.isTextblock&&K.defaultAttrs)return K}for(let X in this.parser.schema.nodes){let K=this.parser.schema.nodes[X];if(K.isTextblock&&K.defaultAttrs)return K}}}function iY(Z){for(let X=Z.firstChild,K=null;X;X=X.nextSibling){let z=X.nodeType==1?X.nodeName.toLowerCase():null;if(z&&JZ.hasOwnProperty(z)&&K)K.appendChild(X),X=K;else if(z=="li")K=X;else if(z)K=null}}function dY(Z,X){return(Z.matches||Z.msMatchesSelector||Z.webkitMatchesSelector||Z.mozMatchesSelector).call(Z,X)}function v4(Z){let X={};for(let K in Z)X[K]=Z[K];return X}function $4(Z,X){let K=X.schema.nodes;for(let z in K){let J=K[z];if(!J.allowsMarkType(Z))continue;let Q=[],Y=(q)=>{Q.push(q);for(let G=0;G<q.edgeCount;G++){let{type:U,next:V}=q.edge(G);if(U==X)return!0;if(Q.indexOf(V)<0&&Y(V))return!0}};if(Y(J.contentMatch))return!0}}class T5{constructor(Z,X){this.nodes=Z,this.marks=X}serializeFragment(Z,X={},K){if(!K)K=h1(X).createDocumentFragment();let z=K,J=[];return Z.forEach((Q)=>{if(J.length||Q.marks.length){let Y=0,q=0;while(Y<J.length&&q<Q.marks.length){let G=Q.marks[q];if(!this.marks[G.type.name]){q++;continue}if(!G.eq(J[Y][0])||G.type.spec.spanning===!1)break;Y++,q++}while(Y<J.length)z=J.pop()[1];while(q<Q.marks.length){let G=Q.marks[q++],U=this.serializeMark(G,Q.isInline,X);if(U)J.push([G,z]),z.appendChild(U.dom),z=U.contentDOM||U.dom}}z.appendChild(this.serializeNodeInner(Q,X))}),K}serializeNodeInner(Z,X){let{dom:K,contentDOM:z}=t3(h1(X),this.nodes[Z.type.name](Z),null,Z.attrs);if(z){if(Z.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(Z.content,X,z)}return K}serializeNode(Z,X={}){let K=this.serializeNodeInner(Z,X);for(let z=Z.marks.length-1;z>=0;z--){let J=this.serializeMark(Z.marks[z],Z.isInline,X);if(J)(J.contentDOM||J.dom).appendChild(K),K=J.dom}return K}serializeMark(Z,X,K={}){let z=this.marks[Z.type.name];return z&&t3(h1(K),z(Z,X),null,Z.attrs)}static renderSpec(Z,X,K=null,z){return t3(Z,X,K,z)}static fromSchema(Z){return Z.cached.domSerializer||(Z.cached.domSerializer=new T5(this.nodesFromSchema(Z),this.marksFromSchema(Z)))}static nodesFromSchema(Z){let X=h4(Z.nodes);if(!X.text)X.text=(K)=>K.text;return X}static marksFromSchema(Z){return h4(Z.marks)}}function h4(Z){let X={};for(let K in Z){let z=Z[K].spec.toDOM;if(z)X[K]=z}return X}function h1(Z){return Z.document||window.document}var f4=new WeakMap;function sY(Z){let X=f4.get(Z);if(X===void 0)f4.set(Z,X=nY(Z));return X}function nY(Z){let X=null;function K(z){if(z&&typeof z=="object")if(Array.isArray(z))if(typeof z[0]=="string"){if(!X)X=[];X.push(z)}else for(let J=0;J<z.length;J++)K(z[J]);else for(let J in z)K(z[J])}return K(Z),X}function t3(Z,X,K,z){if(typeof X=="string")return{dom:Z.createTextNode(X)};if(X.nodeType!=null)return{dom:X};if(X.dom&&X.dom.nodeType!=null)return X;let J=X[0],Q;if(typeof J!="string")throw new RangeError("Invalid array passed to renderSpec");if(z&&(Q=sY(z))&&Q.indexOf(X)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let Y=J.indexOf(" ");if(Y>0)K=J.slice(0,Y),J=J.slice(Y+1);let q,G=K?Z.createElementNS(K,J):Z.createElement(J),U=X[1],V=1;if(U&&typeof U=="object"&&U.nodeType==null&&!Array.isArray(U)){V=2;for(let W in U)if(U[W]!=null){let A=W.indexOf(" ");if(A>0)G.setAttributeNS(W.slice(0,A),W.slice(A+1),U[W]);else G.setAttribute(W,U[W])}}for(let W=V;W<X.length;W++){let A=X[W];if(A===0){if(W<X.length-1||W>V)throw new RangeError("Content hole must be the only child of its parent node");return{dom:G,contentDOM:G}}else{let{dom:j,contentDOM:H}=t3(Z,A,K,z);if(G.appendChild(j),H){if(q)throw new RangeError("Multiple content holes");q=H}}}return{dom:G,contentDOM:q}}var qZ=65535,GZ=Math.pow(2,16);function aY(Z,X){return Z+X*GZ}function QZ(Z){return Z&qZ}function rY(Z){return(Z-(Z&qZ))/GZ}var UZ=1,VZ=2,J7=4,WZ=8;class Q7{constructor(Z,X,K){this.pos=Z,this.delInfo=X,this.recover=K}get deleted(){return(this.delInfo&WZ)>0}get deletedBefore(){return(this.delInfo&(UZ|J7))>0}get deletedAfter(){return(this.delInfo&(VZ|J7))>0}get deletedAcross(){return(this.delInfo&J7)>0}}class k8{constructor(Z,X=!1){if(this.ranges=Z,this.inverted=X,!Z.length&&k8.empty)return k8.empty}recover(Z){let X=0,K=QZ(Z);if(!this.inverted)for(let z=0;z<K;z++)X+=this.ranges[z*3+2]-this.ranges[z*3+1];return this.ranges[K*3]+X+rY(Z)}mapResult(Z,X=1){return this._map(Z,X,!1)}map(Z,X=1){return this._map(Z,X,!0)}_map(Z,X,K){let z=0,J=this.inverted?2:1,Q=this.inverted?1:2;for(let Y=0;Y<this.ranges.length;Y+=3){let q=this.ranges[Y]-(this.inverted?z:0);if(q>Z)break;let G=this.ranges[Y+J],U=this.ranges[Y+Q],V=q+G;if(Z<=V){let W=!G?X:Z==q?-1:Z==V?1:X,A=q+z+(W<0?0:U);if(K)return A;let j=Z==(X<0?q:V)?null:aY(Y/3,Z-q),H=Z==q?VZ:Z==V?UZ:J7;if(X<0?Z!=q:Z!=V)H|=WZ;return new Q7(A,H,j)}z+=U-G}return K?Z+z:new Q7(Z+z,0,null)}touches(Z,X){let K=0,z=QZ(X),J=this.inverted?2:1,Q=this.inverted?1:2;for(let Y=0;Y<this.ranges.length;Y+=3){let q=this.ranges[Y]-(this.inverted?K:0);if(q>Z)break;let G=this.ranges[Y+J],U=q+G;if(Z<=U&&Y==z*3)return!0;K+=this.ranges[Y+Q]-G}return!1}forEach(Z){let X=this.inverted?2:1,K=this.inverted?1:2;for(let z=0,J=0;z<this.ranges.length;z+=3){let Q=this.ranges[z],Y=Q-(this.inverted?J:0),q=Q+(this.inverted?0:J),G=this.ranges[z+X],U=this.ranges[z+K];Z(Y,Y+G,q,q+U),J+=U-G}}invert(){return new k8(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(Z){return Z==0?k8.empty:new k8(Z<0?[0,-Z,0]:[0,0,Z])}}k8.empty=new k8([]);class x0{constructor(Z,X,K=0,z=Z?Z.length:0){this.mirror=X,this.from=K,this.to=z,this._maps=Z||[],this.ownData=!(Z||X)}get maps(){return this._maps}slice(Z=0,X=this.maps.length){return new x0(this._maps,this.mirror,Z,X)}appendMap(Z,X){if(!this.ownData)this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0;if(this.to=this._maps.push(Z),X!=null)this.setMirror(this._maps.length-1,X)}appendMapping(Z){for(let X=0,K=this._maps.length;X<Z._maps.length;X++){let z=Z.getMirror(X);this.appendMap(Z._maps[X],z!=null&&z<X?K+z:void 0)}}getMirror(Z){if(this.mirror){for(let X=0;X<this.mirror.length;X++)if(this.mirror[X]==Z)return this.mirror[X+(X%2?-1:1)]}}setMirror(Z,X){if(!this.mirror)this.mirror=[];this.mirror.push(Z,X)}appendMappingInverted(Z){for(let X=Z.maps.length-1,K=this._maps.length+Z._maps.length;X>=0;X--){let z=Z.getMirror(X);this.appendMap(Z._maps[X].invert(),z!=null&&z>X?K-z-1:void 0)}}invert(){let Z=new x0;return Z.appendMappingInverted(this),Z}map(Z,X=1){if(this.mirror)return this._map(Z,X,!0);for(let K=this.from;K<this.to;K++)Z=this._maps[K].map(Z,X);return Z}mapResult(Z,X=1){return this._map(Z,X,!1)}_map(Z,X,K){let z=0;for(let J=this.from;J<this.to;J++){let Q=this._maps[J],Y=Q.mapResult(Z,X);if(Y.recover!=null){let q=this.getMirror(J);if(q!=null&&q>J&&q<this.to){J=q,Z=this._maps[q].recover(Y.recover);continue}}z|=Y.delInfo,Z=Y.pos}return K?Z:new Q7(Z,z,null)}}var l1=Object.create(null);class V8{getMap(){return k8.empty}merge(Z){return null}static fromJSON(Z,X){if(!X||!X.stepType)throw new RangeError("Invalid input for Step.fromJSON");let K=l1[X.stepType];if(!K)throw new RangeError(`No step type ${X.stepType} defined`);return K.fromJSON(Z,X)}static jsonID(Z,X){if(Z in l1)throw new RangeError("Duplicate use of step JSON ID "+Z);return l1[Z]=X,X.prototype.jsonID=Z,X}}class Z8{constructor(Z,X){this.doc=Z,this.failed=X}static ok(Z){return new Z8(Z,null)}static fail(Z){return new Z8(null,Z)}static fromReplace(Z,X,K,z){try{return Z8.ok(Z.replace(X,K,z))}catch(J){if(J instanceof y0)return Z8.fail(J.message);throw J}}}function d1(Z,X,K){let z=[];for(let J=0;J<Z.childCount;J++){let Q=Z.child(J);if(Q.content.size)Q=Q.copy(d1(Q.content,X,Q));if(Q.isInline)Q=X(Q,K,J);z.push(Q)}return M.fromArray(z)}class x5 extends V8{constructor(Z,X,K){super();this.from=Z,this.to=X,this.mark=K}apply(Z){let X=Z.slice(this.from,this.to),K=Z.resolve(this.from),z=K.node(K.sharedDepth(this.to)),J=new S(d1(X.content,(Q,Y)=>{if(!Q.isAtom||!Y.type.allowsMarkType(this.mark.type))return Q;return Q.mark(this.mark.addToSet(Q.marks))},z),X.openStart,X.openEnd);return Z8.fromReplace(Z,this.from,this.to,J)}invert(){return new X5(this.from,this.to,this.mark)}map(Z){let X=Z.mapResult(this.from,1),K=Z.mapResult(this.to,-1);if(X.deleted&&K.deleted||X.pos>=K.pos)return null;return new x5(X.pos,K.pos,this.mark)}merge(Z){if(Z instanceof x5&&Z.mark.eq(this.mark)&&this.from<=Z.to&&this.to>=Z.from)return new x5(Math.min(this.from,Z.from),Math.max(this.to,Z.to),this.mark);return null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(Z,X){if(typeof X.from!="number"||typeof X.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new x5(X.from,X.to,Z.markFromJSON(X.mark))}}V8.jsonID("addMark",x5);class X5 extends V8{constructor(Z,X,K){super();this.from=Z,this.to=X,this.mark=K}apply(Z){let X=Z.slice(this.from,this.to),K=new S(d1(X.content,(z)=>{return z.mark(this.mark.removeFromSet(z.marks))},Z),X.openStart,X.openEnd);return Z8.fromReplace(Z,this.from,this.to,K)}invert(){return new x5(this.from,this.to,this.mark)}map(Z){let X=Z.mapResult(this.from,1),K=Z.mapResult(this.to,-1);if(X.deleted&&K.deleted||X.pos>=K.pos)return null;return new X5(X.pos,K.pos,this.mark)}merge(Z){if(Z instanceof X5&&Z.mark.eq(this.mark)&&this.from<=Z.to&&this.to>=Z.from)return new X5(Math.min(this.from,Z.from),Math.max(this.to,Z.to),this.mark);return null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(Z,X){if(typeof X.from!="number"||typeof X.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new X5(X.from,X.to,Z.markFromJSON(X.mark))}}V8.jsonID("removeMark",X5);class g5 extends V8{constructor(Z,X){super();this.pos=Z,this.mark=X}apply(Z){let X=Z.nodeAt(this.pos);if(!X)return Z8.fail("No node at mark step's position");let K=X.type.create(X.attrs,null,this.mark.addToSet(X.marks));return Z8.fromReplace(Z,this.pos,this.pos+1,new S(M.from(K),0,X.isLeaf?0:1))}invert(Z){let X=Z.nodeAt(this.pos);if(X){let K=this.mark.addToSet(X.marks);if(K.length==X.marks.length){for(let z=0;z<X.marks.length;z++)if(!X.marks[z].isInSet(K))return new g5(this.pos,X.marks[z]);return new g5(this.pos,this.mark)}}return new Z0(this.pos,this.mark)}map(Z){let X=Z.mapResult(this.pos,1);return X.deletedAfter?null:new g5(X.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(Z,X){if(typeof X.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new g5(X.pos,Z.markFromJSON(X.mark))}}V8.jsonID("addNodeMark",g5);class Z0 extends V8{constructor(Z,X){super();this.pos=Z,this.mark=X}apply(Z){let X=Z.nodeAt(this.pos);if(!X)return Z8.fail("No node at mark step's position");let K=X.type.create(X.attrs,null,this.mark.removeFromSet(X.marks));return Z8.fromReplace(Z,this.pos,this.pos+1,new S(M.from(K),0,X.isLeaf?0:1))}invert(Z){let X=Z.nodeAt(this.pos);if(!X||!this.mark.isInSet(X.marks))return this;return new g5(this.pos,this.mark)}map(Z){let X=Z.mapResult(this.pos,1);return X.deletedAfter?null:new Z0(X.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(Z,X){if(typeof X.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Z0(X.pos,Z.markFromJSON(X.mark))}}V8.jsonID("removeNodeMark",Z0);class Y8 extends V8{constructor(Z,X,K,z=!1){super();this.from=Z,this.to=X,this.slice=K,this.structure=z}apply(Z){if(this.structure&&i1(Z,this.from,this.to))return Z8.fail("Structure replace would overwrite content");return Z8.fromReplace(Z,this.from,this.to,this.slice)}getMap(){return new k8([this.from,this.to-this.from,this.slice.size])}invert(Z){return new Y8(this.from,this.from+this.slice.size,Z.slice(this.from,this.to))}map(Z){let X=Z.mapResult(this.from,1),K=Z.mapResult(this.to,-1);if(X.deletedAcross&&K.deletedAcross)return null;return new Y8(X.pos,Math.max(X.pos,K.pos),this.slice,this.structure)}merge(Z){if(!(Z instanceof Y8)||Z.structure||this.structure)return null;if(this.from+this.slice.size==Z.from&&!this.slice.openEnd&&!Z.slice.openStart){let X=this.slice.size+Z.slice.size==0?S.empty:new S(this.slice.content.append(Z.slice.content),this.slice.openStart,Z.slice.openEnd);return new Y8(this.from,this.to+(Z.to-Z.from),X,this.structure)}else if(Z.to==this.from&&!this.slice.openStart&&!Z.slice.openEnd){let X=this.slice.size+Z.slice.size==0?S.empty:new S(Z.slice.content.append(this.slice.content),Z.slice.openStart,this.slice.openEnd);return new Y8(Z.from,this.to,X,this.structure)}else return null}toJSON(){let Z={stepType:"replace",from:this.from,to:this.to};if(this.slice.size)Z.slice=this.slice.toJSON();if(this.structure)Z.structure=!0;return Z}static fromJSON(Z,X){if(typeof X.from!="number"||typeof X.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Y8(X.from,X.to,S.fromJSON(Z,X.slice),!!X.structure)}}V8.jsonID("replace",Y8);class t extends V8{constructor(Z,X,K,z,J,Q,Y=!1){super();this.from=Z,this.to=X,this.gapFrom=K,this.gapTo=z,this.slice=J,this.insert=Q,this.structure=Y}apply(Z){if(this.structure&&(i1(Z,this.from,this.gapFrom)||i1(Z,this.gapTo,this.to)))return Z8.fail("Structure gap-replace would overwrite content");let X=Z.slice(this.gapFrom,this.gapTo);if(X.openStart||X.openEnd)return Z8.fail("Gap is not a flat range");let K=this.slice.insertAt(this.insert,X.content);if(!K)return Z8.fail("Content does not fit in gap");return Z8.fromReplace(Z,this.from,this.to,K)}getMap(){return new k8([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(Z){let X=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+X,this.from+this.insert,this.from+this.insert+X,Z.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(Z){let X=Z.mapResult(this.from,1),K=Z.mapResult(this.to,-1),z=this.from==this.gapFrom?X.pos:Z.map(this.gapFrom,-1),J=this.to==this.gapTo?K.pos:Z.map(this.gapTo,1);if(X.deletedAcross&&K.deletedAcross||z<X.pos||J>K.pos)return null;return new t(X.pos,K.pos,z,J,this.slice,this.insert,this.structure)}toJSON(){let Z={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};if(this.slice.size)Z.slice=this.slice.toJSON();if(this.structure)Z.structure=!0;return Z}static fromJSON(Z,X){if(typeof X.from!="number"||typeof X.to!="number"||typeof X.gapFrom!="number"||typeof X.gapTo!="number"||typeof X.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(X.from,X.to,X.gapFrom,X.gapTo,S.fromJSON(Z,X.slice),X.insert,!!X.structure)}}V8.jsonID("replaceAround",t);function i1(Z,X,K){let z=Z.resolve(X),J=K-X,Q=z.depth;while(J>0&&Q>0&&z.indexAfter(Q)==z.node(Q).childCount)Q--,J--;if(J>0){let Y=z.node(Q).maybeChild(z.indexAfter(Q));while(J>0){if(!Y||Y.isLeaf)return!0;Y=Y.firstChild,J--}}return!1}function oY(Z,X,K,z){let J=[],Q=[],Y,q;Z.doc.nodesBetween(X,K,(G,U,V)=>{if(!G.isInline)return;let W=G.marks;if(!z.isInSet(W)&&V.type.allowsMarkType(z.type)){let A=Math.max(U,X),j=Math.min(U+G.nodeSize,K),H=z.addToSet(W);for(let R=0;R<W.length;R++)if(!W[R].isInSet(H))if(Y&&Y.to==A&&Y.mark.eq(W[R]))Y.to=j;else J.push(Y=new X5(A,j,W[R]));if(q&&q.to==A)q.to=j;else Q.push(q=new x5(A,j,z))}}),J.forEach((G)=>Z.step(G)),Q.forEach((G)=>Z.step(G))}function tY(Z,X,K,z){let J=[],Q=0;Z.doc.nodesBetween(X,K,(Y,q)=>{if(!Y.isInline)return;Q++;let G=null;if(z instanceof P3){let U=Y.marks,V;while(V=z.isInSet(U))(G||(G=[])).push(V),U=V.removeFromSet(U)}else if(z){if(z.isInSet(Y.marks))G=[z]}else G=Y.marks;if(G&&G.length){let U=Math.min(q+Y.nodeSize,K);for(let V=0;V<G.length;V++){let W=G[V],A;for(let j=0;j<J.length;j++){let H=J[j];if(H.step==Q-1&&W.eq(J[j].style))A=H}if(A)A.to=U,A.step=Q;else J.push({style:W,from:Math.max(q,X),to:U,step:Q})}}}),J.forEach((Y)=>Z.step(new X5(Y.from,Y.to,Y.style)))}function s1(Z,X,K,z=K.contentMatch,J=!0){let Q=Z.doc.nodeAt(X),Y=[],q=X+1;for(let G=0;G<Q.childCount;G++){let U=Q.child(G),V=q+U.nodeSize,W=z.matchType(U.type);if(!W)Y.push(new Y8(q,V,S.empty));else{z=W;for(let A=0;A<U.marks.length;A++)if(!K.allowsMarkType(U.marks[A].type))Z.step(new X5(q,V,U.marks[A]));if(J&&U.isText&&K.whitespace!="pre"){let A,j=/\r?\n|\r/g,H;while(A=j.exec(U.text)){if(!H)H=new S(M.from(K.schema.text(" ",K.allowedMarks(U.marks))),0,0);Y.push(new Y8(q+A.index,q+A.index+A[0].length,H))}}}q=V}if(!z.validEnd){let G=z.fillBefore(M.empty,!0);Z.replace(q,q,new S(G,0,0))}for(let G=Y.length-1;G>=0;G--)Z.step(Y[G])}function eY(Z,X,K){return(X==0||Z.canReplace(X,Z.childCount))&&(K==Z.childCount||Z.canReplace(0,K))}function u0(Z){let K=Z.parent.content.cutByIndex(Z.startIndex,Z.endIndex);for(let z=Z.depth;;--z){let J=Z.$from.node(z),Q=Z.$from.index(z),Y=Z.$to.indexAfter(z);if(z<Z.depth&&J.canReplace(Q,Y,K))return z;if(z==0||J.type.spec.isolating||!eY(J,Q,Y))break}return null}function Z2(Z,X,K){let{$from:z,$to:J,depth:Q}=X,Y=z.before(Q+1),q=J.after(Q+1),G=Y,U=q,V=M.empty,W=0;for(let H=Q,R=!1;H>K;H--)if(R||z.index(H)>0)R=!0,V=M.from(z.node(H).copy(V)),W++;else G--;let A=M.empty,j=0;for(let H=Q,R=!1;H>K;H--)if(R||J.after(H+1)<J.end(H))R=!0,A=M.from(J.node(H).copy(A)),j++;else U++;Z.step(new t(G,U,Y,q,new S(V.append(A),W,j),V.size-W,!0))}function AZ(Z,X,K=null,z=Z){let J=X2(Z,X),Q=J&&K2(z,X);if(!Q)return null;return J.map(YZ).concat({type:X,attrs:K}).concat(Q.map(YZ))}function YZ(Z){return{type:Z,attrs:null}}function X2(Z,X){let{parent:K,startIndex:z,endIndex:J}=Z,Q=K.contentMatchAt(z).findWrapping(X);if(!Q)return null;let Y=Q.length?Q[0]:X;return K.canReplaceWith(z,J,Y)?Q:null}function K2(Z,X){let{parent:K,startIndex:z,endIndex:J}=Z,Q=K.child(z),Y=X.contentMatch.findWrapping(Q.type);if(!Y)return null;let G=(Y.length?Y[Y.length-1]:X).contentMatch;for(let U=z;G&&U<J;U++)G=G.matchType(K.child(U).type);if(!G||!G.validEnd)return null;return Y}function z2(Z,X,K){let z=M.empty;for(let Y=K.length-1;Y>=0;Y--){if(z.size){let q=K[Y].type.contentMatch.matchFragment(z);if(!q||!q.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}z=M.from(K[Y].type.create(K[Y].attrs,z))}let{start:J,end:Q}=X;Z.step(new t(J,Q,J,Q,new S(z,0,0),K.length,!0))}function J2(Z,X,K,z,J){if(!z.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let Q=Z.steps.length;Z.doc.nodesBetween(X,K,(Y,q)=>{let G=typeof J=="function"?J(Y):J;if(Y.isTextblock&&!Y.hasMarkup(z,G)&&Q2(Z.doc,Z.mapping.slice(Q).map(q),z)){let U=null;if(z.schema.linebreakReplacement){let j=z.whitespace=="pre",H=!!z.contentMatch.matchType(z.schema.linebreakReplacement);if(j&&!H)U=!1;else if(!j&&H)U=!0}if(U===!1)jZ(Z,Y,q,Q);s1(Z,Z.mapping.slice(Q).map(q,1),z,void 0,U===null);let V=Z.mapping.slice(Q),W=V.map(q,1),A=V.map(q+Y.nodeSize,1);if(Z.step(new t(W,A,W+1,A-1,new S(M.from(z.create(G,null,Y.marks)),0,0),1,!0)),U===!0)HZ(Z,Y,q,Q);return!1}})}function HZ(Z,X,K,z){X.forEach((J,Q)=>{if(J.isText){let Y,q=/\r?\n|\r/g;while(Y=q.exec(J.text)){let G=Z.mapping.slice(z).map(K+1+Q+Y.index);Z.replaceWith(G,G+1,X.type.schema.linebreakReplacement.create())}}})}function jZ(Z,X,K,z){X.forEach((J,Q)=>{if(J.type==J.type.schema.linebreakReplacement){let Y=Z.mapping.slice(z).map(K+1+Q);Z.replaceWith(Y,Y+1,X.type.schema.text(`
`))}})}function Q2(Z,X,K){let z=Z.resolve(X),J=z.index();return z.parent.canReplaceWith(J,J+1,K)}function Y2(Z,X,K,z,J){let Q=Z.doc.nodeAt(X);if(!Q)throw new RangeError("No node at given position");if(!K)K=Q.type;let Y=K.create(z,null,J||Q.marks);if(Q.isLeaf)return Z.replaceWith(X,X+Q.nodeSize,Y);if(!K.validContent(Q.content))throw new RangeError("Invalid content for node type "+K.name);Z.step(new t(X,X+Q.nodeSize,X+1,X+Q.nodeSize-1,new S(M.from(Y),0,0),1,!0))}function u5(Z,X,K=1,z){let J=Z.resolve(X),Q=J.depth-K,Y=z&&z[z.length-1]||J.parent;if(Q<0||J.parent.type.spec.isolating||!J.parent.canReplace(J.index(),J.parent.childCount)||!Y.type.validContent(J.parent.content.cutByIndex(J.index(),J.parent.childCount)))return!1;for(let U=J.depth-1,V=K-2;U>Q;U--,V--){let W=J.node(U),A=J.index(U);if(W.type.spec.isolating)return!1;let j=W.content.cutByIndex(A,W.childCount),H=z&&z[V+1];if(H)j=j.replaceChild(0,H.type.create(H.attrs));let R=z&&z[V]||W;if(!W.canReplace(A+1,W.childCount)||!R.type.validContent(j))return!1}let q=J.indexAfter(Q),G=z&&z[0];return J.node(Q).canReplaceWith(q,q,G?G.type:J.node(Q+1).type)}function q2(Z,X,K=1,z){let J=Z.doc.resolve(X),Q=M.empty,Y=M.empty;for(let q=J.depth,G=J.depth-K,U=K-1;q>G;q--,U--){Q=M.from(J.node(q).copy(Q));let V=z&&z[U];Y=M.from(V?V.type.create(V.attrs,Y):J.node(q).copy(Y))}Z.step(new Y8(X,X,new S(Q.append(Y),K,K),!0))}function n1(Z,X){let K=Z.resolve(X),z=K.index();return U2(K.nodeBefore,K.nodeAfter)&&K.parent.canReplace(z,z+1)}function G2(Z,X){if(!X.content.size)Z.type.compatibleContent(X.type);let K=Z.contentMatchAt(Z.childCount),{linebreakReplacement:z}=Z.type.schema;for(let J=0;J<X.childCount;J++){let Q=X.child(J),Y=Q.type==z?Z.type.schema.nodes.text:Q.type;if(K=K.matchType(Y),!K)return!1;if(!Z.type.allowsMarks(Q.marks))return!1}return K.validEnd}function U2(Z,X){return!!(Z&&X&&!Z.isLeaf&&G2(Z,X))}function V2(Z,X,K){let z=null,{linebreakReplacement:J}=Z.doc.type.schema,Q=Z.doc.resolve(X-K),Y=Q.node().type;if(J&&Y.inlineContent){let V=Y.whitespace=="pre",W=!!Y.contentMatch.matchType(J);if(V&&!W)z=!1;else if(!V&&W)z=!0}let q=Z.steps.length;if(z===!1){let V=Z.doc.resolve(X+K);jZ(Z,V.node(),V.before(),q)}if(Y.inlineContent)s1(Z,X+K-1,Y,Q.node().contentMatchAt(Q.index()),z==null);let G=Z.mapping.slice(q),U=G.map(X-K);if(Z.step(new Y8(U,G.map(X+K,-1),S.empty,!0)),z===!0){let V=Z.doc.resolve(U);HZ(Z,V.node(),V.before(),Z.steps.length)}return Z}function W2(Z,X,K){let z=Z.resolve(X);if(z.parent.canReplaceWith(z.index(),z.index(),K))return X;if(z.parentOffset==0)for(let J=z.depth-1;J>=0;J--){let Q=z.index(J);if(z.node(J).canReplaceWith(Q,Q,K))return z.before(J+1);if(Q>0)return null}if(z.parentOffset==z.parent.content.size)for(let J=z.depth-1;J>=0;J--){let Q=z.indexAfter(J);if(z.node(J).canReplaceWith(Q,Q,K))return z.after(J+1);if(Q<z.node(J).childCount)return null}return null}function RZ(Z,X,K){let z=Z.resolve(X);if(!K.content.size)return X;let J=K.content;for(let Q=0;Q<K.openStart;Q++)J=J.firstChild.content;for(let Q=1;Q<=(K.openStart==0&&K.size?2:1);Q++)for(let Y=z.depth;Y>=0;Y--){let q=Y==z.depth?0:z.pos<=(z.start(Y+1)+z.end(Y+1))/2?-1:1,G=z.index(Y)+(q>0?1:0),U=z.node(Y),V=!1;if(Q==1)V=U.canReplace(G,G,J);else{let W=U.contentMatchAt(G).findWrapping(J.firstChild.type);V=W&&U.canReplaceWith(G,G,W[0])}if(V)return q==0?z.pos:q<0?z.before(Y+1):z.after(Y+1)}return null}function Y7(Z,X,K=X,z=S.empty){if(X==K&&!z.size)return null;let J=Z.resolve(X),Q=Z.resolve(K);if(FZ(J,Q,z))return new Y8(X,K,z);return new BZ(J,Q,z).fit()}function FZ(Z,X,K){return!K.openStart&&!K.openEnd&&Z.start()==X.start()&&Z.parent.canReplace(Z.index(),X.index(),K.content)}class BZ{constructor(Z,X,K){this.$from=Z,this.$to=X,this.unplaced=K,this.frontier=[],this.placed=M.empty;for(let z=0;z<=Z.depth;z++){let J=Z.node(z);this.frontier.push({type:J.type,match:J.contentMatchAt(Z.indexAfter(z))})}for(let z=Z.depth;z>0;z--)this.placed=M.from(Z.node(z).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){while(this.unplaced.size){let G=this.findFittable();if(G)this.placeNodes(G);else this.openMore()||this.dropNode()}let Z=this.mustMoveInline(),X=this.placed.size-this.depth-this.$from.depth,K=this.$from,z=this.close(Z<0?this.$to:K.doc.resolve(Z));if(!z)return null;let J=this.placed,Q=K.depth,Y=z.depth;while(Q&&Y&&J.childCount==1)J=J.firstChild.content,Q--,Y--;let q=new S(J,Q,Y);if(Z>-1)return new t(K.pos,Z,this.$to.pos,this.$to.end(),q,X);if(q.size||K.pos!=this.$to.pos)return new Y8(K.pos,z.pos,q);return null}findFittable(){let Z=this.unplaced.openStart;for(let X=this.unplaced.content,K=0,z=this.unplaced.openEnd;K<Z;K++){let J=X.firstChild;if(X.childCount>1)z=0;if(J.type.spec.isolating&&z<=K){Z=K;break}X=J.content}for(let X=1;X<=2;X++)for(let K=X==1?Z:this.unplaced.openStart;K>=0;K--){let z,J=null;if(K)J=c1(this.unplaced.content,K-1).firstChild,z=J.content;else z=this.unplaced.content;let Q=z.firstChild;for(let Y=this.depth;Y>=0;Y--){let{type:q,match:G}=this.frontier[Y],U,V=null;if(X==1&&(Q?G.matchType(Q.type)||(V=G.fillBefore(M.from(Q),!1)):J&&q.compatibleContent(J.type)))return{sliceDepth:K,frontierDepth:Y,parent:J,inject:V};else if(X==2&&Q&&(U=G.findWrapping(Q.type)))return{sliceDepth:K,frontierDepth:Y,parent:J,wrap:U};if(J&&G.matchType(J.type))break}}}openMore(){let{content:Z,openStart:X,openEnd:K}=this.unplaced,z=c1(Z,X);if(!z.childCount||z.firstChild.isLeaf)return!1;return this.unplaced=new S(Z,X+1,Math.max(K,z.size+X>=Z.size-K?X+1:0)),!0}dropNode(){let{content:Z,openStart:X,openEnd:K}=this.unplaced,z=c1(Z,X);if(z.childCount<=1&&X>0){let J=Z.size-X<=X+z.size;this.unplaced=new S(O3(Z,X-1,1),X-1,J?X-1:K)}else this.unplaced=new S(O3(Z,X,1),X,K)}placeNodes({sliceDepth:Z,frontierDepth:X,parent:K,inject:z,wrap:J}){while(this.depth>X)this.closeFrontierNode();if(J)for(let H=0;H<J.length;H++)this.openFrontierNode(J[H]);let Q=this.unplaced,Y=K?K.content:Q.content,q=Q.openStart-Z,G=0,U=[],{match:V,type:W}=this.frontier[X];if(z){for(let H=0;H<z.childCount;H++)U.push(z.child(H));V=V.matchFragment(z)}let A=Y.size+Z-(Q.content.size-Q.openEnd);while(G<Y.childCount){let H=Y.child(G),R=V.matchType(H.type);if(!R)break;if(G++,G>1||q==0||H.content.size)V=R,U.push(EZ(H.mark(W.allowedMarks(H.marks)),G==1?q:0,G==Y.childCount?A:-1))}let j=G==Y.childCount;if(!j)A=-1;if(this.placed=L3(this.placed,X,M.from(U)),this.frontier[X].match=V,j&&A<0&&K&&K.type==this.frontier[this.depth].type&&this.frontier.length>1)this.closeFrontierNode();for(let H=0,R=Y;H<A;H++){let F=R.lastChild;this.frontier.push({type:F.type,match:F.contentMatchAt(F.childCount)}),R=F.content}this.unplaced=!j?new S(O3(Q.content,Z,G),Q.openStart,Q.openEnd):Z==0?S.empty:new S(O3(Q.content,Z-1,1),Z-1,A<0?Q.openEnd:Z-1)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let Z=this.frontier[this.depth],X;if(!Z.type.isTextblock||!p1(this.$to,this.$to.depth,Z.type,Z.match,!1)||this.$to.depth==this.depth&&(X=this.findCloseLevel(this.$to))&&X.depth==this.depth)return-1;let{depth:K}=this.$to,z=this.$to.after(K);while(K>1&&z==this.$to.end(--K))++z;return z}findCloseLevel(Z){Z:for(let X=Math.min(this.depth,Z.depth);X>=0;X--){let{match:K,type:z}=this.frontier[X],J=X<Z.depth&&Z.end(X+1)==Z.pos+(Z.depth-(X+1)),Q=p1(Z,X,z,K,J);if(!Q)continue;for(let Y=X-1;Y>=0;Y--){let{match:q,type:G}=this.frontier[Y],U=p1(Z,Y,G,q,!0);if(!U||U.childCount)continue Z}return{depth:X,fit:Q,move:J?Z.doc.resolve(Z.after(X+1)):Z}}}close(Z){let X=this.findCloseLevel(Z);if(!X)return null;while(this.depth>X.depth)this.closeFrontierNode();if(X.fit.childCount)this.placed=L3(this.placed,X.depth,X.fit);Z=X.move;for(let K=X.depth+1;K<=Z.depth;K++){let z=Z.node(K),J=z.type.contentMatch.fillBefore(z.content,!0,Z.index(K));this.openFrontierNode(z.type,z.attrs,J)}return Z}openFrontierNode(Z,X=null,K){let z=this.frontier[this.depth];z.match=z.match.matchType(Z),this.placed=L3(this.placed,this.depth,M.from(Z.create(X,K))),this.frontier.push({type:Z,match:Z.contentMatch})}closeFrontierNode(){let X=this.frontier.pop().match.fillBefore(M.empty,!0);if(X.childCount)this.placed=L3(this.placed,this.frontier.length,X)}}function O3(Z,X,K){if(X==0)return Z.cutByIndex(K,Z.childCount);return Z.replaceChild(0,Z.firstChild.copy(O3(Z.firstChild.content,X-1,K)))}function L3(Z,X,K){if(X==0)return Z.append(K);return Z.replaceChild(Z.childCount-1,Z.lastChild.copy(L3(Z.lastChild.content,X-1,K)))}function c1(Z,X){for(let K=0;K<X;K++)Z=Z.firstChild.content;return Z}function EZ(Z,X,K){if(X<=0)return Z;let z=Z.content;if(X>1)z=z.replaceChild(0,EZ(z.firstChild,X-1,z.childCount==1?K-1:0));if(X>0){if(z=Z.type.contentMatch.fillBefore(z).append(z),K<=0)z=z.append(Z.type.contentMatch.matchFragment(z).fillBefore(M.empty,!0))}return Z.copy(z)}function p1(Z,X,K,z,J){let Q=Z.node(X),Y=J?Z.indexAfter(X):Z.index(X);if(Y==Q.childCount&&!K.compatibleContent(Q.type))return null;let q=z.fillBefore(Q.content,!0,Y);return q&&!A2(K,Q.content,Y)?q:null}function A2(Z,X,K){for(let z=K;z<X.childCount;z++)if(!Z.allowsMarks(X.child(z).marks))return!0;return!1}function H2(Z){return Z.spec.defining||Z.spec.definingForContent}function j2(Z,X,K,z){if(!z.size)return Z.deleteRange(X,K);let J=Z.doc.resolve(X),Q=Z.doc.resolve(K);if(FZ(J,Q,z))return Z.step(new Y8(X,K,z));let Y=OZ(J,Z.doc.resolve(K));if(Y[Y.length-1]==0)Y.pop();let q=-(J.depth+1);Y.unshift(q);for(let A=J.depth,j=J.pos-1;A>0;A--,j--){let H=J.node(A).type.spec;if(H.defining||H.definingAsContext||H.isolating)break;if(Y.indexOf(A)>-1)q=A;else if(J.before(A)==j)Y.splice(1,0,-A)}let G=Y.indexOf(q),U=[],V=z.openStart;for(let A=z.content,j=0;;j++){let H=A.firstChild;if(U.push(H),j==z.openStart)break;A=H.content}for(let A=V-1;A>=0;A--){let j=U[A],H=H2(j.type);if(H&&!j.sameMarkup(J.node(Math.abs(q)-1)))V=A;else if(H||!j.type.isTextblock)break}for(let A=z.openStart;A>=0;A--){let j=(A+V+1)%(z.openStart+1),H=U[j];if(!H)continue;for(let R=0;R<Y.length;R++){let F=Y[(R+G)%Y.length],B=!0;if(F<0)B=!1,F=-F;let O=J.node(F-1),L=J.index(F-1);if(O.canReplaceWith(L,L,H.type,H.marks))return Z.replace(J.before(F),B?Q.after(F):K,new S(PZ(z.content,0,z.openStart,j),j,z.openEnd))}}let W=Z.steps.length;for(let A=Y.length-1;A>=0;A--){if(Z.replace(X,K,z),Z.steps.length>W)break;let j=Y[A];if(j<0)continue;X=J.before(j),K=Q.after(j)}}function PZ(Z,X,K,z,J){if(X<K){let Q=Z.firstChild;Z=Z.replaceChild(0,Q.copy(PZ(Q.content,X+1,K,z,Q)))}if(X>z){let Q=J.contentMatchAt(0),Y=Q.fillBefore(Z).append(Z);Z=Y.append(Q.matchFragment(Y).fillBefore(M.empty,!0))}return Z}function R2(Z,X,K,z){if(!z.isInline&&X==K&&Z.doc.resolve(X).parent.content.size){let J=W2(Z.doc,X,z.type);if(J!=null)X=K=J}Z.replaceRange(X,K,new S(M.from(z),0,0))}function F2(Z,X,K){let z=Z.doc.resolve(X),J=Z.doc.resolve(K),Q=OZ(z,J);for(let Y=0;Y<Q.length;Y++){let q=Q[Y],G=Y==Q.length-1;if(G&&q==0||z.node(q).type.contentMatch.validEnd)return Z.delete(z.start(q),J.end(q));if(q>0&&(G||z.node(q-1).canReplace(z.index(q-1),J.indexAfter(q-1))))return Z.delete(z.before(q),J.after(q))}for(let Y=1;Y<=z.depth&&Y<=J.depth;Y++)if(X-z.start(Y)==z.depth-Y&&K>z.end(Y)&&J.end(Y)-K!=J.depth-Y&&z.start(Y-1)==J.start(Y-1)&&z.node(Y-1).canReplace(z.index(Y-1),J.index(Y-1)))return Z.delete(z.before(Y),K);Z.delete(X,K)}function OZ(Z,X){let K=[],z=Math.min(Z.depth,X.depth);for(let J=z;J>=0;J--){let Q=Z.start(J);if(Q<Z.pos-(Z.depth-J)||X.end(J)>X.pos+(X.depth-J)||Z.node(J).type.spec.isolating||X.node(J).type.spec.isolating)break;if(Q==X.start(J)||J==Z.depth&&J==X.depth&&Z.parent.inlineContent&&X.parent.inlineContent&&J&&X.start(J-1)==Q-1)K.push(J)}return K}class T0 extends V8{constructor(Z,X,K){super();this.pos=Z,this.attr=X,this.value=K}apply(Z){let X=Z.nodeAt(this.pos);if(!X)return Z8.fail("No node at attribute step's position");let K=Object.create(null);for(let J in X.attrs)K[J]=X.attrs[J];K[this.attr]=this.value;let z=X.type.create(K,null,X.marks);return Z8.fromReplace(Z,this.pos,this.pos+1,new S(M.from(z),0,X.isLeaf?0:1))}getMap(){return k8.empty}invert(Z){return new T0(this.pos,this.attr,Z.nodeAt(this.pos).attrs[this.attr])}map(Z){let X=Z.mapResult(this.pos,1);return X.deletedAfter?null:new T0(X.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(Z,X){if(typeof X.pos!="number"||typeof X.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new T0(X.pos,X.attr,X.value)}}V8.jsonID("attr",T0);class M3 extends V8{constructor(Z,X){super();this.attr=Z,this.value=X}apply(Z){let X=Object.create(null);for(let z in Z.attrs)X[z]=Z.attrs[z];X[this.attr]=this.value;let K=Z.type.create(X,Z.content,Z.marks);return Z8.ok(K)}getMap(){return k8.empty}invert(Z){return new M3(this.attr,Z.attrs[this.attr])}map(Z){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(Z,X){if(typeof X.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new M3(X.attr,X.value)}}V8.jsonID("docAttr",M3);var g0=class extends Error{};g0=function Z(X){let K=Error.call(this,X);return K.__proto__=Z.prototype,K};g0.prototype=Object.create(Error.prototype);g0.prototype.constructor=g0;g0.prototype.name="TransformError";class a1{constructor(Z){this.doc=Z,this.steps=[],this.docs=[],this.mapping=new x0}get before(){return this.docs.length?this.docs[0]:this.doc}step(Z){let X=this.maybeStep(Z);if(X.failed)throw new g0(X.failed);return this}maybeStep(Z){let X=Z.apply(this.doc);if(!X.failed)this.addStep(Z,X.doc);return X}get docChanged(){return this.steps.length>0}addStep(Z,X){this.docs.push(this.doc),this.steps.push(Z),this.mapping.appendMap(Z.getMap()),this.doc=X}replace(Z,X=Z,K=S.empty){let z=Y7(this.doc,Z,X,K);if(z)this.step(z);return this}replaceWith(Z,X,K){return this.replace(Z,X,new S(M.from(K),0,0))}delete(Z,X){return this.replace(Z,X,S.empty)}insert(Z,X){return this.replaceWith(Z,Z,X)}replaceRange(Z,X,K){return j2(this,Z,X,K),this}replaceRangeWith(Z,X,K){return R2(this,Z,X,K),this}deleteRange(Z,X){return F2(this,Z,X),this}lift(Z,X){return Z2(this,Z,X),this}join(Z,X=1){return V2(this,Z,X),this}wrap(Z,X){return z2(this,Z,X),this}setBlockType(Z,X=Z,K,z=null){return J2(this,Z,X,K,z),this}setNodeMarkup(Z,X,K=null,z){return Y2(this,Z,X,K,z),this}setNodeAttribute(Z,X,K){return this.step(new T0(Z,X,K)),this}setDocAttribute(Z,X){return this.step(new M3(Z,X)),this}addNodeMark(Z,X){return this.step(new g5(Z,X)),this}removeNodeMark(Z,X){let K=this.doc.nodeAt(Z);if(!K)throw new RangeError("No node at position "+Z);if(X instanceof f){if(X.isInSet(K.marks))this.step(new Z0(Z,X))}else{let z=K.marks,J,Q=[];while(J=X.isInSet(z))Q.push(new Z0(Z,J)),z=J.removeFromSet(z);for(let Y=Q.length-1;Y>=0;Y--)this.step(Q[Y])}return this}split(Z,X=1,K){return q2(this,Z,X,K),this}addMark(Z,X,K){return oY(this,Z,X,K),this}removeMark(Z,X,K){return tY(this,Z,X,K),this}clearIncompatible(Z,X,K){return s1(this,Z,X,K),this}}var r1=Object.create(null);class ${constructor(Z,X,K){this.$anchor=Z,this.$head=X,this.ranges=K||[new X0(Z.min(X),Z.max(X))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let Z=this.ranges;for(let X=0;X<Z.length;X++)if(Z[X].$from.pos!=Z[X].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(Z,X=S.empty){let K=X.content.lastChild,z=null;for(let Y=0;Y<X.openEnd;Y++)z=K,K=K.lastChild;let J=Z.steps.length,Q=this.ranges;for(let Y=0;Y<Q.length;Y++){let{$from:q,$to:G}=Q[Y],U=Z.mapping.slice(J);if(Z.replaceRange(U.map(q.pos),U.map(G.pos),Y?S.empty:X),Y==0)DZ(Z,J,(K?K.isInline:z&&z.isTextblock)?-1:1)}}replaceWith(Z,X){let K=Z.steps.length,z=this.ranges;for(let J=0;J<z.length;J++){let{$from:Q,$to:Y}=z[J],q=Z.mapping.slice(K),G=q.map(Q.pos),U=q.map(Y.pos);if(J)Z.deleteRange(G,U);else Z.replaceRangeWith(G,U,X),DZ(Z,K,X.isInline?-1:1)}}static findFrom(Z,X,K=!1){let z=Z.parent.inlineContent?new _(Z):w0(Z.node(0),Z.parent,Z.pos,Z.index(),X,K);if(z)return z;for(let J=Z.depth-1;J>=0;J--){let Q=X<0?w0(Z.node(0),Z.node(J),Z.before(J+1),Z.index(J),X,K):w0(Z.node(0),Z.node(J),Z.after(J+1),Z.index(J)+1,X,K);if(Q)return Q}return null}static near(Z,X=1){return this.findFrom(Z,X)||this.findFrom(Z,-X)||new q8(Z.node(0))}static atStart(Z){return w0(Z,Z,0,0,1)||new q8(Z)}static atEnd(Z){return w0(Z,Z,Z.content.size,Z.childCount,-1)||new q8(Z)}static fromJSON(Z,X){if(!X||!X.type)throw new RangeError("Invalid input for Selection.fromJSON");let K=r1[X.type];if(!K)throw new RangeError(`No selection type ${X.type} defined`);return K.fromJSON(Z,X)}static jsonID(Z,X){if(Z in r1)throw new RangeError("Duplicate use of selection JSON ID "+Z);return r1[Z]=X,X.prototype.jsonID=Z,X}getBookmark(){return _.between(this.$anchor,this.$head).getBookmark()}}$.prototype.visible=!0;class X0{constructor(Z,X){this.$from=Z,this.$to=X}}var LZ=!1;function MZ(Z){if(!LZ&&!Z.parent.inlineContent)LZ=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+Z.parent.type.name+")")}class _ extends ${constructor(Z,X=Z){MZ(Z),MZ(X);super(Z,X)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(Z,X){let K=Z.resolve(X.map(this.head));if(!K.parent.inlineContent)return $.near(K);let z=Z.resolve(X.map(this.anchor));return new _(z.parent.inlineContent?z:K,K)}replace(Z,X=S.empty){if(super.replace(Z,X),X==S.empty){let K=this.$from.marksAcross(this.$to);if(K)Z.ensureMarks(K)}}eq(Z){return Z instanceof _&&Z.anchor==this.anchor&&Z.head==this.head}getBookmark(){return new U7(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(Z,X){if(typeof X.anchor!="number"||typeof X.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new _(Z.resolve(X.anchor),Z.resolve(X.head))}static create(Z,X,K=X){let z=Z.resolve(X);return new this(z,K==X?z:Z.resolve(K))}static between(Z,X,K){let z=Z.pos-X.pos;if(!K||z)K=z>=0?1:-1;if(!X.parent.inlineContent){let J=$.findFrom(X,K,!0)||$.findFrom(X,-K,!0);if(J)X=J.$head;else return $.near(X,K)}if(!Z.parent.inlineContent){if(z==0)Z=X;else if(Z=($.findFrom(Z,-K,!0)||$.findFrom(Z,K,!0)).$anchor,Z.pos<X.pos!=z<0)Z=X}return new _(Z,X)}}$.jsonID("text",_);class U7{constructor(Z,X){this.anchor=Z,this.head=X}map(Z){return new U7(Z.map(this.anchor),Z.map(this.head))}resolve(Z){return _.between(Z.resolve(this.anchor),Z.resolve(this.head))}}class u extends ${constructor(Z){let X=Z.nodeAfter,K=Z.node(0).resolve(Z.pos+X.nodeSize);super(Z,K);this.node=X}map(Z,X){let{deleted:K,pos:z}=X.mapResult(this.anchor),J=Z.resolve(z);if(K)return $.near(J);return new u(J)}content(){return new S(M.from(this.node),0,0)}eq(Z){return Z instanceof u&&Z.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new t1(this.anchor)}static fromJSON(Z,X){if(typeof X.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new u(Z.resolve(X.anchor))}static create(Z,X){return new u(Z.resolve(X))}static isSelectable(Z){return!Z.isText&&Z.type.spec.selectable!==!1}}u.prototype.visible=!1;$.jsonID("node",u);class t1{constructor(Z){this.anchor=Z}map(Z){let{deleted:X,pos:K}=Z.mapResult(this.anchor);return X?new U7(K,K):new t1(K)}resolve(Z){let X=Z.resolve(this.anchor),K=X.nodeAfter;if(K&&u.isSelectable(K))return new u(X);return $.near(X)}}class q8 extends ${constructor(Z){super(Z.resolve(0),Z.resolve(Z.content.size))}replace(Z,X=S.empty){if(X==S.empty){Z.delete(0,Z.doc.content.size);let K=$.atStart(Z.doc);if(!K.eq(Z.selection))Z.setSelection(K)}else super.replace(Z,X)}toJSON(){return{type:"all"}}static fromJSON(Z){return new q8(Z)}map(Z){return new q8(Z)}eq(Z){return Z instanceof q8}getBookmark(){return B2}}$.jsonID("all",q8);var B2={map(){return this},resolve(Z){return new q8(Z)}};function w0(Z,X,K,z,J,Q=!1){if(X.inlineContent)return _.create(Z,K);for(let Y=z-(J>0?0:1);J>0?Y<X.childCount:Y>=0;Y+=J){let q=X.child(Y);if(!q.isAtom){let G=w0(Z,q,K+J,J<0?q.childCount:0,J,Q);if(G)return G}else if(!Q&&u.isSelectable(q))return u.create(Z,K-(J<0?q.nodeSize:0));K+=q.nodeSize*J}return null}function DZ(Z,X,K){let z=Z.steps.length-1;if(z<X)return;let J=Z.steps[z];if(!(J instanceof Y8||J instanceof t))return;let Q=Z.mapping.maps[z],Y;Q.forEach((q,G,U,V)=>{if(Y==null)Y=V}),Z.setSelection($.near(Z.doc.resolve(Y),K))}var IZ=1,q7=2,CZ=4;class kZ extends a1{constructor(Z){super(Z.doc);this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=Z.selection,this.storedMarks=Z.storedMarks}get selection(){if(this.curSelectionFor<this.steps.length)this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length;return this.curSelection}setSelection(Z){if(Z.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=Z,this.curSelectionFor=this.steps.length,this.updated=(this.updated|IZ)&~q7,this.storedMarks=null,this}get selectionSet(){return(this.updated&IZ)>0}setStoredMarks(Z){return this.storedMarks=Z,this.updated|=q7,this}ensureMarks(Z){if(!f.sameSet(this.storedMarks||this.selection.$from.marks(),Z))this.setStoredMarks(Z);return this}addStoredMark(Z){return this.ensureMarks(Z.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(Z){return this.ensureMarks(Z.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&q7)>0}addStep(Z,X){super.addStep(Z,X),this.updated=this.updated&~q7,this.storedMarks=null}setTime(Z){return this.time=Z,this}replaceSelection(Z){return this.selection.replace(this,Z),this}replaceSelectionWith(Z,X=!0){let K=this.selection;if(X)Z=Z.mark(this.storedMarks||(K.empty?K.$from.marks():K.$from.marksAcross(K.$to)||f.none));return K.replaceWith(this,Z),this}deleteSelection(){return this.selection.replace(this),this}insertText(Z,X,K){let z=this.doc.type.schema;if(X==null){if(!Z)return this.deleteSelection();return this.replaceSelectionWith(z.text(Z),!0)}else{if(K==null)K=X;if(K=K==null?X:K,!Z)return this.deleteRange(X,K);let J=this.storedMarks;if(!J){let Q=this.doc.resolve(X);J=K==X?Q.marks():Q.marksAcross(this.doc.resolve(K))}if(this.replaceRangeWith(X,K,z.text(Z,J)),!this.selection.empty)this.setSelection($.near(this.selection.$to));return this}}setMeta(Z,X){return this.meta[typeof Z=="string"?Z:Z.key]=X,this}getMeta(Z){return this.meta[typeof Z=="string"?Z:Z.key]}get isGeneric(){for(let Z in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=CZ,this}get scrolledIntoView(){return(this.updated&CZ)>0}}function SZ(Z,X){return!X||!Z?Z:Z.bind(X)}class v0{constructor(Z,X,K){this.name=Z,this.init=SZ(X.init,K),this.apply=SZ(X.apply,K)}}var E2=[new v0("doc",{init(Z){return Z.doc||Z.schema.topNodeType.createAndFill()},apply(Z){return Z.doc}}),new v0("selection",{init(Z,X){return Z.selection||$.atStart(X.doc)},apply(Z){return Z.selection}}),new v0("storedMarks",{init(Z){return Z.storedMarks||null},apply(Z,X,K,z){return z.selection.$cursor?Z.storedMarks:null}}),new v0("scrollToSelection",{init(){return 0},apply(Z,X){return Z.scrolledIntoView?X+1:X}})];class G7{constructor(Z,X){if(this.schema=Z,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=E2.slice(),X)X.forEach((K)=>{if(this.pluginsByKey[K.key])throw new RangeError("Adding different instances of a keyed plugin ("+K.key+")");if(this.plugins.push(K),this.pluginsByKey[K.key]=K,K.spec.state)this.fields.push(new v0(K.key,K.spec.state,K))})}}class w5{constructor(Z){this.config=Z}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(Z){return this.applyTransaction(Z).state}filterTransaction(Z,X=-1){for(let K=0;K<this.config.plugins.length;K++)if(K!=X){let z=this.config.plugins[K];if(z.spec.filterTransaction&&!z.spec.filterTransaction.call(z,Z,this))return!1}return!0}applyTransaction(Z){if(!this.filterTransaction(Z))return{state:this,transactions:[]};let X=[Z],K=this.applyInner(Z),z=null;for(;;){let J=!1;for(let Q=0;Q<this.config.plugins.length;Q++){let Y=this.config.plugins[Q];if(Y.spec.appendTransaction){let q=z?z[Q].n:0,G=z?z[Q].state:this,U=q<X.length&&Y.spec.appendTransaction.call(Y,q?X.slice(q):X,G,K);if(U&&K.filterTransaction(U,Q)){if(U.setMeta("appendedTransaction",Z),!z){z=[];for(let V=0;V<this.config.plugins.length;V++)z.push(V<Q?{state:K,n:X.length}:{state:this,n:0})}X.push(U),K=K.applyInner(U),J=!0}if(z)z[Q]={state:K,n:X.length}}}if(!J)return{state:K,transactions:X}}}applyInner(Z){if(!Z.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let X=new w5(this.config),K=this.config.fields;for(let z=0;z<K.length;z++){let J=K[z];X[J.name]=J.apply(Z,this[J.name],this,X)}return X}get tr(){return new kZ(this)}static create(Z){let X=new G7(Z.doc?Z.doc.type.schema:Z.schema,Z.plugins),K=new w5(X);for(let z=0;z<X.fields.length;z++)K[X.fields[z].name]=X.fields[z].init(Z,K);return K}reconfigure(Z){let X=new G7(this.schema,Z.plugins),K=X.fields,z=new w5(X);for(let J=0;J<K.length;J++){let Q=K[J].name;z[Q]=this.hasOwnProperty(Q)?this[Q]:K[J].init(Z,z)}return z}toJSON(Z){let X={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks)X.storedMarks=this.storedMarks.map((K)=>K.toJSON());if(Z&&typeof Z=="object")for(let K in Z){if(K=="doc"||K=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let z=Z[K],J=z.spec.state;if(J&&J.toJSON)X[K]=J.toJSON.call(z,this[z.key])}return X}static fromJSON(Z,X,K){if(!X)throw new RangeError("Invalid input for EditorState.fromJSON");if(!Z.schema)throw new RangeError("Required config field 'schema' missing");let z=new G7(Z.schema,Z.plugins),J=new w5(z);return z.fields.forEach((Q)=>{if(Q.name=="doc")J.doc=v8.fromJSON(Z.schema,X.doc);else if(Q.name=="selection")J.selection=$.fromJSON(J.doc,X.selection);else if(Q.name=="storedMarks"){if(X.storedMarks)J.storedMarks=X.storedMarks.map(Z.schema.markFromJSON)}else{if(K)for(let Y in K){let q=K[Y],G=q.spec.state;if(q.key==Q.name&&G&&G.fromJSON&&Object.prototype.hasOwnProperty.call(X,Y)){J[Q.name]=G.fromJSON.call(q,Z,X[Y],J);return}}J[Q.name]=Q.init(Z,J)}}),J}}function bZ(Z,X,K){for(let z in Z){let J=Z[z];if(J instanceof Function)J=J.bind(X);else if(z=="handleDOMEvents")J=bZ(J,X,{});K[z]=J}return K}class K8{constructor(Z){if(this.spec=Z,this.props={},Z.props)bZ(Z.props,this,this.props);this.key=Z.key?Z.key.key:yZ("plugin")}getState(Z){return Z[this.key]}}var o1=Object.create(null);function yZ(Z){if(Z in o1)return Z+"$"+ ++o1[Z];return o1[Z]=0,Z+"$"}class v5{constructor(Z="key"){this.key=yZ(Z)}get(Z){return Z.config.pluginsByKey[this.key]}getState(Z){return Z[this.key]}}var W8=function(Z){for(var X=0;;X++)if(Z=Z.previousSibling,!Z)return X},m0=function(Z){let X=Z.assignedSlot||Z.parentNode;return X&&X.nodeType==11?X.host:X},J9=null,F5=function(Z,X,K){let z=J9||(J9=document.createRange());return z.setEnd(Z,K==null?Z.nodeValue.length:K),z.setStart(Z,X||0),z},P2=function(){J9=null},q0=function(Z,X,K,z){return K&&(NZ(Z,X,K,z,-1)||NZ(Z,X,K,z,1))},O2=/^(img|br|input|textarea|hr)$/i;function NZ(Z,X,K,z,J){for(;;){if(Z==K&&X==z)return!0;if(X==(J<0?0:m8(Z))){let Q=Z.parentNode;if(!Q||Q.nodeType!=1||y3(Z)||O2.test(Z.nodeName)||Z.contentEditable=="false")return!1;X=W8(Z)+(J<0?0:1),Z=Q}else if(Z.nodeType==1){if(Z=Z.childNodes[X+(J<0?-1:0)],Z.contentEditable=="false")return!1;X=J<0?m8(Z):0}else return!1}}function m8(Z){return Z.nodeType==3?Z.nodeValue.length:Z.childNodes.length}function L2(Z,X){for(;;){if(Z.nodeType==3&&X)return Z;if(Z.nodeType==1&&X>0){if(Z.contentEditable=="false")return null;Z=Z.childNodes[X-1],X=m8(Z)}else if(Z.parentNode&&!y3(Z))X=W8(Z),Z=Z.parentNode;else return null}}function M2(Z,X){for(;;){if(Z.nodeType==3&&X<Z.nodeValue.length)return Z;if(Z.nodeType==1&&X<Z.childNodes.length){if(Z.contentEditable=="false")return null;Z=Z.childNodes[X],X=0}else if(Z.parentNode&&!y3(Z))X=W8(Z)+1,Z=Z.parentNode;else return null}}function D2(Z,X,K){for(let z=X==0,J=X==m8(Z);z||J;){if(Z==K)return!0;let Q=W8(Z);if(Z=Z.parentNode,!Z)return!1;z=z&&Q==0,J=J&&Q==m8(Z)}}function y3(Z){let X;for(let K=Z;K;K=K.parentNode)if(X=K.pmViewDesc)break;return X&&X.node&&X.node.isBlock&&(X.dom==Z||X.contentDOM==Z)}var R7=function(Z){return Z.focusNode&&q0(Z.focusNode,Z.focusOffset,Z.anchorNode,Z.anchorOffset)};function K0(Z,X){let K=document.createEvent("Event");return K.initEvent("keydown",!0,!0),K.keyCode=Z,K.key=K.code=X,K}function I2(Z){let X=Z.activeElement;while(X&&X.shadowRoot)X=X.shadowRoot.activeElement;return X}function C2(Z,X,K){if(Z.caretPositionFromPoint)try{let z=Z.caretPositionFromPoint(X,K);if(z)return{node:z.offsetNode,offset:Math.min(m8(z.offsetNode),z.offset)}}catch(z){}if(Z.caretRangeFromPoint){let z=Z.caretRangeFromPoint(X,K);if(z)return{node:z.startContainer,offset:Math.min(m8(z.startContainer),z.startOffset)}}}var K5=typeof navigator!="undefined"?navigator:null,TZ=typeof document!="undefined"?document:null,p5=K5&&K5.userAgent||"",Q9=/Edge\/(\d+)/.exec(p5),UX=/MSIE \d/.exec(p5),Y9=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(p5),u8=!!(UX||Y9||Q9),m5=UX?document.documentMode:Y9?+Y9[1]:Q9?+Q9[1]:0,i8=!u8&&/gecko\/(\d+)/i.test(p5);i8&&+(/Firefox\/(\d+)/.exec(p5)||[0,0])[1];var q9=!u8&&/Chrome\/(\d+)/.exec(p5),I8=!!q9,VX=q9?+q9[1]:0,y8=!u8&&!!K5&&/Apple Computer/.test(K5.vendor),l0=y8&&(/Mobile\/\w+/.test(p5)||!!K5&&K5.maxTouchPoints>2),_8=l0||(K5?/Mac/.test(K5.platform):!1),S2=K5?/Win/.test(K5.platform):!1,B5=/Android \d/.test(p5),N3=!!TZ&&"webkitFontSmoothing"in TZ.documentElement.style,k2=N3?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function b2(Z){let X=Z.defaultView&&Z.defaultView.visualViewport;if(X)return{left:0,right:X.width,top:0,bottom:X.height};return{left:0,right:Z.documentElement.clientWidth,top:0,bottom:Z.documentElement.clientHeight}}function R5(Z,X){return typeof Z=="number"?Z:Z[X]}function y2(Z){let X=Z.getBoundingClientRect(),K=X.width/Z.offsetWidth||1,z=X.height/Z.offsetHeight||1;return{left:X.left,right:X.left+Z.clientWidth*K,top:X.top,bottom:X.top+Z.clientHeight*z}}function xZ(Z,X,K){let z=Z.someProp("scrollThreshold")||0,J=Z.someProp("scrollMargin")||5,Q=Z.dom.ownerDocument;for(let Y=K||Z.dom;;){if(!Y)break;if(Y.nodeType!=1){Y=m0(Y);continue}let q=Y,G=q==Q.body,U=G?b2(Q):y2(q),V=0,W=0;if(X.top<U.top+R5(z,"top"))W=-(U.top-X.top+R5(J,"top"));else if(X.bottom>U.bottom-R5(z,"bottom"))W=X.bottom-X.top>U.bottom-U.top?X.top+R5(J,"top")-U.top:X.bottom-U.bottom+R5(J,"bottom");if(X.left<U.left+R5(z,"left"))V=-(U.left-X.left+R5(J,"left"));else if(X.right>U.right-R5(z,"right"))V=X.right-U.right+R5(J,"right");if(V||W)if(G)Q.defaultView.scrollBy(V,W);else{let{scrollLeft:j,scrollTop:H}=q;if(W)q.scrollTop+=W;if(V)q.scrollLeft+=V;let R=q.scrollLeft-j,F=q.scrollTop-H;X={left:X.left-R,top:X.top-F,right:X.right-R,bottom:X.bottom-F}}let A=G?"fixed":getComputedStyle(Y).position;if(/^(fixed|sticky)$/.test(A))break;Y=A=="absolute"?Y.offsetParent:m0(Y)}}function N2(Z){let X=Z.dom.getBoundingClientRect(),K=Math.max(0,X.top),z,J;for(let Q=(X.left+X.right)/2,Y=K+1;Y<Math.min(innerHeight,X.bottom);Y+=5){let q=Z.root.elementFromPoint(Q,Y);if(!q||q==Z.dom||!Z.dom.contains(q))continue;let G=q.getBoundingClientRect();if(G.top>=K-20){z=q,J=G.top;break}}return{refDOM:z,refTop:J,stack:WX(Z.dom)}}function WX(Z){let X=[],K=Z.ownerDocument;for(let z=Z;z;z=m0(z))if(X.push({dom:z,top:z.scrollTop,left:z.scrollLeft}),Z==K)break;return X}function T2({refDOM:Z,refTop:X,stack:K}){let z=Z?Z.getBoundingClientRect().top:0;AX(K,z==0?0:z-X)}function AX(Z,X){for(let K=0;K<Z.length;K++){let{dom:z,top:J,left:Q}=Z[K];if(z.scrollTop!=J+X)z.scrollTop=J+X;if(z.scrollLeft!=Q)z.scrollLeft=Q}}var $0=null;function x2(Z){if(Z.setActive)return Z.setActive();if($0)return Z.focus($0);let X=WX(Z);if(Z.focus($0==null?{get preventScroll(){return $0={preventScroll:!0},!0}}:void 0),!$0)$0=!1,AX(X,0)}function HX(Z,X){let K,z=200000000,J,Q=0,Y=X.top,q=X.top,G,U;for(let V=Z.firstChild,W=0;V;V=V.nextSibling,W++){let A;if(V.nodeType==1)A=V.getClientRects();else if(V.nodeType==3)A=F5(V).getClientRects();else continue;for(let j=0;j<A.length;j++){let H=A[j];if(H.top<=Y&&H.bottom>=q){Y=Math.max(H.bottom,Y),q=Math.min(H.top,q);let R=H.left>X.left?H.left-X.left:H.right<X.left?X.left-H.right:0;if(R<z){if(K=V,z=R,J=R&&K.nodeType==3?{left:H.right<X.left?H.right:H.left,top:X.top}:X,V.nodeType==1&&R)Q=W+(X.left>=(H.left+H.right)/2?1:0);continue}}else if(H.top>X.top&&!G&&H.left<=X.left&&H.right>=X.left)G=V,U={left:Math.max(H.left,Math.min(H.right,X.left)),top:H.top};if(!K&&(X.left>=H.right&&X.top>=H.top||X.left>=H.left&&X.top>=H.bottom))Q=W+1}}if(!K&&G)K=G,J=U,z=0;if(K&&K.nodeType==3)return g2(K,J);if(!K||z&&K.nodeType==1)return{node:Z,offset:Q};return HX(K,J)}function g2(Z,X){let K=Z.nodeValue.length,z=document.createRange();for(let J=0;J<K;J++){z.setEnd(Z,J+1),z.setStart(Z,J);let Q=$5(z,1);if(Q.top==Q.bottom)continue;if(j9(X,Q))return{node:Z,offset:J+(X.left>=(Q.left+Q.right)/2?1:0)}}return{node:Z,offset:0}}function j9(Z,X){return Z.left>=X.left-1&&Z.left<=X.right+1&&Z.top>=X.top-1&&Z.top<=X.bottom+1}function u2(Z,X){let K=Z.parentNode;if(K&&/^li$/i.test(K.nodeName)&&X.left<Z.getBoundingClientRect().left)return K;return Z}function w2(Z,X,K){let{node:z,offset:J}=HX(X,K),Q=-1;if(z.nodeType==1&&!z.firstChild){let Y=z.getBoundingClientRect();Q=Y.left!=Y.right&&K.left>(Y.left+Y.right)/2?1:-1}return Z.docView.posFromDOM(z,J,Q)}function v2(Z,X,K,z){let J=-1;for(let Q=X,Y=!1;;){if(Q==Z.dom)break;let q=Z.docView.nearestDesc(Q,!0),G;if(!q)return null;if(q.dom.nodeType==1&&(q.node.isBlock&&q.parent||!q.contentDOM)&&((G=q.dom.getBoundingClientRect()).width||G.height)){if(q.node.isBlock&&q.parent){if(!Y&&G.left>z.left||G.top>z.top)J=q.posBefore;else if(!Y&&G.right<z.left||G.bottom<z.top)J=q.posAfter;Y=!0}if(!q.contentDOM&&J<0&&!q.node.isText)return(q.node.isBlock?z.top<(G.top+G.bottom)/2:z.left<(G.left+G.right)/2)?q.posBefore:q.posAfter}Q=q.dom.parentNode}return J>-1?J:Z.docView.posFromDOM(X,K,-1)}function jX(Z,X,K){let z=Z.childNodes.length;if(z&&K.top<K.bottom)for(let J=Math.max(0,Math.min(z-1,Math.floor(z*(X.top-K.top)/(K.bottom-K.top))-2)),Q=J;;){let Y=Z.childNodes[Q];if(Y.nodeType==1){let q=Y.getClientRects();for(let G=0;G<q.length;G++){let U=q[G];if(j9(X,U))return jX(Y,X,U)}}if((Q=(Q+1)%z)==J)break}return Z}function $2(Z,X){let K=Z.dom.ownerDocument,z,J=0,Q=C2(K,X.left,X.top);if(Q)({node:z,offset:J}=Q);let Y=(Z.root.elementFromPoint?Z.root:K).elementFromPoint(X.left,X.top),q;if(!Y||!Z.dom.contains(Y.nodeType!=1?Y.parentNode:Y)){let U=Z.dom.getBoundingClientRect();if(!j9(X,U))return null;if(Y=jX(Z.dom,X,U),!Y)return null}if(y8){for(let U=Y;z&&U;U=m0(U))if(U.draggable)z=void 0}if(Y=u2(Y,X),z){if(i8&&z.nodeType==1){if(J=Math.min(J,z.childNodes.length),J<z.childNodes.length){let V=z.childNodes[J],W;if(V.nodeName=="IMG"&&(W=V.getBoundingClientRect()).right<=X.left&&W.bottom>X.top)J++}}let U;if(N3&&J&&z.nodeType==1&&(U=z.childNodes[J-1]).nodeType==1&&U.contentEditable=="false"&&U.getBoundingClientRect().top>=X.top)J--;if(z==Z.dom&&J==z.childNodes.length-1&&z.lastChild.nodeType==1&&X.top>z.lastChild.getBoundingClientRect().bottom)q=Z.state.doc.content.size;else if(J==0||z.nodeType!=1||z.childNodes[J-1].nodeName!="BR")q=v2(Z,z,J,X)}if(q==null)q=w2(Z,Y,X);let G=Z.docView.nearestDesc(Y,!0);return{pos:q,inside:G?G.posAtStart-G.border:-1}}function gZ(Z){return Z.top<Z.bottom||Z.left<Z.right}function $5(Z,X){let K=Z.getClientRects();if(K.length){let z=K[X<0?0:K.length-1];if(gZ(z))return z}return Array.prototype.find.call(K,gZ)||Z.getBoundingClientRect()}var h2=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function RX(Z,X,K){let{node:z,offset:J,atom:Q}=Z.docView.domFromPos(X,K<0?-1:1),Y=N3||i8;if(z.nodeType==3)if(Y&&(h2.test(z.nodeValue)||(K<0?!J:J==z.nodeValue.length))){let G=$5(F5(z,J,J),K);if(i8&&J&&/\s/.test(z.nodeValue[J-1])&&J<z.nodeValue.length){let U=$5(F5(z,J-1,J-1),-1);if(U.top==G.top){let V=$5(F5(z,J,J+1),-1);if(V.top!=G.top)return D3(V,V.left<U.left)}}return G}else{let G=J,U=J,V=K<0?1:-1;if(K<0&&!J)U++,V=-1;else if(K>=0&&J==z.nodeValue.length)G--,V=1;else if(K<0)G--;else U++;return D3($5(F5(z,G,U),V),V<0)}if(!Z.state.doc.resolve(X-(Q||0)).parent.inlineContent){if(Q==null&&J&&(K<0||J==m8(z))){let G=z.childNodes[J-1];if(G.nodeType==1)return e1(G.getBoundingClientRect(),!1)}if(Q==null&&J<m8(z)){let G=z.childNodes[J];if(G.nodeType==1)return e1(G.getBoundingClientRect(),!0)}return e1(z.getBoundingClientRect(),K>=0)}if(Q==null&&J&&(K<0||J==m8(z))){let G=z.childNodes[J-1],U=G.nodeType==3?F5(G,m8(G)-(Y?0:1)):G.nodeType==1&&(G.nodeName!="BR"||!G.nextSibling)?G:null;if(U)return D3($5(U,1),!1)}if(Q==null&&J<m8(z)){let G=z.childNodes[J];while(G.pmViewDesc&&G.pmViewDesc.ignoreForCoords)G=G.nextSibling;let U=!G?null:G.nodeType==3?F5(G,0,Y?0:1):G.nodeType==1?G:null;if(U)return D3($5(U,-1),!0)}return D3($5(z.nodeType==3?F5(z):z,-K),K>=0)}function D3(Z,X){if(Z.width==0)return Z;let K=X?Z.left:Z.right;return{top:Z.top,bottom:Z.bottom,left:K,right:K}}function e1(Z,X){if(Z.height==0)return Z;let K=X?Z.top:Z.bottom;return{top:K,bottom:K,left:Z.left,right:Z.right}}function FX(Z,X,K){let z=Z.state,J=Z.root.activeElement;if(z!=X)Z.updateState(X);if(J!=Z.dom)Z.focus();try{return K()}finally{if(z!=X)Z.updateState(z);if(J!=Z.dom&&J)J.focus()}}function f2(Z,X,K){let z=X.selection,J=K=="up"?z.$from:z.$to;return FX(Z,X,()=>{let{node:Q}=Z.docView.domFromPos(J.pos,K=="up"?-1:1);for(;;){let q=Z.docView.nearestDesc(Q,!0);if(!q)break;if(q.node.isBlock){Q=q.contentDOM||q.dom;break}Q=q.dom.parentNode}let Y=RX(Z,J.pos,1);for(let q=Q.firstChild;q;q=q.nextSibling){let G;if(q.nodeType==1)G=q.getClientRects();else if(q.nodeType==3)G=F5(q,0,q.nodeValue.length).getClientRects();else continue;for(let U=0;U<G.length;U++){let V=G[U];if(V.bottom>V.top+1&&(K=="up"?Y.top-V.top>(V.bottom-Y.top)*2:V.bottom-Y.bottom>(Y.bottom-V.top)*2))return!1}}return!0})}var _2=/[\u0590-\u08ac]/;function m2(Z,X,K){let{$head:z}=X.selection;if(!z.parent.isTextblock)return!1;let J=z.parentOffset,Q=!J,Y=J==z.parent.content.size,q=Z.domSelection();if(!q)return z.pos==z.start()||z.pos==z.end();if(!_2.test(z.parent.textContent)||!q.modify)return K=="left"||K=="backward"?Q:Y;return FX(Z,X,()=>{let{focusNode:G,focusOffset:U,anchorNode:V,anchorOffset:W}=Z.domSelectionRange(),A=q.caretBidiLevel;q.modify("move",K,"character");let j=z.depth?Z.docView.domAfterPos(z.before()):Z.dom,{focusNode:H,focusOffset:R}=Z.domSelectionRange(),F=H&&!j.contains(H.nodeType==1?H:H.parentNode)||G==H&&U==R;try{if(q.collapse(V,W),G&&(G!=V||U!=W)&&q.extend)q.extend(G,U)}catch(B){}if(A!=null)q.caretBidiLevel=A;return F})}var uZ=null,wZ=null,vZ=!1;function l2(Z,X,K){if(uZ==X&&wZ==K)return vZ;return uZ=X,wZ=K,vZ=K=="up"||K=="down"?f2(Z,X,K):m2(Z,X,K)}var l8=0,$Z=1,z0=2,z5=3;class c0{constructor(Z,X,K,z){this.parent=Z,this.children=X,this.dom=K,this.contentDOM=z,this.dirty=l8,K.pmViewDesc=this}matchesWidget(Z){return!1}matchesMark(Z){return!1}matchesNode(Z,X,K){return!1}matchesHack(Z){return!1}parseRule(){return null}stopEvent(Z){return!1}get size(){let Z=0;for(let X=0;X<this.children.length;X++)Z+=this.children[X].size;return Z}get border(){return 0}destroy(){if(this.parent=void 0,this.dom.pmViewDesc==this)this.dom.pmViewDesc=void 0;for(let Z=0;Z<this.children.length;Z++)this.children[Z].destroy()}posBeforeChild(Z){for(let X=0,K=this.posAtStart;;X++){let z=this.children[X];if(z==Z)return K;K+=z.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(Z,X,K){if(this.contentDOM&&this.contentDOM.contains(Z.nodeType==1?Z:Z.parentNode))if(K<0){let J,Q;if(Z==this.contentDOM)J=Z.childNodes[X-1];else{while(Z.parentNode!=this.contentDOM)Z=Z.parentNode;J=Z.previousSibling}while(J&&!((Q=J.pmViewDesc)&&Q.parent==this))J=J.previousSibling;return J?this.posBeforeChild(Q)+Q.size:this.posAtStart}else{let J,Q;if(Z==this.contentDOM)J=Z.childNodes[X];else{while(Z.parentNode!=this.contentDOM)Z=Z.parentNode;J=Z.nextSibling}while(J&&!((Q=J.pmViewDesc)&&Q.parent==this))J=J.nextSibling;return J?this.posBeforeChild(Q):this.posAtEnd}let z;if(Z==this.dom&&this.contentDOM)z=X>W8(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))z=Z.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(X==0)for(let J=Z;;J=J.parentNode){if(J==this.dom){z=!1;break}if(J.previousSibling)break}if(z==null&&X==Z.childNodes.length)for(let J=Z;;J=J.parentNode){if(J==this.dom){z=!0;break}if(J.nextSibling)break}}return(z==null?K>0:z)?this.posAtEnd:this.posAtStart}nearestDesc(Z,X=!1){for(let K=!0,z=Z;z;z=z.parentNode){let J=this.getDesc(z),Q;if(J&&(!X||J.node))if(K&&(Q=J.nodeDOM)&&!(Q.nodeType==1?Q.contains(Z.nodeType==1?Z:Z.parentNode):Q==Z))K=!1;else return J}}getDesc(Z){let X=Z.pmViewDesc;for(let K=X;K;K=K.parent)if(K==this)return X}posFromDOM(Z,X,K){for(let z=Z;z;z=z.parentNode){let J=this.getDesc(z);if(J)return J.localPosFromDOM(Z,X,K)}return-1}descAt(Z){for(let X=0,K=0;X<this.children.length;X++){let z=this.children[X],J=K+z.size;if(K==Z&&J!=K){while(!z.border&&z.children.length)for(let Q=0;Q<z.children.length;Q++){let Y=z.children[Q];if(Y.size){z=Y;break}}return z}if(Z<J)return z.descAt(Z-K-z.border);K=J}}domFromPos(Z,X){if(!this.contentDOM)return{node:this.dom,offset:0,atom:Z+1};let K=0,z=0;for(let J=0;K<this.children.length;K++){let Q=this.children[K],Y=J+Q.size;if(Y>Z||Q instanceof F9){z=Z-J;break}J=Y}if(z)return this.children[K].domFromPos(z-this.children[K].border,X);for(let J;K&&!(J=this.children[K-1]).size&&J instanceof R9&&J.side>=0;K--);if(X<=0){let J,Q=!0;for(;;K--,Q=!1)if(J=K?this.children[K-1]:null,!J||J.dom.parentNode==this.contentDOM)break;if(J&&X&&Q&&!J.border&&!J.domAtom)return J.domFromPos(J.size,X);return{node:this.contentDOM,offset:J?W8(J.dom)+1:0}}else{let J,Q=!0;for(;;K++,Q=!1)if(J=K<this.children.length?this.children[K]:null,!J||J.dom.parentNode==this.contentDOM)break;if(J&&Q&&!J.border&&!J.domAtom)return J.domFromPos(0,X);return{node:this.contentDOM,offset:J?W8(J.dom):this.contentDOM.childNodes.length}}}parseRange(Z,X,K=0){if(this.children.length==0)return{node:this.contentDOM,from:Z,to:X,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let z=-1,J=-1;for(let Q=K,Y=0;;Y++){let q=this.children[Y],G=Q+q.size;if(z==-1&&Z<=G){let U=Q+q.border;if(Z>=U&&X<=G-q.border&&q.node&&q.contentDOM&&this.contentDOM.contains(q.contentDOM))return q.parseRange(Z,X,U);Z=Q;for(let V=Y;V>0;V--){let W=this.children[V-1];if(W.size&&W.dom.parentNode==this.contentDOM&&!W.emptyChildAt(1)){z=W8(W.dom)+1;break}Z-=W.size}if(z==-1)z=0}if(z>-1&&(G>X||Y==this.children.length-1)){X=G;for(let U=Y+1;U<this.children.length;U++){let V=this.children[U];if(V.size&&V.dom.parentNode==this.contentDOM&&!V.emptyChildAt(-1)){J=W8(V.dom);break}X+=V.size}if(J==-1)J=this.contentDOM.childNodes.length;break}Q=G}return{node:this.contentDOM,from:Z,to:X,fromOffset:z,toOffset:J}}emptyChildAt(Z){if(this.border||!this.contentDOM||!this.children.length)return!1;let X=this.children[Z<0?0:this.children.length-1];return X.size==0||X.emptyChildAt(Z)}domAfterPos(Z){let{node:X,offset:K}=this.domFromPos(Z,0);if(X.nodeType!=1||K==X.childNodes.length)throw new RangeError("No node after pos "+Z);return X.childNodes[K]}setSelection(Z,X,K,z=!1){let J=Math.min(Z,X),Q=Math.max(Z,X);for(let A=0,j=0;A<this.children.length;A++){let H=this.children[A],R=j+H.size;if(J>j&&Q<R)return H.setSelection(Z-j-H.border,X-j-H.border,K,z);j=R}let Y=this.domFromPos(Z,Z?-1:1),q=X==Z?Y:this.domFromPos(X,X?-1:1),G=K.root.getSelection(),U=K.domSelectionRange(),V=!1;if((i8||y8)&&Z==X){let{node:A,offset:j}=Y;if(A.nodeType==3){if(V=!!(j&&A.nodeValue[j-1]==`
`),V&&j==A.nodeValue.length)for(let H=A,R;H;H=H.parentNode){if(R=H.nextSibling){if(R.nodeName=="BR")Y=q={node:R.parentNode,offset:W8(R)+1};break}let F=H.pmViewDesc;if(F&&F.node&&F.node.isBlock)break}}else{let H=A.childNodes[j-1];V=H&&(H.nodeName=="BR"||H.contentEditable=="false")}}if(i8&&U.focusNode&&U.focusNode!=q.node&&U.focusNode.nodeType==1){let A=U.focusNode.childNodes[U.focusOffset];if(A&&A.contentEditable=="false")z=!0}if(!(z||V&&y8)&&q0(Y.node,Y.offset,U.anchorNode,U.anchorOffset)&&q0(q.node,q.offset,U.focusNode,U.focusOffset))return;let W=!1;if((G.extend||Z==X)&&!V){G.collapse(Y.node,Y.offset);try{if(Z!=X)G.extend(q.node,q.offset);W=!0}catch(A){}}if(!W){if(Z>X){let j=Y;Y=q,q=j}let A=document.createRange();A.setEnd(q.node,q.offset),A.setStart(Y.node,Y.offset),G.removeAllRanges(),G.addRange(A)}}ignoreMutation(Z){return!this.contentDOM&&Z.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(Z,X){for(let K=0,z=0;z<this.children.length;z++){let J=this.children[z],Q=K+J.size;if(K==Q?Z<=Q&&X>=K:Z<Q&&X>K){let Y=K+J.border,q=Q-J.border;if(Z>=Y&&X<=q){if(this.dirty=Z==K||X==Q?z0:$Z,Z==Y&&X==q&&(J.contentLost||J.dom.parentNode!=this.contentDOM))J.dirty=z5;else J.markDirty(Z-Y,X-Y);return}else J.dirty=J.dom==J.contentDOM&&J.dom.parentNode==this.contentDOM&&!J.children.length?z0:z5}K=Q}this.dirty=z0}markParentsDirty(){let Z=1;for(let X=this.parent;X;X=X.parent,Z++){let K=Z==1?z0:$Z;if(X.dirty<K)X.dirty=K}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(Z){return!1}}class R9 extends c0{constructor(Z,X,K,z){let J,Q=X.type.toDOM;if(typeof Q=="function")Q=Q(K,()=>{if(!J)return z;if(J.parent)return J.parent.posBeforeChild(J)});if(!X.type.spec.raw){if(Q.nodeType!=1){let Y=document.createElement("span");Y.appendChild(Q),Q=Y}Q.contentEditable="false",Q.classList.add("ProseMirror-widget")}super(Z,[],Q,null);this.widget=X,this.widget=X,J=this}matchesWidget(Z){return this.dirty==l8&&Z.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(Z){let X=this.widget.spec.stopEvent;return X?X(Z):!1}ignoreMutation(Z){return Z.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class BX extends c0{constructor(Z,X,K,z){super(Z,[],X,null);this.textDOM=K,this.text=z}get size(){return this.text.length}localPosFromDOM(Z,X){if(Z!=this.textDOM)return this.posAtStart+(X?this.size:0);return this.posAtStart+X}domFromPos(Z){return{node:this.textDOM,offset:Z}}ignoreMutation(Z){return Z.type==="characterData"&&Z.target.nodeValue==Z.oldValue}}class G0 extends c0{constructor(Z,X,K,z,J){super(Z,[],K,z);this.mark=X,this.spec=J}static create(Z,X,K,z){let J=z.nodeViews[X.type.name],Q=J&&J(X,z,K);if(!Q||!Q.dom)Q=T5.renderSpec(document,X.type.spec.toDOM(X,K),null,X.attrs);return new G0(Z,X,Q.dom,Q.contentDOM||Q.dom,Q)}parseRule(){if(this.dirty&z5||this.mark.type.spec.reparseInView)return null;return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(Z){return this.dirty!=z5&&this.mark.eq(Z)}markDirty(Z,X){if(super.markDirty(Z,X),this.dirty!=l8){let K=this.parent;while(!K.node)K=K.parent;if(K.dirty<this.dirty)K.dirty=this.dirty;this.dirty=l8}}slice(Z,X,K){let z=G0.create(this.parent,this.mark,!0,K),J=this.children,Q=this.size;if(X<Q)J=U9(J,X,Q,K);if(Z>0)J=U9(J,0,Z,K);for(let Y=0;Y<J.length;Y++)J[Y].parent=z;return z.children=J,z}ignoreMutation(Z){return this.spec.ignoreMutation?this.spec.ignoreMutation(Z):super.ignoreMutation(Z)}destroy(){if(this.spec.destroy)this.spec.destroy();super.destroy()}}class l5 extends c0{constructor(Z,X,K,z,J,Q,Y,q,G){super(Z,[],J,Q);this.node=X,this.outerDeco=K,this.innerDeco=z,this.nodeDOM=Y}static create(Z,X,K,z,J,Q){let Y=J.nodeViews[X.type.name],q,G=Y&&Y(X,J,()=>{if(!q)return Q;if(q.parent)return q.parent.posBeforeChild(q)},K,z),U=G&&G.dom,V=G&&G.contentDOM;if(X.isText){if(!U)U=document.createTextNode(X.text);else if(U.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else if(!U)({dom:U,contentDOM:V}=T5.renderSpec(document,X.type.spec.toDOM(X),null,X.attrs));if(!V&&!X.isText&&U.nodeName!="BR"){if(!U.hasAttribute("contenteditable"))U.contentEditable="false";if(X.type.spec.draggable)U.draggable=!0}let W=U;if(U=LX(U,K,X),G)return q=new EX(Z,X,K,z,U,V||null,W,G,J,Q+1);else if(X.isText)return new F7(Z,X,K,z,U,W,J);else return new l5(Z,X,K,z,U,V||null,W,J,Q+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let Z={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre")Z.preserveWhitespace="full";if(!this.contentDOM)Z.getContent=()=>this.node.content;else if(!this.contentLost)Z.contentElement=this.contentDOM;else{for(let X=this.children.length-1;X>=0;X--){let K=this.children[X];if(this.dom.contains(K.dom.parentNode)){Z.contentElement=K.dom.parentNode;break}}if(!Z.contentElement)Z.getContent=()=>M.empty}return Z}matchesNode(Z,X,K){return this.dirty==l8&&Z.eq(this.node)&&V7(X,this.outerDeco)&&K.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(Z,X){let K=this.node.inlineContent,z=X,J=Z.composing?this.localCompositionInfo(Z,X):null,Q=J&&J.pos>-1?J:null,Y=J&&J.pos<0,q=new MX(this,Q&&Q.node,Z);if(d2(this.node,this.innerDeco,(G,U,V)=>{if(G.spec.marks)q.syncToMarks(G.spec.marks,K,Z);else if(G.type.side>=0&&!V)q.syncToMarks(U==this.node.childCount?f.none:this.node.child(U).marks,K,Z);q.placeWidget(G,Z,z)},(G,U,V,W)=>{q.syncToMarks(G.marks,K,Z);let A;if(q.findNodeMatch(G,U,V,W));else if(Y&&Z.state.selection.from>z&&Z.state.selection.to<z+G.nodeSize&&(A=q.findIndexWithChild(J.node))>-1&&q.updateNodeAt(G,U,V,A,Z));else if(q.updateNextNode(G,U,V,Z,W,z));else q.addNode(G,U,V,Z,z);z+=G.nodeSize}),q.syncToMarks([],K,Z),this.node.isTextblock)q.addTextblockHacks();if(q.destroyRest(),q.changed||this.dirty==z0){if(Q)this.protectLocalComposition(Z,Q);if(PX(this.contentDOM,this.children,Z),l0)s2(this.dom)}}localCompositionInfo(Z,X){let{from:K,to:z}=Z.state.selection;if(!(Z.state.selection instanceof _)||K<X||z>X+this.node.content.size)return null;let J=Z.input.compositionNode;if(!J||!this.dom.contains(J.parentNode))return null;if(this.node.inlineContent){let Q=J.nodeValue,Y=n2(this.node.content,Q,K-X,z-X);return Y<0?null:{node:J,pos:Y,text:Q}}else return{node:J,pos:-1,text:""}}protectLocalComposition(Z,{node:X,pos:K,text:z}){if(this.getDesc(X))return;let J=X;for(;;J=J.parentNode){if(J.parentNode==this.contentDOM)break;while(J.previousSibling)J.parentNode.removeChild(J.previousSibling);while(J.nextSibling)J.parentNode.removeChild(J.nextSibling);if(J.pmViewDesc)J.pmViewDesc=void 0}let Q=new BX(this,J,X,z);Z.input.compositionNodes.push(Q),this.children=U9(this.children,K,K+z.length,Z,Q)}update(Z,X,K,z){if(this.dirty==z5||!Z.sameMarkup(this.node))return!1;return this.updateInner(Z,X,K,z),!0}updateInner(Z,X,K,z){if(this.updateOuterDeco(X),this.node=Z,this.innerDeco=K,this.contentDOM)this.updateChildren(z,this.posAtStart);this.dirty=l8}updateOuterDeco(Z){if(V7(Z,this.outerDeco))return;let X=this.nodeDOM.nodeType!=1,K=this.dom;if(this.dom=OX(this.dom,this.nodeDOM,G9(this.outerDeco,this.node,X),G9(Z,this.node,X)),this.dom!=K)K.pmViewDesc=void 0,this.dom.pmViewDesc=this;this.outerDeco=Z}selectNode(){if(this.nodeDOM.nodeType==1)this.nodeDOM.classList.add("ProseMirror-selectednode");if(this.contentDOM||!this.node.type.spec.draggable)this.dom.draggable=!0}deselectNode(){if(this.nodeDOM.nodeType==1){if(this.nodeDOM.classList.remove("ProseMirror-selectednode"),this.contentDOM||!this.node.type.spec.draggable)this.dom.removeAttribute("draggable")}}get domAtom(){return this.node.isAtom}}function hZ(Z,X,K,z,J){LX(z,X,Z);let Q=new l5(void 0,Z,X,K,z,z,z,J,0);if(Q.contentDOM)Q.updateChildren(J,0);return Q}class F7 extends l5{constructor(Z,X,K,z,J,Q,Y){super(Z,X,K,z,J,null,Q,Y,0)}parseRule(){let Z=this.nodeDOM.parentNode;while(Z&&Z!=this.dom&&!Z.pmIsDeco)Z=Z.parentNode;return{skip:Z||!0}}update(Z,X,K,z){if(this.dirty==z5||this.dirty!=l8&&!this.inParent()||!Z.sameMarkup(this.node))return!1;if(this.updateOuterDeco(X),(this.dirty!=l8||Z.text!=this.node.text)&&Z.text!=this.nodeDOM.nodeValue){if(this.nodeDOM.nodeValue=Z.text,z.trackWrites==this.nodeDOM)z.trackWrites=null}return this.node=Z,this.dirty=l8,!0}inParent(){let Z=this.parent.contentDOM;for(let X=this.nodeDOM;X;X=X.parentNode)if(X==Z)return!0;return!1}domFromPos(Z){return{node:this.nodeDOM,offset:Z}}localPosFromDOM(Z,X,K){if(Z==this.nodeDOM)return this.posAtStart+Math.min(X,this.node.text.length);return super.localPosFromDOM(Z,X,K)}ignoreMutation(Z){return Z.type!="characterData"&&Z.type!="selection"}slice(Z,X,K){let z=this.node.cut(Z,X),J=document.createTextNode(z.text);return new F7(this.parent,z,this.outerDeco,this.innerDeco,J,J,K)}markDirty(Z,X){if(super.markDirty(Z,X),this.dom!=this.nodeDOM&&(Z==0||X==this.nodeDOM.nodeValue.length))this.dirty=z5}get domAtom(){return!1}isText(Z){return this.node.text==Z}}class F9 extends c0{parseRule(){return{ignore:!0}}matchesHack(Z){return this.dirty==l8&&this.dom.nodeName==Z}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class EX extends l5{constructor(Z,X,K,z,J,Q,Y,q,G,U){super(Z,X,K,z,J,Q,Y,G,U);this.spec=q}update(Z,X,K,z){if(this.dirty==z5)return!1;if(this.spec.update&&(this.node.type==Z.type||this.spec.multiType)){let J=this.spec.update(Z,X,K);if(J)this.updateInner(Z,X,K,z);return J}else if(!this.contentDOM&&!Z.isLeaf)return!1;else return super.update(Z,X,K,z)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(Z,X,K,z){this.spec.setSelection?this.spec.setSelection(Z,X,K.root):super.setSelection(Z,X,K,z)}destroy(){if(this.spec.destroy)this.spec.destroy();super.destroy()}stopEvent(Z){return this.spec.stopEvent?this.spec.stopEvent(Z):!1}ignoreMutation(Z){return this.spec.ignoreMutation?this.spec.ignoreMutation(Z):super.ignoreMutation(Z)}}function PX(Z,X,K){let z=Z.firstChild,J=!1;for(let Q=0;Q<X.length;Q++){let Y=X[Q],q=Y.dom;if(q.parentNode==Z){while(q!=z)z=fZ(z),J=!0;z=z.nextSibling}else J=!0,Z.insertBefore(q,z);if(Y instanceof G0){let G=z?z.previousSibling:Z.lastChild;PX(Y.contentDOM,Y.children,K),z=G?G.nextSibling:Z.firstChild}}while(z)z=fZ(z),J=!0;if(J&&K.trackWrites==Z)K.trackWrites=null}var I3=function(Z){if(Z)this.nodeName=Z};I3.prototype=Object.create(null);var J0=[new I3];function G9(Z,X,K){if(Z.length==0)return J0;let z=K?J0[0]:new I3,J=[z];for(let Q=0;Q<Z.length;Q++){let Y=Z[Q].type.attrs;if(!Y)continue;if(Y.nodeName)J.push(z=new I3(Y.nodeName));for(let q in Y){let G=Y[q];if(G==null)continue;if(K&&J.length==1)J.push(z=new I3(X.isInline?"span":"div"));if(q=="class")z.class=(z.class?z.class+" ":"")+G;else if(q=="style")z.style=(z.style?z.style+";":"")+G;else if(q!="nodeName")z[q]=G}}return J}function OX(Z,X,K,z){if(K==J0&&z==J0)return X;let J=X;for(let Q=0;Q<z.length;Q++){let Y=z[Q],q=K[Q];if(Q){let G;if(q&&q.nodeName==Y.nodeName&&J!=Z&&(G=J.parentNode)&&G.nodeName.toLowerCase()==Y.nodeName)J=G;else G=document.createElement(Y.nodeName),G.pmIsDeco=!0,G.appendChild(J),q=J0[0],J=G}c2(J,q||J0[0],Y)}return J}function c2(Z,X,K){for(let z in X)if(z!="class"&&z!="style"&&z!="nodeName"&&!(z in K))Z.removeAttribute(z);for(let z in K)if(z!="class"&&z!="style"&&z!="nodeName"&&K[z]!=X[z])Z.setAttribute(z,K[z]);if(X.class!=K.class){let z=X.class?X.class.split(" ").filter(Boolean):[],J=K.class?K.class.split(" ").filter(Boolean):[];for(let Q=0;Q<z.length;Q++)if(J.indexOf(z[Q])==-1)Z.classList.remove(z[Q]);for(let Q=0;Q<J.length;Q++)if(z.indexOf(J[Q])==-1)Z.classList.add(J[Q]);if(Z.classList.length==0)Z.removeAttribute("class")}if(X.style!=K.style){if(X.style){let z=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,J;while(J=z.exec(X.style))Z.style.removeProperty(J[1])}if(K.style)Z.style.cssText+=K.style}}function LX(Z,X,K){return OX(Z,Z,J0,G9(X,K,Z.nodeType!=1))}function V7(Z,X){if(Z.length!=X.length)return!1;for(let K=0;K<Z.length;K++)if(!Z[K].type.eq(X[K].type))return!1;return!0}function fZ(Z){let X=Z.nextSibling;return Z.parentNode.removeChild(Z),X}class MX{constructor(Z,X,K){this.lock=X,this.view=K,this.index=0,this.stack=[],this.changed=!1,this.top=Z,this.preMatch=p2(Z.node.content,Z)}destroyBetween(Z,X){if(Z==X)return;for(let K=Z;K<X;K++)this.top.children[K].destroy();this.top.children.splice(Z,X-Z),this.changed=!0}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(Z,X,K){let z=0,J=this.stack.length>>1,Q=Math.min(J,Z.length);while(z<Q&&(z==J-1?this.top:this.stack[z+1<<1]).matchesMark(Z[z])&&Z[z].type.spec.spanning!==!1)z++;while(z<J)this.destroyRest(),this.top.dirty=l8,this.index=this.stack.pop(),this.top=this.stack.pop(),J--;while(J<Z.length){this.stack.push(this.top,this.index+1);let Y=-1;for(let q=this.index;q<Math.min(this.index+3,this.top.children.length);q++){let G=this.top.children[q];if(G.matchesMark(Z[J])&&!this.isLocked(G.dom)){Y=q;break}}if(Y>-1){if(Y>this.index)this.changed=!0,this.destroyBetween(this.index,Y);this.top=this.top.children[this.index]}else{let q=G0.create(this.top,Z[J],X,K);this.top.children.splice(this.index,0,q),this.top=q,this.changed=!0}this.index=0,J++}}findNodeMatch(Z,X,K,z){let J=-1,Q;if(z>=this.preMatch.index&&(Q=this.preMatch.matches[z-this.preMatch.index]).parent==this.top&&Q.matchesNode(Z,X,K))J=this.top.children.indexOf(Q,this.index);else for(let Y=this.index,q=Math.min(this.top.children.length,Y+5);Y<q;Y++){let G=this.top.children[Y];if(G.matchesNode(Z,X,K)&&!this.preMatch.matched.has(G)){J=Y;break}}if(J<0)return!1;return this.destroyBetween(this.index,J),this.index++,!0}updateNodeAt(Z,X,K,z,J){let Q=this.top.children[z];if(Q.dirty==z5&&Q.dom==Q.contentDOM)Q.dirty=z0;if(!Q.update(Z,X,K,J))return!1;return this.destroyBetween(this.index,z),this.index++,!0}findIndexWithChild(Z){for(;;){let X=Z.parentNode;if(!X)return-1;if(X==this.top.contentDOM){let K=Z.pmViewDesc;if(K){for(let z=this.index;z<this.top.children.length;z++)if(this.top.children[z]==K)return z}return-1}Z=X}}updateNextNode(Z,X,K,z,J,Q){for(let Y=this.index;Y<this.top.children.length;Y++){let q=this.top.children[Y];if(q instanceof l5){let G=this.preMatch.matched.get(q);if(G!=null&&G!=J)return!1;let U=q.dom,V,W=this.isLocked(U)&&!(Z.isText&&q.node&&q.node.isText&&q.nodeDOM.nodeValue==Z.text&&q.dirty!=z5&&V7(X,q.outerDeco));if(!W&&q.update(Z,X,K,z)){if(this.destroyBetween(this.index,Y),q.dom!=U)this.changed=!0;return this.index++,!0}else if(!W&&(V=this.recreateWrapper(q,Z,X,K,z,Q))){if(this.destroyBetween(this.index,Y),this.top.children[this.index]=V,V.contentDOM)V.dirty=z0,V.updateChildren(z,Q+1),V.dirty=l8;return this.changed=!0,this.index++,!0}break}}return!1}recreateWrapper(Z,X,K,z,J,Q){if(Z.dirty||X.isAtom||!Z.children.length||!Z.node.content.eq(X.content)||!V7(K,Z.outerDeco)||!z.eq(Z.innerDeco))return null;let Y=l5.create(this.top,X,K,z,J,Q);if(Y.contentDOM){Y.children=Z.children,Z.children=[];for(let q of Y.children)q.parent=Y}return Z.destroy(),Y}addNode(Z,X,K,z,J){let Q=l5.create(this.top,Z,X,K,z,J);if(Q.contentDOM)Q.updateChildren(z,J+1);this.top.children.splice(this.index++,0,Q),this.changed=!0}placeWidget(Z,X,K){let z=this.index<this.top.children.length?this.top.children[this.index]:null;if(z&&z.matchesWidget(Z)&&(Z==z.widget||!z.widget.type.toDOM.parentNode))this.index++;else{let J=new R9(this.top,Z,X,K);this.top.children.splice(this.index++,0,J),this.changed=!0}}addTextblockHacks(){let Z=this.top.children[this.index-1],X=this.top;while(Z instanceof G0)X=Z,Z=X.children[X.children.length-1];if(!Z||!(Z instanceof F7)||/\n$/.test(Z.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(Z.node.text)){if((y8||I8)&&Z&&Z.dom.contentEditable=="false")this.addHackNode("IMG",X);this.addHackNode("BR",this.top)}}addHackNode(Z,X){if(X==this.top&&this.index<X.children.length&&X.children[this.index].matchesHack(Z))this.index++;else{let K=document.createElement(Z);if(Z=="IMG")K.className="ProseMirror-separator",K.alt="";if(Z=="BR")K.className="ProseMirror-trailingBreak";let z=new F9(this.top,[],K,null);if(X!=this.top)X.children.push(z);else X.children.splice(this.index++,0,z);this.changed=!0}}isLocked(Z){return this.lock&&(Z==this.lock||Z.nodeType==1&&Z.contains(this.lock.parentNode))}}function p2(Z,X){let K=X,z=K.children.length,J=Z.childCount,Q=new Map,Y=[];Z:while(J>0){let q;for(;;)if(z){let U=K.children[z-1];if(U instanceof G0)K=U,z=U.children.length;else{q=U,z--;break}}else if(K==X)break Z;else z=K.parent.children.indexOf(K),K=K.parent;let G=q.node;if(!G)continue;if(G!=Z.child(J-1))break;--J,Q.set(q,J),Y.push(q)}return{index:J,matched:Q,matches:Y.reverse()}}function i2(Z,X){return Z.type.side-X.type.side}function d2(Z,X,K,z){let J=X.locals(Z),Q=0;if(J.length==0){for(let U=0;U<Z.childCount;U++){let V=Z.child(U);z(V,J,X.forChild(Q,V),U),Q+=V.nodeSize}return}let Y=0,q=[],G=null;for(let U=0;;){let V,W;while(Y<J.length&&J[Y].to==Q){let F=J[Y++];if(F.widget)if(!V)V=F;else(W||(W=[V])).push(F)}if(V)if(W){W.sort(i2);for(let F=0;F<W.length;F++)K(W[F],U,!!G)}else K(V,U,!!G);let A,j;if(G)j=-1,A=G,G=null;else if(U<Z.childCount)j=U,A=Z.child(U++);else break;for(let F=0;F<q.length;F++)if(q[F].to<=Q)q.splice(F--,1);while(Y<J.length&&J[Y].from<=Q&&J[Y].to>Q)q.push(J[Y++]);let H=Q+A.nodeSize;if(A.isText){let F=H;if(Y<J.length&&J[Y].from<F)F=J[Y].from;for(let B=0;B<q.length;B++)if(q[B].to<F)F=q[B].to;if(F<H)G=A.cut(F-Q),A=A.cut(0,F-Q),H=F,j=-1}else while(Y<J.length&&J[Y].to<H)Y++;let R=A.isInline&&!A.isLeaf?q.filter((F)=>!F.inline):q.slice();z(A,R,X.forChild(Q,A),j),Q=H}}function s2(Z){if(Z.nodeName=="UL"||Z.nodeName=="OL"){let X=Z.style.cssText;Z.style.cssText=X+"; list-style: square !important",window.getComputedStyle(Z).listStyle,Z.style.cssText=X}}function n2(Z,X,K,z){for(let J=0,Q=0;J<Z.childCount&&Q<=z;){let Y=Z.child(J++),q=Q;if(Q+=Y.nodeSize,!Y.isText)continue;let G=Y.text;while(J<Z.childCount){let U=Z.child(J++);if(Q+=U.nodeSize,!U.isText)break;G+=U.text}if(Q>=K){if(Q>=z&&G.slice(z-X.length-q,z-q)==X)return z-X.length;let U=q<z?G.lastIndexOf(X,z-q-1):-1;if(U>=0&&U+X.length+q>=K)return q+U;if(K==z&&G.length>=z+X.length-q&&G.slice(z-q,z-q+X.length)==X)return z}}return-1}function U9(Z,X,K,z,J){let Q=[];for(let Y=0,q=0;Y<Z.length;Y++){let G=Z[Y],U=q,V=q+=G.size;if(U>=K||V<=X)Q.push(G);else{if(U<X)Q.push(G.slice(0,X-U,z));if(J)Q.push(J),J=void 0;if(V>K)Q.push(G.slice(K-U,G.size,z))}}return Q}function B9(Z,X=null){let K=Z.domSelectionRange(),z=Z.state.doc;if(!K.focusNode)return null;let J=Z.docView.nearestDesc(K.focusNode),Q=J&&J.size==0,Y=Z.docView.posFromDOM(K.focusNode,K.focusOffset,1);if(Y<0)return null;let q=z.resolve(Y),G,U;if(R7(K)){G=Y;while(J&&!J.node)J=J.parent;let W=J.node;if(J&&W.isAtom&&u.isSelectable(W)&&J.parent&&!(W.isInline&&D2(K.focusNode,K.focusOffset,J.dom))){let A=J.posBefore;U=new u(Y==A?q:z.resolve(A))}}else{if(K instanceof Z.dom.ownerDocument.defaultView.Selection&&K.rangeCount>1){let W=Y,A=Y;for(let j=0;j<K.rangeCount;j++){let H=K.getRangeAt(j);W=Math.min(W,Z.docView.posFromDOM(H.startContainer,H.startOffset,1)),A=Math.max(A,Z.docView.posFromDOM(H.endContainer,H.endOffset,-1))}if(W<0)return null;[G,Y]=A==Z.state.selection.anchor?[A,W]:[W,A],q=z.resolve(Y)}else G=Z.docView.posFromDOM(K.anchorNode,K.anchorOffset,1);if(G<0)return null}let V=z.resolve(G);if(!U){let W=X=="pointer"||Z.state.selection.head<q.pos&&!Q?1:-1;U=E9(Z,V,q,W)}return U}function DX(Z){return Z.editable?Z.hasFocus():CX(Z)&&document.activeElement&&document.activeElement.contains(Z.dom)}function E5(Z,X=!1){let K=Z.state.selection;if(IX(Z,K),!DX(Z))return;if(!X&&Z.input.mouseDown&&Z.input.mouseDown.allowDefault&&I8){let z=Z.domSelectionRange(),J=Z.domObserver.currentSelection;if(z.anchorNode&&J.anchorNode&&q0(z.anchorNode,z.anchorOffset,J.anchorNode,J.anchorOffset)){Z.input.mouseDown.delayedSelectionSync=!0,Z.domObserver.setCurSelection();return}}if(Z.domObserver.disconnectSelection(),Z.cursorWrapper)r2(Z);else{let{anchor:z,head:J}=K,Q,Y;if(_Z&&!(K instanceof _)){if(!K.$from.parent.inlineContent)Q=mZ(Z,K.from);if(!K.empty&&!K.$from.parent.inlineContent)Y=mZ(Z,K.to)}if(Z.docView.setSelection(z,J,Z,X),_Z){if(Q)lZ(Q);if(Y)lZ(Y)}if(K.visible)Z.dom.classList.remove("ProseMirror-hideselection");else if(Z.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document)a2(Z)}Z.domObserver.setCurSelection(),Z.domObserver.connectSelection()}var _Z=y8||I8&&VX<63;function mZ(Z,X){let{node:K,offset:z}=Z.docView.domFromPos(X,0),J=z<K.childNodes.length?K.childNodes[z]:null,Q=z?K.childNodes[z-1]:null;if(y8&&J&&J.contentEditable=="false")return Z9(J);if((!J||J.contentEditable=="false")&&(!Q||Q.contentEditable=="false")){if(J)return Z9(J);else if(Q)return Z9(Q)}}function Z9(Z){if(Z.contentEditable="true",y8&&Z.draggable)Z.draggable=!1,Z.wasDraggable=!0;return Z}function lZ(Z){if(Z.contentEditable="false",Z.wasDraggable)Z.draggable=!0,Z.wasDraggable=null}function a2(Z){let X=Z.dom.ownerDocument;X.removeEventListener("selectionchange",Z.input.hideSelectionGuard);let K=Z.domSelectionRange(),z=K.anchorNode,J=K.anchorOffset;X.addEventListener("selectionchange",Z.input.hideSelectionGuard=()=>{if(K.anchorNode!=z||K.anchorOffset!=J)X.removeEventListener("selectionchange",Z.input.hideSelectionGuard),setTimeout(()=>{if(!DX(Z)||Z.state.selection.visible)Z.dom.classList.remove("ProseMirror-hideselection")},20)})}function r2(Z){let X=Z.domSelection(),K=document.createRange();if(!X)return;let z=Z.cursorWrapper.dom,J=z.nodeName=="IMG";if(J)K.setStart(z.parentNode,W8(z)+1);else K.setStart(z,0);if(K.collapse(!0),X.removeAllRanges(),X.addRange(K),!J&&!Z.state.selection.visible&&u8&&m5<=11)z.disabled=!0,z.disabled=!1}function IX(Z,X){if(X instanceof u){let K=Z.docView.descAt(X.from);if(K!=Z.lastSelectedViewDesc){if(cZ(Z),K)K.selectNode();Z.lastSelectedViewDesc=K}}else cZ(Z)}function cZ(Z){if(Z.lastSelectedViewDesc){if(Z.lastSelectedViewDesc.parent)Z.lastSelectedViewDesc.deselectNode();Z.lastSelectedViewDesc=void 0}}function E9(Z,X,K,z){return Z.someProp("createSelectionBetween",(J)=>J(Z,X,K))||_.between(X,K,z)}function pZ(Z){if(Z.editable&&!Z.hasFocus())return!1;return CX(Z)}function CX(Z){let X=Z.domSelectionRange();if(!X.anchorNode)return!1;try{return Z.dom.contains(X.anchorNode.nodeType==3?X.anchorNode.parentNode:X.anchorNode)&&(Z.editable||Z.dom.contains(X.focusNode.nodeType==3?X.focusNode.parentNode:X.focusNode))}catch(K){return!1}}function o2(Z){let X=Z.docView.domFromPos(Z.state.selection.anchor,0),K=Z.domSelectionRange();return q0(X.node,X.offset,K.anchorNode,K.anchorOffset)}function V9(Z,X){let{$anchor:K,$head:z}=Z.selection,J=X>0?K.max(z):K.min(z),Q=!J.parent.inlineContent?J:J.depth?Z.doc.resolve(X>0?J.after():J.before()):null;return Q&&$.findFrom(Q,X)}function h5(Z,X){return Z.dispatch(Z.state.tr.setSelection(X).scrollIntoView()),!0}function iZ(Z,X,K){let z=Z.state.selection;if(z instanceof _){if(K.indexOf("s")>-1){let{$head:J}=z,Q=J.textOffset?null:X<0?J.nodeBefore:J.nodeAfter;if(!Q||Q.isText||!Q.isLeaf)return!1;let Y=Z.state.doc.resolve(J.pos+Q.nodeSize*(X<0?-1:1));return h5(Z,new _(z.$anchor,Y))}else if(!z.empty)return!1;else if(Z.endOfTextblock(X>0?"forward":"backward")){let J=V9(Z.state,X);if(J&&J instanceof u)return h5(Z,J);return!1}else if(!(_8&&K.indexOf("m")>-1)){let J=z.$head,Q=J.textOffset?null:X<0?J.nodeBefore:J.nodeAfter,Y;if(!Q||Q.isText)return!1;let q=X<0?J.pos-Q.nodeSize:J.pos;if(!(Q.isAtom||(Y=Z.docView.descAt(q))&&!Y.contentDOM))return!1;if(u.isSelectable(Q))return h5(Z,new u(X<0?Z.state.doc.resolve(J.pos-Q.nodeSize):J));else if(N3)return h5(Z,new _(Z.state.doc.resolve(X<0?q:q+Q.nodeSize)));else return!1}}else if(z instanceof u&&z.node.isInline)return h5(Z,new _(X>0?z.$to:z.$from));else{let J=V9(Z.state,X);if(J)return h5(Z,J);return!1}}function W7(Z){return Z.nodeType==3?Z.nodeValue.length:Z.childNodes.length}function C3(Z,X){let K=Z.pmViewDesc;return K&&K.size==0&&(X<0||Z.nextSibling||Z.nodeName!="BR")}function h0(Z,X){return X<0?t2(Z):e2(Z)}function t2(Z){let X=Z.domSelectionRange(),K=X.focusNode,z=X.focusOffset;if(!K)return;let J,Q,Y=!1;if(i8&&K.nodeType==1&&z<W7(K)&&C3(K.childNodes[z],-1))Y=!0;for(;;)if(z>0)if(K.nodeType!=1)break;else{let q=K.childNodes[z-1];if(C3(q,-1))J=K,Q=--z;else if(q.nodeType==3)K=q,z=K.nodeValue.length;else break}else if(SX(K))break;else{let q=K.previousSibling;while(q&&C3(q,-1))J=K.parentNode,Q=W8(q),q=q.previousSibling;if(!q){if(K=K.parentNode,K==Z.dom)break;z=0}else K=q,z=W7(K)}if(Y)W9(Z,K,z);else if(J)W9(Z,J,Q)}function e2(Z){let X=Z.domSelectionRange(),K=X.focusNode,z=X.focusOffset;if(!K)return;let J=W7(K),Q,Y;for(;;)if(z<J){if(K.nodeType!=1)break;let q=K.childNodes[z];if(C3(q,1))Q=K,Y=++z;else break}else if(SX(K))break;else{let q=K.nextSibling;while(q&&C3(q,1))Q=q.parentNode,Y=W8(q)+1,q=q.nextSibling;if(!q){if(K=K.parentNode,K==Z.dom)break;z=J=0}else K=q,z=0,J=W7(K)}if(Q)W9(Z,Q,Y)}function SX(Z){let X=Z.pmViewDesc;return X&&X.node&&X.node.isBlock}function Zq(Z,X){while(Z&&X==Z.childNodes.length&&!y3(Z))X=W8(Z)+1,Z=Z.parentNode;while(Z&&X<Z.childNodes.length){let K=Z.childNodes[X];if(K.nodeType==3)return K;if(K.nodeType==1&&K.contentEditable=="false")break;Z=K,X=0}}function Xq(Z,X){while(Z&&!X&&!y3(Z))X=W8(Z),Z=Z.parentNode;while(Z&&X){let K=Z.childNodes[X-1];if(K.nodeType==3)return K;if(K.nodeType==1&&K.contentEditable=="false")break;Z=K,X=Z.childNodes.length}}function W9(Z,X,K){if(X.nodeType!=3){let Q,Y;if(Y=Zq(X,K))X=Y,K=0;else if(Q=Xq(X,K))X=Q,K=Q.nodeValue.length}let z=Z.domSelection();if(!z)return;if(R7(z)){let Q=document.createRange();Q.setEnd(X,K),Q.setStart(X,K),z.removeAllRanges(),z.addRange(Q)}else if(z.extend)z.extend(X,K);Z.domObserver.setCurSelection();let{state:J}=Z;setTimeout(()=>{if(Z.state==J)E5(Z)},50)}function dZ(Z,X){let K=Z.state.doc.resolve(X);if(!(I8||S2)&&K.parent.inlineContent){let J=Z.coordsAtPos(X);if(X>K.start()){let Q=Z.coordsAtPos(X-1),Y=(Q.top+Q.bottom)/2;if(Y>J.top&&Y<J.bottom&&Math.abs(Q.left-J.left)>1)return Q.left<J.left?"ltr":"rtl"}if(X<K.end()){let Q=Z.coordsAtPos(X+1),Y=(Q.top+Q.bottom)/2;if(Y>J.top&&Y<J.bottom&&Math.abs(Q.left-J.left)>1)return Q.left>J.left?"ltr":"rtl"}}return getComputedStyle(Z.dom).direction=="rtl"?"rtl":"ltr"}function sZ(Z,X,K){let z=Z.state.selection;if(z instanceof _&&!z.empty||K.indexOf("s")>-1)return!1;if(_8&&K.indexOf("m")>-1)return!1;let{$from:J,$to:Q}=z;if(!J.parent.inlineContent||Z.endOfTextblock(X<0?"up":"down")){let Y=V9(Z.state,X);if(Y&&Y instanceof u)return h5(Z,Y)}if(!J.parent.inlineContent){let Y=X<0?J:Q,q=z instanceof q8?$.near(Y,X):$.findFrom(Y,X);return q?h5(Z,q):!1}return!1}function nZ(Z,X){if(!(Z.state.selection instanceof _))return!0;let{$head:K,$anchor:z,empty:J}=Z.state.selection;if(!K.sameParent(z))return!0;if(!J)return!1;if(Z.endOfTextblock(X>0?"forward":"backward"))return!0;let Q=!K.textOffset&&(X<0?K.nodeBefore:K.nodeAfter);if(Q&&!Q.isText){let Y=Z.state.tr;if(X<0)Y.delete(K.pos-Q.nodeSize,K.pos);else Y.delete(K.pos,K.pos+Q.nodeSize);return Z.dispatch(Y),!0}return!1}function aZ(Z,X,K){Z.domObserver.stop(),X.contentEditable=K,Z.domObserver.start()}function Kq(Z){if(!y8||Z.state.selection.$head.parentOffset>0)return!1;let{focusNode:X,focusOffset:K}=Z.domSelectionRange();if(X&&X.nodeType==1&&K==0&&X.firstChild&&X.firstChild.contentEditable=="false"){let z=X.firstChild;aZ(Z,z,"true"),setTimeout(()=>aZ(Z,z,"false"),20)}return!1}function zq(Z){let X="";if(Z.ctrlKey)X+="c";if(Z.metaKey)X+="m";if(Z.altKey)X+="a";if(Z.shiftKey)X+="s";return X}function Jq(Z,X){let K=X.keyCode,z=zq(X);if(K==8||_8&&K==72&&z=="c")return nZ(Z,-1)||h0(Z,-1);else if(K==46&&!X.shiftKey||_8&&K==68&&z=="c")return nZ(Z,1)||h0(Z,1);else if(K==13||K==27)return!0;else if(K==37||_8&&K==66&&z=="c"){let J=K==37?dZ(Z,Z.state.selection.from)=="ltr"?-1:1:-1;return iZ(Z,J,z)||h0(Z,J)}else if(K==39||_8&&K==70&&z=="c"){let J=K==39?dZ(Z,Z.state.selection.from)=="ltr"?1:-1:1;return iZ(Z,J,z)||h0(Z,J)}else if(K==38||_8&&K==80&&z=="c")return sZ(Z,-1,z)||h0(Z,-1);else if(K==40||_8&&K==78&&z=="c")return Kq(Z)||sZ(Z,1,z)||h0(Z,1);else if(z==(_8?"m":"c")&&(K==66||K==73||K==89||K==90))return!0;return!1}function P9(Z,X){Z.someProp("transformCopied",(j)=>{X=j(X,Z)});let K=[],{content:z,openStart:J,openEnd:Q}=X;while(J>1&&Q>1&&z.childCount==1&&z.firstChild.childCount==1){J--,Q--;let j=z.firstChild;K.push(j.type.name,j.attrs!=j.type.defaultAttrs?j.attrs:null),z=j.content}let Y=Z.someProp("clipboardSerializer")||T5.fromSchema(Z.state.schema),q=xX(),G=q.createElement("div");G.appendChild(Y.serializeFragment(z,{document:q}));let U=G.firstChild,V,W=0;while(U&&U.nodeType==1&&(V=TX[U.nodeName.toLowerCase()])){for(let j=V.length-1;j>=0;j--){let H=q.createElement(V[j]);while(G.firstChild)H.appendChild(G.firstChild);G.appendChild(H),W++}U=G.firstChild}if(U&&U.nodeType==1)U.setAttribute("data-pm-slice",`${J} ${Q}${W?` -${W}`:""} ${JSON.stringify(K)}`);let A=Z.someProp("clipboardTextSerializer",(j)=>j(X,Z))||X.content.textBetween(0,X.content.size,`

`);return{dom:G,text:A,slice:X}}function kX(Z,X,K,z,J){let Q=J.parent.type.spec.code,Y,q;if(!K&&!X)return null;let G=X&&(z||Q||!K);if(G){if(Z.someProp("transformPastedText",(A)=>{X=A(X,Q||z,Z)}),Q)return X?new S(M.from(Z.state.schema.text(X.replace(/\r\n?/g,`
`))),0,0):S.empty;let W=Z.someProp("clipboardTextParser",(A)=>A(X,J,z,Z));if(W)q=W;else{let A=J.marks(),{schema:j}=Z.state,H=T5.fromSchema(j);Y=document.createElement("div"),X.split(/(?:\r\n?|\n)+/).forEach((R)=>{let F=Y.appendChild(document.createElement("p"));if(R)F.appendChild(H.serializeNode(j.text(R,A)))})}}else if(Z.someProp("transformPastedHTML",(W)=>{K=W(K,Z)}),Y=Gq(K),N3)Uq(Y);let U=Y&&Y.querySelector("[data-pm-slice]"),V=U&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(U.getAttribute("data-pm-slice")||"");if(V&&V[3])for(let W=+V[3];W>0;W--){let A=Y.firstChild;while(A&&A.nodeType!=1)A=A.nextSibling;if(!A)break;Y=A}if(!q)q=(Z.someProp("clipboardParser")||Z.someProp("domParser")||Z5.fromSchema(Z.state.schema)).parseSlice(Y,{preserveWhitespace:!!(G||V),context:J,ruleFromNode(A){if(A.nodeName=="BR"&&!A.nextSibling&&A.parentNode&&!Qq.test(A.parentNode.nodeName))return{ignore:!0};return null}});if(V)q=Vq(rZ(q,+V[1],+V[2]),V[4]);else if(q=S.maxOpen(Yq(q.content,J),!0),q.openStart||q.openEnd){let W=0,A=0;for(let j=q.content.firstChild;W<q.openStart&&!j.type.spec.isolating;W++,j=j.firstChild);for(let j=q.content.lastChild;A<q.openEnd&&!j.type.spec.isolating;A++,j=j.lastChild);q=rZ(q,W,A)}return Z.someProp("transformPasted",(W)=>{q=W(q,Z)}),q}var Qq=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Yq(Z,X){if(Z.childCount<2)return Z;for(let K=X.depth;K>=0;K--){let J=X.node(K).contentMatchAt(X.index(K)),Q,Y=[];if(Z.forEach((q)=>{if(!Y)return;let G=J.findWrapping(q.type),U;if(!G)return Y=null;if(U=Y.length&&Q.length&&yX(G,Q,q,Y[Y.length-1],0))Y[Y.length-1]=U;else{if(Y.length)Y[Y.length-1]=NX(Y[Y.length-1],Q.length);let V=bX(q,G);Y.push(V),J=J.matchType(V.type),Q=G}}),Y)return M.from(Y)}return Z}function bX(Z,X,K=0){for(let z=X.length-1;z>=K;z--)Z=X[z].create(null,M.from(Z));return Z}function yX(Z,X,K,z,J){if(J<Z.length&&J<X.length&&Z[J]==X[J]){let Q=yX(Z,X,K,z.lastChild,J+1);if(Q)return z.copy(z.content.replaceChild(z.childCount-1,Q));if(z.contentMatchAt(z.childCount).matchType(J==Z.length-1?K.type:Z[J+1]))return z.copy(z.content.append(M.from(bX(K,Z,J+1))))}}function NX(Z,X){if(X==0)return Z;let K=Z.content.replaceChild(Z.childCount-1,NX(Z.lastChild,X-1)),z=Z.contentMatchAt(Z.childCount).fillBefore(M.empty,!0);return Z.copy(K.append(z))}function A9(Z,X,K,z,J,Q){let Y=X<0?Z.firstChild:Z.lastChild,q=Y.content;if(Z.childCount>1)Q=0;if(J<z-1)q=A9(q,X,K,z,J+1,Q);if(J>=K)q=X<0?Y.contentMatchAt(0).fillBefore(q,Q<=J).append(q):q.append(Y.contentMatchAt(Y.childCount).fillBefore(M.empty,!0));return Z.replaceChild(X<0?0:Z.childCount-1,Y.copy(q))}function rZ(Z,X,K){if(X<Z.openStart)Z=new S(A9(Z.content,-1,X,Z.openStart,0,Z.openEnd),X,Z.openEnd);if(K<Z.openEnd)Z=new S(A9(Z.content,1,K,Z.openEnd,0,0),Z.openStart,K);return Z}var TX={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},oZ=null;function xX(){return oZ||(oZ=document.implementation.createHTMLDocument("title"))}var X9=null;function qq(Z){let X=window.trustedTypes;if(!X)return Z;if(!X9)X9=X.defaultPolicy||X.createPolicy("ProseMirrorClipboard",{createHTML:(K)=>K});return X9.createHTML(Z)}function Gq(Z){let X=/^(\s*<meta [^>]*>)*/.exec(Z);if(X)Z=Z.slice(X[0].length);let K=xX().createElement("div"),z=/<([a-z][^>\s]+)/i.exec(Z),J;if(J=z&&TX[z[1].toLowerCase()])Z=J.map((Q)=>"<"+Q+">").join("")+Z+J.map((Q)=>"</"+Q+">").reverse().join("");if(K.innerHTML=qq(Z),J)for(let Q=0;Q<J.length;Q++)K=K.querySelector(J[Q])||K;return K}function Uq(Z){let X=Z.querySelectorAll(I8?"span:not([class]):not([style])":"span.Apple-converted-space");for(let K=0;K<X.length;K++){let z=X[K];if(z.childNodes.length==1&&z.textContent==" "&&z.parentNode)z.parentNode.replaceChild(Z.ownerDocument.createTextNode(" "),z)}}function Vq(Z,X){if(!Z.size)return Z;let K=Z.content.firstChild.type.schema,z;try{z=JSON.parse(X)}catch(q){return Z}let{content:J,openStart:Q,openEnd:Y}=Z;for(let q=z.length-2;q>=0;q-=2){let G=K.nodes[z[q]];if(!G||G.hasRequiredAttrs())break;J=M.from(G.create(z[q+1],J)),Q++,Y++}return new S(J,Q,Y)}var N8={},T8={},Wq={touchstart:!0,touchmove:!0};class gX{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-200000000,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Aq(Z){for(let X in N8){let K=N8[X];Z.dom.addEventListener(X,Z.input.eventHandlers[X]=(z)=>{if(jq(Z,z)&&!O9(Z,z)&&(Z.editable||!(z.type in T8)))K(Z,z)},Wq[X]?{passive:!0}:void 0)}if(y8)Z.dom.addEventListener("input",()=>null);H9(Z)}function _5(Z,X){Z.input.lastSelectionOrigin=X,Z.input.lastSelectionTime=Date.now()}function Hq(Z){Z.domObserver.stop();for(let X in Z.input.eventHandlers)Z.dom.removeEventListener(X,Z.input.eventHandlers[X]);clearTimeout(Z.input.composingTimeout),clearTimeout(Z.input.lastIOSEnterFallbackTimeout)}function H9(Z){Z.someProp("handleDOMEvents",(X)=>{for(let K in X)if(!Z.input.eventHandlers[K])Z.dom.addEventListener(K,Z.input.eventHandlers[K]=(z)=>O9(Z,z))})}function O9(Z,X){return Z.someProp("handleDOMEvents",(K)=>{let z=K[X.type];return z?z(Z,X)||X.defaultPrevented:!1})}function jq(Z,X){if(!X.bubbles)return!0;if(X.defaultPrevented)return!1;for(let K=X.target;K!=Z.dom;K=K.parentNode)if(!K||K.nodeType==11||K.pmViewDesc&&K.pmViewDesc.stopEvent(X))return!1;return!0}function Rq(Z,X){if(!O9(Z,X)&&N8[X.type]&&(Z.editable||!(X.type in T8)))N8[X.type](Z,X)}T8.keydown=(Z,X)=>{let K=X;if(Z.input.shiftKey=K.keyCode==16||K.shiftKey,vX(Z,K))return;if(Z.input.lastKeyCode=K.keyCode,Z.input.lastKeyCodeTime=Date.now(),B5&&I8&&K.keyCode==13)return;if(K.keyCode!=229)Z.domObserver.forceFlush();if(l0&&K.keyCode==13&&!K.ctrlKey&&!K.altKey&&!K.metaKey){let z=Date.now();Z.input.lastIOSEnter=z,Z.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{if(Z.input.lastIOSEnter==z)Z.someProp("handleKeyDown",(J)=>J(Z,K0(13,"Enter"))),Z.input.lastIOSEnter=0},200)}else if(Z.someProp("handleKeyDown",(z)=>z(Z,K))||Jq(Z,K))K.preventDefault();else _5(Z,"key")};T8.keyup=(Z,X)=>{if(X.keyCode==16)Z.input.shiftKey=!1};T8.keypress=(Z,X)=>{let K=X;if(vX(Z,K)||!K.charCode||K.ctrlKey&&!K.altKey||_8&&K.metaKey)return;if(Z.someProp("handleKeyPress",(J)=>J(Z,K))){K.preventDefault();return}let z=Z.state.selection;if(!(z instanceof _)||!z.$from.sameParent(z.$to)){let J=String.fromCharCode(K.charCode);if(!/[\r\n]/.test(J)&&!Z.someProp("handleTextInput",(Q)=>Q(Z,z.$from.pos,z.$to.pos,J)))Z.dispatch(Z.state.tr.insertText(J).scrollIntoView());K.preventDefault()}};function B7(Z){return{left:Z.clientX,top:Z.clientY}}function Fq(Z,X){let K=X.x-Z.clientX,z=X.y-Z.clientY;return K*K+z*z<100}function L9(Z,X,K,z,J){if(z==-1)return!1;let Q=Z.state.doc.resolve(z);for(let Y=Q.depth+1;Y>0;Y--)if(Z.someProp(X,(q)=>Y>Q.depth?q(Z,K,Q.nodeAfter,Q.before(Y),J,!0):q(Z,K,Q.node(Y),Q.before(Y),J,!1)))return!0;return!1}function _0(Z,X,K){if(!Z.focused)Z.focus();if(Z.state.selection.eq(X))return;let z=Z.state.tr.setSelection(X);if(K=="pointer")z.setMeta("pointer",!0);Z.dispatch(z)}function Bq(Z,X){if(X==-1)return!1;let K=Z.state.doc.resolve(X),z=K.nodeAfter;if(z&&z.isAtom&&u.isSelectable(z))return _0(Z,new u(K),"pointer"),!0;return!1}function Eq(Z,X){if(X==-1)return!1;let K=Z.state.selection,z,J;if(K instanceof u)z=K.node;let Q=Z.state.doc.resolve(X);for(let Y=Q.depth+1;Y>0;Y--){let q=Y>Q.depth?Q.nodeAfter:Q.node(Y);if(u.isSelectable(q)){if(z&&K.$from.depth>0&&Y>=K.$from.depth&&Q.before(K.$from.depth+1)==K.$from.pos)J=Q.before(K.$from.depth);else J=Q.before(Y);break}}if(J!=null)return _0(Z,u.create(Z.state.doc,J),"pointer"),!0;else return!1}function Pq(Z,X,K,z,J){return L9(Z,"handleClickOn",X,K,z)||Z.someProp("handleClick",(Q)=>Q(Z,X,z))||(J?Eq(Z,K):Bq(Z,K))}function Oq(Z,X,K,z){return L9(Z,"handleDoubleClickOn",X,K,z)||Z.someProp("handleDoubleClick",(J)=>J(Z,X,z))}function Lq(Z,X,K,z){return L9(Z,"handleTripleClickOn",X,K,z)||Z.someProp("handleTripleClick",(J)=>J(Z,X,z))||Mq(Z,K,z)}function Mq(Z,X,K){if(K.button!=0)return!1;let z=Z.state.doc;if(X==-1){if(z.inlineContent)return _0(Z,_.create(z,0,z.content.size),"pointer"),!0;return!1}let J=z.resolve(X);for(let Q=J.depth+1;Q>0;Q--){let Y=Q>J.depth?J.nodeAfter:J.node(Q),q=J.before(Q);if(Y.inlineContent)_0(Z,_.create(z,q+1,q+1+Y.content.size),"pointer");else if(u.isSelectable(Y))_0(Z,u.create(z,q),"pointer");else continue;return!0}}function M9(Z){return A7(Z)}var uX=_8?"metaKey":"ctrlKey";N8.mousedown=(Z,X)=>{let K=X;Z.input.shiftKey=K.shiftKey;let z=M9(Z),J=Date.now(),Q="singleClick";if(J-Z.input.lastClick.time<500&&Fq(K,Z.input.lastClick)&&!K[uX]){if(Z.input.lastClick.type=="singleClick")Q="doubleClick";else if(Z.input.lastClick.type=="doubleClick")Q="tripleClick"}Z.input.lastClick={time:J,x:K.clientX,y:K.clientY,type:Q};let Y=Z.posAtCoords(B7(K));if(!Y)return;if(Q=="singleClick"){if(Z.input.mouseDown)Z.input.mouseDown.done();Z.input.mouseDown=new wX(Z,Y,K,!!z)}else if((Q=="doubleClick"?Oq:Lq)(Z,Y.pos,Y.inside,K))K.preventDefault();else _5(Z,"pointer")};class wX{constructor(Z,X,K,z){this.view=Z,this.pos=X,this.event=K,this.flushed=z,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=Z.state.doc,this.selectNode=!!K[uX],this.allowDefault=K.shiftKey;let J,Q;if(X.inside>-1)J=Z.state.doc.nodeAt(X.inside),Q=X.inside;else{let U=Z.state.doc.resolve(X.pos);J=U.parent,Q=U.depth?U.before():0}let Y=z?null:K.target,q=Y?Z.docView.nearestDesc(Y,!0):null;this.target=q&&q.dom.nodeType==1?q.dom:null;let{selection:G}=Z.state;if(K.button==0&&J.type.spec.draggable&&J.type.spec.selectable!==!1||G instanceof u&&G.from<=Q&&G.to>Q)this.mightDrag={node:J,pos:Q,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&i8&&!this.target.hasAttribute("contentEditable"))};if(this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)){if(this.view.domObserver.stop(),this.mightDrag.addAttr)this.target.draggable=!0;if(this.mightDrag.setUneditable)setTimeout(()=>{if(this.view.input.mouseDown==this)this.target.setAttribute("contentEditable","false")},20);this.view.domObserver.start()}Z.root.addEventListener("mouseup",this.up=this.up.bind(this)),Z.root.addEventListener("mousemove",this.move=this.move.bind(this)),_5(Z,"pointer")}done(){if(this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target){if(this.view.domObserver.stop(),this.mightDrag.addAttr)this.target.removeAttribute("draggable");if(this.mightDrag.setUneditable)this.target.removeAttribute("contentEditable");this.view.domObserver.start()}if(this.delayedSelectionSync)setTimeout(()=>E5(this.view));this.view.input.mouseDown=null}up(Z){if(this.done(),!this.view.dom.contains(Z.target))return;let X=this.pos;if(this.view.state.doc!=this.startDoc)X=this.view.posAtCoords(B7(Z));if(this.updateAllowDefault(Z),this.allowDefault||!X)_5(this.view,"pointer");else if(Pq(this.view,X.pos,X.inside,Z,this.selectNode))Z.preventDefault();else if(Z.button==0&&(this.flushed||y8&&this.mightDrag&&!this.mightDrag.node.isAtom||I8&&!this.view.state.selection.visible&&Math.min(Math.abs(X.pos-this.view.state.selection.from),Math.abs(X.pos-this.view.state.selection.to))<=2))_0(this.view,$.near(this.view.state.doc.resolve(X.pos)),"pointer"),Z.preventDefault();else _5(this.view,"pointer")}move(Z){if(this.updateAllowDefault(Z),_5(this.view,"pointer"),Z.buttons==0)this.done()}updateAllowDefault(Z){if(!this.allowDefault&&(Math.abs(this.event.x-Z.clientX)>4||Math.abs(this.event.y-Z.clientY)>4))this.allowDefault=!0}}N8.touchstart=(Z)=>{Z.input.lastTouch=Date.now(),M9(Z),_5(Z,"pointer")};N8.touchmove=(Z)=>{Z.input.lastTouch=Date.now(),_5(Z,"pointer")};N8.contextmenu=(Z)=>M9(Z);function vX(Z,X){if(Z.composing)return!0;if(y8&&Math.abs(X.timeStamp-Z.input.compositionEndedAt)<500)return Z.input.compositionEndedAt=-200000000,!0;return!1}var Dq=B5?5000:-1;T8.compositionstart=T8.compositionupdate=(Z)=>{if(!Z.composing){Z.domObserver.flush();let{state:X}=Z,K=X.selection.$to;if(X.selection instanceof _&&(X.storedMarks||!K.textOffset&&K.parentOffset&&K.nodeBefore.marks.some((z)=>z.type.spec.inclusive===!1)))Z.markCursor=Z.state.storedMarks||K.marks(),A7(Z,!0),Z.markCursor=null;else if(A7(Z,!X.selection.empty),i8&&X.selection.empty&&K.parentOffset&&!K.textOffset&&K.nodeBefore.marks.length){let z=Z.domSelectionRange();for(let{focusNode:J,focusOffset:Q}=z;J&&J.nodeType==1&&Q!=0;){let Y=Q<0?J.lastChild:J.childNodes[Q-1];if(!Y)break;if(Y.nodeType==3){let q=Z.domSelection();if(q)q.collapse(Y,Y.nodeValue.length);break}else J=Y,Q=-1}}Z.input.composing=!0}$X(Z,Dq)};T8.compositionend=(Z,X)=>{if(Z.composing){if(Z.input.composing=!1,Z.input.compositionEndedAt=X.timeStamp,Z.input.compositionPendingChanges=Z.domObserver.pendingRecords().length?Z.input.compositionID:0,Z.input.compositionNode=null,Z.input.compositionPendingChanges)Promise.resolve().then(()=>Z.domObserver.flush());Z.input.compositionID++,$X(Z,20)}};function $X(Z,X){if(clearTimeout(Z.input.composingTimeout),X>-1)Z.input.composingTimeout=setTimeout(()=>A7(Z),X)}function hX(Z){if(Z.composing)Z.input.composing=!1,Z.input.compositionEndedAt=Cq();while(Z.input.compositionNodes.length>0)Z.input.compositionNodes.pop().markParentsDirty()}function Iq(Z){let X=Z.domSelectionRange();if(!X.focusNode)return null;let K=L2(X.focusNode,X.focusOffset),z=M2(X.focusNode,X.focusOffset);if(K&&z&&K!=z){let J=z.pmViewDesc,Q=Z.domObserver.lastChangedTextNode;if(K==Q||z==Q)return Q;if(!J||!J.isText(z.nodeValue))return z;else if(Z.input.compositionNode==z){let Y=K.pmViewDesc;if(!(!Y||!Y.isText(K.nodeValue)))return z}}return K||z}function Cq(){let Z=document.createEvent("Event");return Z.initEvent("event",!0,!0),Z.timeStamp}function A7(Z,X=!1){if(B5&&Z.domObserver.flushingSoon>=0)return;if(Z.domObserver.forceFlush(),hX(Z),X||Z.docView&&Z.docView.dirty){let K=B9(Z);if(K&&!K.eq(Z.state.selection))Z.dispatch(Z.state.tr.setSelection(K));else if((Z.markCursor||X)&&!Z.state.selection.empty)Z.dispatch(Z.state.tr.deleteSelection());else Z.updateState(Z.state);return!0}return!1}function Sq(Z,X){if(!Z.dom.parentNode)return;let K=Z.dom.parentNode.appendChild(document.createElement("div"));K.appendChild(X),K.style.cssText="position: fixed; left: -10000px; top: 10px";let z=getSelection(),J=document.createRange();J.selectNodeContents(X),Z.dom.blur(),z.removeAllRanges(),z.addRange(J),setTimeout(()=>{if(K.parentNode)K.parentNode.removeChild(K);Z.focus()},50)}var S3=u8&&m5<15||l0&&k2<604;N8.copy=T8.cut=(Z,X)=>{let K=X,z=Z.state.selection,J=K.type=="cut";if(z.empty)return;let Q=S3?null:K.clipboardData,Y=z.content(),{dom:q,text:G}=P9(Z,Y);if(Q)K.preventDefault(),Q.clearData(),Q.setData("text/html",q.innerHTML),Q.setData("text/plain",G);else Sq(Z,q);if(J)Z.dispatch(Z.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function kq(Z){return Z.openStart==0&&Z.openEnd==0&&Z.content.childCount==1?Z.content.firstChild:null}function bq(Z,X){if(!Z.dom.parentNode)return;let K=Z.input.shiftKey||Z.state.selection.$from.parent.type.spec.code,z=Z.dom.parentNode.appendChild(document.createElement(K?"textarea":"div"));if(!K)z.contentEditable="true";z.style.cssText="position: fixed; left: -10000px; top: 10px",z.focus();let J=Z.input.shiftKey&&Z.input.lastKeyCode!=45;setTimeout(()=>{if(Z.focus(),z.parentNode)z.parentNode.removeChild(z);if(K)k3(Z,z.value,null,J,X);else k3(Z,z.textContent,z.innerHTML,J,X)},50)}function k3(Z,X,K,z,J){let Q=kX(Z,X,K,z,Z.state.selection.$from);if(Z.someProp("handlePaste",(G)=>G(Z,J,Q||S.empty)))return!0;if(!Q)return!1;let Y=kq(Q),q=Y?Z.state.tr.replaceSelectionWith(Y,z):Z.state.tr.replaceSelection(Q);return Z.dispatch(q.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function fX(Z){let X=Z.getData("text/plain")||Z.getData("Text");if(X)return X;let K=Z.getData("text/uri-list");return K?K.replace(/\r?\n/g," "):""}T8.paste=(Z,X)=>{let K=X;if(Z.composing&&!B5)return;let z=S3?null:K.clipboardData,J=Z.input.shiftKey&&Z.input.lastKeyCode!=45;if(z&&k3(Z,fX(z),z.getData("text/html"),J,K))K.preventDefault();else bq(Z,K)};class D9{constructor(Z,X,K){this.slice=Z,this.move=X,this.node=K}}var yq=_8?"altKey":"ctrlKey";function _X(Z,X){let K=Z.someProp("dragCopies",(z)=>!z(X));return K!=null?K:!X[yq]}N8.dragstart=(Z,X)=>{let K=X,z=Z.input.mouseDown;if(z)z.done();if(!K.dataTransfer)return;let J=Z.state.selection,Q=J.empty?null:Z.posAtCoords(B7(K)),Y;if(Q&&Q.pos>=J.from&&Q.pos<=(J instanceof u?J.to-1:J.to));else if(z&&z.mightDrag)Y=u.create(Z.state.doc,z.mightDrag.pos);else if(K.target&&K.target.nodeType==1){let W=Z.docView.nearestDesc(K.target,!0);if(W&&W.node.type.spec.draggable&&W!=Z.docView)Y=u.create(Z.state.doc,W.posBefore)}let q=(Y||Z.state.selection).content(),{dom:G,text:U,slice:V}=P9(Z,q);if(!K.dataTransfer.files.length||!I8||VX>120)K.dataTransfer.clearData();if(K.dataTransfer.setData(S3?"Text":"text/html",G.innerHTML),K.dataTransfer.effectAllowed="copyMove",!S3)K.dataTransfer.setData("text/plain",U);Z.dragging=new D9(V,_X(Z,K),Y)};N8.dragend=(Z)=>{let X=Z.dragging;window.setTimeout(()=>{if(Z.dragging==X)Z.dragging=null},50)};T8.dragover=T8.dragenter=(Z,X)=>X.preventDefault();T8.drop=(Z,X)=>{let K=X,z=Z.dragging;if(Z.dragging=null,!K.dataTransfer)return;let J=Z.posAtCoords(B7(K));if(!J)return;let Q=Z.state.doc.resolve(J.pos),Y=z&&z.slice;if(Y)Z.someProp("transformPasted",(H)=>{Y=H(Y,Z)});else Y=kX(Z,fX(K.dataTransfer),S3?null:K.dataTransfer.getData("text/html"),!1,Q);let q=!!(z&&_X(Z,K));if(Z.someProp("handleDrop",(H)=>H(Z,K,Y||S.empty,q))){K.preventDefault();return}if(!Y)return;K.preventDefault();let G=Y?RZ(Z.state.doc,Q.pos,Y):Q.pos;if(G==null)G=Q.pos;let U=Z.state.tr;if(q){let{node:H}=z;if(H)H.replace(U);else U.deleteSelection()}let V=U.mapping.map(G),W=Y.openStart==0&&Y.openEnd==0&&Y.content.childCount==1,A=U.doc;if(W)U.replaceRangeWith(V,V,Y.content.firstChild);else U.replaceRange(V,V,Y);if(U.doc.eq(A))return;let j=U.doc.resolve(V);if(W&&u.isSelectable(Y.content.firstChild)&&j.nodeAfter&&j.nodeAfter.sameMarkup(Y.content.firstChild))U.setSelection(new u(j));else{let H=U.mapping.map(G);U.mapping.maps[U.mapping.maps.length-1].forEach((R,F,B,O)=>H=O),U.setSelection(E9(Z,j,U.doc.resolve(H)))}Z.focus(),Z.dispatch(U.setMeta("uiEvent","drop"))};N8.focus=(Z)=>{if(Z.input.lastFocus=Date.now(),!Z.focused)Z.domObserver.stop(),Z.dom.classList.add("ProseMirror-focused"),Z.domObserver.start(),Z.focused=!0,setTimeout(()=>{if(Z.docView&&Z.hasFocus()&&!Z.domObserver.currentSelection.eq(Z.domSelectionRange()))E5(Z)},20)};N8.blur=(Z,X)=>{let K=X;if(Z.focused){if(Z.domObserver.stop(),Z.dom.classList.remove("ProseMirror-focused"),Z.domObserver.start(),K.relatedTarget&&Z.dom.contains(K.relatedTarget))Z.domObserver.currentSelection.clear();Z.focused=!1}};N8.beforeinput=(Z,X)=>{if(I8&&B5&&X.inputType=="deleteContentBackward"){Z.domObserver.flushSoon();let{domChangeCount:z}=Z.input;setTimeout(()=>{if(Z.input.domChangeCount!=z)return;if(Z.dom.blur(),Z.focus(),Z.someProp("handleKeyDown",(Q)=>Q(Z,K0(8,"Backspace"))))return;let{$cursor:J}=Z.state.selection;if(J&&J.pos>0)Z.dispatch(Z.state.tr.delete(J.pos-1,J.pos).scrollIntoView())},50)}};for(let Z in T8)N8[Z]=T8[Z];function b3(Z,X){if(Z==X)return!0;for(let K in Z)if(Z[K]!==X[K])return!1;for(let K in X)if(!(K in Z))return!1;return!0}class H7{constructor(Z,X){this.toDOM=Z,this.spec=X||Q0,this.side=this.spec.side||0}map(Z,X,K,z){let{pos:J,deleted:Q}=Z.mapResult(X.from+z,this.side<0?-1:1);return Q?null:new b8(J-K,J-K,this)}valid(){return!0}eq(Z){return this==Z||Z instanceof H7&&(this.spec.key&&this.spec.key==Z.spec.key||this.toDOM==Z.toDOM&&b3(this.spec,Z.spec))}destroy(Z){if(this.spec.destroy)this.spec.destroy(Z)}}class c5{constructor(Z,X){this.attrs=Z,this.spec=X||Q0}map(Z,X,K,z){let J=Z.map(X.from+z,this.spec.inclusiveStart?-1:1)-K,Q=Z.map(X.to+z,this.spec.inclusiveEnd?1:-1)-K;return J>=Q?null:new b8(J,Q,this)}valid(Z,X){return X.from<X.to}eq(Z){return this==Z||Z instanceof c5&&b3(this.attrs,Z.attrs)&&b3(this.spec,Z.spec)}static is(Z){return Z.type instanceof c5}destroy(){}}class I9{constructor(Z,X){this.attrs=Z,this.spec=X||Q0}map(Z,X,K,z){let J=Z.mapResult(X.from+z,1);if(J.deleted)return null;let Q=Z.mapResult(X.to+z,-1);if(Q.deleted||Q.pos<=J.pos)return null;return new b8(J.pos-K,Q.pos-K,this)}valid(Z,X){let{index:K,offset:z}=Z.content.findIndex(X.from),J;return z==X.from&&!(J=Z.child(K)).isText&&z+J.nodeSize==X.to}eq(Z){return this==Z||Z instanceof I9&&b3(this.attrs,Z.attrs)&&b3(this.spec,Z.spec)}destroy(){}}class b8{constructor(Z,X,K){this.from=Z,this.to=X,this.type=K}copy(Z,X){return new b8(Z,X,this.type)}eq(Z,X=0){return this.type.eq(Z.type)&&this.from+X==Z.from&&this.to+X==Z.to}map(Z,X,K){return this.type.map(Z,this,X,K)}static widget(Z,X,K){return new b8(Z,Z,new H7(X,K))}static inline(Z,X,K,z){return new b8(Z,X,new c5(K,z))}static node(Z,X,K,z){return new b8(Z,X,new I9(K,z))}get spec(){return this.type.spec}get inline(){return this.type instanceof c5}get widget(){return this.type instanceof H7}}var f0=[],Q0={};class o{constructor(Z,X){this.local=Z.length?Z:f0,this.children=X.length?X:f0}static create(Z,X){return X.length?j7(X,Z,0,Q0):D8}find(Z,X,K){let z=[];return this.findInner(Z==null?0:Z,X==null?1e9:X,z,0,K),z}findInner(Z,X,K,z,J){for(let Q=0;Q<this.local.length;Q++){let Y=this.local[Q];if(Y.from<=X&&Y.to>=Z&&(!J||J(Y.spec)))K.push(Y.copy(Y.from+z,Y.to+z))}for(let Q=0;Q<this.children.length;Q+=3)if(this.children[Q]<X&&this.children[Q+1]>Z){let Y=this.children[Q]+1;this.children[Q+2].findInner(Z-Y,X-Y,K,z+Y,J)}}map(Z,X,K){if(this==D8||Z.maps.length==0)return this;return this.mapInner(Z,X,0,0,K||Q0)}mapInner(Z,X,K,z,J){let Q;for(let Y=0;Y<this.local.length;Y++){let q=this.local[Y].map(Z,K,z);if(q&&q.type.valid(X,q))(Q||(Q=[])).push(q);else if(J.onRemove)J.onRemove(this.local[Y].spec)}if(this.children.length)return Nq(this.children,Q||[],Z,X,K,z,J);else return Q?new o(Q.sort(Y0),f0):D8}add(Z,X){if(!X.length)return this;if(this==D8)return o.create(Z,X);return this.addInner(Z,X,0)}addInner(Z,X,K){let z,J=0;Z.forEach((Y,q)=>{let G=q+K,U;if(!(U=lX(X,Y,G)))return;if(!z)z=this.children.slice();while(J<z.length&&z[J]<q)J+=3;if(z[J]==q)z[J+2]=z[J+2].addInner(Y,U,G+1);else z.splice(J,0,q,q+Y.nodeSize,j7(U,Y,G+1,Q0));J+=3});let Q=mX(J?cX(X):X,-K);for(let Y=0;Y<Q.length;Y++)if(!Q[Y].type.valid(Z,Q[Y]))Q.splice(Y--,1);return new o(Q.length?this.local.concat(Q).sort(Y0):this.local,z||this.children)}remove(Z){if(Z.length==0||this==D8)return this;return this.removeInner(Z,0)}removeInner(Z,X){let K=this.children,z=this.local;for(let J=0;J<K.length;J+=3){let Q,Y=K[J]+X,q=K[J+1]+X;for(let U=0,V;U<Z.length;U++)if(V=Z[U]){if(V.from>Y&&V.to<q)Z[U]=null,(Q||(Q=[])).push(V)}if(!Q)continue;if(K==this.children)K=this.children.slice();let G=K[J+2].removeInner(Q,Y+1);if(G!=D8)K[J+2]=G;else K.splice(J,3),J-=3}if(z.length){for(let J=0,Q;J<Z.length;J++)if(Q=Z[J]){for(let Y=0;Y<z.length;Y++)if(z[Y].eq(Q,X)){if(z==this.local)z=this.local.slice();z.splice(Y--,1)}}}if(K==this.children&&z==this.local)return this;return z.length||K.length?new o(z,K):D8}forChild(Z,X){if(this==D8)return this;if(X.isLeaf)return o.empty;let K,z;for(let Y=0;Y<this.children.length;Y+=3)if(this.children[Y]>=Z){if(this.children[Y]==Z)K=this.children[Y+2];break}let J=Z+1,Q=J+X.content.size;for(let Y=0;Y<this.local.length;Y++){let q=this.local[Y];if(q.from<Q&&q.to>J&&q.type instanceof c5){let G=Math.max(J,q.from)-J,U=Math.min(Q,q.to)-J;if(G<U)(z||(z=[])).push(q.copy(G,U))}}if(z){let Y=new o(z.sort(Y0),f0);return K?new f5([Y,K]):Y}return K||D8}eq(Z){if(this==Z)return!0;if(!(Z instanceof o)||this.local.length!=Z.local.length||this.children.length!=Z.children.length)return!1;for(let X=0;X<this.local.length;X++)if(!this.local[X].eq(Z.local[X]))return!1;for(let X=0;X<this.children.length;X+=3)if(this.children[X]!=Z.children[X]||this.children[X+1]!=Z.children[X+1]||!this.children[X+2].eq(Z.children[X+2]))return!1;return!0}locals(Z){return C9(this.localsInner(Z))}localsInner(Z){if(this==D8)return f0;if(Z.inlineContent||!this.local.some(c5.is))return this.local;let X=[];for(let K=0;K<this.local.length;K++)if(!(this.local[K].type instanceof c5))X.push(this.local[K]);return X}forEachSet(Z){Z(this)}}o.empty=new o([],[]);o.removeOverlap=C9;var D8=o.empty;class f5{constructor(Z){this.members=Z}map(Z,X){let K=this.members.map((z)=>z.map(Z,X,Q0));return f5.from(K)}forChild(Z,X){if(X.isLeaf)return o.empty;let K=[];for(let z=0;z<this.members.length;z++){let J=this.members[z].forChild(Z,X);if(J==D8)continue;if(J instanceof f5)K=K.concat(J.members);else K.push(J)}return f5.from(K)}eq(Z){if(!(Z instanceof f5)||Z.members.length!=this.members.length)return!1;for(let X=0;X<this.members.length;X++)if(!this.members[X].eq(Z.members[X]))return!1;return!0}locals(Z){let X,K=!0;for(let z=0;z<this.members.length;z++){let J=this.members[z].localsInner(Z);if(!J.length)continue;if(!X)X=J;else{if(K)X=X.slice(),K=!1;for(let Q=0;Q<J.length;Q++)X.push(J[Q])}}return X?C9(K?X:X.sort(Y0)):f0}static from(Z){switch(Z.length){case 0:return D8;case 1:return Z[0];default:return new f5(Z.every((X)=>X instanceof o)?Z:Z.reduce((X,K)=>X.concat(K instanceof o?K:K.members),[]))}}forEachSet(Z){for(let X=0;X<this.members.length;X++)this.members[X].forEachSet(Z)}}function Nq(Z,X,K,z,J,Q,Y){let q=Z.slice();for(let U=0,V=Q;U<K.maps.length;U++){let W=0;K.maps[U].forEach((A,j,H,R)=>{let F=R-H-(j-A);for(let B=0;B<q.length;B+=3){let O=q[B+1];if(O<0||A>O+V-W)continue;let L=q[B]+V-W;if(j>=L)q[B+1]=A<=L?-2:-1;else if(A>=V&&F)q[B]+=F,q[B+1]+=F}W+=F}),V=K.maps[U].map(V,-1)}let G=!1;for(let U=0;U<q.length;U+=3)if(q[U+1]<0){if(q[U+1]==-2){G=!0,q[U+1]=-1;continue}let V=K.map(Z[U]+Q),W=V-J;if(W<0||W>=z.content.size){G=!0;continue}let A=K.map(Z[U+1]+Q,-1),j=A-J,{index:H,offset:R}=z.content.findIndex(W),F=z.maybeChild(H);if(F&&R==W&&R+F.nodeSize==j){let B=q[U+2].mapInner(K,F,V+1,Z[U]+Q+1,Y);if(B!=D8)q[U]=W,q[U+1]=j,q[U+2]=B;else q[U+1]=-2,G=!0}else G=!0}if(G){let U=Tq(q,Z,X,K,J,Q,Y),V=j7(U,z,0,Y);X=V.local;for(let W=0;W<q.length;W+=3)if(q[W+1]<0)q.splice(W,3),W-=3;for(let W=0,A=0;W<V.children.length;W+=3){let j=V.children[W];while(A<q.length&&q[A]<j)A+=3;q.splice(A,0,V.children[W],V.children[W+1],V.children[W+2])}}return new o(X.sort(Y0),q)}function mX(Z,X){if(!X||!Z.length)return Z;let K=[];for(let z=0;z<Z.length;z++){let J=Z[z];K.push(new b8(J.from+X,J.to+X,J.type))}return K}function Tq(Z,X,K,z,J,Q,Y){function q(G,U){for(let V=0;V<G.local.length;V++){let W=G.local[V].map(z,J,U);if(W)K.push(W);else if(Y.onRemove)Y.onRemove(G.local[V].spec)}for(let V=0;V<G.children.length;V+=3)q(G.children[V+2],G.children[V]+U+1)}for(let G=0;G<Z.length;G+=3)if(Z[G+1]==-1)q(Z[G+2],X[G]+Q+1);return K}function lX(Z,X,K){if(X.isLeaf)return null;let z=K+X.nodeSize,J=null;for(let Q=0,Y;Q<Z.length;Q++)if((Y=Z[Q])&&Y.from>K&&Y.to<z)(J||(J=[])).push(Y),Z[Q]=null;return J}function cX(Z){let X=[];for(let K=0;K<Z.length;K++)if(Z[K]!=null)X.push(Z[K]);return X}function j7(Z,X,K,z){let J=[],Q=!1;X.forEach((q,G)=>{let U=lX(Z,q,G+K);if(U){Q=!0;let V=j7(U,q,K+G+1,z);if(V!=D8)J.push(G,G+q.nodeSize,V)}});let Y=mX(Q?cX(Z):Z,-K).sort(Y0);for(let q=0;q<Y.length;q++)if(!Y[q].type.valid(X,Y[q])){if(z.onRemove)z.onRemove(Y[q].spec);Y.splice(q--,1)}return Y.length||J.length?new o(Y,J):D8}function Y0(Z,X){return Z.from-X.from||Z.to-X.to}function C9(Z){let X=Z;for(let K=0;K<X.length-1;K++){let z=X[K];if(z.from!=z.to)for(let J=K+1;J<X.length;J++){let Q=X[J];if(Q.from==z.from){if(Q.to!=z.to){if(X==Z)X=Z.slice();X[J]=Q.copy(Q.from,z.to),tZ(X,J+1,Q.copy(z.to,Q.to))}continue}else{if(Q.from<z.to){if(X==Z)X=Z.slice();X[K]=z.copy(z.from,Q.from),tZ(X,J,z.copy(Q.from,z.to))}break}}}return X}function tZ(Z,X,K){while(X<Z.length&&Y0(K,Z[X])>0)X++;Z.splice(X,0,K)}function K9(Z){let X=[];if(Z.someProp("decorations",(K)=>{let z=K(Z.state);if(z&&z!=D8)X.push(z)}),Z.cursorWrapper)X.push(o.create(Z.state.doc,[Z.cursorWrapper.deco]));return f5.from(X)}var xq={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},gq=u8&&m5<=11;class pX{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(Z){this.anchorNode=Z.anchorNode,this.anchorOffset=Z.anchorOffset,this.focusNode=Z.focusNode,this.focusOffset=Z.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(Z){return Z.anchorNode==this.anchorNode&&Z.anchorOffset==this.anchorOffset&&Z.focusNode==this.focusNode&&Z.focusOffset==this.focusOffset}}class iX{constructor(Z,X){if(this.view=Z,this.handleDOMChange=X,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new pX,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver((K)=>{for(let z=0;z<K.length;z++)this.queue.push(K[z]);if(u8&&m5<=11&&K.some((z)=>z.type=="childList"&&z.removedNodes.length||z.type=="characterData"&&z.oldValue.length>z.target.nodeValue.length))this.flushSoon();else this.flush()}),gq)this.onCharData=(K)=>{this.queue.push({target:K.target,type:"characterData",oldValue:K.prevValue}),this.flushSoon()};this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){if(this.flushingSoon<0)this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20)}forceFlush(){if(this.flushingSoon>-1)window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush()}start(){if(this.observer)this.observer.takeRecords(),this.observer.observe(this.view.dom,xq);if(this.onCharData)this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData);this.connectSelection()}stop(){if(this.observer){let Z=this.observer.takeRecords();if(Z.length){for(let X=0;X<Z.length;X++)this.queue.push(Z[X]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}if(this.onCharData)this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData);this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(!pZ(this.view))return;if(this.suppressingSelectionUpdates)return E5(this.view);if(u8&&m5<=11&&!this.view.state.selection.empty){let Z=this.view.domSelectionRange();if(Z.focusNode&&q0(Z.focusNode,Z.focusOffset,Z.anchorNode,Z.anchorOffset))return this.flushSoon()}this.flush()}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(Z){if(!Z.focusNode)return!0;let X=new Set,K;for(let J=Z.focusNode;J;J=m0(J))X.add(J);for(let J=Z.anchorNode;J;J=m0(J))if(X.has(J)){K=J;break}let z=K&&this.view.docView.nearestDesc(K);if(z&&z.ignoreMutation({type:"selection",target:K.nodeType==3?K.parentNode:K}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let Z of this.observer.takeRecords())this.queue.push(Z);return this.queue}flush(){let{view:Z}=this;if(!Z.docView||this.flushingSoon>-1)return;let X=this.pendingRecords();if(X.length)this.queue=[];let K=Z.domSelectionRange(),z=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(K)&&pZ(Z)&&!this.ignoreSelectionChange(K),J=-1,Q=-1,Y=!1,q=[];if(Z.editable)for(let U=0;U<X.length;U++){let V=this.registerMutation(X[U],q);if(V){if(J=J<0?V.from:Math.min(V.from,J),Q=Q<0?V.to:Math.max(V.to,Q),V.typeOver)Y=!0}}if(i8&&q.length){let U=q.filter((V)=>V.nodeName=="BR");if(U.length==2){let[V,W]=U;if(V.parentNode&&V.parentNode.parentNode==W.parentNode)W.remove();else V.remove()}else{let{focusNode:V}=this.currentSelection;for(let W of U){let A=W.parentNode;if(A&&A.nodeName=="LI"&&(!V||vq(Z,V)!=A))W.remove()}}}let G=null;if(J<0&&z&&Z.input.lastFocus>Date.now()-200&&Math.max(Z.input.lastTouch,Z.input.lastClick.time)<Date.now()-300&&R7(K)&&(G=B9(Z))&&G.eq($.near(Z.state.doc.resolve(0),1)))Z.input.lastFocus=0,E5(Z),this.currentSelection.set(K),Z.scrollToSelection();else if(J>-1||z){if(J>-1)Z.docView.markDirty(J,Q),uq(Z);if(this.handleDOMChange(J,Q,Y,q),Z.docView&&Z.docView.dirty)Z.updateState(Z.state);else if(!this.currentSelection.eq(K))E5(Z);this.currentSelection.set(K)}}registerMutation(Z,X){if(X.indexOf(Z.target)>-1)return null;let K=this.view.docView.nearestDesc(Z.target);if(Z.type=="attributes"&&(K==this.view.docView||Z.attributeName=="contenteditable"||Z.attributeName=="style"&&!Z.oldValue&&!Z.target.getAttribute("style")))return null;if(!K||K.ignoreMutation(Z))return null;if(Z.type=="childList"){for(let U=0;U<Z.addedNodes.length;U++){let V=Z.addedNodes[U];if(X.push(V),V.nodeType==3)this.lastChangedTextNode=V}if(K.contentDOM&&K.contentDOM!=K.dom&&!K.contentDOM.contains(Z.target))return{from:K.posBefore,to:K.posAfter};let{previousSibling:z,nextSibling:J}=Z;if(u8&&m5<=11&&Z.addedNodes.length)for(let U=0;U<Z.addedNodes.length;U++){let{previousSibling:V,nextSibling:W}=Z.addedNodes[U];if(!V||Array.prototype.indexOf.call(Z.addedNodes,V)<0)z=V;if(!W||Array.prototype.indexOf.call(Z.addedNodes,W)<0)J=W}let Q=z&&z.parentNode==Z.target?W8(z)+1:0,Y=K.localPosFromDOM(Z.target,Q,-1),q=J&&J.parentNode==Z.target?W8(J):Z.target.childNodes.length,G=K.localPosFromDOM(Z.target,q,1);return{from:Y,to:G}}else if(Z.type=="attributes")return{from:K.posAtStart-K.border,to:K.posAtEnd+K.border};else return this.lastChangedTextNode=Z.target,{from:K.posAtStart,to:K.posAtEnd,typeOver:Z.target.nodeValue==Z.oldValue}}}var eZ=new WeakMap,ZX=!1;function uq(Z){if(eZ.has(Z))return;if(eZ.set(Z,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(Z.dom).whiteSpace)!==-1){if(Z.requiresGeckoHackNode=i8,ZX)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),ZX=!0}}function XX(Z,X){let{startContainer:K,startOffset:z,endContainer:J,endOffset:Q}=X,Y=Z.domAtPos(Z.state.selection.anchor);if(q0(Y.node,Y.offset,J,Q))[K,z,J,Q]=[J,Q,K,z];return{anchorNode:K,anchorOffset:z,focusNode:J,focusOffset:Q}}function wq(Z,X){if(X.getComposedRanges){let J=X.getComposedRanges(Z.root)[0];if(J)return XX(Z,J)}let K;function z(J){J.preventDefault(),J.stopImmediatePropagation(),K=J.getTargetRanges()[0]}return Z.dom.addEventListener("beforeinput",z,!0),document.execCommand("indent"),Z.dom.removeEventListener("beforeinput",z,!0),K?XX(Z,K):null}function vq(Z,X){for(let K=X.parentNode;K&&K!=Z.dom;K=K.parentNode){let z=Z.docView.nearestDesc(K,!0);if(z&&z.node.isBlock)return K}return null}function $q(Z,X,K){let{node:z,fromOffset:J,toOffset:Q,from:Y,to:q}=Z.docView.parseRange(X,K),G=Z.domSelectionRange(),U,V=G.anchorNode;if(V&&Z.dom.contains(V.nodeType==1?V:V.parentNode)){if(U=[{node:V,offset:G.anchorOffset}],!R7(G))U.push({node:G.focusNode,offset:G.focusOffset})}if(I8&&Z.input.lastKeyCode===8)for(let F=Q;F>J;F--){let B=z.childNodes[F-1],O=B.pmViewDesc;if(B.nodeName=="BR"&&!O){Q=F;break}if(!O||O.size)break}let W=Z.state.doc,A=Z.someProp("domParser")||Z5.fromSchema(Z.state.schema),j=W.resolve(Y),H=null,R=A.parse(z,{topNode:j.parent,topMatch:j.parent.contentMatchAt(j.index()),topOpen:!0,from:J,to:Q,preserveWhitespace:j.parent.type.whitespace=="pre"?"full":!0,findPositions:U,ruleFromNode:hq,context:j});if(U&&U[0].pos!=null){let F=U[0].pos,B=U[1]&&U[1].pos;if(B==null)B=F;H={anchor:F+Y,head:B+Y}}return{doc:R,sel:H,from:Y,to:q}}function hq(Z){let X=Z.pmViewDesc;if(X)return X.parseRule();else if(Z.nodeName=="BR"&&Z.parentNode){if(y8&&/^(ul|ol)$/i.test(Z.parentNode.nodeName)){let K=document.createElement("div");return K.appendChild(document.createElement("li")),{skip:K}}else if(Z.parentNode.lastChild==Z||y8&&/^(tr|table)$/i.test(Z.parentNode.nodeName))return{ignore:!0}}else if(Z.nodeName=="IMG"&&Z.getAttribute("mark-placeholder"))return{ignore:!0};return null}var fq=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function _q(Z,X,K,z,J){let Q=Z.input.compositionPendingChanges||(Z.composing?Z.input.compositionID:0);if(Z.input.compositionPendingChanges=0,X<0){let N=Z.input.lastSelectionTime>Date.now()-50?Z.input.lastSelectionOrigin:null,c=B9(Z,N);if(c&&!Z.state.selection.eq(c)){if(I8&&B5&&Z.input.lastKeyCode===13&&Date.now()-100<Z.input.lastKeyCodeTime&&Z.someProp("handleKeyDown",(g8)=>g8(Z,K0(13,"Enter"))))return;let r=Z.state.tr.setSelection(c);if(N=="pointer")r.setMeta("pointer",!0);else if(N=="key")r.scrollIntoView();if(Q)r.setMeta("composition",Q);Z.dispatch(r)}return}let Y=Z.state.doc.resolve(X),q=Y.sharedDepth(K);X=Y.before(q+1),K=Z.state.doc.resolve(K).after(q+1);let G=Z.state.selection,U=$q(Z,X,K),V=Z.state.doc,W=V.slice(U.from,U.to),A,j;if(Z.input.lastKeyCode===8&&Date.now()-100<Z.input.lastKeyCodeTime)A=Z.state.selection.to,j="end";else A=Z.state.selection.from,j="start";Z.input.lastKeyCode=null;let H=cq(W.content,U.doc.content,U.from,A,j);if(H)Z.input.domChangeCount++;if((l0&&Z.input.lastIOSEnter>Date.now()-225||B5)&&J.some((N)=>N.nodeType==1&&!fq.test(N.nodeName))&&(!H||H.endA>=H.endB)&&Z.someProp("handleKeyDown",(N)=>N(Z,K0(13,"Enter")))){Z.input.lastIOSEnter=0;return}if(!H)if(z&&G instanceof _&&!G.empty&&G.$head.sameParent(G.$anchor)&&!Z.composing&&!(U.sel&&U.sel.anchor!=U.sel.head))H={start:G.from,endA:G.to,endB:G.to};else{if(U.sel){let N=KX(Z,Z.state.doc,U.sel);if(N&&!N.eq(Z.state.selection)){let c=Z.state.tr.setSelection(N);if(Q)c.setMeta("composition",Q);Z.dispatch(c)}}return}if(Z.state.selection.from<Z.state.selection.to&&H.start==H.endB&&Z.state.selection instanceof _){if(H.start>Z.state.selection.from&&H.start<=Z.state.selection.from+2&&Z.state.selection.from>=U.from)H.start=Z.state.selection.from;else if(H.endA<Z.state.selection.to&&H.endA>=Z.state.selection.to-2&&Z.state.selection.to<=U.to)H.endB+=Z.state.selection.to-H.endA,H.endA=Z.state.selection.to}if(u8&&m5<=11&&H.endB==H.start+1&&H.endA==H.start&&H.start>U.from&&U.doc.textBetween(H.start-U.from-1,H.start-U.from+1)=="  ")H.start--,H.endA--,H.endB--;let R=U.doc.resolveNoCache(H.start-U.from),F=U.doc.resolveNoCache(H.endB-U.from),B=V.resolve(H.start),O=R.sameParent(F)&&R.parent.inlineContent&&B.end()>=H.endA,L;if((l0&&Z.input.lastIOSEnter>Date.now()-225&&(!O||J.some((N)=>N.nodeName=="DIV"||N.nodeName=="P"))||!O&&R.pos<U.doc.content.size&&(!R.sameParent(F)||!R.parent.inlineContent)&&!/\S/.test(U.doc.textBetween(R.pos,F.pos,"",""))&&(L=$.findFrom(U.doc.resolve(R.pos+1),1,!0))&&L.head>R.pos)&&Z.someProp("handleKeyDown",(N)=>N(Z,K0(13,"Enter")))){Z.input.lastIOSEnter=0;return}if(Z.state.selection.anchor>H.start&&lq(V,H.start,H.endA,R,F)&&Z.someProp("handleKeyDown",(N)=>N(Z,K0(8,"Backspace")))){if(B5&&I8)Z.domObserver.suppressSelectionUpdates();return}if(I8&&H.endB==H.start)Z.input.lastChromeDelete=Date.now();if(B5&&!O&&R.start()!=F.start()&&F.parentOffset==0&&R.depth==F.depth&&U.sel&&U.sel.anchor==U.sel.head&&U.sel.head==H.endA)H.endB-=2,F=U.doc.resolveNoCache(H.endB-U.from),setTimeout(()=>{Z.someProp("handleKeyDown",function(N){return N(Z,K0(13,"Enter"))})},20);let{start:D,endA:I}=H,k,x,w;if(O){if(R.pos==F.pos){if(u8&&m5<=11&&R.parentOffset==0)Z.domObserver.suppressSelectionUpdates(),setTimeout(()=>E5(Z),20);k=Z.state.tr.delete(D,I),x=V.resolve(H.start).marksAcross(V.resolve(H.endA))}else if(H.endA==H.endB&&(w=mq(R.parent.content.cut(R.parentOffset,F.parentOffset),B.parent.content.cut(B.parentOffset,H.endA-B.start()))))if(k=Z.state.tr,w.type=="add")k.addMark(D,I,w.mark);else k.removeMark(D,I,w.mark);else if(R.parent.child(R.index()).isText&&R.index()==F.index()-(F.textOffset?0:1)){let N=R.parent.textBetween(R.parentOffset,F.parentOffset);if(Z.someProp("handleTextInput",(c)=>c(Z,D,I,N)))return;k=Z.state.tr.insertText(N,D,I)}}if(!k)k=Z.state.tr.replace(D,I,U.doc.slice(H.start-U.from,H.endB-U.from));if(U.sel){let N=KX(Z,k.doc,U.sel);if(N&&!(I8&&Z.composing&&N.empty&&(H.start!=H.endB||Z.input.lastChromeDelete<Date.now()-100)&&(N.head==D||N.head==k.mapping.map(I)-1)||u8&&N.empty&&N.head==D))k.setSelection(N)}if(x)k.ensureMarks(x);if(Q)k.setMeta("composition",Q);Z.dispatch(k.scrollIntoView())}function KX(Z,X,K){if(Math.max(K.anchor,K.head)>X.content.size)return null;return E9(Z,X.resolve(K.anchor),X.resolve(K.head))}function mq(Z,X){let K=Z.firstChild.marks,z=X.firstChild.marks,J=K,Q=z,Y,q,G;for(let V=0;V<z.length;V++)J=z[V].removeFromSet(J);for(let V=0;V<K.length;V++)Q=K[V].removeFromSet(Q);if(J.length==1&&Q.length==0)q=J[0],Y="add",G=(V)=>V.mark(q.addToSet(V.marks));else if(J.length==0&&Q.length==1)q=Q[0],Y="remove",G=(V)=>V.mark(q.removeFromSet(V.marks));else return null;let U=[];for(let V=0;V<X.childCount;V++)U.push(G(X.child(V)));if(M.from(U).eq(Z))return{mark:q,type:Y}}function lq(Z,X,K,z,J){if(K-X<=J.pos-z.pos||z9(z,!0,!1)<J.pos)return!1;let Q=Z.resolve(X);if(!z.parent.isTextblock){let q=Q.nodeAfter;return q!=null&&K==X+q.nodeSize}if(Q.parentOffset<Q.parent.content.size||!Q.parent.isTextblock)return!1;let Y=Z.resolve(z9(Q,!0,!0));if(!Y.parent.isTextblock||Y.pos>K||z9(Y,!0,!1)<K)return!1;return z.parent.content.cut(z.parentOffset).eq(Y.parent.content)}function z9(Z,X,K){let z=Z.depth,J=X?Z.end():Z.pos;while(z>0&&(X||Z.indexAfter(z)==Z.node(z).childCount))z--,J++,X=!1;if(K){let Q=Z.node(z).maybeChild(Z.indexAfter(z));while(Q&&!Q.isLeaf)Q=Q.firstChild,J++}return J}function cq(Z,X,K,z,J){let Q=Z.findDiffStart(X,K);if(Q==null)return null;let{a:Y,b:q}=Z.findDiffEnd(X,K+Z.size,K+X.size);if(J=="end"){let G=Math.max(0,Q-Math.min(Y,q));z-=Y+G-Q}if(Y<Q&&Z.size<X.size){let G=z<=Q&&z>=Y?Q-z:0;if(Q-=G,Q&&Q<X.size&&zX(X.textBetween(Q-1,Q+1)))Q+=G?1:-1;q=Q+(q-Y),Y=Q}else if(q<Q){let G=z<=Q&&z>=q?Q-z:0;if(Q-=G,Q&&Q<Z.size&&zX(Z.textBetween(Q-1,Q+1)))Q+=G?1:-1;Y=Q+(Y-q),q=Q}return{start:Q,endA:Y,endB:q}}function zX(Z){if(Z.length!=2)return!1;let X=Z.charCodeAt(0),K=Z.charCodeAt(1);return X>=56320&&X<=57343&&K>=55296&&K<=56319}class T3{constructor(Z,X){if(this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new gX,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=X,this.state=X.state,this.directPlugins=X.plugins||[],this.directPlugins.forEach(GX),this.dispatch=this.dispatch.bind(this),this.dom=Z&&Z.mount||document.createElement("div"),Z){if(Z.appendChild)Z.appendChild(this.dom);else if(typeof Z=="function")Z(this.dom);else if(Z.mount)this.mounted=!0}this.editable=YX(this),QX(this),this.nodeViews=qX(this),this.docView=hZ(this.state.doc,JX(this),K9(this),this.dom,this),this.domObserver=new iX(this,(K,z,J,Q)=>_q(this,K,z,J,Q)),this.domObserver.start(),Aq(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let Z=this._props;this._props={};for(let X in Z)this._props[X]=Z[X];this._props.state=this.state}return this._props}update(Z){if(Z.handleDOMEvents!=this._props.handleDOMEvents)H9(this);let X=this._props;if(this._props=Z,Z.plugins)Z.plugins.forEach(GX),this.directPlugins=Z.plugins;this.updateStateInner(Z.state,X)}setProps(Z){let X={};for(let K in this._props)X[K]=this._props[K];X.state=this.state;for(let K in Z)X[K]=Z[K];this.update(X)}updateState(Z){this.updateStateInner(Z,this._props)}updateStateInner(Z,X){var K;let z=this.state,J=!1,Q=!1;if(Z.storedMarks&&this.composing)hX(this),Q=!0;this.state=Z;let Y=z.plugins!=Z.plugins||this._props.plugins!=X.plugins;if(Y||this._props.plugins!=X.plugins||this._props.nodeViews!=X.nodeViews){let A=qX(this);if(iq(A,this.nodeViews))this.nodeViews=A,J=!0}if(Y||X.handleDOMEvents!=this._props.handleDOMEvents)H9(this);this.editable=YX(this),QX(this);let q=K9(this),G=JX(this),U=z.plugins!=Z.plugins&&!z.doc.eq(Z.doc)?"reset":Z.scrollToSelection>z.scrollToSelection?"to selection":"preserve",V=J||!this.docView.matchesNode(Z.doc,G,q);if(V||!Z.selection.eq(z.selection))Q=!0;let W=U=="preserve"&&Q&&this.dom.style.overflowAnchor==null&&N2(this);if(Q){this.domObserver.stop();let A=V&&(u8||I8)&&!this.composing&&!z.selection.empty&&!Z.selection.empty&&pq(z.selection,Z.selection);if(V){let j=I8?this.trackWrites=this.domSelectionRange().focusNode:null;if(this.composing)this.input.compositionNode=Iq(this);if(J||!this.docView.update(Z.doc,G,q,this))this.docView.updateOuterDeco(G),this.docView.destroy(),this.docView=hZ(Z.doc,G,q,this.dom,this);if(j&&!this.trackWrites)A=!0}if(A||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&o2(this)))E5(this,A);else IX(this,Z.selection),this.domObserver.setCurSelection();this.domObserver.start()}if(this.updatePluginViews(z),((K=this.dragging)===null||K===void 0?void 0:K.node)&&!z.doc.eq(Z.doc))this.updateDraggedNode(this.dragging,z);if(U=="reset")this.dom.scrollTop=0;else if(U=="to selection")this.scrollToSelection();else if(W)T2(W)}scrollToSelection(){let Z=this.domSelectionRange().focusNode;if(!Z||!this.dom.contains(Z.nodeType==1?Z:Z.parentNode));else if(this.someProp("handleScrollToSelection",(X)=>X(this)));else if(this.state.selection instanceof u){let X=this.docView.domAfterPos(this.state.selection.from);if(X.nodeType==1)xZ(this,X.getBoundingClientRect(),Z)}else xZ(this,this.coordsAtPos(this.state.selection.head,1),Z)}destroyPluginViews(){let Z;while(Z=this.pluginViews.pop())if(Z.destroy)Z.destroy()}updatePluginViews(Z){if(!Z||Z.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let X=0;X<this.directPlugins.length;X++){let K=this.directPlugins[X];if(K.spec.view)this.pluginViews.push(K.spec.view(this))}for(let X=0;X<this.state.plugins.length;X++){let K=this.state.plugins[X];if(K.spec.view)this.pluginViews.push(K.spec.view(this))}}else for(let X=0;X<this.pluginViews.length;X++){let K=this.pluginViews[X];if(K.update)K.update(this,Z)}}updateDraggedNode(Z,X){let K=Z.node,z=-1;if(this.state.doc.nodeAt(K.from)==K.node)z=K.from;else{let J=K.from+(this.state.doc.content.size-X.doc.content.size);if((J>0&&this.state.doc.nodeAt(J))==K.node)z=J}this.dragging=new D9(Z.slice,Z.move,z<0?void 0:u.create(this.state.doc,z))}someProp(Z,X){let K=this._props&&this._props[Z],z;if(K!=null&&(z=X?X(K):K))return z;for(let Q=0;Q<this.directPlugins.length;Q++){let Y=this.directPlugins[Q].props[Z];if(Y!=null&&(z=X?X(Y):Y))return z}let J=this.state.plugins;if(J)for(let Q=0;Q<J.length;Q++){let Y=J[Q].props[Z];if(Y!=null&&(z=X?X(Y):Y))return z}}hasFocus(){if(u8){let Z=this.root.activeElement;if(Z==this.dom)return!0;if(!Z||!this.dom.contains(Z))return!1;while(Z&&this.dom!=Z&&this.dom.contains(Z)){if(Z.contentEditable=="false")return!1;Z=Z.parentElement}return!0}return this.root.activeElement==this.dom}focus(){if(this.domObserver.stop(),this.editable)x2(this.dom);E5(this),this.domObserver.start()}get root(){let Z=this._root;if(Z==null){for(let X=this.dom.parentNode;X;X=X.parentNode)if(X.nodeType==9||X.nodeType==11&&X.host){if(!X.getSelection)Object.getPrototypeOf(X).getSelection=()=>X.ownerDocument.getSelection();return this._root=X}}return Z||document}updateRoot(){this._root=null}posAtCoords(Z){return $2(this,Z)}coordsAtPos(Z,X=1){return RX(this,Z,X)}domAtPos(Z,X=0){return this.docView.domFromPos(Z,X)}nodeDOM(Z){let X=this.docView.descAt(Z);return X?X.nodeDOM:null}posAtDOM(Z,X,K=-1){let z=this.docView.posFromDOM(Z,X,K);if(z==null)throw new RangeError("DOM position not inside the editor");return z}endOfTextblock(Z,X){return l2(this,X||this.state,Z)}pasteHTML(Z,X){return k3(this,"",Z,!1,X||new ClipboardEvent("paste"))}pasteText(Z,X){return k3(this,Z,null,!0,X||new ClipboardEvent("paste"))}serializeForClipboard(Z){return P9(this,Z)}destroy(){if(!this.docView)return;if(Hq(this),this.destroyPluginViews(),this.mounted)this.docView.update(this.state.doc,[],K9(this),this),this.dom.textContent="";else if(this.dom.parentNode)this.dom.parentNode.removeChild(this.dom);this.docView.destroy(),this.docView=null,P2()}get isDestroyed(){return this.docView==null}dispatchEvent(Z){return Rq(this,Z)}dispatch(Z){let X=this._props.dispatchTransaction;if(X)X.call(this,Z);else this.updateState(this.state.apply(Z))}domSelectionRange(){let Z=this.domSelection();if(!Z)return{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0};return y8&&this.root.nodeType===11&&I2(this.dom.ownerDocument)==this.dom&&wq(this,Z)||Z}domSelection(){return this.root.getSelection()}}function JX(Z){let X=Object.create(null);if(X.class="ProseMirror",X.contenteditable=String(Z.editable),Z.someProp("attributes",(K)=>{if(typeof K=="function")K=K(Z.state);if(K){for(let z in K)if(z=="class")X.class+=" "+K[z];else if(z=="style")X.style=(X.style?X.style+";":"")+K[z];else if(!X[z]&&z!="contenteditable"&&z!="nodeName")X[z]=String(K[z])}}),!X.translate)X.translate="no";return[b8.node(0,Z.state.doc.content.size,X)]}function QX(Z){if(Z.markCursor){let X=document.createElement("img");X.className="ProseMirror-separator",X.setAttribute("mark-placeholder","true"),X.setAttribute("alt",""),Z.cursorWrapper={dom:X,deco:b8.widget(Z.state.selection.from,X,{raw:!0,marks:Z.markCursor})}}else Z.cursorWrapper=null}function YX(Z){return!Z.someProp("editable",(X)=>X(Z.state)===!1)}function pq(Z,X){let K=Math.min(Z.$anchor.sharedDepth(Z.head),X.$anchor.sharedDepth(X.head));return Z.$anchor.start(K)!=X.$anchor.start(K)}function qX(Z){let X=Object.create(null);function K(z){for(let J in z)if(!Object.prototype.hasOwnProperty.call(X,J))X[J]=z[J]}return Z.someProp("nodeViews",K),Z.someProp("markViews",K),X}function iq(Z,X){let K=0,z=0;for(let J in Z){if(Z[J]!=X[J])return!0;K++}for(let J in X)z++;return K!=z}function GX(Z){if(Z.spec.state||Z.spec.filterTransaction||Z.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var P5={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},E7={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},dq=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),sq=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(s=0;s<10;s++)P5[48+s]=P5[96+s]=String(s);var s;for(s=1;s<=24;s++)P5[s+111]="F"+s;var s;for(s=65;s<=90;s++)P5[s]=String.fromCharCode(s+32),E7[s]=String.fromCharCode(s);var s;for(x3 in P5)if(!E7.hasOwnProperty(x3))E7[x3]=P5[x3];var x3;function dX(Z){var X=dq&&Z.metaKey&&Z.shiftKey&&!Z.ctrlKey&&!Z.altKey||sq&&Z.shiftKey&&Z.key&&Z.key.length==1||Z.key=="Unidentified",K=!X&&Z.key||(Z.shiftKey?E7:P5)[Z.keyCode]||Z.key||"Unidentified";if(K=="Esc")K="Escape";if(K=="Del")K="Delete";if(K=="Left")K="ArrowLeft";if(K=="Up")K="ArrowUp";if(K=="Right")K="ArrowRight";if(K=="Down")K="ArrowDown";return K}var nq=typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function aq(Z){let X=Z.split(/-(?!$)/),K=X[X.length-1];if(K=="Space")K=" ";let z,J,Q,Y;for(let q=0;q<X.length-1;q++){let G=X[q];if(/^(cmd|meta|m)$/i.test(G))Y=!0;else if(/^a(lt)?$/i.test(G))z=!0;else if(/^(c|ctrl|control)$/i.test(G))J=!0;else if(/^s(hift)?$/i.test(G))Q=!0;else if(/^mod$/i.test(G))if(nq)Y=!0;else J=!0;else throw new Error("Unrecognized modifier name: "+G)}if(z)K="Alt-"+K;if(J)K="Ctrl-"+K;if(Y)K="Meta-"+K;if(Q)K="Shift-"+K;return K}function rq(Z){let X=Object.create(null);for(let K in Z)X[aq(K)]=Z[K];return X}function S9(Z,X,K=!0){if(X.altKey)Z="Alt-"+Z;if(X.ctrlKey)Z="Ctrl-"+Z;if(X.metaKey)Z="Meta-"+Z;if(K&&X.shiftKey)Z="Shift-"+Z;return Z}function p0(Z){return new K8({props:{handleKeyDown:oq(Z)}})}function oq(Z){let X=rq(Z);return function(K,z){let J=dX(z),Q,Y=X[S9(J,z)];if(Y&&Y(K.state,K.dispatch,K))return!0;if(J.length==1&&J!=" "){if(z.shiftKey){let q=X[S9(J,z,!1)];if(q&&q(K.state,K.dispatch,K))return!0}if((z.shiftKey||z.altKey||z.metaKey||J.charCodeAt(0)>127)&&(Q=P5[z.keyCode])&&Q!=J){let q=X[S9(Q,z)];if(q&&q(K.state,K.dispatch,K))return!0}}return!1}}var P7=(Z,X)=>{if(Z.selection.empty)return!1;if(X)X(Z.tr.deleteSelection().scrollIntoView());return!0};function tq(Z,X){let{$cursor:K}=Z.selection;if(!K||(X?!X.endOfTextblock("backward",Z):K.parentOffset>0))return null;return K}var eq=(Z,X,K)=>{let z=tq(Z,K);if(!z)return!1;let J=nX(z);if(!J){let Y=z.blockRange(),q=Y&&u0(Y);if(q==null)return!1;if(X)X(Z.tr.lift(Y,q).scrollIntoView());return!0}let Q=J.nodeBefore;if(rX(Z,J,X,-1))return!0;if(z.parent.content.size==0&&(i0(Q,"end")||u.isSelectable(Q)))for(let Y=z.depth;;Y--){let q=Y7(Z.doc,z.before(Y),z.after(Y),S.empty);if(q&&q.slice.size<q.to-q.from){if(X){let G=Z.tr.step(q);G.setSelection(i0(Q,"end")?$.findFrom(G.doc.resolve(G.mapping.map(J.pos,-1)),-1):u.create(G.doc,J.pos-Q.nodeSize)),X(G.scrollIntoView())}return!0}if(Y==1||z.node(Y-1).childCount>1)break}if(Q.isAtom&&J.depth==z.depth-1){if(X)X(Z.tr.delete(J.pos-Q.nodeSize,J.pos).scrollIntoView());return!0}return!1};function i0(Z,X,K=!1){for(let z=Z;z;z=X=="start"?z.firstChild:z.lastChild){if(z.isTextblock)return!0;if(K&&z.childCount!=1)return!1}return!1}var ZG=(Z,X,K)=>{let{$head:z,empty:J}=Z.selection,Q=z;if(!J)return!1;if(z.parent.isTextblock){if(K?!K.endOfTextblock("backward",Z):z.parentOffset>0)return!1;Q=nX(z)}let Y=Q&&Q.nodeBefore;if(!Y||!u.isSelectable(Y))return!1;if(X)X(Z.tr.setSelection(u.create(Z.doc,Q.pos-Y.nodeSize)).scrollIntoView());return!0};function nX(Z){if(!Z.parent.type.spec.isolating)for(let X=Z.depth-1;X>=0;X--){if(Z.index(X)>0)return Z.doc.resolve(Z.before(X+1));if(Z.node(X).type.spec.isolating)break}return null}function XG(Z,X){let{$cursor:K}=Z.selection;if(!K||(X?!X.endOfTextblock("forward",Z):K.parentOffset<K.parent.content.size))return null;return K}var b9=(Z,X,K)=>{let z=XG(Z,K);if(!z)return!1;let J=aX(z);if(!J)return!1;let Q=J.nodeAfter;if(rX(Z,J,X,1))return!0;if(z.parent.content.size==0&&(i0(Q,"start")||u.isSelectable(Q))){let Y=Y7(Z.doc,z.before(),z.after(),S.empty);if(Y&&Y.slice.size<Y.to-Y.from){if(X){let q=Z.tr.step(Y);q.setSelection(i0(Q,"start")?$.findFrom(q.doc.resolve(q.mapping.map(J.pos)),1):u.create(q.doc,q.mapping.map(J.pos))),X(q.scrollIntoView())}return!0}}if(Q.isAtom&&J.depth==z.depth-1){if(X)X(Z.tr.delete(J.pos,J.pos+Q.nodeSize).scrollIntoView());return!0}return!1},KG=(Z,X,K)=>{let{$head:z,empty:J}=Z.selection,Q=z;if(!J)return!1;if(z.parent.isTextblock){if(K?!K.endOfTextblock("forward",Z):z.parentOffset<z.parent.content.size)return!1;Q=aX(z)}let Y=Q&&Q.nodeAfter;if(!Y||!u.isSelectable(Y))return!1;if(X)X(Z.tr.setSelection(u.create(Z.doc,Q.pos)).scrollIntoView());return!0};function aX(Z){if(!Z.parent.type.spec.isolating)for(let X=Z.depth-1;X>=0;X--){let K=Z.node(X);if(Z.index(X)+1<K.childCount)return Z.doc.resolve(Z.after(X+1));if(K.type.spec.isolating)break}return null}var y9=(Z,X)=>{let{$head:K,$anchor:z}=Z.selection;if(!K.parent.type.spec.code||!K.sameParent(z))return!1;if(X)X(Z.tr.insertText(`
`).scrollIntoView());return!0};function N9(Z){for(let X=0;X<Z.edgeCount;X++){let{type:K}=Z.edge(X);if(K.isTextblock&&!K.hasRequiredAttrs())return K}return null}var O7=(Z,X)=>{let{$head:K,$anchor:z}=Z.selection;if(!K.parent.type.spec.code||!K.sameParent(z))return!1;let J=K.node(-1),Q=K.indexAfter(-1),Y=N9(J.contentMatchAt(Q));if(!Y||!J.canReplaceWith(Q,Q,Y))return!1;if(X){let q=K.after(),G=Z.tr.replaceWith(q,q,Y.createAndFill());G.setSelection($.near(G.doc.resolve(q),1)),X(G.scrollIntoView())}return!0},zG=(Z,X)=>{let K=Z.selection,{$from:z,$to:J}=K;if(K instanceof q8||z.parent.inlineContent||J.parent.inlineContent)return!1;let Q=N9(J.parent.contentMatchAt(J.indexAfter()));if(!Q||!Q.isTextblock)return!1;if(X){let Y=(!z.parentOffset&&J.index()<J.parent.childCount?z:J).pos,q=Z.tr.insert(Y,Q.createAndFill());q.setSelection(_.create(q.doc,Y+1)),X(q.scrollIntoView())}return!0},JG=(Z,X)=>{let{$cursor:K}=Z.selection;if(!K||K.parent.content.size)return!1;if(K.depth>1&&K.after()!=K.end(-1)){let Q=K.before();if(u5(Z.doc,Q)){if(X)X(Z.tr.split(Q).scrollIntoView());return!0}}let z=K.blockRange(),J=z&&u0(z);if(J==null)return!1;if(X)X(Z.tr.lift(z,J).scrollIntoView());return!0};function QG(Z){return(X,K)=>{let{$from:z,$to:J}=X.selection;if(X.selection instanceof u&&X.selection.node.isBlock){if(!z.parentOffset||!u5(X.doc,z.pos))return!1;if(K)K(X.tr.split(z.pos).scrollIntoView());return!0}if(!z.depth)return!1;let Q=[],Y,q,G=!1,U=!1;for(let j=z.depth;;j--)if(z.node(j).isBlock){G=z.end(j)==z.pos+(z.depth-j),U=z.start(j)==z.pos-(z.depth-j),q=N9(z.node(j-1).contentMatchAt(z.indexAfter(j-1)));let R=Z&&Z(J.parent,G,z);Q.unshift(R||(G&&q?{type:q}:null)),Y=j;break}else{if(j==1)return!1;Q.unshift(null)}let V=X.tr;if(X.selection instanceof _||X.selection instanceof q8)V.deleteSelection();let W=V.mapping.map(z.pos),A=u5(V.doc,W,Q.length,Q);if(!A)Q[0]=q?{type:q}:null,A=u5(V.doc,W,Q.length,Q);if(!A)return!1;if(V.split(W,Q.length,Q),!G&&U&&z.node(Y).type!=q){let j=V.mapping.map(z.before(Y)),H=V.doc.resolve(j);if(q&&z.node(Y-1).canReplaceWith(H.index(),H.index()+1,q))V.setNodeMarkup(V.mapping.map(z.before(Y)),q)}if(K)K(V.scrollIntoView());return!0}}var YG=QG();var T9=(Z,X)=>{if(X)X(Z.tr.setSelection(new q8(Z.doc)));return!0};function qG(Z,X,K){let{nodeBefore:z,nodeAfter:J}=X,Q=X.index();if(!z||!J||!z.type.compatibleContent(J.type))return!1;if(!z.content.size&&X.parent.canReplace(Q-1,Q)){if(K)K(Z.tr.delete(X.pos-z.nodeSize,X.pos).scrollIntoView());return!0}if(!X.parent.canReplace(Q,Q+1)||!(J.isTextblock||n1(Z.doc,X.pos)))return!1;if(K)K(Z.tr.join(X.pos).scrollIntoView());return!0}function rX(Z,X,K,z){let{nodeBefore:J,nodeAfter:Q}=X,Y,q,G=J.type.spec.isolating||Q.type.spec.isolating;if(!G&&qG(Z,X,K))return!0;let U=!G&&X.parent.canReplace(X.index(),X.index()+1);if(U&&(Y=(q=J.contentMatchAt(J.childCount)).findWrapping(Q.type))&&q.matchType(Y[0]||Q.type).validEnd){if(K){let j=X.pos+Q.nodeSize,H=M.empty;for(let B=Y.length-1;B>=0;B--)H=M.from(Y[B].create(null,H));H=M.from(J.copy(H));let R=Z.tr.step(new t(X.pos-1,j,X.pos,j,new S(H,1,0),Y.length,!0)),F=R.doc.resolve(j+2*Y.length);if(F.nodeAfter&&F.nodeAfter.type==J.type&&n1(R.doc,F.pos))R.join(F.pos);K(R.scrollIntoView())}return!0}let V=Q.type.spec.isolating||z>0&&G?null:$.findFrom(X,1),W=V&&V.$from.blockRange(V.$to),A=W&&u0(W);if(A!=null&&A>=X.depth){if(K)K(Z.tr.lift(W,A).scrollIntoView());return!0}if(U&&i0(Q,"start",!0)&&i0(J,"end")){let j=J,H=[];for(;;){if(H.push(j),j.isTextblock)break;j=j.lastChild}let R=Q,F=1;for(;!R.isTextblock;R=R.firstChild)F++;if(j.canReplace(j.childCount,j.childCount,R.content)){if(K){let B=M.empty;for(let L=H.length-1;L>=0;L--)B=M.from(H[L].copy(B));let O=Z.tr.step(new t(X.pos-H.length,X.pos+Q.nodeSize,X.pos+F,X.pos+Q.nodeSize-F,new S(B,H.length,0),0,!0));K(O.scrollIntoView())}return!0}}return!1}function oX(Z){return function(X,K){let z=X.selection,J=Z<0?z.$from:z.$to,Q=J.depth;while(J.node(Q).isInline){if(!Q)return!1;Q--}if(!J.node(Q).isTextblock)return!1;if(K)K(X.tr.setSelection(_.create(X.doc,Z<0?J.start(Q):J.end(Q))));return!0}}var GG=oX(-1),UG=oX(1);function tX(Z,X=null){return function(K,z){let{$from:J,$to:Q}=K.selection,Y=J.blockRange(Q),q=Y&&AZ(Y,Z,X);if(!q)return!1;if(z)z(K.tr.wrap(Y,q).scrollIntoView());return!0}}function L7(Z,X=null){return function(K,z){let J=!1;for(let Q=0;Q<K.selection.ranges.length&&!J;Q++){let{$from:{pos:Y},$to:{pos:q}}=K.selection.ranges[Q];K.doc.nodesBetween(Y,q,(G,U)=>{if(J)return!1;if(!G.isTextblock||G.hasMarkup(Z,X))return;if(G.type==Z)J=!0;else{let V=K.doc.resolve(U),W=V.index();J=V.parent.canReplaceWith(W,W+1,Z)}})}if(!J)return!1;if(z){let Q=K.tr;for(let Y=0;Y<K.selection.ranges.length;Y++){let{$from:{pos:q},$to:{pos:G}}=K.selection.ranges[Y];Q.setBlockType(q,G,Z,X)}z(Q.scrollIntoView())}return!0}}function VG(Z,X,K,z){for(let J=0;J<X.length;J++){let{$from:Q,$to:Y}=X[J],q=Q.depth==0?Z.inlineContent&&Z.type.allowsMarkType(K):!1;if(Z.nodesBetween(Q.pos,Y.pos,(G,U)=>{if(q||!z&&G.isAtom&&G.isInline&&U>=Q.pos&&U+G.nodeSize<=Y.pos)return!1;q=G.inlineContent&&G.type.allowsMarkType(K)}),q)return!0}return!1}function WG(Z){let X=[];for(let K=0;K<Z.length;K++){let{$from:z,$to:J}=Z[K];if(z.doc.nodesBetween(z.pos,J.pos,(Q,Y)=>{if(Q.isAtom&&Q.content.size&&Q.isInline&&Y>=z.pos&&Y+Q.nodeSize<=J.pos){if(Y+1>z.pos)X.push(new X0(z,z.doc.resolve(Y+1)));return z=z.doc.resolve(Y+1+Q.content.size),!1}}),z.pos<J.pos)X.push(new X0(z,J))}return X}function d0(Z,X=null,K){let z=(K&&K.removeWhenPresent)!==!1,J=(K&&K.enterInlineAtoms)!==!1,Q=!(K&&K.includeWhitespace);return function(Y,q){let{empty:G,$cursor:U,ranges:V}=Y.selection;if(G&&!U||!VG(Y.doc,V,Z,J))return!1;if(q)if(U)if(Z.isInSet(Y.storedMarks||U.marks()))q(Y.tr.removeStoredMark(Z));else q(Y.tr.addStoredMark(Z.create(X)));else{let W,A=Y.tr;if(!J)V=WG(V);if(z)W=!V.some((j)=>Y.doc.rangeHasMark(j.$from.pos,j.$to.pos,Z));else W=!V.every((j)=>{let H=!1;return A.doc.nodesBetween(j.$from.pos,j.$to.pos,(R,F,B)=>{if(H)return!1;H=!Z.isInSet(R.marks)&&!!B&&B.type.allowsMarkType(Z)&&!(R.isText&&/^\s*$/.test(R.textBetween(Math.max(0,j.$from.pos-F),Math.min(R.nodeSize,j.$to.pos-F))))}),!H});for(let j=0;j<V.length;j++){let{$from:H,$to:R}=V[j];if(!W)A.removeMark(H.pos,R.pos,Z);else{let F=H.pos,B=R.pos,O=H.nodeAfter,L=R.nodeBefore,D=Q&&O&&O.isText?/^\s*/.exec(O.text)[0].length:0,I=Q&&L&&L.isText?/\s*$/.exec(L.text)[0].length:0;if(F+D<B)F+=D,B-=I;A.addMark(F,B,Z.create(X))}}q(A.scrollIntoView())}return!0}}function g3(...Z){return function(X,K,z){for(let J=0;J<Z.length;J++)if(Z[J](X,K,z))return!0;return!1}}var k9=g3(P7,eq,ZG),sX=g3(P7,b9,KG),O5={Enter:g3(y9,zG,JG,YG),"Mod-Enter":O7,Backspace:k9,"Mod-Backspace":k9,"Shift-Backspace":k9,Delete:sX,"Mod-Delete":sX,"Mod-a":T9},eX={"Ctrl-h":O5.Backspace,"Alt-Backspace":O5["Mod-Backspace"],"Ctrl-d":O5.Delete,"Ctrl-Alt-Backspace":O5["Mod-Delete"],"Alt-Delete":O5["Mod-Delete"],"Alt-d":O5["Mod-Delete"],"Ctrl-a":GG,"Ctrl-e":UG};for(let Z in O5)eX[Z]=O5[Z];var AG=typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os!="undefined"&&os.platform?os.platform()=="darwin":!1,x9=AG?eX:O5;class J5{constructor(Z,X,K={}){this.match=Z,this.match=Z,this.handler=typeof X=="string"?HG(X):X,this.undoable=K.undoable!==!1,this.inCode=K.inCode||!1,this.inCodeMark=K.inCodeMark!==!1}}function HG(Z){return function(X,K,z,J){let Q=Z;if(K[1]){let Y=K[0].lastIndexOf(K[1]);Q+=K[0].slice(Y+K[1].length),z+=Y;let q=z-J;if(q>0)Q=K[0].slice(Y-q,Y)+Q,z=J}return X.tr.insertText(Q,z,J)}}var jG=500;function g9({rules:Z}){let X=new K8({state:{init(){return null},apply(K,z){let J=K.getMeta(this);if(J)return J;return K.selectionSet||K.docChanged?null:z}},props:{handleTextInput(K,z,J,Q){return ZK(K,z,J,Q,Z,X)},handleDOMEvents:{compositionend:(K)=>{setTimeout(()=>{let{$cursor:z}=K.state.selection;if(z)ZK(K,z.pos,z.pos,"",Z,X)})}}},isInputRules:!0});return X}function ZK(Z,X,K,z,J,Q){if(Z.composing)return!1;let Y=Z.state,q=Y.doc.resolve(X),G=q.parent.textBetween(Math.max(0,q.parentOffset-jG),q.parentOffset,null,"￼")+z;for(let U=0;U<J.length;U++){let V=J[U];if(!V.inCodeMark&&q.marks().some((j)=>j.type.spec.code))continue;if(q.parent.type.spec.code){if(!V.inCode)continue}else if(V.inCode==="only")continue;let W=V.match.exec(G),A=W&&W[0].length>=z.length&&V.handler(Y,W,X-(W[0].length-z.length),K);if(!A)continue;if(V.undoable)A.setMeta(Q,{transform:A,from:X,to:K,text:z});return Z.dispatch(A),!0}return!1}var XK=(Z,X)=>{let K=Z.plugins;for(let z=0;z<K.length;z++){let J=K[z],Q;if(J.spec.isInputRules&&(Q=J.getState(Z))){if(X){let Y=Z.tr,q=Q.transform;for(let G=q.steps.length-1;G>=0;G--)Y.step(q.steps[G].invert(q.docs[G]));if(Q.text){let G=Y.doc.resolve(Q.from).marks();Y.replaceWith(Q.from,Q.to,Z.schema.text(Q.text,G))}else Y.delete(Q.from,Q.to);X(Y)}return!0}}return!1},u68=new J5(/--$/,"—",{inCodeMark:!1}),w68=new J5(/\.\.\.$/,"…",{inCodeMark:!1}),v68=new J5(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“",{inCodeMark:!1}),$68=new J5(/"$/,"”",{inCodeMark:!1}),h68=new J5(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘",{inCodeMark:!1}),f68=new J5(/'$/,"’",{inCodeMark:!1});var M7=200,A8=function Z(){};A8.prototype.append=function Z(X){if(!X.length)return this;return X=A8.from(X),!this.length&&X||X.length<M7&&this.leafAppend(X)||this.length<M7&&X.leafPrepend(this)||this.appendInner(X)};A8.prototype.prepend=function Z(X){if(!X.length)return this;return A8.from(X).append(this)};A8.prototype.appendInner=function Z(X){return new RG(this,X)};A8.prototype.slice=function Z(X,K){if(X===void 0)X=0;if(K===void 0)K=this.length;if(X>=K)return A8.empty;return this.sliceInner(Math.max(0,X),Math.min(this.length,K))};A8.prototype.get=function Z(X){if(X<0||X>=this.length)return;return this.getInner(X)};A8.prototype.forEach=function Z(X,K,z){if(K===void 0)K=0;if(z===void 0)z=this.length;if(K<=z)this.forEachInner(X,K,z,0);else this.forEachInvertedInner(X,K,z,0)};A8.prototype.map=function Z(X,K,z){if(K===void 0)K=0;if(z===void 0)z=this.length;var J=[];return this.forEach(function(Q,Y){return J.push(X(Q,Y))},K,z),J};A8.from=function Z(X){if(X instanceof A8)return X;return X&&X.length?new KK(X):A8.empty};var KK=function(Z){function X(z){Z.call(this),this.values=z}if(Z)X.__proto__=Z;X.prototype=Object.create(Z&&Z.prototype),X.prototype.constructor=X;var K={length:{configurable:!0},depth:{configurable:!0}};return X.prototype.flatten=function z(){return this.values},X.prototype.sliceInner=function z(J,Q){if(J==0&&Q==this.length)return this;return new X(this.values.slice(J,Q))},X.prototype.getInner=function z(J){return this.values[J]},X.prototype.forEachInner=function z(J,Q,Y,q){for(var G=Q;G<Y;G++)if(J(this.values[G],q+G)===!1)return!1},X.prototype.forEachInvertedInner=function z(J,Q,Y,q){for(var G=Q-1;G>=Y;G--)if(J(this.values[G],q+G)===!1)return!1},X.prototype.leafAppend=function z(J){if(this.length+J.length<=M7)return new X(this.values.concat(J.flatten()))},X.prototype.leafPrepend=function z(J){if(this.length+J.length<=M7)return new X(J.flatten().concat(this.values))},K.length.get=function(){return this.values.length},K.depth.get=function(){return 0},Object.defineProperties(X.prototype,K),X}(A8);A8.empty=new KK([]);var RG=function(Z){function X(K,z){Z.call(this),this.left=K,this.right=z,this.length=K.length+z.length,this.depth=Math.max(K.depth,z.depth)+1}if(Z)X.__proto__=Z;return X.prototype=Object.create(Z&&Z.prototype),X.prototype.constructor=X,X.prototype.flatten=function K(){return this.left.flatten().concat(this.right.flatten())},X.prototype.getInner=function K(z){return z<this.left.length?this.left.get(z):this.right.get(z-this.left.length)},X.prototype.forEachInner=function K(z,J,Q,Y){var q=this.left.length;if(J<q&&this.left.forEachInner(z,J,Math.min(Q,q),Y)===!1)return!1;if(Q>q&&this.right.forEachInner(z,Math.max(J-q,0),Math.min(this.length,Q)-q,Y+q)===!1)return!1},X.prototype.forEachInvertedInner=function K(z,J,Q,Y){var q=this.left.length;if(J>q&&this.right.forEachInvertedInner(z,J-q,Math.max(Q,q)-q,Y+q)===!1)return!1;if(Q<q&&this.left.forEachInvertedInner(z,Math.min(J,q),Q,Y)===!1)return!1},X.prototype.sliceInner=function K(z,J){if(z==0&&J==this.length)return this;var Q=this.left.length;if(J<=Q)return this.left.slice(z,J);if(z>=Q)return this.right.slice(z-Q,J-Q);return this.left.slice(z,Q).append(this.right.slice(0,J-Q))},X.prototype.leafAppend=function K(z){var J=this.right.leafAppend(z);if(J)return new X(this.left,J)},X.prototype.leafPrepend=function K(z){var J=this.left.leafPrepend(z);if(J)return new X(J,this.right)},X.prototype.appendInner=function K(z){if(this.left.depth>=Math.max(this.right.depth,z.depth)+1)return new X(this.left,new X(this.right,z));return new X(this,z)},X}(A8),u9=A8;var FG=500;class d8{constructor(Z,X){this.items=Z,this.eventCount=X}popEvent(Z,X){if(this.eventCount==0)return null;let K=this.items.length;for(;;K--)if(this.items.get(K-1).selection){--K;break}let z,J;if(X)z=this.remapping(K,this.items.length),J=z.maps.length;let Q=Z.tr,Y,q,G=[],U=[];return this.items.forEach((V,W)=>{if(!V.step){if(!z)z=this.remapping(K,W+1),J=z.maps.length;J--,U.push(V);return}if(z){U.push(new Q5(V.map));let A=V.step.map(z.slice(J)),j;if(A&&Q.maybeStep(A).doc)j=Q.mapping.maps[Q.mapping.maps.length-1],G.push(new Q5(j,void 0,void 0,G.length+U.length));if(J--,j)z.appendMap(j,J)}else Q.maybeStep(V.step);if(V.selection)return Y=z?V.selection.map(z.slice(J)):V.selection,q=new d8(this.items.slice(0,K).append(U.reverse().concat(G)),this.eventCount-1),!1},this.items.length,0),{remaining:q,transform:Q,selection:Y}}addTransform(Z,X,K,z){let J=[],Q=this.eventCount,Y=this.items,q=!z&&Y.length?Y.get(Y.length-1):null;for(let U=0;U<Z.steps.length;U++){let V=Z.steps[U].invert(Z.docs[U]),W=new Q5(Z.mapping.maps[U],V,X),A;if(A=q&&q.merge(W))if(W=A,U)J.pop();else Y=Y.slice(0,Y.length-1);if(J.push(W),X)Q++,X=void 0;if(!z)q=W}let G=Q-K.depth;if(G>EG)Y=BG(Y,G),Q-=G;return new d8(Y.append(J),Q)}remapping(Z,X){let K=new x0;return this.items.forEach((z,J)=>{let Q=z.mirrorOffset!=null&&J-z.mirrorOffset>=Z?K.maps.length-z.mirrorOffset:void 0;K.appendMap(z.map,Q)},Z,X),K}addMaps(Z){if(this.eventCount==0)return this;return new d8(this.items.append(Z.map((X)=>new Q5(X))),this.eventCount)}rebased(Z,X){if(!this.eventCount)return this;let K=[],z=Math.max(0,this.items.length-X),J=Z.mapping,Q=Z.steps.length,Y=this.eventCount;this.items.forEach((W)=>{if(W.selection)Y--},z);let q=X;this.items.forEach((W)=>{let A=J.getMirror(--q);if(A==null)return;Q=Math.min(Q,A);let j=J.maps[A];if(W.step){let H=Z.steps[A].invert(Z.docs[A]),R=W.selection&&W.selection.map(J.slice(q+1,A));if(R)Y++;K.push(new Q5(j,H,R))}else K.push(new Q5(j))},z);let G=[];for(let W=X;W<Q;W++)G.push(new Q5(J.maps[W]));let U=this.items.slice(0,z).append(G).append(K),V=new d8(U,Y);if(V.emptyItemCount()>FG)V=V.compress(this.items.length-K.length);return V}emptyItemCount(){let Z=0;return this.items.forEach((X)=>{if(!X.step)Z++}),Z}compress(Z=this.items.length){let X=this.remapping(0,Z),K=X.maps.length,z=[],J=0;return this.items.forEach((Q,Y)=>{if(Y>=Z){if(z.push(Q),Q.selection)J++}else if(Q.step){let q=Q.step.map(X.slice(K)),G=q&&q.getMap();if(K--,G)X.appendMap(G,K);if(q){let U=Q.selection&&Q.selection.map(X.slice(K));if(U)J++;let V=new Q5(G.invert(),q,U),W,A=z.length-1;if(W=z.length&&z[A].merge(V))z[A]=W;else z.push(V)}}else if(Q.map)K--},this.items.length,0),new d8(u9.from(z.reverse()),J)}}d8.empty=new d8(u9.empty,0);function BG(Z,X){let K;return Z.forEach((z,J)=>{if(z.selection&&X--==0)return K=J,!1}),Z.slice(K)}class Q5{constructor(Z,X,K,z){this.map=Z,this.step=X,this.selection=K,this.mirrorOffset=z}merge(Z){if(this.step&&Z.step&&!Z.selection){let X=Z.step.merge(this.step);if(X)return new Q5(X.getMap().invert(),X,this.selection)}}}class L5{constructor(Z,X,K,z,J){this.done=Z,this.undone=X,this.prevRanges=K,this.prevTime=z,this.prevComposition=J}}var EG=20;function PG(Z,X,K,z){let J=K.getMeta(i5),Q;if(J)return J.historyState;if(K.getMeta(MG))Z=new L5(Z.done,Z.undone,null,0,-1);let Y=K.getMeta("appendedTransaction");if(K.steps.length==0)return Z;else if(Y&&Y.getMeta(i5))if(Y.getMeta(i5).redo)return new L5(Z.done.addTransform(K,void 0,z,D7(X)),Z.undone,zK(K.mapping.maps),Z.prevTime,Z.prevComposition);else return new L5(Z.done,Z.undone.addTransform(K,void 0,z,D7(X)),null,Z.prevTime,Z.prevComposition);else if(K.getMeta("addToHistory")!==!1&&!(Y&&Y.getMeta("addToHistory")===!1)){let q=K.getMeta("composition"),G=Z.prevTime==0||!Y&&Z.prevComposition!=q&&(Z.prevTime<(K.time||0)-z.newGroupDelay||!OG(K,Z.prevRanges)),U=Y?w9(Z.prevRanges,K.mapping):zK(K.mapping.maps);return new L5(Z.done.addTransform(K,G?X.selection.getBookmark():void 0,z,D7(X)),d8.empty,U,K.time,q==null?Z.prevComposition:q)}else if(Q=K.getMeta("rebased"))return new L5(Z.done.rebased(K,Q),Z.undone.rebased(K,Q),w9(Z.prevRanges,K.mapping),Z.prevTime,Z.prevComposition);else return new L5(Z.done.addMaps(K.mapping.maps),Z.undone.addMaps(K.mapping.maps),w9(Z.prevRanges,K.mapping),Z.prevTime,Z.prevComposition)}function OG(Z,X){if(!X)return!1;if(!Z.docChanged)return!0;let K=!1;return Z.mapping.maps[0].forEach((z,J)=>{for(let Q=0;Q<X.length;Q+=2)if(z<=X[Q+1]&&J>=X[Q])K=!0}),K}function zK(Z){let X=[];for(let K=Z.length-1;K>=0&&X.length==0;K--)Z[K].forEach((z,J,Q,Y)=>X.push(Q,Y));return X}function w9(Z,X){if(!Z)return null;let K=[];for(let z=0;z<Z.length;z+=2){let J=X.map(Z[z],1),Q=X.map(Z[z+1],-1);if(J<=Q)K.push(J,Q)}return K}function LG(Z,X,K){let z=D7(X),J=i5.get(X).spec.config,Q=(K?Z.undone:Z.done).popEvent(X,z);if(!Q)return null;let Y=Q.selection.resolve(Q.transform.doc),q=(K?Z.done:Z.undone).addTransform(Q.transform,X.selection.getBookmark(),J,z),G=new L5(K?q:Q.remaining,K?Q.remaining:q,null,0,-1);return Q.transform.setSelection(Y).setMeta(i5,{redo:K,historyState:G})}var v9=!1,JK=null;function D7(Z){let X=Z.plugins;if(JK!=X){v9=!1,JK=X;for(let K=0;K<X.length;K++)if(X[K].spec.historyPreserveItems){v9=!0;break}}return v9}var i5=new v5("history"),MG=new v5("closeHistory");function $9(Z={}){return Z={depth:Z.depth||100,newGroupDelay:Z.newGroupDelay||500},new K8({key:i5,state:{init(){return new L5(d8.empty,d8.empty,null,0,-1)},apply(X,K,z){return PG(K,z,X,Z)}},config:Z,props:{handleDOMEvents:{beforeinput(X,K){let z=K.inputType,J=z=="historyUndo"?s0:z=="historyRedo"?C7:null;if(!J)return!1;return K.preventDefault(),J(X.state,X.dispatch)}}}})}function I7(Z,X){return(K,z)=>{let J=i5.getState(K);if(!J||(Z?J.undone:J.done).eventCount==0)return!1;if(z){let Q=LG(J,K,Z);if(Q)z(X?Q.scrollIntoView():Q)}return!0}}var s0=I7(!1,!0),C7=I7(!0,!0),i68=I7(!1,!1),d68=I7(!0,!1);function QK(Z){let X=i5.getState(Z);return X?X.done.eventCount:0}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Y6=function(Z,X){return Y6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,z){K.__proto__=z}||function(K,z){for(var J in z)if(Object.prototype.hasOwnProperty.call(z,J))K[J]=z[J]},Y6(Z,X)};function b(Z,X){if(typeof X!=="function"&&X!==null)throw new TypeError("Class extends value "+String(X)+" is not a constructor or null");Y6(Z,X);function K(){this.constructor=Z}Z.prototype=X===null?Object.create(X):(K.prototype=X.prototype,new K)}var P=function(){return P=Object.assign||function Z(X){for(var K,z=1,J=arguments.length;z<J;z++){K=arguments[z];for(var Q in K)if(Object.prototype.hasOwnProperty.call(K,Q))X[Q]=K[Q]}return X},P.apply(this,arguments)};function w8(Z,X,K){if(K||arguments.length===2){for(var z=0,J=X.length,Q;z<J;z++)if(Q||!(z in X)){if(!Q)Q=Array.prototype.slice.call(X,0,z);Q[z]=X[z]}}return Z.concat(Q||Array.prototype.slice.call(X))}function m(Z,X){if(Object.defineProperty)Object.defineProperty(Z,"raw",{value:X});else Z.raw=X;return Z}function DG(Z,X,K){var z;K=K||null;for(z in Z)if(Z.hasOwnProperty(z)){if(X.call(K,Z[z],z,Z)===!1)break}}var Z3=DG;function IG(Z,X){var K=Object.prototype.hasOwnProperty,z,J,Q,Y;for(Q=1,Y=arguments.length;Q<Y;Q+=1){z=arguments[Q];for(J in z)if(K.call(z,J))Z[J]=z[J]}return Z}var u6=IG;function CG(Z){return typeof Z==="string"||Z instanceof String}var b5=CG;function SG(Z){return Z instanceof Array}var V3=SG;function kG(Z,X,K){var z=0,J=Z.length;K=K||null;for(;z<J;z+=1)if(X.call(K,Z[z],z,Z)===!1)break}var X3=kG,bG=V3,yG=X3,NG=Z3;function TG(Z,X,K){if(bG(Z))yG(Z,X,K);else NG(Z,X,K)}var G1=TG,xG=b5,gG=G1;function uG(Z,X,K){var z=Z.style;if(xG(X)){z[X]=K;return}gG(X,function(J,Q){z[Q]=J})}var V5=uG,wG=V3;function vG(Z,X,K){var z,J;if(K=K||0,!wG(X))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(X,Z,K);J=X.length;for(z=K;K>=0&&z<J;z+=1)if(X[z]===Z)return z;return-1}var R0=vG;function $G(Z){return Z===void 0}var o8=$G,hG=o8;function fG(Z){if(!Z||!Z.className)return"";if(hG(Z.className.baseVal))return Z.className;return Z.className.baseVal}var w6=fG,_G=V3,mG=o8;function lG(Z,X){if(X=_G(X)?X.join(" "):X,X=X.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),mG(Z.className.baseVal)){Z.className=X;return}Z.className.baseVal=X}var PJ=lG,YK=G1,cG=R0,pG=w6,iG=PJ;function dG(Z){var X=Array.prototype.slice.call(arguments,1),K=Z.classList,z=[],J;if(K){YK(X,function(Q){Z.classList.add(Q)});return}if(J=pG(Z),J)X=[].concat(J.split(/\s+/),X);YK(X,function(Q){if(cG(Q,z)<0)z.push(Q)}),iG(Z,z)}var G5=dG,qK=X3,sG=R0,nG=w6,aG=PJ;function rG(Z){var X=Array.prototype.slice.call(arguments,1),K=Z.classList,z,J;if(K){qK(X,function(Q){K.remove(Q)});return}z=nG(Z).split(/\s+/),J=[],qK(z,function(Q){if(sG(Q,X)<0)J.push(Q)}),aG(Z,J)}var n8=rG;function oG(Z){return typeof Z==="number"||Z instanceof Number}var D5=oG;function tG(Z){return Z===null}var p7=tG,eG=Z3;function ZU(Z,X){var K=document.createElement("img"),z="";return eG(X,function(J,Q){z+="&"+Q+"="+J}),z=z.substring(1),K.src=Z+"?"+z,K.style.display="none",document.body.appendChild(K),document.body.removeChild(K),K}var XU=ZU,KU=o8,zU=XU,JU=604800000;function QU(Z){var X=new Date().getTime();return X-Z>JU}function YU(Z,X){var K="https://www.google-analytics.com/collect",z=location.hostname,J="event",Q="use",Y="TOAST UI "+Z+" for "+z+": Statistics",q=window.localStorage.getItem(Y);if(!KU(window.tui)&&window.tui.usageStatistics===!1)return;if(q&&!QU(q))return;window.localStorage.setItem(Y,new Date().getTime()),setTimeout(function(){if(document.readyState==="interactive"||document.readyState==="complete")zU(K,{v:1,t:J,tid:X,cid:z,dp:z,dh:Z,el:Z,ec:Q})},1000)}var qU=YU;/Mac/.test(navigator.platform);var GU=/[\u0020]+/g,UU=/[>(){}[\]+-.!#|]/g,GK=/<([a-zA-Z_][a-zA-Z0-9\-._]*)(\s|[^\\>])*\/?>|<(\/)([a-zA-Z_][a-zA-Z0-9\-._]*)\s*\/?>|<!--[^-]+-->|<([a-zA-Z_][a-zA-Z0-9\-.:/]*)>/g,UK=/\\[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~\\]/g,VU=/[*_~`]/g,VK=/!\[.*\]\(.*\)/g,WU=/[[\]]/g,WK=/(?:^|[^\\])\\(?!\\)/g,AU='[&<>"]',AK=new RegExp(AU,"g");function HU(Z){switch(Z){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return Z}}function t0(Z){if(AK.test(Z))return Z.replace(AK,HU);return Z}function jU(){qU("editor","UA-129966929-1")}function F8(Z,X){return Z.indexOf(X)!==-1}var RU=["rel","target","hreflang","type"],FU={codeblock:/(^ {4}[^\n]+\n*)+/,thematicBreak:/^ *((\* *){3,}|(- *){3,} *|(_ *){3,}) */,atxHeading:/^(#{1,6}) +[\s\S]+/,seTextheading:/^([^\n]+)\n *(=|-){2,} */,blockquote:/^( *>[^\n]+.*)+/,list:/^ *(\*+|-+|\d+\.) [\s\S]+/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? */,link:/!?\[.*\]\(.*\)/,reflink:/!?\[.*\]\s*\[([^\]]*)\]/,verticalBar:/\u007C/,fencedCodeblock:/^((`|~){3,})/};function OJ(Z){if(!Z)return null;var X={};return RU.forEach(function(K){if(!o8(Z[K]))X[K]=Z[K]}),X}function i7(Z,X){var K="";for(var z=0;z<X;z+=1)K+=Z;return K}function BU(Z){var X=!1;return Z3(FU,function(K){if(K.test(Z))X=!0;return!X}),X}function d7(Z){var X=[],K=VK.exec(Z);while(K)X.push([K.index,K.index+K[0].length]),K=VK.exec(Z);return Z.replace(WU,function(z,J){var Q=X.some(function(Y){return J>Y[0]&&J<Y[1]});return Q?z:"\\"+z})}function EU(Z){var X=function(J){return"\\"+J},K=function(J){return J+"\\"},z=Z.replace(GU," ");if(UK.test(z))z=z.replace(UK,X);if(WK.test(z))z=z.replace(WK,K);if(z=z.replace(VU,X),GK.test(z))z=z.replace(GK,X);if(BU(z))z=z.replace(UU,X);return z}function PU(Z){var X;if(Z.indexOf('"')===-1)X='""';else X=Z.indexOf("'")===-1?"''":"()";return X[0]+Z+X[1]}function q6(Z){return p7(Z)||o8(Z)}function v6(Z,X){if(Z===null&&Z===X)return!0;if(typeof Z!=="object"||typeof X!=="object"||q6(Z)||q6(X))return Z===X;for(var K in Z)if(Z[K]!==X[K])return!1;for(var K in X)if(!(K in Z))return!1;return!0}function C8(Z){return Z[Z.length-1]}function OU(Z,X,K){return Z>=X&&Z<=K}function $6(Z){return typeof Z==="object"&&Z!==null}function s7(Z,X){var K=P({},Z);if(Z&&X)Object.keys(X).forEach(function(z){if($6(K[z]))if(Array.isArray(X[z]))K[z]=h6(X[z]);else if(K.hasOwnProperty(z))K[z]=s7(K[z],X[z]);else K[z]=f6(X[z]);else K[z]=X[z]});return K}function h6(Z){return Z.map(function(X){if($6(X))return Array.isArray(X)?h6(X):f6(X);return X})}function f6(Z){var X=Object.keys(Z);if(!X.length)return Z;return X.reduce(function(K,z){if($6(Z[z]))K[z]=Array.isArray(Z[z])?h6(Z[z]):f6(Z[z]);else K[z]=Z[z];return K},{})}function _6(Z,X){if(X===void 0)X={};return Object.keys(X).forEach(function(K){if(Z.hasOwnProperty(K)&&typeof Z[K]==="object")if(Array.isArray(X[K]))Z[K]=X[K];else _6(Z[K],X[K]);else Z[K]=X[K]}),Z}function HK(Z,X){return Z>X?[X,Z]:[Z,X]}var LU=X3;function MU(Z){var X;try{X=Array.prototype.slice.call(Z)}catch(K){X=[],LU(Z,function(z){X.push(z)})}return X}var W5=MU;function n7(Z,X){var K=Z.nodes.paragraph;if(!X)return K.createAndFill();return K.create(null,b5(X)?Z.text(X):X)}function R8(Z,X,K){return Z.text(X,K)}function n(Z,X,K){if(K===void 0)K=X;var z=Z.doc.content.size,J=z>0?z-1:1;return _.create(Z.doc,Math.min(X,J),Math.min(K,J))}function m6(Z,X,K){var z=X.pos;return Z.replaceWith(z,z,n7(K)),Z.setSelection(n(Z,z+1))}function a7(Z){var{state:X,from:K,startIndex:z,endIndex:J,createText:Q}=Z,Y=X.tr,q=X.doc,G=X.schema;for(var U=z;U<=J;U+=1){var V=q.child(U),W=V.nodeSize,A=V.textContent,j=V.content,H=Q(A),R=H?R8(G,H):M.empty,F=Y.mapping.map(K),B=F+j.size;Y.replaceWith(F,B,R),K+=W}return Y}function l6(Z,X,K,z){var J=K.length;Z.split(X).delete(X-J,X).insert(Z.mapping.map(X),z).setSelection(n(Z,Z.mapping.map(X)-J))}function p3(Z){return Z.sourcepos[0][0]}function U1(Z){return Z.sourcepos[1][0]}function V1(Z){return Z.sourcepos[0][1]}function n5(Z){return Z.sourcepos[1][1]}function DU(Z){var X=Z.type;return X==="htmlBlock"||X==="htmlInline"}function IU(Z){var X=Z.type;return X==="strike"||X==="strong"||X==="emph"||X==="code"||X==="link"||X==="image"}function CU(Z){return Z&&Z.type==="codeBlock"}function F0(Z){return Z&&(Z.type==="item"||Z.type==="list")}function LJ(Z){return F0(Z)&&Z.listData.type==="ordered"}function SU(Z){return F0(Z)&&Z.listData.type!=="ordered"}function jK(Z){return Z&&(Z.type==="tableCell"||Z.type==="tableDelimCell")}function kU(Z){switch(Z.type){case"code":case"text":case"emph":case"strong":case"strike":case"link":case"image":case"htmlInline":case"linebreak":case"softbreak":case"customInline":return!0;default:return!1}}function K3(Z,X,K){if(K===void 0)K=!0;Z=K?Z:Z.parent;while(Z&&Z.type!=="document"){if(X(Z))return Z;Z=Z.parent}return null}function bU(Z,X,K){if(K===void 0)K=!0;Z=K?Z:Z.parent;while(Z&&Z.type!=="document")X(Z),Z=Z.parent}function G8(Z,X){return[Z[0],Z[1]+X]}function a5(Z,X){return[Z[0],X]}function yU(Z){var X=Z.firstChild.literal;switch(Z.type){case"emph":return"*"+X+"*";case"strong":return"**"+X+"**";case"strike":return"~~"+X+"~~";case"code":return"`"+X+"`";case"link":case"image":var K=Z,z=K.destination,J=K.title,Q=Z.type==="link"?"":"!";return Q+"["+X+"]("+z+(J?' "'+J+'"':"")+")";default:return null}}function NU(Z){switch(Z.type){case"document":case"blockQuote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"strike":case"link":case"image":case"table":case"tableHead":case"tableBody":case"tableRow":case"tableCell":case"tableDelimRow":case"customInline":return!0;default:return!1}}function TU(Z){var X=[],K=Z.walker(),z=null;while(z=K.next()){var J=z.node;if(J.type==="text")X.push(J.literal)}return X.join("")}var l3=[],MJ={},RK=/\$\$widget\d+\s/;function W1(Z){var X=Z.search(RK);if(X!==-1){var K=Z.substring(X),z=K.replace(RK,"").replace("$$","");Z=Z.substring(0,X),Z+=W1(z)}return Z}function DJ(Z,X){return"$$"+Z+" "+X+"$$"}function IJ(Z,X){var K=MJ[Z],z=K.rule,J=K.toDOM,Q=W1(X).match(z);if(Q)X=Q[0];return J(X)}function xU(){return l3}function gU(Z){l3=Z,l3.forEach(function(X,K){MJ["widget"+K]=X})}function h9(Z,X,K,z){return Z.concat(j0(X,K,z))}function j0(Z,X,K){if(K===void 0)K=0;var z=[],J=(l3[K]||{}).rule,Q=K+1;if(Z=W1(Z),J&&J.test(Z)){var Y=void 0;while((Y=Z.search(J))!==-1){var q=Z.substring(0,Y);if(q)z=h9(z,q,X,Q);Z=Z.substring(Y);var G=Z.match(J)[0],U="widget"+K;z.push(X.nodes.widget.create({info:U},X.text(DJ(U,G)))),Z=Z.substring(G.length)}if(Z)z=h9(z,Z,X,Q)}else if(Z)z=K<l3.length-1?h9(z,Z,X,Q):[X.text(Z)];return z}function CJ(Z){var X,K="",z=Z.walker();while(X=z.next()){var{node:J,entering:Q}=X;if(Q){if(J!==Z&&J.type!=="text")K+=yU(J),z.resumeAt(Z,!1),z.next();else if(J.type==="text")K+=J.literal}}return K}function SJ(){return{deleteSelection:function(){return P7},selectAll:function(){return T9},undo:function(){return s0},redo:function(){return C7}}}function uU(Z){return new K8({props:{decorations:function(X){var K=X.doc;if(Z.text&&K.childCount===1&&K.firstChild.isTextblock&&K.firstChild.content.size===0){var z=document.createElement("span");if(G5(z,"placeholder"),Z.className)G5(z,Z.className);return z.textContent=Z.text,o.create(K,[b8.widget(1,z)])}return null}}})}var wU=R0,vU=w6;function $U(Z,X){var K;if(Z.classList)return Z.classList.contains(X);return K=vU(Z).split(/\s+/),wU(X,K)>-1}var kJ=$U,hU=R0,fU=W5,S7=Element.prototype,_U=S7.matches||S7.webkitMatchesSelector||S7.mozMatchesSelector||S7.msMatchesSelector||function(Z){var X=this.document||this.ownerDocument;return hU(this,fU(X.querySelectorAll(Z)))>-1};function mU(Z,X){return _U.call(Z,X)}var lU=mU,bJ="[A-Za-z][A-Za-z0-9-]*",cU="[a-zA-Z_:][a-zA-Z0-9:._-]*",pU="[^\"'=<>`\\x00-\\x20]+",iU="'[^']*'",dU='"[^"]*"',sU="(?:"+pU+"|"+iU+"|"+dU+")",nU="(?:\\s*=\\s*"+sU+")",yJ="(?:\\s+"+cU+nU+"?)",NJ="<("+bJ+")("+yJ+")*\\s*/?>",aU="</("+bJ+")\\s*[>]",TJ="(?:"+NJ+"|"+aU+")",z3=new RegExp("^"+TJ,"i"),G6=/<br\s*\/*>/i,rU=/<! ---->|<!--(?:-?[^>-])(?:-?[^-])*-->/,xJ="</p><p>";function c6(Z,X,K){var z=parseInt(Z.left,10),J=parseInt(Z.top,10),Q=parseInt(Z.width,10)+parseInt(Z.paddingLeft,10)+parseInt(Z.paddingRight,10),Y=parseInt(Z.height,10)+parseInt(Z.paddingTop,10)+parseInt(Z.paddingBottom,10);return X>=z&&X<=z+Q&&K>=J&&K<=J+Y}var gJ="toastui-editor-";function y(){var Z=[];for(var X=0;X<arguments.length;X++)Z[X]=arguments[X];var K=[];for(var z=0,J=Z;z<J.length;z++){var Q=J[z],Y=void 0;if(Array.isArray(Q))Y=Q[0]?Q[1]:null;else Y=Q;if(Y)K.push(""+gJ+Y)}return K.join(" ")}function Q8(){var Z=[];for(var X=0;X<arguments.length;X++)Z[X]=arguments[X];return Z.map(function(K){return gJ+"md-"+K}).join(" ")}function oU(Z){return(Z===null||Z===void 0?void 0:Z.nodeType)===Node.TEXT_NODE}function A1(Z){return Z&&Z.nodeType===Node.ELEMENT_NODE}function tU(Z,X){var K=W5(Z.querySelectorAll(X));if(K.length)return K;return[]}function eU(Z,X){X=V3(X)?W5(X):[X],X.forEach(function(K){Z.appendChild(K)})}function ZV(Z,X){if(X.parentNode)X.parentNode.insertBefore(Z,X)}function B0(Z){if(Z.parentNode)Z.parentNode.removeChild(Z)}function XV(Z){var X=[];while(Z.firstChild)if(X.push(Z.firstChild),Z.parentNode)Z.parentNode.insertBefore(Z.firstChild,Z);return B0(Z),X}function p6(Z,X,K){if(o8(K))K=!kJ(Z,X);var z=K?G5:n8;z(Z,X)}function uJ(Z,X){var K=document.createElement("div");if(b5(Z))K.innerHTML=Z;else K.appendChild(Z);var z=K.firstChild;if(X)X.appendChild(z);return z}function i6(Z){var X=window.getComputedStyle(Z);return["margin-left","margin-right"].reduce(function(K,z){return K+parseInt(X.getPropertyValue(z),10)},0)+Z.offsetWidth}function U5(Z,X){var K;if(b5(X))K=function(z){return lU(z,X)};else K=function(z){return z===X};while(Z&&Z!==document){if(A1(Z)&&K(Z))return Z;Z=Z.parentNode}return null}function wJ(Z,X){var K=0,z=0;while(Z&&Z!==X){var{offsetTop:J,offsetLeft:Q,offsetParent:Y}=Z;if(K+=J,z+=Q,Y===X.offsetParent)break;Z=Z.offsetParent}return{offsetTop:K,offsetLeft:z}}function d6(Z,X){Object.keys(Z).forEach(function(K){if(q6(Z[K]))X.removeAttribute(K);else X.setAttribute(K,Z[K])})}function KV(Z){var X=Z.replace(/<p><br\s*\/*><\/p>/gi,"<p></p>"),K=new RegExp(TJ,"ig"),z=X.match(K);return z===null||z===void 0||z.forEach(function(J,Q){if(G6.test(J)){var Y=xJ;if(Q){var q=z[Q-1],G=q.match(NJ);if(G&&!/br/i.test(G[1])){var U=G[1];Y="</"+U+"><"+U+">"}}X=X.replace(G6,Y)}}),X}function s6(Z){var X=/<img class="ProseMirror-separator" alt="">/g,K=/ class="ProseMirror-trailingBreak"/g,z=Z;return z=z.replace(X,""),z=z.replace(K,""),z}var vJ=new v5("widget"),FK=5,zV=function(){function Z(X,K){var z=this;this.popup=null,this.removeWidget=function(){if(z.popup)z.rootEl.removeChild(z.popup),z.popup=null},this.rootEl=X.dom.parentElement,this.eventEmitter=K,this.eventEmitter.listen("blur",this.removeWidget),this.eventEmitter.listen("loadUI",function(){z.rootEl=U5(X.dom.parentElement,"."+y("defaultUI"))}),this.eventEmitter.listen("removePopupWidget",this.removeWidget)}return Z.prototype.update=function(X){var K=vJ.getState(X.state);if(this.removeWidget(),K){var{node:z,style:J}=K,Q=X.coordsAtPos(K.pos),Y=Q.top,q=Q.left,G=Q.bottom,U=G-Y,V=this.rootEl.getBoundingClientRect(),W=Y-V.top;V5(z,{opacity:"0"}),this.rootEl.appendChild(z),V5(z,{position:"absolute",left:q-V.left+FK+"px",top:(J==="bottom"?W+U-FK:W-U)+"px",opacity:"1"}),this.popup=z,X.focus()}},Z.prototype.destroy=function(){this.eventEmitter.removeEventHandler("blur",this.removeWidget)},Z}();function JV(Z){return new K8({key:vJ,state:{init:function(){return null},apply:function(X){return X.getMeta("widget")}},view:function(X){return new zV(X,Z)}})}function QV(Z){Z.listen("addImageBlobHook",function(X,K){var z=new FileReader;z.onload=function(J){var Q=J.target;return K(Q.result)},z.readAsDataURL(X)})}function n6(Z,X,K){var z=function(J,Q){Z.emit("command","addImage",{imageUrl:J,altText:Q||X.name||"image"})};Z.emit("addImageBlobHook",X,z,K)}function $J(Z){var X=W5(Z).filter(function(z){var J=z.type;return J.indexOf("image")!==-1});if(X.length===1){var K=X[0];if(K)return K.getAsFile()}return null}function YV(Z){var X=Z.eventEmitter;return new K8({props:{handleDOMEvents:{drop:function(K,z){var J,Q=(J=z.dataTransfer)===null||J===void 0?void 0:J.files;if(Q)X3(Q,function(Y){if(Y.type.indexOf("image")!==-1)return z.preventDefault(),z.stopPropagation(),n6(X,Y,z.type),!1;return!0});return!0}}}})}var d=function(){function Z(){}return Object.defineProperty(Z.prototype,"type",{get:function(){return"node"},enumerable:!1,configurable:!0}),Z.prototype.setContext=function(X){this.context=X},Z}();function hJ(Z){var X=document.createElement("span"),K=IJ(Z.attrs.info,Z.textContent);return X.className="tui-widget",X.appendChild(K),{dom:X}}function U6(Z){return Z.type.name==="widget"}var fJ=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"widget"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{attrs:{info:{default:null}},group:"inline",inline:!0,content:"text*",selectable:!1,atom:!0,toDOM:function(){return["span",{class:"tui-widget"},0]},parseDOM:[{tag:"span.tui-widget",getAttrs:function(K){var z=K.textContent,J=z.match(/\$\$(widget\d+)/),Q=J[1];return{info:Q}}}]}},enumerable:!1,configurable:!0}),X}(d),_J=function(){function Z(X){this.timer=null,this.el=document.createElement("div"),this.el.className="toastui-editor",this.eventEmitter=X,this.placeholder={text:""}}return Z.prototype.createState=function(){return w5.create({schema:this.schema,plugins:this.createPlugins()})},Z.prototype.initEvent=function(){var X=this,K=X.eventEmitter,z=X.view,J=X.editorType;z.dom.addEventListener("focus",function(){return K.emit("focus",J)}),z.dom.addEventListener("blur",function(){return K.emit("blur",J)})},Z.prototype.emitChangeEvent=function(X){if(this.eventEmitter.emit("caretChange",this.editorType),X.docChanged)this.eventEmitter.emit("change",this.editorType)},Object.defineProperty(Z.prototype,"defaultPlugins",{get:function(){var X=this.createInputRules(),K=w8(w8([],this.keymaps),[p0(P({"Shift-Enter":x9.Enter},x9)),$9(),uU(this.placeholder),JV(this.eventEmitter),YV(this.context)]);return X?K.concat(X):K},enumerable:!1,configurable:!0}),Z.prototype.createInputRules=function(){var X=xU(),K=X.map(function(z){var J=z.rule;return new J5(J,function(Q,Y,q,G){var{schema:U,tr:V,doc:W}=Q,A=Y.input.match(new RegExp(J,"g")),j=W.resolve(q),H=j.parent,R=0;if(U6(H))H=j.node(j.depth-1);if(H.forEach(function(O){return U6(O)&&(R+=1)}),A.length>R){var F=C8(A),B=j0(F,U);return V.replaceWith(G-F.length+1,G,B)}return null})});return K.length?g9({rules:K}):null},Z.prototype.clearTimer=function(){if(this.timer)clearTimeout(this.timer),this.timer=null},Z.prototype.createSchema=function(){return new z7({nodes:this.specs.nodes,marks:this.specs.marks})},Z.prototype.createKeymaps=function(X){var K=SJ(),z=K.undo,J=K.redo,Q=this.specs.keymaps(X),Y={"Mod-z":z(),"Shift-Mod-z":J()};return X?Q.concat(p0(Y)):Q},Z.prototype.createCommands=function(){return this.specs.commands(this.view)},Z.prototype.createPluginProps=function(){var X=this;return this.extraPlugins.map(function(K){return K(X.eventEmitter)})},Z.prototype.focus=function(){var X=this;this.clearTimer(),this.timer=setTimeout(function(){X.view.focus(),X.view.dispatch(X.view.state.tr.scrollIntoView())})},Z.prototype.blur=function(){this.view.dom.blur()},Z.prototype.destroy=function(){var X=this;this.clearTimer(),this.view.destroy(),Object.keys(this).forEach(function(K){delete X[K]})},Z.prototype.moveCursorToStart=function(X){var K=this.view.state.tr;if(this.view.dispatch(K.setSelection(n(K,1)).scrollIntoView()),X)this.focus()},Z.prototype.moveCursorToEnd=function(X){var K=this.view.state.tr;if(this.view.dispatch(K.setSelection(n(K,K.doc.content.size-1)).scrollIntoView()),X)this.focus()},Z.prototype.setScrollTop=function(X){this.view.dom.scrollTop=X},Z.prototype.getScrollTop=function(){return this.view.dom.scrollTop},Z.prototype.setPlaceholder=function(X){this.placeholder.text=X,this.view.dispatch(this.view.state.tr.scrollIntoView())},Z.prototype.setHeight=function(X){V5(this.el,{height:X+"px"})},Z.prototype.setMinHeight=function(X){V5(this.el,{minHeight:X+"px"})},Z.prototype.getElement=function(){return this.el},Z}();function qV(Z){return Z instanceof Function}var c8=qV,GV=["Enter","Shift-Enter","Mod-Enter","Tab","Shift-Tab","Delete","Backspace","Mod-Delete","Mod-Backspace","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Mod-d","Mod-D","Alt-ArrowUp","Alt-ArrowDown"];function k7(Z,X,K){return Z.focus(),X(K)(Z.state,Z.dispatch,Z)}var mJ=function(){function Z(X){this.specs=X}return Object.defineProperty(Z.prototype,"nodes",{get:function(){return this.specs.filter(function(X){return X.type==="node"}).reduce(function(X,K){var z,J=K.name,Q=K.schema;return P(P({},X),(z={},z[J]=Q,z))},{})},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"marks",{get:function(){return this.specs.filter(function(X){return X.type==="mark"}).reduce(function(X,K){var z,J=K.name,Q=K.schema;return P(P({},X),(z={},z[J]=Q,z))},{})},enumerable:!1,configurable:!0}),Z.prototype.commands=function(X,K){var z=this.specs.filter(function(Q){var Y=Q.commands;return Y}).reduce(function(Q,Y){var q={},G=Y.commands();if(c8(G))q[Y.name]=function(U){return k7(X,G,U)};else Object.keys(G).forEach(function(U){q[U]=function(V){return k7(X,G[U],V)}});return P(P({},Q),q)},{}),J=SJ();if(Object.keys(J).forEach(function(Q){z[Q]=function(Y){return k7(X,J[Q],Y)}}),K)Object.keys(K).forEach(function(Q){z[Q]=function(Y){return k7(X,K[Q],Y)}});return z},Z.prototype.keymaps=function(X){var K=this.specs.filter(function(z){return z.keymaps}).map(function(z){return z.keymaps()});return K.map(function(z){if(!X)Object.keys(z).forEach(function(J){if(!F8(GV,J))delete z[J]});return p0(z)})},Z.prototype.setContext=function(X){this.specs.forEach(function(K){K.setContext(X)})},Z}();function lJ(Z){var{from:X,to:K}=Z;if(Z instanceof q8)return[X+1,K-1];return[X,K]}function BK(Z){return Z.index(0)+1}function J3(Z,X,K){if(K===void 0)K=1;var z=0;return Z.forEach(function(J,Q){if(U6(J)&&Q+2<X)z+=2*K}),z}function $7(Z,X,K){if(K===void 0)K=X;var z=X===K,J=Z.resolve(X),Q=BK(J),Y=Q,q=J.start(1),G=q;if(!z){var U=Z.resolve(K===Z.content.size?K-1:K);if(G=U.start(1),Y=BK(U),U.pos===Z.content.size)K=Z.content.size-2}var V=Math.max(X-q+1,1),W=Math.max(K-G+1,1);return[[Q,V+J3(Z.child(Q-1),V,-1)],[Y,W+J3(Z.child(Y-1),W,-1)]]}function cJ(Z,X){var K=[];for(var z=0,J=0;z<X;z+=1){var Q=Z.child(z);K[z]=J,J+=Q.nodeSize}return K}function H0(Z,X,K){var z=cJ(Z,K[0]),J=X[0]-1,Q=K[0]-1,Y=Z.child(J),q=Z.child(Q),G=z[J],U=z[Q];return G+=X[1]+J3(Y,X[1]-1),U+=K[1]+J3(q,K[1]-1),[G,Math.min(U,Z.content.size)]}function J8(Z){var{$from:X,$to:K,from:z,to:J}=Z,Q=X.doc;if(Z instanceof q8)X=Q.resolve(z+1),K=Q.resolve(J-1);if(X.depth===0)X=Q.resolve(z-1),K=X;return{startFromOffset:X.start(1),endFromOffset:K.start(1),startToOffset:X.end(1),endToOffset:K.end(1),startIndex:X.index(0),endIndex:K.index(0),from:X.pos,to:K.pos}}function r7(Z,X){var K=1,z=1;for(var J=0,Q=0;J<Z.childCount;J+=1){var Y=Z.child(J).nodeSize;if(K=Q+1,z=Q+Y-1,J===X)break;Q+=Y}return{startOffset:K,endOffset:z}}var EK="heading",UV="blockQuote",VV="listItem",WV="table",AV="tableCell",HV="codeBlock",jV="thematicBreak",h7="link",b7="code",H1="meta",E0="delimiter",RV="taskDelimiter",a6="markedText",FV="html",BV="customBlock",PK={strong:2,emph:1,strike:2};function p(Z,X,K,z){return{start:Z,end:X,spec:{type:K,attrs:z}}}function EV(Z,X,K){var{level:z,headingType:J}=Z,Q=[p(X,K,EK,{level:z})];if(J==="atx")Q.push(p(X,G8(X,z),E0));else Q.push(p(a5(K,0),K,EK,{seText:!0}));return Q}function f9(Z,X,K){var z=Z.type,J=G8(X,PK[z]),Q=G8(K,-PK[z]);return[p(J,Q,z),p(X,J,E0),p(Q,K,E0)]}function pJ(Z,X,K,z){return[p(Z,X,h7),p(a5(Z,K[1]+1),a5(X,z),h7,{desc:!0}),p(a5(X,z+2),G8(X,-1),h7,{url:!0})]}function PV(Z,X,K){var z=Z.lastChild,J=z?n5(z)+1:3,Q=G8(X,1);return w8([p(X,Q,H1)],pJ(X,K,Q,J))}function OV(Z,X,K){var{lastChild:z,extendedAutolink:J}=Z,Q=z?n5(z)+1:2;return J?[p(X,K,h7,{desc:!0})]:pJ(X,K,X,Q)}function LV(Z,X,K){var z=Z.tickCount,J=G8(X,z),Q=G8(K,-z);return[p(X,K,b7),p(X,J,b7,{start:!0}),p(J,Q,b7,{marked:!0}),p(Q,K,b7,{end:!0})]}function iJ(Z,X,K,z){var J={start:X,end:K,spec:{attrs:{className:z+"-line-background",codeStart:X[0],codeEnd:K[0]}},lineBackground:!0};return Z.type!=="item"&&Z.type!=="blockQuote"?[P(P({},J),{end:X,spec:{attrs:{className:z+"-line-background start"}}}),P(P({},J),{start:[Math.min(X[0]+1,K[0]),X[1]]})]:null}function MV(Z,X,K,z){var{fenceOffset:J,fenceLength:Q,fenceChar:Y,info:q,infoPadding:G,parent:U}=Z,V=J+Q,W=[p(a5(X,1),K,HV)];if(Y)W.push(p(X,G8(X,V),E0));if(q)W.push(p(G8(X,Q),G8(X,Q+G+q.length),H1));var A="^(\\s{0,4})("+Y+"{"+Q+",})",j=new RegExp(A);if(j.test(z))W.push(p(a5(K,1),K,E0));var H=iJ(U,X,K,"code-block");return H?W.concat(H):W}function DV(Z,X,K){var z=Z,J=z.offset,Q=z.syntaxLength,Y=z.info,q=z.parent,G=J+Q,U=[p(a5(X,1),K,BV)];if(U.push(p(X,G8(X,G),E0)),Y)U.push(p(G8(X,G),G8(X,Q+Y.length),H1));U.push(p(a5(K,1),K,E0));var V=iJ(q,X,K,"custom-block");return V?U.concat(V):U}function dJ(Z,X){var K=[];while(Z){var z=Z.type;if(z==="paragraph"||z==="codeBlock")K.push(p([p3(Z),V1(Z)-1],[U1(Z),n5(Z)+1],X));Z=Z.next}return K}function IV(Z){var X=[];while(Z)X.push(p([p3(Z),V1(Z)],[U1(Z),n5(Z)+1],a6)),Z=Z.next;return X}function CV(Z,X,K){var z=Z.parent&&Z.parent.type!=="blockQuote"?[p(X,K,UV)]:[];if(Z.firstChild){var J=[];if(Z.firstChild.type==="paragraph")J=IV(Z.firstChild.firstChild);else if(Z.firstChild.type==="list")J=dJ(Z.firstChild,a6);z=w8(w8([],z),J)}return z}function SV(Z){var X=0;while(Z.parent.parent&&Z.parent.parent.type==="item")Z=Z.parent.parent,X+=1;var K=[{odd:!0},{even:!0}][X%2];return[VV,P(P({},K),{listStyle:!0})]}function kV(Z,X){var K=Z.listData,z=K.padding,J=K.task,Q=SV(Z),Y=[p.apply(void 0,w8([X,G8(X,z)],Q))];if(J)Y.push(p(G8(X,z),G8(X,z+3),RV)),Y.push(p(G8(X,z+1),G8(X,z+2),H1));return Y.concat(dJ(Z.firstChild,a6))}var OK={heading:EV,strong:f9,emph:f9,strike:f9,link:OV,image:PV,code:LV,codeBlock:MV,blockQuote:CV,item:kV,customBlock:DV},LK={thematicBreak:jV,table:WV,tableCell:AV,htmlInline:FV};function bV(Z,X,K,z){var J=Z.type;if(c8(OK[J]))return OK[J](Z,X,K,z);if(LK[J])return[p(X,K,LK[J])];return null}var c3={};function yV(Z){var{schema:X,toastMark:K}=Z;return new K8({appendTransaction:function(z,J,Q){var Y=z[0],q=Q.tr;if(Y.docChanged){var G=[],U=Y.getMeta("editResult");U.forEach(function(V){var{nodes:W,removedNodeRange:A}=V;if(W.length){G=G.concat(wV(q,W));for(var j=0,H=W;j<H.length;j++){var R=H[j],F=R.walker(),B=F.next();while(B){var{node:O,entering:L}=B;if(L)G=G.concat(vV(O,K));B=F.next()}}}else if(A){var D=q.doc.childCount-1,I=A.line,k=I[0],x=I[1],w=Math.min(k,D),N=Math.min(x,D);for(var c=w;c<=N;c+=1)c3[c]=!0}}),xV(q,X,G)}return q.setMeta("widget",Y.getMeta("widget"))}})}function NV(Z,X,K){return Object.keys(K).some(function(z){return K[z]!==Z.child(X).attrs[z]})}function TV(Z,X,K,z,J){if(J===void 0)J={};var{startIndex:Q,endIndex:Y,from:q,to:G}=z,U=!1;for(var V=Q;V<=Y;V+=1)delete c3[V],U=NV(X,V,J);if(U)Z.setBlockType(q,G,K,J)}function xV(Z,X,K){var z=Z.doc,J=X.nodes.paragraph,Q=cJ(z,z.childCount);K.forEach(function(Y){var{start:q,end:G,spec:U,lineBackground:V}=Y,W=Math.min(q[0],z.childCount)-1,A=Math.min(G[0],z.childCount)-1,j=z.child(W),H=z.child(A),R=Q[W],F=Q[A];if(R+=q[1]+J3(j,q[1]-1),F+=G[1]+J3(H,G[1]-1),U)if(V){var B={from:R,to:F,startIndex:W,endIndex:A};TV(Z,z,J,B,U.attrs)}else Z.addMark(R,F,X.mark(U.type,U.attrs));else Z.removeMark(R,F)}),gV(Z,Q,J)}function gV(Z,X,K){Object.keys(c3).forEach(function(z){var J=Number(z),Q=Math.min(Number(z)+1,Z.doc.childCount-1),Y=X[J],q=X[Q]-1;if(J===Q)q+=2;Z.setBlockType(Y,q,K)})}function uV(Z,X,K){var z=[];c3={};for(var J=X[0]-1;J<K[0];J+=1){var Q=Z.child(J),Y=Q.attrs.codeEnd,q=Q.attrs.codeStart;if(q&&Y&&!F8(z,q)){z.push(q),Y=Math.min(Y,Z.childCount);var G=q-1,U=K[0];for(var V=G;V<U;V+=1)c3[V]=!0}}}function wV(Z,X){var K=Z.doc,z=X[0].sourcepos[0],J=C8(X).sourcepos,Q=J[1],Y=[z[0],z[1]],q=[Q[0],Q[1]+1],G=[];return uV(K,z,Q),G.push({start:Y,end:q}),G}function vV(Z,X){var K=X.getLineTexts(),z=[p3(Z),V1(Z)],J=[U1(Z),n5(Z)+1],Q=bV(Z,z,J,K[J[0]-1]);return Q!==null&&Q!==void 0?Q:[]}var $V=["taskList","orderedList","bulletList","table","strong","emph","strike","heading","thematicBreak","blockQuote","code","codeBlock","indent","outdent"];function hV(Z){var X=Z.type;if(F0(Z)){if(Z.listData.task)return"taskList";return Z.listData.type==="ordered"?"orderedList":"bulletList"}if(X.indexOf("table")!==-1)return"table";if(!F8($V,X))return null;return X}function fV(Z){var X={indent:{active:!1,disabled:!0},outdent:{active:!1,disabled:!0}},K=!0;return bU(Z,function(z){var J=hV(z);if(!J)return;if(J==="bulletList"||J==="orderedList"){if(K)X[J]={active:!0},X.indent.disabled=!1,X.outdent.disabled=!1,K=!1}else X[J]={active:!0}}),X}function _V(Z){var{toastMark:X,eventEmitter:K}=Z;return new K8({view:function(){return{update:function(z,J){var Q=z.state,Y=Q.doc,q=Q.selection;if(J&&J.doc.eq(Y)&&J.selection.eq(q))return;var G=q.from,U=Q.doc.resolve(G).start(),V=Q.doc.content.findIndex(G).index+1,W=G-U;if(G===U)W+=1;var A=[V,W],j=X.findNodeAtPosition(A),H=fV(j);K.emit("changeToolbarState",{cursorPos:A,mdNode:j,toolbarState:H}),K.emit("setFocusedNode",j)}}}})}var mV=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"doc"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{content:"block+"}},enumerable:!1,configurable:!0}),X}(d),a=function(){function Z(){}return Object.defineProperty(Z.prototype,"type",{get:function(){return"mark"},enumerable:!1,configurable:!0}),Z.prototype.setContext=function(X){this.context=X},Z}();function $8(Z,X){return r5(Z,X-1)}function r5(Z,X){return Z.child(X).textContent}var f3=/^\s*> ?/,lV=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"blockQuote"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q8("block-quote")},0]}}},enumerable:!1,configurable:!0}),X.prototype.createBlockQuoteText=function(K,z){return z?K.replace(f3,"").trim():"> "+K.trim()},X.prototype.extendBlockQuote=function(){var K=this;return function(z,J){var{selection:Q,doc:Y,tr:q,schema:G}=z,U=J8(Q),V=U.endFromOffset,W=U.endToOffset,A=U.endIndex,j=U.to,H=r5(Y,A),R=f3.test(H);if(R&&j>V&&Q.empty){var F=!H.replace(f3,"").trim();if(F)q.deleteRange(V,W).split(q.mapping.map(W));else{var B=H.slice(j-V).trim(),O=R8(G,K.createBlockQuoteText(B));l6(q,W,B,O)}return J(q),!0}return!1}},X.prototype.commands=function(){var K=this;return function(){return function(z,J){var{selection:Q,doc:Y}=z,q=J8(Q),G=q.startFromOffset,U=q.endToOffset,V=q.startIndex,W=q.endIndex,A=f3.test(r5(Y,V)),j=a7({state:z,startIndex:V,endIndex:W,from:G,createText:function(H){return K.createBlockQuoteText(H,A)}});return J(j.setSelection(n(j,j.mapping.map(U)))),!0}}},X.prototype.keymaps=function(){var K=this.commands()();return{"alt-q":K,"alt-Q":K,Enter:this.extendBlockQuote()}},X}(a),P0=/(^\s*)([-*+] |[\d]+\. )/,r6=/(^\s*)([\d])+\.( \[[ xX]])? /,C5=/^(\s*)((\d+)([.)]\s(?:\[(?:x|\s)\]\s)?))(.*)/,o7=/(^\s*)([-*+]|[\d]+\.)( \[[ xX]])? /,cV=/^(\s*)([-*+]+(\s(?:\[(?:x|\s)\]\s)?))(.*)/,pV=/(^\s*)([-*+] |[\d]+\. )(\[[ xX]] )/,iV=/(^\s*)([-*+])( \[[ xX]]) /;function o6(Z){return r6.test(Z)?"ordered":"bullet"}function t6(Z){var X=0;while(Z&&Z.type!=="document"){if(Z.type==="list")X+=1;Z=Z.parent}return X}function V6(Z,X,K,z){var J=Z.getLineTexts(),Q=J.length,Y=[],q=X;while(z?q<Q:q>1){q=z?q+1:q-1;var G=Z.findFirstNodeAtLine(q),U=t6(G);if(U===K)Y.push({line:q,depth:K,mdNode:G});else if(U<K)break}return Y}function dV(Z){var{toastMark:X,mdNode:K,line:z}=Z,J=t6(K),Q=V6(X,z,J,!1).reverse(),Y=V6(X,z,J,!0);return Q.concat([{line:z,depth:J,mdNode:K}]).concat(Y)}function sV(Z){if(!P0.test(Z))return"* "+Z;var X=o6(Z);if(X==="bullet"&&o7.test(Z))Z=Z.replace(iV,"$1$2 ");else if(X==="ordered")Z=Z.replace(r6,"$1* ");return Z}function nV(Z,X){if(!P0.test(Z))return X+". "+Z;var K=o6(Z);if(K==="bullet"||K==="ordered"&&o7.test(Z))Z=Z.replace(o7,"$1"+X+". ");else if(K==="ordered"){var z=C5.exec(Z)[3];if(Number(z)!==X)Z=Z.replace(r6,"$1"+X+". ")}return Z}function sJ(Z,X,K,z){if(z===void 0)z=0;var J=Number.MAX_VALUE,Q=0,Y=X.map(function(q,G){var U=q.line;J=Math.min(U-1,J),Q=Math.max(U-1,Q);var V=$8(Z,U);return V=K==="bullet"?sV(V):nV(V,G+1+z),{text:V,line:U}});return{changedResults:Y,firstIndex:J,lastIndex:Q}}function MK(Z,X){var K=dV(X);return sJ(X.doc,K,Z)}var aV={bullet:function(Z){return MK("bullet",Z)},ordered:function(Z){return MK("ordered",Z)},task:function(Z){var{mdNode:X,doc:K,line:z}=Z,J=$8(K,z);if(X.listData.task)J=J.replace(pV,"$1$2");else if(F0(X))J=J.replace(P0,"$1$2[ ] ");return{changedResults:[{text:J,line:z}]}}},rV={bullet:function(Z){var{doc:X,line:K}=Z,z=$8(X,K),J=[{text:"* "+z,line:K}];return{changedResults:J}},ordered:function(Z){var{toastMark:X,doc:K,line:z,startLine:J}=Z,Q=$8(K,z),Y=1,q=J,G=0;for(var U=J-1;U>0;U-=1){var V=X.findFirstNodeAtLine(U),W=$8(K,U),A=W&&!!K3(V,function(L){return F0(L)}),j=C5.exec($8(K,U));if(!j&&!A)break;if(!j&&A){G+=1;continue}var H=j,R=H[1],F=H[3];if(!R){Y=Number(F),q=U;break}}var B=Y+z-q-G,O=[{text:B+". "+Q,line:z}];return{changedResults:O}},task:function(Z){var{doc:X,line:K}=Z,z=$8(X,K),J=[{text:"* [ ] "+z,line:K}];return{changedResults:J}}},oV={bullet:function(Z){var{line:X,doc:K}=Z,z=$8(K,X),J=cV.exec(z),Q=J[1],Y=J[2];return{listSyntax:""+Q+Y}},ordered:function(Z){var{toastMark:X,line:K,mdNode:z,doc:J}=Z,Q=t6(z),Y=$8(J,K),q=C5.exec(Y),G=q[1],U=q[3],V=q[4],W=Number(U)+1,A=""+G+W+V,j=V6(X,K,Q,!0),H=j.filter(function(R){var F=C5.exec($8(J,R.line));return F&&F[1].length===G.length&&!!K3(R.mdNode,function(B){return LJ(B)})});return P({listSyntax:A},sJ(J,H,"ordered",W))}};function nJ(Z,X,K,z,J){var Q=[],Y=$8(Z,K),q=C5.exec(Y);while(q){var G=q[1],U=q[4],V=q[5],W=G.length;if(W===J)Q.push(R8(X,""+G+z+U+V)),z+=1,K+=1;else if(W>J){var A=nJ(Z,X,K,1,W);K=A.line,Q=Q.concat(A.nodes)}if(W<J||K>Z.childCount)break;Y=$8(Z,K),q=C5.exec(Y)}return{nodes:Q,line:K}}var DK=/(^\s{1,4})(.*)/;function IK(Z,X,K){return Z<X||P0.test(K)||f3.test(K)}function CK(Z,X,K){var z=K.$from;if(z.depth===0)z=Z.resolve(z.pos-1);var J=z.node(1),Q=z.start(1),Y=J.content.size;return J.rangeHasMark(0,Y,X.marks.table)&&z.pos-Q!==Y&&z.pos!==Q}function SK(Z,X){var{from:K,to:z}=X;if(X.type==="indent"){var J=4;K+=J,z+=(X.lineLen+1)*J}else{var Q=X.spaceLenList;K-=Q[0];for(var Y=0;Y<Q.length;Y+=1)z-=Q[Y]}return n(Z,K,z)}var tV=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"paragraph"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{content:"inline*",attrs:{className:{default:null},codeStart:{default:null},codeEnd:{default:null}},selectable:!1,group:"block",parseDOM:[{tag:"div"}],toDOM:function(K){var z=K.attrs;return z.className?["div",{class:Q8(z.className)},0]:["div",0]}}},enumerable:!1,configurable:!0}),X.prototype.reorderList=function(K,z){var J=this.context,Q=J.view,Y=J.toastMark,q=J.schema,G=Q.state,U=G.tr,V=G.selection,W=G.doc,A=Y.findFirstNodeAtLine(K),j=A;while(A&&!SU(A)&&A.parent.type!=="document")if(A=A.parent,LJ(A)){j=A;break}if(j)K=j.sourcepos[0][0];var H=C5.exec($8(W,K)),R=H[1],F=H[3],B=R.length,O=nJ(W,q,K,Number(F),B),L=O.line,D=O.nodes;z=Math.max(z,L-1);var I=r7(W,K-1).startOffset;for(var k=K-1;k<=z-1;k+=1){var x=W.child(k),w=x.nodeSize,N=x.content,c=U.mapping.map(I),r=c+N.size;U.replaceWith(c,r,D[k-K+1]),I+=w}var g8=n(U,V.from,V.to);Q.dispatch(U.setSelection(g8))},X.prototype.indent=function(K){var z=this;if(K===void 0)K=!1;return function(){return function(J,Q){var{schema:Y,selection:q,doc:G}=J,U=J8(q),V=U.from,W=U.to,A=U.startFromOffset,j=U.startIndex,H=U.endIndex;if(K&&CK(G,Y,q))return!1;var R=r5(G,j);if(K&&IK(V,W,R)||!K&&P0.test(R)){var F=a7({state:J,from:A,startIndex:j,endIndex:H,createText:function(O){return"    "+O}}),B={type:"indent",from:V,to:W,lineLen:H-j};if(Q(F.setSelection(SK(F,B))),C5.test(R))z.reorderList(j+1,H+1)}else if(K)Q(J.tr.insert(W,R8(Y,"    ")));return!0}}},X.prototype.outdent=function(K){var z=this;if(K===void 0)K=!1;return function(){return function(J,Q){var{selection:Y,doc:q,schema:G}=J,U=J8(Y),V=U.from,W=U.to,A=U.startFromOffset,j=U.startIndex,H=U.endIndex;if(K&&CK(q,G,Y))return!1;var R=r5(q,j);if(K&&IK(V,W,R)||!K&&P0.test(R)){var F=[],B=a7({state:J,from:A,startIndex:j,endIndex:H,createText:function(k){var x=DK.exec(k);return F.push(x?x[1].length:0),k.replace(DK,"$2")}}),O={type:"outdent",from:V,to:W,spaceLenList:F};if(Q(B.setSelection(SK(B,O))),C5.test(R))z.reorderList(j+1,H+1)}else if(K){var L=R.slice(0,W-A),D=L.replace(/\s{1,4}$/,""),I=W-(L.length-D.length);Q(J.tr.delete(I,W))}return!0}}},X.prototype.deleteLines=function(){var K=this;return function(z,J){var Q=K.context.view,Y=J8(z.selection),q=Y.startFromOffset,G=Y.endToOffset,U=function(){return J(z.tr.deleteRange(q,G)),!0};return g3(U,b9)(z,J,Q)}},X.prototype.moveDown=function(){return function(K,z){var{doc:J,tr:Q,selection:Y,schema:q}=K,G=J8(Y),U=G.startFromOffset,V=G.endToOffset,W=G.endIndex;if(W<J.content.childCount-1){var A=J.child(W+1),j=A.nodeSize,H=A.textContent;return Q.delete(V,V+j).split(U).insert(Q.mapping.map(U)-2,R8(q,H)),z(Q),!0}return!1}},X.prototype.moveUp=function(){return function(K,z){var{tr:J,doc:Q,selection:Y,schema:q}=K,G=J8(Y),U=G.startFromOffset,V=G.endToOffset,W=G.startIndex;if(W>0){var A=Q.child(W-1),j=A.nodeSize,H=A.textContent;return J.delete(U-j,U).split(J.mapping.map(V)).insert(J.mapping.map(V),R8(q,H)),z(J),!0}return!1}},X.prototype.commands=function(){return{indent:this.indent(),outdent:this.outdent()}},X.prototype.keymaps=function(){return{Tab:this.indent(!0)(),"Shift-Tab":this.outdent(!0)(),"Mod-d":this.deleteLines(),"Mod-D":this.deleteLines(),"Alt-ArrowUp":this.moveUp(),"Alt-ArrowDown":this.moveDown()}},X}(d),eV=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"text"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{group:"inline"}},enumerable:!1,configurable:!0}),X}(d),ZW=/^#{1,6}\s/,XW=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"heading"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{attrs:{level:{default:1},seText:{default:!1}},toDOM:function(K){var z=K.attrs,J=z.level,Q=z.seText,Y="heading|heading"+J;if(Q)Y+="|delimiter|setext";return["span",{class:Q8.apply(void 0,Y.split("|"))},0]}}},enumerable:!1,configurable:!0}),X.prototype.createHeadingText=function(K,z,J){var Q=z.replace(J,"").trim(),Y="";while(K>0)Y+="#",K-=1;return Y+" "+Q},X.prototype.commands=function(){var K=this;return function(z){return function(J,Q){var Y=z.level,q=J8(J.selection),G=q.startFromOffset,U=q.endToOffset,V=q.startIndex,W=q.endIndex,A=a7({state:J,from:G,startIndex:V,endIndex:W,createText:function(j){var H=j.match(ZW),R=H?H[0]:"";return K.createHeadingText(Y,j,R)}});return Q(A.setSelection(n(A,A.mapping.map(U)))),!0}}},X}(a),_9="```",KW=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"codeBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q8("code-block")},0]}}},enumerable:!1,configurable:!0}),X.prototype.commands=function(){return function(){return function(K,z){var{selection:J,schema:Q,tr:Y}=K,q=J8(J),G=q.startFromOffset,U=q.endToOffset,V=R8(Q,_9);return Y.insert(G,V).split(G+_9.length),Y.split(Y.mapping.map(U)).insert(Y.mapping.map(U),V),z(Y.setSelection(n(Y,Y.mapping.map(U)-(_9.length+2)))),!0}}},X.prototype.keepIndentation=function(){var K=this;return function(z,J){var{selection:Q,tr:Y,doc:q,schema:G}=z,U=K.context.toastMark,V=J8(Q),W=V.startFromOffset,A=V.endToOffset,j=V.endIndex,H=V.from,R=V.to,F=r5(q,j);if(H===R&&F.trim()){var B=F.match(/^\s+/),O=U.findFirstNodeAtLine(j+1);if(CU(O)&&B){var L=B[0],D=F.slice(R-W),I=R8(G,L+D);return l6(Y,A,D,I),J(Y),!0}}return!1}},X.prototype.keymaps=function(){var K=this.commands()();return{"Shift-Mod-p":K,"Shift-Mod-P":K,Enter:this.keepIndentation()}},X}(a),zW=/\||\s/g;function JW(Z){return[t7(Z),t7(Z,!0)]}function QW(Z,X){var K=[];for(var z=0;z<X;z+=1)K.push(t7(Z));return K}function t7(Z,X){var K="|";for(var z=0;z<Z;z+=1)K+=X?" --- |":"  |";return K}function YW(Z){return Z?{type:"next",parentType:"tableHead",childType:"firstChild"}:{type:"prev",parentType:"tableBody",childType:"lastChild"}}var qW=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"table"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q8("table")},0]}}},enumerable:!1,configurable:!0}),X.prototype.extendTable=function(){var K=this;return function(z,J){var{selection:Q,doc:Y,tr:q,schema:G}=z;if(!Q.empty)return!1;var U=J8(Q),V=U.endFromOffset,W=U.endToOffset,A=U.endIndex,j=U.to,H=r5(Y,A),R=[A+1,j-V+1],F=K.context.toastMark.findNodeAtPosition(R),B=K3(F,function(k){return jK(k)&&(k.parent.type==="tableDelimRow"||k.parent.parent.type==="tableBody")});if(B){var O=!H.replace(zW,"").trim(),L=B.parent,D=L.parent.parent.columns.length,I=t7(D);if(O)q.deleteRange(V,W).split(q.mapping.map(W));else q.split(W).insert(q.mapping.map(W),R8(G,I)).setSelection(n(q,q.mapping.map(W)-2));return J(q),!0}return!1}},X.prototype.moveTableCell=function(K){var z=this;return function(J,Q){var{selection:Y,tr:q}=J,G=J8(Y),U=G.endFromOffset,V=G.endIndex,W=G.to,A=[V+1,W-U],j=z.context.toastMark.findNodeAtPosition(A),H=K3(j,function(x){return jK(x)});if(H){var R=H.parent,F=YW(K),B=F.type,O=F.parentType,L=F.childType,D=n5(H);if(H[B])D=n5(H[B])-1;else{var I=!R[B]&&R.parent.type===O?R.parent[B][L]:R[B];if(B==="next"){var k=I?n5(I[L]):0;D+=k+2}else if(B==="prev")D=I?-4:0}return Q(q.setSelection(n(q,U+D))),!0}return!1}},X.prototype.addTable=function(){return function(K){return function(z,J){var{selection:Q,tr:Y,schema:q}=z,G=K,U=G.columnCount,V=G.rowCount,W=J8(Q).endToOffset,A=JW(U),j=QW(U,V-1),H=w8(w8([],A),j);return H.forEach(function(R){Y.split(Y.mapping.map(W)).insert(Y.mapping.map(W),R8(q,R))}),J(Y.setSelection(n(Y,W+4))),!0}}},X.prototype.commands=function(){return{addTable:this.addTable()}},X.prototype.keymaps=function(){return{Enter:this.extendTable(),Tab:this.moveTableCell(!0),"Shift-Tab":this.moveTableCell(!1)}},X}(a),GW="***",UW=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"thematicBreak"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q8("thematic-break")},0]}}},enumerable:!1,configurable:!0}),X.prototype.hr=function(){return function(){return function(K,z){var{selection:J,schema:Q,tr:Y}=K,q=J8(J),G=q.from,U=q.to,V=q.endToOffset,W=R8(Q,GW);return Y.split(G).replaceWith(Y.mapping.map(G),Y.mapping.map(U),W).split(Y.mapping.map(U)).setSelection(n(Y,Y.mapping.map(V))),z(Y),!0}}},X.prototype.commands=function(){return{hr:this.hr()}},X.prototype.keymaps=function(){var K=this.hr()();return{"Mod-l":K,"Mod-L":K}},X}(a);function VW(Z,X){var{type:K,sourcepos:z}=Z,J=z[0][0];return X<=J&&(K==="codeBlock"||K==="heading"||K.match("table"))}var WW=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"listItem"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{attrs:{odd:{default:!1},even:{default:!1},listStyle:{default:!1}},toDOM:function(K){var z=K.attrs,J=z.odd,Q=z.even,Y=z.listStyle,q="list-item";if(Y)q+="|list-item-style";if(J)q+="|list-item-odd";if(Q)q+="|list-item-even";return["span",{class:Q8.apply(void 0,q.split("|"))},0]}}},enumerable:!1,configurable:!0}),X.prototype.extendList=function(){var K=this;return function(z,J){var{selection:Q,doc:Y,schema:q,tr:G}=z,U=K.context.toastMark,V=J8(Q),W=V.to,A=V.startFromOffset,j=V.endFromOffset,H=V.endIndex,R=V.endToOffset,F=r5(Y,H),B=P0.test(F);if(!B||Q.from===A||!Q.empty)return!1;var O=!F.replace(o7,"").trim();if(O)G.deleteRange(j,R).split(G.mapping.map(R));else{var L=o6(F),D=U.findFirstNodeAtLine(H+1),I=F.slice(W-j),k={toastMark:U,mdNode:D,doc:Y,line:H+1},x=oV[L](k),w=x.listSyntax,N=x.changedResults;if(N===null||N===void 0?void 0:N.length){G.split(W),N.unshift({text:w+I,line:H+1}),K.changeToListPerLine(G,N,{from:W,startLine:N[0].line,endLine:C8(N).line});var c=G.mapping.map(R)-I.length;G.setSelection(n(G,c))}else{var r=R8(q,w+I);l6(G,R,I,r)}}return J(G),!0}},X.prototype.toList=function(K){var z=this;return function(){return function(J,Q){var{doc:Y,tr:q,selection:G}=J,U=z.context.toastMark,V=J8(G),W=V.startIndex+1,A=V.endIndex+1,j=V.endToOffset,H=[];for(var R=W;R<=A;R+=1){var F=U.findFirstNodeAtLine(R);if(F&&VW(F,R))break;if(H.indexOf(R)!==-1)continue;var B={toastMark:U,mdNode:F,doc:Y,line:R,startLine:W},O=(F0(F)?aV[K](B):rV[K](B)).changedResults,L=z.changeToListPerLine(q,O,{from:r7(Y,O[0].line-1).startOffset,startLine:O[0].line,endLine:C8(O).line,indexDiff:1});if(j=Math.max(L,j),O)H=H.concat(O.map(function(D){return D.line}))}return Q(q.setSelection(n(q,q.mapping.map(j)))),!0}}},X.prototype.changeToListPerLine=function(K,z,J){var{from:Q,startLine:Y,endLine:q,indexDiff:G}=J,U=G===void 0?0:G,V=0,W=function(H){var R=K.doc.child(H),F=R.nodeSize,B=R.content,O=K.mapping.map(Q),L=O+B.size,D=z.filter(function(I){return I.line-U===H})[0];if(D)K.replaceWith(O,L,R8(A.context.schema,D.text)),V=Math.max(V,Q+B.size);Q+=F},A=this;for(var j=Y-U;j<=q-U;j+=1)W(j);return V},X.prototype.toggleTask=function(){var K=this;return function(z,J){var{selection:Q,tr:Y,doc:q,schema:G}=z,U=K.context.toastMark,V=J8(Q),W=V.startIndex,A=V.endIndex,j=null;for(var H=W;H<=A;H+=1){var R=U.findFirstNodeAtLine(H+1);if(F0(R)&&R.listData.task){var F=R.listData,B=F.checked,O=F.padding,L=B?" ":"x",D=R.sourcepos[0],I=r7(q,D[0]-1).startOffset;I+=D[1]+O,j=Y.replaceWith(I,I+1,G.text(L))}}if(j)return J(j),!0;return!1}},X.prototype.commands=function(){return{bulletList:this.toList("bullet"),orderedList:this.toList("ordered"),taskList:this.toList("task")}},X.prototype.keymaps=function(){var K=this.toList("bullet")(),z=this.toList("ordered")(),J=this.toList("task")(),Q=this.toggleTask();return{"Mod-u":K,"Mod-U":K,"Mod-o":z,"Mod-O":z,"alt-t":J,"alt-T":J,"Shift-Ctrl-x":Q,"Shift-Ctrl-X":Q,Enter:this.extendList()}},X}(a);function j1(Z,X){return function(){return function(K,z){var{tr:J,selection:Q}=K,Y=!c8(Z)?function(L){return Z.test(L)}:Z,q=X.length,G=J.doc,U=lJ(Q),V=U[0],W=U[1],A=Math.max(V-q,1),j=Math.min(W+q,G.content.size-1),H=Q.content(),R=H.content.textBetween(0,H.content.size,`
`),F=G.textBetween(A,V,`
`),B=G.textBetween(W,j,`
`);if(R=""+F+R+B,F&&B&&Y(R))J.delete(j-q,j).delete(A,A+q);else{J.insertText(X,W).insertText(X,V);var O=Q.empty?n(J,V+q):n(J,V+q,W+q);J.setSelection(O)}return z(J),!0}}}var AW=/^(\*{2}|_{2}).*([\s\S]*)\1$/m,HW="**",jW=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"strong"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q8("strong")},0]}}},enumerable:!1,configurable:!0}),X.prototype.bold=function(){return j1(AW,HW)},X.prototype.commands=function(){return{bold:this.bold()}},X.prototype.keymaps=function(){var K=this.bold()();return{"Mod-b":K,"Mod-B":K}},X}(a),RW=/^(~{2}).*([\s\S]*)\1$/m,FW="~~",BW=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"strike"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q8("strike")},0]}}},enumerable:!1,configurable:!0}),X.prototype.commands=function(){return j1(RW,FW)},X.prototype.keymaps=function(){var K=this.commands()();return{"Mod-s":K,"Mod-S":K}},X}(a),EW=/^(\*|_).*([\s\S]*)\1$/m,PW="*",OW=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"emph"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q8("emph")},0]}}},enumerable:!1,configurable:!0}),X.prototype.italic=function(){return j1(EW,PW)},X.prototype.commands=function(){return{italic:this.italic()}},X.prototype.keymaps=function(){var K=this.italic()();return{"Mod-i":K,"Mod-I":K}},X}(a),LW=/^(`).*([\s\S]*)\1$/m,MW="`",DW=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"code"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{attrs:{start:{default:!1},end:{default:!1},marked:{default:!1}},toDOM:function(K){var z=K.attrs,J=z.start,Q=z.end,Y=z.marked,q="code";if(J)q+="|delimiter|start";if(Q)q+="|delimiter|end";if(Y)q+="|marked-text";return["span",{class:Q8.apply(void 0,q.split("|"))},0]}}},enumerable:!1,configurable:!0}),X.prototype.commands=function(){return j1(LW,MW)},X.prototype.keymaps=function(){var K=this.commands()();return{"Shift-Mod-c":K,"Shift-Mod-C":K}},X}(a),IW=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"link"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{attrs:{url:{default:!1},desc:{default:!1}},toDOM:function(K){var z=K.attrs,J=z.url,Q=z.desc,Y="link";if(J)Y+="|link-url|marked-text";if(Q)Y+="|link-desc|marked-text";return["span",{class:Q8.apply(void 0,Y.split("|"))},0]}}},enumerable:!1,configurable:!0}),X.prototype.addLinkOrImage=function(K){return function(z){return function(J,Q){var{selection:Y,tr:q,schema:G}=J,U=lJ(Y),V=U[0],W=U[1],A=z,j=A.linkText,H=A.altText,R=A.linkUrl,F=A.imageUrl,B=j,O=R,L="";if(K==="image")B=H,O=F,L="!";return B=d7(B),L+="["+B+"]("+O+")",Q(q.replaceWith(V,W,R8(G,L))),!0}}},X.prototype.commands=function(){return{addImage:this.addLinkOrImage("image"),addLink:this.addLinkOrImage("link")}},X}(a),CW=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"taskDelimiter"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q8("delimiter","list-item")},0]}}},enumerable:!1,configurable:!0}),X}(a),SW=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"delimiter"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q8("delimiter")},0]}}},enumerable:!1,configurable:!0}),X}(a),kW=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"meta"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q8("meta")},0]}}},enumerable:!1,configurable:!0}),X}(a),bW=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"markedText"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q8("marked-text")},0]}}},enumerable:!1,configurable:!0}),X}(a),yW=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"tableCell"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q8("table-cell")},0]}}},enumerable:!1,configurable:!0}),X}(a),NW=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"html"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q8("html")},0]}}},enumerable:!1,configurable:!0}),X}(a),m9="$$",TW=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"customBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q8("custom-block")},0]}}},enumerable:!1,configurable:!0}),X.prototype.commands=function(){return function(K){return function(z,J){var{selection:Q,schema:Y,tr:q}=z,G=J8(Q),U=G.startFromOffset,V=G.endToOffset;if(!(K===null||K===void 0?void 0:K.info))return!1;var W=""+m9+K.info,A=R8(Y,W),j=R8(Y,m9);return q.insert(U,A).split(U+W.length),q.split(q.mapping.map(V)).insert(q.mapping.map(V),j),J(q.setSelection(n(q,q.mapping.map(V)-(m9.length+2)))),!0}}},X}(a),xW=/x|backspace/i,gW=/^\[(\s*)(x?)(\s*)\](?:\s+)/i;function uW(Z){var{schema:X,toastMark:K}=Z;return new K8({props:{handleDOMEvents:{keyup:function(z,J){var Q,Y=z.state,q=Y.doc,G=Y.tr,U=Y.selection;if(U.empty&&xW.test(J.key)){var V=J8(U),W=V.startIndex,A=V.startFromOffset,j=V.from,H=[W+1,j-A+1],R=K.findNodeAtPosition(H),F=K3(R,function(r){var g8;return r.type==="paragraph"&&((g8=r.parent)===null||g8===void 0?void 0:g8.type)==="item"});if((Q=F===null||F===void 0?void 0:F.firstChild)===null||Q===void 0?void 0:Q.literal){var B=F.firstChild,O=B.literal.match(gW);if(O){var L=B.sourcepos[0],D=O[1],I=O[2],k=O[3],x=D.length+k.length,w=r7(q,L[0]-1).startOffset,N=L[1]+w;if(I){var c=x?x+1:0;G.replaceWith(N,c+N,X.text(I)),z.dispatch(G)}else if(!x)G.insertText(" ",N),z.dispatch(G)}}}return!1}}}})}var l9="cut",kK=/\r\n|\n|\r/,wW=function(Z){b(X,Z);function X(K,z){var J=Z.call(this,K)||this,Q=z.toastMark,Y=z.useCommandShortcut,q=Y===void 0?!0:Y,G=z.mdPlugins,U=G===void 0?[]:G;return J.editorType="markdown",J.el.classList.add("md-mode"),J.toastMark=Q,J.extraPlugins=U,J.specs=J.createSpecs(),J.schema=J.createSchema(),J.context=J.createContext(),J.keymaps=J.createKeymaps(q),J.view=J.createView(),J.commands=J.createCommands(),J.specs.setContext(P(P({},J.context),{view:J.view})),J.createClipboard(),J.eventEmitter.listen("changePreviewTabWrite",function(V){return J.toggleActive(!0,V)}),J.eventEmitter.listen("changePreviewTabPreview",function(){return J.toggleActive(!1)}),J.initEvent(),J}return X.prototype.toggleActive=function(K,z){if(p6(this.el,"active",K),K){if(!z)this.focus()}else this.blur()},X.prototype.createClipboard=function(){var K=this;this.clipboard=document.createElement("textarea"),this.clipboard.className=y("pseudo-clipboard"),this.clipboard.addEventListener("paste",function(z){var J=z.clipboardData||window.clipboardData,Q=J&&J.items;if(Q){var Y=W5(Q).some(function(G){return G.kind==="string"&&G.type==="text/rtf"});if(!Y){var q=$J(Q);if(q)z.preventDefault(),n6(K.eventEmitter,q,z.type)}}}),this.clipboard.addEventListener("input",function(z){var J=z.target.value;K.replaceSelection(J),z.preventDefault(),z.target.value=""}),this.el.insertBefore(this.clipboard,this.view.dom)},X.prototype.createContext=function(){return{toastMark:this.toastMark,schema:this.schema,eventEmitter:this.eventEmitter}},X.prototype.createSpecs=function(){return new mJ([new mV,new tV,new fJ,new eV,new XW,new lV,new KW,new TW,new qW,new yW,new UW,new WW,new jW,new BW,new OW,new DW,new IW,new SW,new CW,new bW,new kW,new NW])},X.prototype.createPlugins=function(){return w8([yV(this.context),_V(this.context),uW(this.context)],this.createPluginProps()).concat(this.defaultPlugins)},X.prototype.createView=function(){var K=this;return new T3(this.el,{state:this.createState(),dispatchTransaction:function(z){K.updateMarkdown(z);var J=K.view.state.applyTransaction(z).state;K.view.updateState(J),K.emitChangeEvent(z)},handleKeyDown:function(z,J){if((J.metaKey||J.ctrlKey)&&J.key.toUpperCase()==="V")K.clipboard.focus();return K.eventEmitter.emit("keydown",K.editorType,J),!1},handleDOMEvents:{copy:function(z,J){return K.captureCopy(J)},cut:function(z,J){return K.captureCopy(J,l9)},scroll:function(){return K.eventEmitter.emit("scroll","editor"),!0},keyup:function(z,J){return K.eventEmitter.emit("keyup",K.editorType,J),!1}},nodeViews:{widget:hJ}})},X.prototype.createCommands=function(){return this.specs.commands(this.view)},X.prototype.captureCopy=function(K,z){K.preventDefault();var J=this.view.state,Q=J.selection,Y=J.tr;if(Q.empty)return!0;var q=this.getChanged(Q.content());if(K.clipboardData)K.clipboardData.setData("text/plain",q);else window.clipboardData.setData("Text",q);if(z===l9)this.view.dispatch(Y.deleteSelection().scrollIntoView().setMeta("uiEvent",l9));return!0},X.prototype.updateMarkdown=function(K){var z=this;if(K.docChanged)K.steps.forEach(function(J,Q){if(J.slice&&!(J instanceof t)){var Y=K.docs[Q],q=[J.from,J.to],G=q[0],U=q[1],V=$7(Y,G,U),W=V[0],A=V[1],j=z.getChanged(J.slice);if(W[0]===A[0]&&W[1]===A[1]&&j==="")j=`
`;var H=z.toastMark.editMarkdown(W,A,j);z.eventEmitter.emit("updatePreview",H),K.setMeta("editResult",H).scrollIntoView()}})},X.prototype.getChanged=function(K){var z="",J=0,Q=K.content.size;return K.content.nodesBetween(J,Q,function(Y,q){if(Y.isText)z+=Y.text.slice(Math.max(J,q)-q,Q-q);else if(Y.isBlock&&q>0)z+=`
`}),z},X.prototype.setSelection=function(K,z){if(z===void 0)z=K;var J=this.view.state.tr,Q=H0(J.doc,K,z),Y=Q[0],q=Q[1];this.view.dispatch(J.setSelection(n(J,Y,q)).scrollIntoView())},X.prototype.replaceSelection=function(K,z,J){var Q,Y=this.view.state,q=Y.tr,G=Y.schema,U=Y.doc,V=K.split(kK),W=V.map(function(F){return n7(G,j0(F,G))}),A=new S(M.from(W),1,1);if(this.focus(),z&&J){var j=H0(U,z,J),H=j[0],R=j[1];Q=q.replaceRange(H,R,A)}else Q=q.replaceSelection(A);this.view.dispatch(Q.scrollIntoView())},X.prototype.deleteSelection=function(K,z){var J,Q=this.view.state,Y=Q.tr,q=Q.doc;if(K&&z){var G=H0(q,K,z),U=G[0],V=G[1];J=Y.deleteRange(U,V)}else J=Y.deleteSelection();this.view.dispatch(J.scrollIntoView())},X.prototype.getSelectedText=function(K,z){var J=this.view.state,Q=J.doc,Y=J.selection,q=Y.from,G=Y.to;if(K&&z){var U=H0(Q,K,z);q=U[0],G=U[1]}return Q.textBetween(q,G,`
`)},X.prototype.getSelection=function(){var K=this.view.state.selection,z=K.from,J=K.to;return $7(this.view.state.tr.doc,z,J)},X.prototype.setMarkdown=function(K,z){if(z===void 0)z=!0;var J=K.split(kK),Q=this.view.state,Y=Q.tr,q=Q.doc,G=Q.schema,U=J.map(function(V){return n7(G,j0(V,G))});if(this.view.dispatch(Y.replaceWith(0,q.content.size,U)),z)this.moveCursorToEnd(!0)},X.prototype.addWidget=function(K,z,J){var Q=this.view.state,Y=Q.tr,q=Q.doc,G=Q.selection,U=J?H0(q,J,J)[0]:G.to;this.view.dispatch(Y.setMeta("widget",{pos:U,node:K,style:z}))},X.prototype.replaceWithWidget=function(K,z,J){var Q=this.view.state,Y=Q.tr,q=Q.schema,G=Q.doc,U=H0(G,K,z),V=j0(J,q);this.view.dispatch(Y.replaceWith(U[0],U[1],V))},X.prototype.getRangeInfoOfNode=function(K){var z=this.view.state,J=z.doc,Q=z.selection,Y=K||$7(J,Q.from)[0],q=this.toastMark.findNodeAtPosition(Y);if(q.type==="text"&&q.parent.type!=="paragraph")q=q.parent;return q.sourcepos[1][1]+=1,{range:q.sourcepos,type:q.type}},X.prototype.getMarkdown=function(){return this.toastMark.getLineTexts().map(function(K){return W1(K)}).join(`
`)},X.prototype.getToastMark=function(){return this.toastMark},X}(_J),bK="_feEventKey";function vW(Z,X){var K=Z[bK],z;if(!K)K=Z[bK]={};if(z=K[X],!z)z=K[X]=[];return z}var aJ=vW,$W=b5,e7=G1,hW=aJ;function fW(Z,X,K){if($W(X)){e7(X.split(/\s+/g),function(z){yK(Z,z,K)});return}e7(X,function(z,J){yK(Z,J,z)})}function yK(Z,X,K){var z=hW(Z,X),J;if(!K)e7(z,function(Q){NK(Z,X,Q.wrappedHandler)}),z.splice(0,z.length);else e7(z,function(Q,Y){if(K===Q.handler)return NK(Z,X,Q.wrappedHandler),J=Y,!1;return!0}),z.splice(J,1)}function NK(Z,X,K){if("removeEventListener"in Z)Z.removeEventListener(X,K);else if("detachEvent"in Z)Z.detachEvent("on"+X,K)}var rJ=fW,_W=b5,W6=G1,mW=aJ;function lW(Z,X,K,z){if(_W(X)){W6(X.split(/\s+/g),function(J){TK(Z,J,K,z)});return}W6(X,function(J,Q){TK(Z,Q,J,K)})}function TK(Z,X,K,z){function J(Q){K.call(z||Z,Q||window.event)}if("addEventListener"in Z)Z.addEventListener(X,J);else if("attachEvent"in Z)Z.attachEvent("on"+X,J);cW(Z,X,K,J)}function cW(Z,X,K,z){var J=mW(Z,X),Q=!1;if(W6(J,function(Y){if(Y.handler===K)return Q=!0,!1;return!0}),!Q)J.push({handler:K,wrappedHandler:z})}var oJ=lW;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var A6=function(Z,X){return A6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,z){K.__proto__=z}||function(K,z){for(var J in z)if(Object.prototype.hasOwnProperty.call(z,J))K[J]=z[J]},A6(Z,X)};function p8(Z,X){if(typeof X!=="function"&&X!==null)throw new TypeError("Class extends value "+String(X)+" is not a constructor or null");A6(Z,X);function K(){this.constructor=Z}Z.prototype=X===null?Object.create(X):(K.prototype=X.prototype,new K)}var j8=function(){return j8=Object.assign||function Z(X){for(var K,z=1,J=arguments.length;z<J;z++){K=arguments[z];for(var Q in K)if(Object.prototype.hasOwnProperty.call(K,Q))X[Q]=K[Q]}return X},j8.apply(this,arguments)};function H6(Z,X,K){if(K||arguments.length===2){for(var z=0,J=X.length,Q;z<J;z++)if(Q||!(z in X)){if(!Q)Q=Array.prototype.slice.call(X,0,z);Q[z]=X[z]}}return Z.concat(Q||Array.prototype.slice.call(X))}var Q3=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{},xK={};function pW(Z){var X,K,z=xK[Z];if(z)return z;z=xK[Z]=[];for(X=0;X<128;X++)if(K=String.fromCharCode(X),/^[0-9a-z]$/i.test(K))z.push(K);else z.push("%"+("0"+X.toString(16).toUpperCase()).slice(-2));for(X=0;X<Z.length;X++)z[Z.charCodeAt(X)]=Z[X];return z}function R1(Z,X,K){var z,J,Q,Y,q,G="";if(typeof X!=="string")K=X,X=R1.defaultChars;if(typeof K==="undefined")K=!0;q=pW(X);for(z=0,J=Z.length;z<J;z++){if(Q=Z.charCodeAt(z),K&&Q===37&&z+2<J){if(/^[0-9a-f]{2}$/i.test(Z.slice(z+1,z+3))){G+=Z.slice(z,z+3),z+=2;continue}}if(Q<128){G+=q[Q];continue}if(Q>=55296&&Q<=57343){if(Q>=55296&&Q<=56319&&z+1<J){if(Y=Z.charCodeAt(z+1),Y>=56320&&Y<=57343){G+=encodeURIComponent(Z[z]+Z[z+1]),z++;continue}}G+="%EF%BF%BD";continue}G+=encodeURIComponent(Z[z])}return G}R1.defaultChars=";/?:@&=+$,-_.!~*'()#";R1.componentChars="-_.!~*'()";var iW=R1,e6={},S5={},dW="Á",sW="á",nW="Ă",aW="ă",rW="∾",oW="∿",tW="∾̳",eW="Â",ZA="â",XA="´",KA="А",zA="а",JA="Æ",QA="æ",YA="⁡",qA="\uD835\uDD04",GA="\uD835\uDD1E",UA="À",VA="à",WA="ℵ",AA="ℵ",HA="Α",jA="α",RA="Ā",FA="ā",BA="⨿",EA="&",PA="&",OA="⩕",LA="⩓",MA="∧",DA="⩜",IA="⩘",CA="⩚",SA="∠",kA="⦤",bA="∠",yA="⦨",NA="⦩",TA="⦪",xA="⦫",gA="⦬",uA="⦭",wA="⦮",vA="⦯",$A="∡",hA="∟",fA="⊾",_A="⦝",mA="∢",lA="Å",cA="⍼",pA="Ą",iA="ą",dA="\uD835\uDD38",sA="\uD835\uDD52",nA="⩯",aA="≈",rA="⩰",oA="≊",tA="≋",eA="'",ZH="⁡",XH="≈",KH="≊",zH="Å",JH="å",QH="\uD835\uDC9C",YH="\uD835\uDCB6",qH="≔",GH="*",UH="≈",VH="≍",WH="Ã",AH="ã",HH="Ä",jH="ä",RH="∳",FH="⨑",BH="≌",EH="϶",PH="‵",OH="∽",LH="⋍",MH="∖",DH="⫧",IH="⊽",CH="⌅",SH="⌆",kH="⌅",bH="⎵",yH="⎶",NH="≌",TH="Б",xH="б",gH="„",uH="∵",wH="∵",vH="∵",$H="⦰",hH="϶",fH="ℬ",_H="ℬ",mH="Β",lH="β",cH="ℶ",pH="≬",iH="\uD835\uDD05",dH="\uD835\uDD1F",sH="⋂",nH="◯",aH="⋃",rH="⨀",oH="⨁",tH="⨂",eH="⨆",Zj="★",Xj="▽",Kj="△",zj="⨄",Jj="⋁",Qj="⋀",Yj="⤍",qj="⧫",Gj="▪",Uj="▴",Vj="▾",Wj="◂",Aj="▸",Hj="␣",jj="▒",Rj="░",Fj="▓",Bj="█",Ej="=⃥",Pj="≡⃥",Oj="⫭",Lj="⌐",Mj="\uD835\uDD39",Dj="\uD835\uDD53",Ij="⊥",Cj="⊥",Sj="⋈",kj="⧉",bj="┐",yj="╕",Nj="╖",Tj="╗",xj="┌",gj="╒",uj="╓",wj="╔",vj="─",$j="═",hj="┬",fj="╤",_j="╥",mj="╦",lj="┴",cj="╧",pj="╨",ij="╩",dj="⊟",sj="⊞",nj="⊠",aj="┘",rj="╛",oj="╜",tj="╝",ej="└",ZR="╘",XR="╙",KR="╚",zR="│",JR="║",QR="┼",YR="╪",qR="╫",GR="╬",UR="┤",VR="╡",WR="╢",AR="╣",HR="├",jR="╞",RR="╟",FR="╠",BR="‵",ER="˘",PR="˘",OR="¦",LR="\uD835\uDCB7",MR="ℬ",DR="⁏",IR="∽",CR="⋍",SR="⧅",kR="\\",bR="⟈",yR="•",NR="•",TR="≎",xR="⪮",gR="≏",uR="≎",wR="≏",vR="Ć",$R="ć",hR="⩄",fR="⩉",_R="⩋",mR="∩",lR="⋒",cR="⩇",pR="⩀",iR="ⅅ",dR="∩︀",sR="⁁",nR="ˇ",aR="ℭ",rR="⩍",oR="Č",tR="č",eR="Ç",ZF="ç",XF="Ĉ",KF="ĉ",zF="∰",JF="⩌",QF="⩐",YF="Ċ",qF="ċ",GF="¸",UF="¸",VF="⦲",WF="¢",AF="·",HF="·",jF="\uD835\uDD20",RF="ℭ",FF="Ч",BF="ч",EF="✓",PF="✓",OF="Χ",LF="χ",MF="ˆ",DF="≗",IF="↺",CF="↻",SF="⊛",kF="⊚",bF="⊝",yF="⊙",NF="®",TF="Ⓢ",xF="⊖",gF="⊕",uF="⊗",wF="○",vF="⧃",$F="≗",hF="⨐",fF="⫯",_F="⧂",mF="∲",lF="”",cF="’",pF="♣",iF="♣",dF=":",sF="∷",nF="⩴",aF="≔",rF="≔",oF=",",tF="@",eF="∁",ZB="∘",XB="∁",KB="ℂ",zB="≅",JB="⩭",QB="≡",YB="∮",qB="∯",GB="∮",UB="\uD835\uDD54",VB="ℂ",WB="∐",AB="∐",HB="©",jB="©",RB="℗",FB="∳",BB="↵",EB="✗",PB="⨯",OB="\uD835\uDC9E",LB="\uD835\uDCB8",MB="⫏",DB="⫑",IB="⫐",CB="⫒",SB="⋯",kB="⤸",bB="⤵",yB="⋞",NB="⋟",TB="↶",xB="⤽",gB="⩈",uB="⩆",wB="≍",vB="∪",$B="⋓",hB="⩊",fB="⊍",_B="⩅",mB="∪︀",lB="↷",cB="⤼",pB="⋞",iB="⋟",dB="⋎",sB="⋏",nB="¤",aB="↶",rB="↷",oB="⋎",tB="⋏",eB="∲",ZE="∱",XE="⌭",KE="†",zE="‡",JE="ℸ",QE="↓",YE="↡",qE="⇓",GE="‐",UE="⫤",VE="⊣",WE="⤏",AE="˝",HE="Ď",jE="ď",RE="Д",FE="д",BE="‡",EE="⇊",PE="ⅅ",OE="ⅆ",LE="⤑",ME="⩷",DE="°",IE="∇",CE="Δ",SE="δ",kE="⦱",bE="⥿",yE="\uD835\uDD07",NE="\uD835\uDD21",TE="⥥",xE="⇃",gE="⇂",uE="´",wE="˙",vE="˝",$E="`",hE="˜",fE="⋄",_E="⋄",mE="⋄",lE="♦",cE="♦",pE="¨",iE="ⅆ",dE="ϝ",sE="⋲",nE="÷",aE="÷",rE="⋇",oE="⋇",tE="Ђ",eE="ђ",ZP="⌞",XP="⌍",KP="$",zP="\uD835\uDD3B",JP="\uD835\uDD55",QP="¨",YP="˙",qP="⃜",GP="≐",UP="≑",VP="≐",WP="∸",AP="∔",HP="⊡",jP="⌆",RP="∯",FP="¨",BP="⇓",EP="⇐",PP="⇔",OP="⫤",LP="⟸",MP="⟺",DP="⟹",IP="⇒",CP="⊨",SP="⇑",kP="⇕",bP="∥",yP="⤓",NP="↓",TP="↓",xP="⇓",gP="⇵",uP="̑",wP="⇊",vP="⇃",$P="⇂",hP="⥐",fP="⥞",_P="⥖",mP="↽",lP="⥟",cP="⥗",pP="⇁",iP="↧",dP="⊤",sP="⤐",nP="⌟",aP="⌌",rP="\uD835\uDC9F",oP="\uD835\uDCB9",tP="Ѕ",eP="ѕ",ZO="⧶",XO="Đ",KO="đ",zO="⋱",JO="▿",QO="▾",YO="⇵",qO="⥯",GO="⦦",UO="Џ",VO="џ",WO="⟿",AO="É",HO="é",jO="⩮",RO="Ě",FO="ě",BO="Ê",EO="ê",PO="≖",OO="≕",LO="Э",MO="э",DO="⩷",IO="Ė",CO="ė",SO="≑",kO="ⅇ",bO="≒",yO="\uD835\uDD08",NO="\uD835\uDD22",TO="⪚",xO="È",gO="è",uO="⪖",wO="⪘",vO="⪙",$O="∈",hO="⏧",fO="ℓ",_O="⪕",mO="⪗",lO="Ē",cO="ē",pO="∅",iO="∅",dO="◻",sO="∅",nO="▫",aO=" ",rO=" ",oO=" ",tO="Ŋ",eO="ŋ",ZL=" ",XL="Ę",KL="ę",zL="\uD835\uDD3C",JL="\uD835\uDD56",QL="⋕",YL="⧣",qL="⩱",GL="ε",UL="Ε",VL="ε",WL="ϵ",AL="≖",HL="≕",jL="≂",RL="⪖",FL="⪕",BL="⩵",EL="=",PL="≂",OL="≟",LL="⇌",ML="≡",DL="⩸",IL="⧥",CL="⥱",SL="≓",kL="ℯ",bL="ℰ",yL="≐",NL="⩳",TL="≂",xL="Η",gL="η",uL="Ð",wL="ð",vL="Ë",$L="ë",hL="€",fL="!",_L="∃",mL="∃",lL="ℰ",cL="ⅇ",pL="ⅇ",iL="≒",dL="Ф",sL="ф",nL="♀",aL="ﬃ",rL="ﬀ",oL="ﬄ",tL="\uD835\uDD09",eL="\uD835\uDD23",ZM="ﬁ",XM="◼",KM="▪",zM="fj",JM="♭",QM="ﬂ",YM="▱",qM="ƒ",GM="\uD835\uDD3D",UM="\uD835\uDD57",VM="∀",WM="∀",AM="⋔",HM="⫙",jM="ℱ",RM="⨍",FM="½",BM="⅓",EM="¼",PM="⅕",OM="⅙",LM="⅛",MM="⅔",DM="⅖",IM="¾",CM="⅗",SM="⅜",kM="⅘",bM="⅚",yM="⅝",NM="⅞",TM="⁄",xM="⌢",gM="\uD835\uDCBB",uM="ℱ",wM="ǵ",vM="Γ",$M="γ",hM="Ϝ",fM="ϝ",_M="⪆",mM="Ğ",lM="ğ",cM="Ģ",pM="Ĝ",iM="ĝ",dM="Г",sM="г",nM="Ġ",aM="ġ",rM="≥",oM="≧",tM="⪌",eM="⋛",ZD="≥",XD="≧",KD="⩾",zD="⪩",JD="⩾",QD="⪀",YD="⪂",qD="⪄",GD="⋛︀",UD="⪔",VD="\uD835\uDD0A",WD="\uD835\uDD24",AD="≫",HD="⋙",jD="⋙",RD="ℷ",FD="Ѓ",BD="ѓ",ED="⪥",PD="≷",OD="⪒",LD="⪤",MD="⪊",DD="⪊",ID="⪈",CD="≩",SD="⪈",kD="≩",bD="⋧",yD="\uD835\uDD3E",ND="\uD835\uDD58",TD="`",xD="≥",gD="⋛",uD="≧",wD="⪢",vD="≷",$D="⩾",hD="≳",fD="\uD835\uDCA2",_D="ℊ",mD="≳",lD="⪎",cD="⪐",pD="⪧",iD="⩺",dD=">",sD=">",nD="≫",aD="⋗",rD="⦕",oD="⩼",tD="⪆",eD="⥸",ZI="⋗",XI="⋛",KI="⪌",zI="≷",JI="≳",QI="≩︀",YI="≩︀",qI="ˇ",GI=" ",UI="½",VI="ℋ",WI="Ъ",AI="ъ",HI="⥈",jI="↔",RI="⇔",FI="↭",BI="^",EI="ℏ",PI="Ĥ",OI="ĥ",LI="♥",MI="♥",DI="…",II="⊹",CI="\uD835\uDD25",SI="ℌ",kI="ℋ",bI="⤥",yI="⤦",NI="⇿",TI="∻",xI="↩",gI="↪",uI="\uD835\uDD59",wI="ℍ",vI="―",$I="─",hI="\uD835\uDCBD",fI="ℋ",_I="ℏ",mI="Ħ",lI="ħ",cI="≎",pI="≏",iI="⁃",dI="‐",sI="Í",nI="í",aI="⁣",rI="Î",oI="î",tI="И",eI="и",ZC="İ",XC="Е",KC="е",zC="¡",JC="⇔",QC="\uD835\uDD26",YC="ℑ",qC="Ì",GC="ì",UC="ⅈ",VC="⨌",WC="∭",AC="⧜",HC="℩",jC="Ĳ",RC="ĳ",FC="Ī",BC="ī",EC="ℑ",PC="ⅈ",OC="ℐ",LC="ℑ",MC="ı",DC="ℑ",IC="⊷",CC="Ƶ",SC="⇒",kC="℅",bC="∞",yC="⧝",NC="ı",TC="⊺",xC="∫",gC="∬",uC="ℤ",wC="∫",vC="⊺",$C="⋂",hC="⨗",fC="⨼",_C="⁣",mC="⁢",lC="Ё",cC="ё",pC="Į",iC="į",dC="\uD835\uDD40",sC="\uD835\uDD5A",nC="Ι",aC="ι",rC="⨼",oC="¿",tC="\uD835\uDCBE",eC="ℐ",ZS="∈",XS="⋵",KS="⋹",zS="⋴",JS="⋳",QS="∈",YS="⁢",qS="Ĩ",GS="ĩ",US="І",VS="і",WS="Ï",AS="ï",HS="Ĵ",jS="ĵ",RS="Й",FS="й",BS="\uD835\uDD0D",ES="\uD835\uDD27",PS="ȷ",OS="\uD835\uDD41",LS="\uD835\uDD5B",MS="\uD835\uDCA5",DS="\uD835\uDCBF",IS="Ј",CS="ј",SS="Є",kS="є",bS="Κ",yS="κ",NS="ϰ",TS="Ķ",xS="ķ",gS="К",uS="к",wS="\uD835\uDD0E",vS="\uD835\uDD28",$S="ĸ",hS="Х",fS="х",_S="Ќ",mS="ќ",lS="\uD835\uDD42",cS="\uD835\uDD5C",pS="\uD835\uDCA6",iS="\uD835\uDCC0",dS="⇚",sS="Ĺ",nS="ĺ",aS="⦴",rS="ℒ",oS="Λ",tS="λ",eS="⟨",Zk="⟪",Xk="⦑",Kk="⟨",zk="⪅",Jk="ℒ",Qk="«",Yk="⇤",qk="⤟",Gk="←",Uk="↞",Vk="⇐",Wk="⤝",Ak="↩",Hk="↫",jk="⤹",Rk="⥳",Fk="↢",Bk="⤙",Ek="⤛",Pk="⪫",Ok="⪭",Lk="⪭︀",Mk="⤌",Dk="⤎",Ik="❲",Ck="{",Sk="[",kk="⦋",bk="⦏",yk="⦍",Nk="Ľ",Tk="ľ",xk="Ļ",gk="ļ",uk="⌈",wk="{",vk="Л",$k="л",hk="⤶",fk="“",_k="„",mk="⥧",lk="⥋",ck="↲",pk="≤",ik="≦",dk="⟨",sk="⇤",nk="←",ak="←",rk="⇐",ok="⇆",tk="↢",ek="⌈",Zb="⟦",Xb="⥡",Kb="⥙",zb="⇃",Jb="⌊",Qb="↽",Yb="↼",qb="⇇",Gb="↔",Ub="↔",Vb="⇔",Wb="⇆",Ab="⇋",Hb="↭",jb="⥎",Rb="↤",Fb="⊣",Bb="⥚",Eb="⋋",Pb="⧏",Ob="⊲",Lb="⊴",Mb="⥑",Db="⥠",Ib="⥘",Cb="↿",Sb="⥒",kb="↼",bb="⪋",yb="⋚",Nb="≤",Tb="≦",xb="⩽",gb="⪨",ub="⩽",wb="⩿",vb="⪁",$b="⪃",hb="⋚︀",fb="⪓",_b="⪅",mb="⋖",lb="⋚",cb="⪋",pb="⋚",ib="≦",db="≶",sb="≶",nb="⪡",ab="≲",rb="⩽",ob="≲",tb="⥼",eb="⌊",Zy="\uD835\uDD0F",Xy="\uD835\uDD29",Ky="≶",zy="⪑",Jy="⥢",Qy="↽",Yy="↼",qy="⥪",Gy="▄",Uy="Љ",Vy="љ",Wy="⇇",Ay="≪",Hy="⋘",jy="⌞",Ry="⇚",Fy="⥫",By="◺",Ey="Ŀ",Py="ŀ",Oy="⎰",Ly="⎰",My="⪉",Dy="⪉",Iy="⪇",Cy="≨",Sy="⪇",ky="≨",by="⋦",yy="⟬",Ny="⇽",Ty="⟦",xy="⟵",gy="⟵",uy="⟸",wy="⟷",vy="⟷",$y="⟺",hy="⟼",fy="⟶",_y="⟶",my="⟹",ly="↫",cy="↬",py="⦅",iy="\uD835\uDD43",dy="\uD835\uDD5D",sy="⨭",ny="⨴",ay="∗",ry="_",oy="↙",ty="↘",ey="◊",ZN="◊",XN="⧫",KN="(",zN="⦓",JN="⇆",QN="⌟",YN="⇋",qN="⥭",GN="‎",UN="⊿",VN="‹",WN="\uD835\uDCC1",AN="ℒ",HN="↰",jN="↰",RN="≲",FN="⪍",BN="⪏",EN="[",PN="‘",ON="‚",LN="Ł",MN="ł",DN="⪦",IN="⩹",CN="<",SN="<",kN="≪",bN="⋖",yN="⋋",NN="⋉",TN="⥶",xN="⩻",gN="◃",uN="⊴",wN="◂",vN="⦖",$N="⥊",hN="⥦",fN="≨︀",_N="≨︀",mN="¯",lN="♂",cN="✠",pN="✠",iN="↦",dN="↦",sN="↧",nN="↤",aN="↥",rN="▮",oN="⨩",tN="М",eN="м",ZT="—",XT="∺",KT="∡",zT=" ",JT="ℳ",QT="\uD835\uDD10",YT="\uD835\uDD2A",qT="℧",GT="µ",UT="*",VT="⫰",WT="∣",AT="·",HT="⊟",jT="−",RT="∸",FT="⨪",BT="∓",ET="⫛",PT="…",OT="∓",LT="⊧",MT="\uD835\uDD44",DT="\uD835\uDD5E",IT="∓",CT="\uD835\uDCC2",ST="ℳ",kT="∾",bT="Μ",yT="μ",NT="⊸",TT="⊸",xT="∇",gT="Ń",uT="ń",wT="∠⃒",vT="≉",$T="⩰̸",hT="≋̸",fT="ŉ",_T="≉",mT="♮",lT="ℕ",cT="♮",pT=" ",iT="≎̸",dT="≏̸",sT="⩃",nT="Ň",aT="ň",rT="Ņ",oT="ņ",tT="≇",eT="⩭̸",Zx="⩂",Xx="Н",Kx="н",zx="–",Jx="⤤",Qx="↗",Yx="⇗",qx="↗",Gx="≠",Ux="≐̸",Vx="​",Wx="​",Ax="​",Hx="​",jx="≢",Rx="⤨",Fx="≂̸",Bx="≫",Ex="≪",Px=`
`,Ox="∄",Lx="∄",Mx="\uD835\uDD11",Dx="\uD835\uDD2B",Ix="≧̸",Cx="≱",Sx="≱",kx="≧̸",bx="⩾̸",yx="⩾̸",Nx="⋙̸",Tx="≵",xx="≫⃒",gx="≯",ux="≯",wx="≫̸",vx="↮",$x="⇎",hx="⫲",fx="∋",_x="⋼",mx="⋺",lx="∋",cx="Њ",px="њ",ix="↚",dx="⇍",sx="‥",nx="≦̸",ax="≰",rx="↚",ox="⇍",tx="↮",ex="⇎",Zg="≰",Xg="≦̸",Kg="⩽̸",zg="⩽̸",Jg="≮",Qg="⋘̸",Yg="≴",qg="≪⃒",Gg="≮",Ug="⋪",Vg="⋬",Wg="≪̸",Ag="∤",Hg="⁠",jg=" ",Rg="\uD835\uDD5F",Fg="ℕ",Bg="⫬",Eg="¬",Pg="≢",Og="≭",Lg="∦",Mg="∉",Dg="≠",Ig="≂̸",Cg="∄",Sg="≯",kg="≱",bg="≧̸",yg="≫̸",Ng="≹",Tg="⩾̸",xg="≵",gg="≎̸",ug="≏̸",wg="∉",vg="⋵̸",$g="⋹̸",hg="∉",fg="⋷",_g="⋶",mg="⧏̸",lg="⋪",cg="⋬",pg="≮",ig="≰",dg="≸",sg="≪̸",ng="⩽̸",ag="≴",rg="⪢̸",og="⪡̸",tg="∌",eg="∌",Zu="⋾",Xu="⋽",Ku="⊀",zu="⪯̸",Ju="⋠",Qu="∌",Yu="⧐̸",qu="⋫",Gu="⋭",Uu="⊏̸",Vu="⋢",Wu="⊐̸",Au="⋣",Hu="⊂⃒",ju="⊈",Ru="⊁",Fu="⪰̸",Bu="⋡",Eu="≿̸",Pu="⊃⃒",Ou="⊉",Lu="≁",Mu="≄",Du="≇",Iu="≉",Cu="∤",Su="∦",ku="∦",bu="⫽⃥",yu="∂̸",Nu="⨔",Tu="⊀",xu="⋠",gu="⊀",uu="⪯̸",wu="⪯̸",vu="⤳̸",$u="↛",hu="⇏",fu="↝̸",_u="↛",mu="⇏",lu="⋫",cu="⋭",pu="⊁",iu="⋡",du="⪰̸",su="\uD835\uDCA9",nu="\uD835\uDCC3",au="∤",ru="∦",ou="≁",tu="≄",eu="≄",Zw="∤",Xw="∦",Kw="⋢",zw="⋣",Jw="⊄",Qw="⫅̸",Yw="⊈",qw="⊂⃒",Gw="⊈",Uw="⫅̸",Vw="⊁",Ww="⪰̸",Aw="⊅",Hw="⫆̸",jw="⊉",Rw="⊃⃒",Fw="⊉",Bw="⫆̸",Ew="≹",Pw="Ñ",Ow="ñ",Lw="≸",Mw="⋪",Dw="⋬",Iw="⋫",Cw="⋭",Sw="Ν",kw="ν",bw="#",yw="№",Nw=" ",Tw="≍⃒",xw="⊬",gw="⊭",uw="⊮",ww="⊯",vw="≥⃒",$w=">⃒",hw="⤄",fw="⧞",_w="⤂",mw="≤⃒",lw="<⃒",cw="⊴⃒",pw="⤃",iw="⊵⃒",dw="∼⃒",sw="⤣",nw="↖",aw="⇖",rw="↖",ow="⤧",tw="Ó",ew="ó",Zv="⊛",Xv="Ô",Kv="ô",zv="⊚",Jv="О",Qv="о",Yv="⊝",qv="Ő",Gv="ő",Uv="⨸",Vv="⊙",Wv="⦼",Av="Œ",Hv="œ",jv="⦿",Rv="\uD835\uDD12",Fv="\uD835\uDD2C",Bv="˛",Ev="Ò",Pv="ò",Ov="⧁",Lv="⦵",Mv="Ω",Dv="∮",Iv="↺",Cv="⦾",Sv="⦻",kv="‾",bv="⧀",yv="Ō",Nv="ō",Tv="Ω",xv="ω",gv="Ο",uv="ο",wv="⦶",vv="⊖",$v="\uD835\uDD46",hv="\uD835\uDD60",fv="⦷",_v="“",mv="‘",lv="⦹",cv="⊕",pv="↻",iv="⩔",dv="∨",sv="⩝",nv="ℴ",av="ℴ",rv="ª",ov="º",tv="⊶",ev="⩖",Z$="⩗",X$="⩛",K$="Ⓢ",z$="\uD835\uDCAA",J$="ℴ",Q$="Ø",Y$="ø",q$="⊘",G$="Õ",U$="õ",V$="⨶",W$="⨷",A$="⊗",H$="Ö",j$="ö",R$="⌽",F$="‾",B$="⏞",E$="⎴",P$="⏜",O$="¶",L$="∥",M$="∥",D$="⫳",I$="⫽",C$="∂",S$="∂",k$="П",b$="п",y$="%",N$=".",T$="‰",x$="⊥",g$="‱",u$="\uD835\uDD13",w$="\uD835\uDD2D",v$="Φ",$$="φ",h$="ϕ",f$="ℳ",_$="☎",m$="Π",l$="π",c$="⋔",p$="ϖ",i$="ℏ",d$="ℎ",s$="ℏ",n$="⨣",a$="⊞",r$="⨢",o$="+",t$="∔",e$="⨥",Zh="⩲",Xh="±",Kh="±",zh="⨦",Jh="⨧",Qh="±",Yh="ℌ",qh="⨕",Gh="\uD835\uDD61",Uh="ℙ",Vh="£",Wh="⪷",Ah="⪻",Hh="≺",jh="≼",Rh="⪷",Fh="≺",Bh="≼",Eh="≺",Ph="⪯",Oh="≼",Lh="≾",Mh="⪯",Dh="⪹",Ih="⪵",Ch="⋨",Sh="⪯",kh="⪳",bh="≾",yh="′",Nh="″",Th="ℙ",xh="⪹",gh="⪵",uh="⋨",wh="∏",vh="∏",$h="⌮",hh="⌒",fh="⌓",_h="∝",mh="∝",lh="∷",ch="∝",ph="≾",ih="⊰",dh="\uD835\uDCAB",sh="\uD835\uDCC5",nh="Ψ",ah="ψ",rh=" ",oh="\uD835\uDD14",th="\uD835\uDD2E",eh="⨌",Zf="\uD835\uDD62",Xf="ℚ",Kf="⁗",zf="\uD835\uDCAC",Jf="\uD835\uDCC6",Qf="ℍ",Yf="⨖",qf="?",Gf="≟",Uf='"',Vf='"',Wf="⇛",Af="∽̱",Hf="Ŕ",jf="ŕ",Rf="√",Ff="⦳",Bf="⟩",Ef="⟫",Pf="⦒",Of="⦥",Lf="⟩",Mf="»",Df="⥵",If="⇥",Cf="⤠",Sf="⤳",kf="→",bf="↠",yf="⇒",Nf="⤞",Tf="↪",xf="↬",gf="⥅",uf="⥴",wf="⤖",vf="↣",$f="↝",hf="⤚",ff="⤜",_f="∶",mf="ℚ",lf="⤍",cf="⤏",pf="⤐",df="❳",sf="}",nf="]",af="⦌",rf="⦎",of="⦐",tf="Ř",ef="ř",Z_="Ŗ",X_="ŗ",K_="⌉",z_="}",J_="Р",Q_="р",Y_="⤷",q_="⥩",G_="”",U_="”",V_="↳",W_="ℜ",A_="ℛ",H_="ℜ",j_="ℝ",R_="ℜ",F_="▭",B_="®",E_="®",P_="∋",O_="⇋",L_="⥯",M_="⥽",D_="⌋",I_="\uD835\uDD2F",C_="ℜ",S_="⥤",k_="⇁",b_="⇀",y_="⥬",N_="Ρ",T_="ρ",x_="ϱ",g_="⟩",u_="⇥",w_="→",v_="→",$_="⇒",h_="⇄",f_="↣",__="⌉",m_="⟧",l_="⥝",c_="⥕",p_="⇂",i_="⌋",d_="⇁",s_="⇀",n_="⇄",a_="⇌",r_="⇉",o_="↝",t_="↦",e_="⊢",Zm="⥛",Xm="⋌",Km="⧐",zm="⊳",Jm="⊵",Qm="⥏",Ym="⥜",qm="⥔",Gm="↾",Um="⥓",Vm="⇀",Wm="˚",Am="≓",Hm="⇄",jm="⇌",Rm="‏",Fm="⎱",Bm="⎱",Em="⫮",Pm="⟭",Om="⇾",Lm="⟧",Mm="⦆",Dm="\uD835\uDD63",Im="ℝ",Cm="⨮",Sm="⨵",km="⥰",bm=")",ym="⦔",Nm="⨒",Tm="⇉",xm="⇛",gm="›",um="\uD835\uDCC7",wm="ℛ",vm="↱",$m="↱",hm="]",fm="’",_m="’",mm="⋌",lm="⋊",cm="▹",pm="⊵",im="▸",dm="⧎",sm="⧴",nm="⥨",am="℞",rm="Ś",om="ś",tm="‚",em="⪸",Zl="Š",Xl="š",Kl="⪼",zl="≻",Jl="≽",Ql="⪰",Yl="⪴",ql="Ş",Gl="ş",Ul="Ŝ",Vl="ŝ",Wl="⪺",Al="⪶",Hl="⋩",jl="⨓",Rl="≿",Fl="С",Bl="с",El="⊡",Pl="⋅",Ol="⩦",Ll="⤥",Ml="↘",Dl="⇘",Il="↘",Cl="§",Sl=";",kl="⤩",bl="∖",yl="∖",Nl="✶",Tl="\uD835\uDD16",xl="\uD835\uDD30",gl="⌢",ul="♯",wl="Щ",vl="щ",$l="Ш",hl="ш",fl="↓",_l="←",ml="∣",ll="∥",cl="→",pl="↑",il="­",dl="Σ",sl="σ",nl="ς",al="ς",rl="∼",ol="⩪",tl="≃",el="≃",Zc="⪞",Xc="⪠",Kc="⪝",zc="⪟",Jc="≆",Qc="⨤",Yc="⥲",qc="←",Gc="∘",Uc="∖",Vc="⨳",Wc="⧤",Ac="∣",Hc="⌣",jc="⪪",Rc="⪬",Fc="⪬︀",Bc="Ь",Ec="ь",Pc="⌿",Oc="⧄",Lc="/",Mc="\uD835\uDD4A",Dc="\uD835\uDD64",Ic="♠",Cc="♠",Sc="∥",kc="⊓",bc="⊓︀",yc="⊔",Nc="⊔︀",Tc="√",xc="⊏",gc="⊑",uc="⊏",wc="⊑",vc="⊐",$c="⊒",hc="⊐",fc="⊒",_c="□",mc="□",lc="⊓",cc="⊏",pc="⊑",ic="⊐",dc="⊒",sc="⊔",nc="▪",ac="□",rc="▪",oc="→",tc="\uD835\uDCAE",ec="\uD835\uDCC8",Zp="∖",Xp="⌣",Kp="⋆",zp="⋆",Jp="☆",Qp="★",Yp="ϵ",qp="ϕ",Gp="¯",Up="⊂",Vp="⋐",Wp="⪽",Ap="⫅",Hp="⊆",jp="⫃",Rp="⫁",Fp="⫋",Bp="⊊",Ep="⪿",Pp="⥹",Op="⊂",Lp="⋐",Mp="⊆",Dp="⫅",Ip="⊆",Cp="⊊",Sp="⫋",kp="⫇",bp="⫕",yp="⫓",Np="⪸",Tp="≻",xp="≽",gp="≻",up="⪰",wp="≽",vp="≿",$p="⪰",hp="⪺",fp="⪶",_p="⋩",mp="≿",lp="∋",cp="∑",pp="∑",ip="♪",dp="¹",sp="²",np="³",ap="⊃",rp="⋑",op="⪾",tp="⫘",ep="⫆",Zi="⊇",Xi="⫄",Ki="⊃",zi="⊇",Ji="⟉",Qi="⫗",Yi="⥻",qi="⫂",Gi="⫌",Ui="⊋",Vi="⫀",Wi="⊃",Ai="⋑",Hi="⊇",ji="⫆",Ri="⊋",Fi="⫌",Bi="⫈",Ei="⫔",Pi="⫖",Oi="⤦",Li="↙",Mi="⇙",Di="↙",Ii="⤪",Ci="ß",Si="\t",ki="⌖",bi="Τ",yi="τ",Ni="⎴",Ti="Ť",xi="ť",gi="Ţ",ui="ţ",wi="Т",vi="т",$i="⃛",hi="⌕",fi="\uD835\uDD17",_i="\uD835\uDD31",mi="∴",li="∴",ci="∴",pi="Θ",ii="θ",di="ϑ",si="ϑ",ni="≈",ai="∼",ri="  ",oi=" ",ti=" ",ei="≈",Zd="∼",Xd="Þ",Kd="þ",zd="˜",Jd="∼",Qd="≃",Yd="≅",qd="≈",Gd="⨱",Ud="⊠",Vd="×",Wd="⨰",Ad="∭",Hd="⤨",jd="⌶",Rd="⫱",Fd="⊤",Bd="\uD835\uDD4B",Ed="\uD835\uDD65",Pd="⫚",Od="⤩",Ld="‴",Md="™",Dd="™",Id="▵",Cd="▿",Sd="◃",kd="⊴",bd="≜",yd="▹",Nd="⊵",Td="◬",xd="≜",gd="⨺",ud="⃛",wd="⨹",vd="⧍",$d="⨻",hd="⏢",fd="\uD835\uDCAF",_d="\uD835\uDCC9",md="Ц",ld="ц",cd="Ћ",pd="ћ",id="Ŧ",dd="ŧ",sd="≬",nd="↞",ad="↠",rd="Ú",od="ú",td="↑",ed="↟",Zs="⇑",Xs="⥉",Ks="Ў",zs="ў",Js="Ŭ",Qs="ŭ",Ys="Û",qs="û",Gs="У",Us="у",Vs="⇅",Ws="Ű",As="ű",Hs="⥮",js="⥾",Rs="\uD835\uDD18",Fs="\uD835\uDD32",Bs="Ù",Es="ù",Ps="⥣",Os="↿",Ls="↾",Ms="▀",Ds="⌜",Is="⌜",Cs="⌏",Ss="◸",ks="Ū",bs="ū",ys="¨",Ns="_",Ts="⏟",xs="⎵",gs="⏝",us="⋃",ws="⊎",vs="Ų",$s="ų",hs="\uD835\uDD4C",fs="\uD835\uDD66",_s="⤒",ms="↑",ls="↑",cs="⇑",ps="⇅",is="↕",ds="↕",ss="⇕",ns="⥮",as="↿",rs="↾",ts="⊎",es="↖",Zn="↗",Xn="υ",Kn="ϒ",zn="ϒ",Jn="Υ",Qn="υ",Yn="↥",qn="⊥",Gn="⇈",Un="⌝",Vn="⌝",Wn="⌎",An="Ů",Hn="ů",jn="◹",Rn="\uD835\uDCB0",Fn="\uD835\uDCCA",Bn="⋰",En="Ũ",Pn="ũ",On="▵",Ln="▴",Mn="⇈",Dn="Ü",In="ü",Cn="⦧",Sn="⦜",kn="ϵ",bn="ϰ",yn="∅",Nn="ϕ",Tn="ϖ",xn="∝",gn="↕",un="⇕",wn="ϱ",vn="ς",$n="⊊︀",hn="⫋︀",fn="⊋︀",_n="⫌︀",mn="ϑ",ln="⊲",cn="⊳",pn="⫨",dn="⫫",sn="⫩",nn="В",an="в",rn="⊢",on="⊨",tn="⊩",en="⊫",Za="⫦",Xa="⊻",Ka="∨",za="⋁",Ja="≚",Qa="⋮",Ya="|",qa="‖",Ga="|",Ua="‖",Va="∣",Wa="|",Aa="❘",Ha="≀",ja=" ",Ra="\uD835\uDD19",Fa="\uD835\uDD33",Ba="⊲",Ea="⊂⃒",Pa="⊃⃒",Oa="\uD835\uDD4D",La="\uD835\uDD67",Ma="∝",Da="⊳",Ia="\uD835\uDCB1",Ca="\uD835\uDCCB",Sa="⫋︀",ka="⊊︀",ba="⫌︀",ya="⊋︀",Na="⊪",Ta="⦚",xa="Ŵ",ga="ŵ",ua="⩟",wa="∧",va="⋀",$a="≙",ha="℘",fa="\uD835\uDD1A",_a="\uD835\uDD34",ma="\uD835\uDD4E",la="\uD835\uDD68",ca="℘",pa="≀",ia="≀",da="\uD835\uDCB2",sa="\uD835\uDCCC",na="⋂",aa="◯",ra="⋃",oa="▽",ta="\uD835\uDD1B",ea="\uD835\uDD35",Zr="⟷",Xr="⟺",Kr="Ξ",zr="ξ",Jr="⟵",Qr="⟸",Yr="⟼",qr="⋻",Gr="⨀",Ur="\uD835\uDD4F",Vr="\uD835\uDD69",Wr="⨁",Ar="⨂",Hr="⟶",jr="⟹",Rr="\uD835\uDCB3",Fr="\uD835\uDCCD",Br="⨆",Er="⨄",Pr="△",Or="⋁",Lr="⋀",Mr="Ý",Dr="ý",Ir="Я",Cr="я",Sr="Ŷ",kr="ŷ",br="Ы",yr="ы",Nr="¥",Tr="\uD835\uDD1C",xr="\uD835\uDD36",gr="Ї",ur="ї",wr="\uD835\uDD50",vr="\uD835\uDD6A",$r="\uD835\uDCB4",hr="\uD835\uDCCE",fr="Ю",_r="ю",mr="ÿ",lr="Ÿ",cr="Ź",pr="ź",ir="Ž",dr="ž",sr="З",nr="з",ar="Ż",rr="ż",or="ℨ",tr="​",er="Ζ",Zo="ζ",Xo="\uD835\uDD37",Ko="ℨ",zo="Ж",Jo="ж",Qo="⇝",Yo="\uD835\uDD6B",qo="ℤ",Go="\uD835\uDCB5",Uo="\uD835\uDCCF",Vo="‍",Wo="‌",tJ={Aacute:dW,aacute:sW,Abreve:nW,abreve:aW,ac:rW,acd:oW,acE:tW,Acirc:eW,acirc:ZA,acute:XA,Acy:KA,acy:zA,AElig:JA,aelig:QA,af:YA,Afr:qA,afr:GA,Agrave:UA,agrave:VA,alefsym:WA,aleph:AA,Alpha:HA,alpha:jA,Amacr:RA,amacr:FA,amalg:BA,amp:EA,AMP:PA,andand:OA,And:LA,and:MA,andd:DA,andslope:IA,andv:CA,ang:SA,ange:kA,angle:bA,angmsdaa:yA,angmsdab:NA,angmsdac:TA,angmsdad:xA,angmsdae:gA,angmsdaf:uA,angmsdag:wA,angmsdah:vA,angmsd:$A,angrt:hA,angrtvb:fA,angrtvbd:_A,angsph:mA,angst:lA,angzarr:cA,Aogon:pA,aogon:iA,Aopf:dA,aopf:sA,apacir:nA,ap:aA,apE:rA,ape:oA,apid:tA,apos:eA,ApplyFunction:ZH,approx:XH,approxeq:KH,Aring:zH,aring:JH,Ascr:QH,ascr:YH,Assign:qH,ast:GH,asymp:UH,asympeq:VH,Atilde:WH,atilde:AH,Auml:HH,auml:jH,awconint:RH,awint:FH,backcong:BH,backepsilon:EH,backprime:PH,backsim:OH,backsimeq:LH,Backslash:MH,Barv:DH,barvee:IH,barwed:CH,Barwed:SH,barwedge:kH,bbrk:bH,bbrktbrk:yH,bcong:NH,Bcy:TH,bcy:xH,bdquo:gH,becaus:uH,because:wH,Because:vH,bemptyv:$H,bepsi:hH,bernou:fH,Bernoullis:_H,Beta:mH,beta:lH,beth:cH,between:pH,Bfr:iH,bfr:dH,bigcap:sH,bigcirc:nH,bigcup:aH,bigodot:rH,bigoplus:oH,bigotimes:tH,bigsqcup:eH,bigstar:Zj,bigtriangledown:Xj,bigtriangleup:Kj,biguplus:zj,bigvee:Jj,bigwedge:Qj,bkarow:Yj,blacklozenge:qj,blacksquare:Gj,blacktriangle:Uj,blacktriangledown:Vj,blacktriangleleft:Wj,blacktriangleright:Aj,blank:Hj,blk12:jj,blk14:Rj,blk34:Fj,block:Bj,bne:Ej,bnequiv:Pj,bNot:Oj,bnot:Lj,Bopf:Mj,bopf:Dj,bot:Ij,bottom:Cj,bowtie:Sj,boxbox:kj,boxdl:bj,boxdL:yj,boxDl:Nj,boxDL:Tj,boxdr:xj,boxdR:gj,boxDr:uj,boxDR:wj,boxh:vj,boxH:$j,boxhd:hj,boxHd:fj,boxhD:_j,boxHD:mj,boxhu:lj,boxHu:cj,boxhU:pj,boxHU:ij,boxminus:dj,boxplus:sj,boxtimes:nj,boxul:aj,boxuL:rj,boxUl:oj,boxUL:tj,boxur:ej,boxuR:ZR,boxUr:XR,boxUR:KR,boxv:zR,boxV:JR,boxvh:QR,boxvH:YR,boxVh:qR,boxVH:GR,boxvl:UR,boxvL:VR,boxVl:WR,boxVL:AR,boxvr:HR,boxvR:jR,boxVr:RR,boxVR:FR,bprime:BR,breve:ER,Breve:PR,brvbar:OR,bscr:LR,Bscr:MR,bsemi:DR,bsim:IR,bsime:CR,bsolb:SR,bsol:kR,bsolhsub:bR,bull:yR,bullet:NR,bump:TR,bumpE:xR,bumpe:gR,Bumpeq:uR,bumpeq:wR,Cacute:vR,cacute:$R,capand:hR,capbrcup:fR,capcap:_R,cap:mR,Cap:lR,capcup:cR,capdot:pR,CapitalDifferentialD:iR,caps:dR,caret:sR,caron:nR,Cayleys:aR,ccaps:rR,Ccaron:oR,ccaron:tR,Ccedil:eR,ccedil:ZF,Ccirc:XF,ccirc:KF,Cconint:zF,ccups:JF,ccupssm:QF,Cdot:YF,cdot:qF,cedil:GF,Cedilla:UF,cemptyv:VF,cent:WF,centerdot:AF,CenterDot:HF,cfr:jF,Cfr:RF,CHcy:FF,chcy:BF,check:EF,checkmark:PF,Chi:OF,chi:LF,circ:MF,circeq:DF,circlearrowleft:IF,circlearrowright:CF,circledast:SF,circledcirc:kF,circleddash:bF,CircleDot:yF,circledR:NF,circledS:TF,CircleMinus:xF,CirclePlus:gF,CircleTimes:uF,cir:wF,cirE:vF,cire:$F,cirfnint:hF,cirmid:fF,cirscir:_F,ClockwiseContourIntegral:mF,CloseCurlyDoubleQuote:lF,CloseCurlyQuote:cF,clubs:pF,clubsuit:iF,colon:dF,Colon:sF,Colone:nF,colone:aF,coloneq:rF,comma:oF,commat:tF,comp:eF,compfn:ZB,complement:XB,complexes:KB,cong:zB,congdot:JB,Congruent:QB,conint:YB,Conint:qB,ContourIntegral:GB,copf:UB,Copf:VB,coprod:WB,Coproduct:AB,copy:HB,COPY:jB,copysr:RB,CounterClockwiseContourIntegral:FB,crarr:BB,cross:EB,Cross:PB,Cscr:OB,cscr:LB,csub:MB,csube:DB,csup:IB,csupe:CB,ctdot:SB,cudarrl:kB,cudarrr:bB,cuepr:yB,cuesc:NB,cularr:TB,cularrp:xB,cupbrcap:gB,cupcap:uB,CupCap:wB,cup:vB,Cup:$B,cupcup:hB,cupdot:fB,cupor:_B,cups:mB,curarr:lB,curarrm:cB,curlyeqprec:pB,curlyeqsucc:iB,curlyvee:dB,curlywedge:sB,curren:nB,curvearrowleft:aB,curvearrowright:rB,cuvee:oB,cuwed:tB,cwconint:eB,cwint:ZE,cylcty:XE,dagger:KE,Dagger:zE,daleth:JE,darr:QE,Darr:YE,dArr:qE,dash:GE,Dashv:UE,dashv:VE,dbkarow:WE,dblac:AE,Dcaron:HE,dcaron:jE,Dcy:RE,dcy:FE,ddagger:BE,ddarr:EE,DD:PE,dd:OE,DDotrahd:LE,ddotseq:ME,deg:DE,Del:IE,Delta:CE,delta:SE,demptyv:kE,dfisht:bE,Dfr:yE,dfr:NE,dHar:TE,dharl:xE,dharr:gE,DiacriticalAcute:uE,DiacriticalDot:wE,DiacriticalDoubleAcute:vE,DiacriticalGrave:$E,DiacriticalTilde:hE,diam:fE,diamond:_E,Diamond:mE,diamondsuit:lE,diams:cE,die:pE,DifferentialD:iE,digamma:dE,disin:sE,div:nE,divide:aE,divideontimes:rE,divonx:oE,DJcy:tE,djcy:eE,dlcorn:ZP,dlcrop:XP,dollar:KP,Dopf:zP,dopf:JP,Dot:QP,dot:YP,DotDot:qP,doteq:GP,doteqdot:UP,DotEqual:VP,dotminus:WP,dotplus:AP,dotsquare:HP,doublebarwedge:jP,DoubleContourIntegral:RP,DoubleDot:FP,DoubleDownArrow:BP,DoubleLeftArrow:EP,DoubleLeftRightArrow:PP,DoubleLeftTee:OP,DoubleLongLeftArrow:LP,DoubleLongLeftRightArrow:MP,DoubleLongRightArrow:DP,DoubleRightArrow:IP,DoubleRightTee:CP,DoubleUpArrow:SP,DoubleUpDownArrow:kP,DoubleVerticalBar:bP,DownArrowBar:yP,downarrow:NP,DownArrow:TP,Downarrow:xP,DownArrowUpArrow:gP,DownBreve:uP,downdownarrows:wP,downharpoonleft:vP,downharpoonright:$P,DownLeftRightVector:hP,DownLeftTeeVector:fP,DownLeftVectorBar:_P,DownLeftVector:mP,DownRightTeeVector:lP,DownRightVectorBar:cP,DownRightVector:pP,DownTeeArrow:iP,DownTee:dP,drbkarow:sP,drcorn:nP,drcrop:aP,Dscr:rP,dscr:oP,DScy:tP,dscy:eP,dsol:ZO,Dstrok:XO,dstrok:KO,dtdot:zO,dtri:JO,dtrif:QO,duarr:YO,duhar:qO,dwangle:GO,DZcy:UO,dzcy:VO,dzigrarr:WO,Eacute:AO,eacute:HO,easter:jO,Ecaron:RO,ecaron:FO,Ecirc:BO,ecirc:EO,ecir:PO,ecolon:OO,Ecy:LO,ecy:MO,eDDot:DO,Edot:IO,edot:CO,eDot:SO,ee:kO,efDot:bO,Efr:yO,efr:NO,eg:TO,Egrave:xO,egrave:gO,egs:uO,egsdot:wO,el:vO,Element:$O,elinters:hO,ell:fO,els:_O,elsdot:mO,Emacr:lO,emacr:cO,empty:pO,emptyset:iO,EmptySmallSquare:dO,emptyv:sO,EmptyVerySmallSquare:nO,emsp13:aO,emsp14:rO,emsp:oO,ENG:tO,eng:eO,ensp:ZL,Eogon:XL,eogon:KL,Eopf:zL,eopf:JL,epar:QL,eparsl:YL,eplus:qL,epsi:GL,Epsilon:UL,epsilon:VL,epsiv:WL,eqcirc:AL,eqcolon:HL,eqsim:jL,eqslantgtr:RL,eqslantless:FL,Equal:BL,equals:EL,EqualTilde:PL,equest:OL,Equilibrium:LL,equiv:ML,equivDD:DL,eqvparsl:IL,erarr:CL,erDot:SL,escr:kL,Escr:bL,esdot:yL,Esim:NL,esim:TL,Eta:xL,eta:gL,ETH:uL,eth:wL,Euml:vL,euml:$L,euro:hL,excl:fL,exist:_L,Exists:mL,expectation:lL,exponentiale:cL,ExponentialE:pL,fallingdotseq:iL,Fcy:dL,fcy:sL,female:nL,ffilig:aL,fflig:rL,ffllig:oL,Ffr:tL,ffr:eL,filig:ZM,FilledSmallSquare:XM,FilledVerySmallSquare:KM,fjlig:zM,flat:JM,fllig:QM,fltns:YM,fnof:qM,Fopf:GM,fopf:UM,forall:VM,ForAll:WM,fork:AM,forkv:HM,Fouriertrf:jM,fpartint:RM,frac12:FM,frac13:BM,frac14:EM,frac15:PM,frac16:OM,frac18:LM,frac23:MM,frac25:DM,frac34:IM,frac35:CM,frac38:SM,frac45:kM,frac56:bM,frac58:yM,frac78:NM,frasl:TM,frown:xM,fscr:gM,Fscr:uM,gacute:wM,Gamma:vM,gamma:$M,Gammad:hM,gammad:fM,gap:_M,Gbreve:mM,gbreve:lM,Gcedil:cM,Gcirc:pM,gcirc:iM,Gcy:dM,gcy:sM,Gdot:nM,gdot:aM,ge:rM,gE:oM,gEl:tM,gel:eM,geq:ZD,geqq:XD,geqslant:KD,gescc:zD,ges:JD,gesdot:QD,gesdoto:YD,gesdotol:qD,gesl:GD,gesles:UD,Gfr:VD,gfr:WD,gg:AD,Gg:HD,ggg:jD,gimel:RD,GJcy:FD,gjcy:BD,gla:ED,gl:PD,glE:OD,glj:LD,gnap:MD,gnapprox:DD,gne:ID,gnE:CD,gneq:SD,gneqq:kD,gnsim:bD,Gopf:yD,gopf:ND,grave:TD,GreaterEqual:xD,GreaterEqualLess:gD,GreaterFullEqual:uD,GreaterGreater:wD,GreaterLess:vD,GreaterSlantEqual:$D,GreaterTilde:hD,Gscr:fD,gscr:_D,gsim:mD,gsime:lD,gsiml:cD,gtcc:pD,gtcir:iD,gt:dD,GT:sD,Gt:nD,gtdot:aD,gtlPar:rD,gtquest:oD,gtrapprox:tD,gtrarr:eD,gtrdot:ZI,gtreqless:XI,gtreqqless:KI,gtrless:zI,gtrsim:JI,gvertneqq:QI,gvnE:YI,Hacek:qI,hairsp:GI,half:UI,hamilt:VI,HARDcy:WI,hardcy:AI,harrcir:HI,harr:jI,hArr:RI,harrw:FI,Hat:BI,hbar:EI,Hcirc:PI,hcirc:OI,hearts:LI,heartsuit:MI,hellip:DI,hercon:II,hfr:CI,Hfr:SI,HilbertSpace:kI,hksearow:bI,hkswarow:yI,hoarr:NI,homtht:TI,hookleftarrow:xI,hookrightarrow:gI,hopf:uI,Hopf:wI,horbar:vI,HorizontalLine:$I,hscr:hI,Hscr:fI,hslash:_I,Hstrok:mI,hstrok:lI,HumpDownHump:cI,HumpEqual:pI,hybull:iI,hyphen:dI,Iacute:sI,iacute:nI,ic:aI,Icirc:rI,icirc:oI,Icy:tI,icy:eI,Idot:ZC,IEcy:XC,iecy:KC,iexcl:zC,iff:JC,ifr:QC,Ifr:YC,Igrave:qC,igrave:GC,ii:UC,iiiint:VC,iiint:WC,iinfin:AC,iiota:HC,IJlig:jC,ijlig:RC,Imacr:FC,imacr:BC,image:EC,ImaginaryI:PC,imagline:OC,imagpart:LC,imath:MC,Im:DC,imof:IC,imped:CC,Implies:SC,incare:kC,in:"∈",infin:bC,infintie:yC,inodot:NC,intcal:TC,int:xC,Int:gC,integers:uC,Integral:wC,intercal:vC,Intersection:$C,intlarhk:hC,intprod:fC,InvisibleComma:_C,InvisibleTimes:mC,IOcy:lC,iocy:cC,Iogon:pC,iogon:iC,Iopf:dC,iopf:sC,Iota:nC,iota:aC,iprod:rC,iquest:oC,iscr:tC,Iscr:eC,isin:ZS,isindot:XS,isinE:KS,isins:zS,isinsv:JS,isinv:QS,it:YS,Itilde:qS,itilde:GS,Iukcy:US,iukcy:VS,Iuml:WS,iuml:AS,Jcirc:HS,jcirc:jS,Jcy:RS,jcy:FS,Jfr:BS,jfr:ES,jmath:PS,Jopf:OS,jopf:LS,Jscr:MS,jscr:DS,Jsercy:IS,jsercy:CS,Jukcy:SS,jukcy:kS,Kappa:bS,kappa:yS,kappav:NS,Kcedil:TS,kcedil:xS,Kcy:gS,kcy:uS,Kfr:wS,kfr:vS,kgreen:$S,KHcy:hS,khcy:fS,KJcy:_S,kjcy:mS,Kopf:lS,kopf:cS,Kscr:pS,kscr:iS,lAarr:dS,Lacute:sS,lacute:nS,laemptyv:aS,lagran:rS,Lambda:oS,lambda:tS,lang:eS,Lang:Zk,langd:Xk,langle:Kk,lap:zk,Laplacetrf:Jk,laquo:Qk,larrb:Yk,larrbfs:qk,larr:Gk,Larr:Uk,lArr:Vk,larrfs:Wk,larrhk:Ak,larrlp:Hk,larrpl:jk,larrsim:Rk,larrtl:Fk,latail:Bk,lAtail:Ek,lat:Pk,late:Ok,lates:Lk,lbarr:Mk,lBarr:Dk,lbbrk:Ik,lbrace:Ck,lbrack:Sk,lbrke:kk,lbrksld:bk,lbrkslu:yk,Lcaron:Nk,lcaron:Tk,Lcedil:xk,lcedil:gk,lceil:uk,lcub:wk,Lcy:vk,lcy:$k,ldca:hk,ldquo:fk,ldquor:_k,ldrdhar:mk,ldrushar:lk,ldsh:ck,le:pk,lE:ik,LeftAngleBracket:dk,LeftArrowBar:sk,leftarrow:nk,LeftArrow:ak,Leftarrow:rk,LeftArrowRightArrow:ok,leftarrowtail:tk,LeftCeiling:ek,LeftDoubleBracket:Zb,LeftDownTeeVector:Xb,LeftDownVectorBar:Kb,LeftDownVector:zb,LeftFloor:Jb,leftharpoondown:Qb,leftharpoonup:Yb,leftleftarrows:qb,leftrightarrow:Gb,LeftRightArrow:Ub,Leftrightarrow:Vb,leftrightarrows:Wb,leftrightharpoons:Ab,leftrightsquigarrow:Hb,LeftRightVector:jb,LeftTeeArrow:Rb,LeftTee:Fb,LeftTeeVector:Bb,leftthreetimes:Eb,LeftTriangleBar:Pb,LeftTriangle:Ob,LeftTriangleEqual:Lb,LeftUpDownVector:Mb,LeftUpTeeVector:Db,LeftUpVectorBar:Ib,LeftUpVector:Cb,LeftVectorBar:Sb,LeftVector:kb,lEg:bb,leg:yb,leq:Nb,leqq:Tb,leqslant:xb,lescc:gb,les:ub,lesdot:wb,lesdoto:vb,lesdotor:$b,lesg:hb,lesges:fb,lessapprox:_b,lessdot:mb,lesseqgtr:lb,lesseqqgtr:cb,LessEqualGreater:pb,LessFullEqual:ib,LessGreater:db,lessgtr:sb,LessLess:nb,lesssim:ab,LessSlantEqual:rb,LessTilde:ob,lfisht:tb,lfloor:eb,Lfr:Zy,lfr:Xy,lg:Ky,lgE:zy,lHar:Jy,lhard:Qy,lharu:Yy,lharul:qy,lhblk:Gy,LJcy:Uy,ljcy:Vy,llarr:Wy,ll:Ay,Ll:Hy,llcorner:jy,Lleftarrow:Ry,llhard:Fy,lltri:By,Lmidot:Ey,lmidot:Py,lmoustache:Oy,lmoust:Ly,lnap:My,lnapprox:Dy,lne:Iy,lnE:Cy,lneq:Sy,lneqq:ky,lnsim:by,loang:yy,loarr:Ny,lobrk:Ty,longleftarrow:xy,LongLeftArrow:gy,Longleftarrow:uy,longleftrightarrow:wy,LongLeftRightArrow:vy,Longleftrightarrow:$y,longmapsto:hy,longrightarrow:fy,LongRightArrow:_y,Longrightarrow:my,looparrowleft:ly,looparrowright:cy,lopar:py,Lopf:iy,lopf:dy,loplus:sy,lotimes:ny,lowast:ay,lowbar:ry,LowerLeftArrow:oy,LowerRightArrow:ty,loz:ey,lozenge:ZN,lozf:XN,lpar:KN,lparlt:zN,lrarr:JN,lrcorner:QN,lrhar:YN,lrhard:qN,lrm:GN,lrtri:UN,lsaquo:VN,lscr:WN,Lscr:AN,lsh:HN,Lsh:jN,lsim:RN,lsime:FN,lsimg:BN,lsqb:EN,lsquo:PN,lsquor:ON,Lstrok:LN,lstrok:MN,ltcc:DN,ltcir:IN,lt:CN,LT:SN,Lt:kN,ltdot:bN,lthree:yN,ltimes:NN,ltlarr:TN,ltquest:xN,ltri:gN,ltrie:uN,ltrif:wN,ltrPar:vN,lurdshar:$N,luruhar:hN,lvertneqq:fN,lvnE:_N,macr:mN,male:lN,malt:cN,maltese:pN,Map:"⤅",map:iN,mapsto:dN,mapstodown:sN,mapstoleft:nN,mapstoup:aN,marker:rN,mcomma:oN,Mcy:tN,mcy:eN,mdash:ZT,mDDot:XT,measuredangle:KT,MediumSpace:zT,Mellintrf:JT,Mfr:QT,mfr:YT,mho:qT,micro:GT,midast:UT,midcir:VT,mid:WT,middot:AT,minusb:HT,minus:jT,minusd:RT,minusdu:FT,MinusPlus:BT,mlcp:ET,mldr:PT,mnplus:OT,models:LT,Mopf:MT,mopf:DT,mp:IT,mscr:CT,Mscr:ST,mstpos:kT,Mu:bT,mu:yT,multimap:NT,mumap:TT,nabla:xT,Nacute:gT,nacute:uT,nang:wT,nap:vT,napE:$T,napid:hT,napos:fT,napprox:_T,natural:mT,naturals:lT,natur:cT,nbsp:pT,nbump:iT,nbumpe:dT,ncap:sT,Ncaron:nT,ncaron:aT,Ncedil:rT,ncedil:oT,ncong:tT,ncongdot:eT,ncup:Zx,Ncy:Xx,ncy:Kx,ndash:zx,nearhk:Jx,nearr:Qx,neArr:Yx,nearrow:qx,ne:Gx,nedot:Ux,NegativeMediumSpace:Vx,NegativeThickSpace:Wx,NegativeThinSpace:Ax,NegativeVeryThinSpace:Hx,nequiv:jx,nesear:Rx,nesim:Fx,NestedGreaterGreater:Bx,NestedLessLess:Ex,NewLine:Px,nexist:Ox,nexists:Lx,Nfr:Mx,nfr:Dx,ngE:Ix,nge:Cx,ngeq:Sx,ngeqq:kx,ngeqslant:bx,nges:yx,nGg:Nx,ngsim:Tx,nGt:xx,ngt:gx,ngtr:ux,nGtv:wx,nharr:vx,nhArr:$x,nhpar:hx,ni:fx,nis:_x,nisd:mx,niv:lx,NJcy:cx,njcy:px,nlarr:ix,nlArr:dx,nldr:sx,nlE:nx,nle:ax,nleftarrow:rx,nLeftarrow:ox,nleftrightarrow:tx,nLeftrightarrow:ex,nleq:Zg,nleqq:Xg,nleqslant:Kg,nles:zg,nless:Jg,nLl:Qg,nlsim:Yg,nLt:qg,nlt:Gg,nltri:Ug,nltrie:Vg,nLtv:Wg,nmid:Ag,NoBreak:Hg,NonBreakingSpace:jg,nopf:Rg,Nopf:Fg,Not:Bg,not:Eg,NotCongruent:Pg,NotCupCap:Og,NotDoubleVerticalBar:Lg,NotElement:Mg,NotEqual:Dg,NotEqualTilde:Ig,NotExists:Cg,NotGreater:Sg,NotGreaterEqual:kg,NotGreaterFullEqual:bg,NotGreaterGreater:yg,NotGreaterLess:Ng,NotGreaterSlantEqual:Tg,NotGreaterTilde:xg,NotHumpDownHump:gg,NotHumpEqual:ug,notin:wg,notindot:vg,notinE:$g,notinva:hg,notinvb:fg,notinvc:_g,NotLeftTriangleBar:mg,NotLeftTriangle:lg,NotLeftTriangleEqual:cg,NotLess:pg,NotLessEqual:ig,NotLessGreater:dg,NotLessLess:sg,NotLessSlantEqual:ng,NotLessTilde:ag,NotNestedGreaterGreater:rg,NotNestedLessLess:og,notni:tg,notniva:eg,notnivb:Zu,notnivc:Xu,NotPrecedes:Ku,NotPrecedesEqual:zu,NotPrecedesSlantEqual:Ju,NotReverseElement:Qu,NotRightTriangleBar:Yu,NotRightTriangle:qu,NotRightTriangleEqual:Gu,NotSquareSubset:Uu,NotSquareSubsetEqual:Vu,NotSquareSuperset:Wu,NotSquareSupersetEqual:Au,NotSubset:Hu,NotSubsetEqual:ju,NotSucceeds:Ru,NotSucceedsEqual:Fu,NotSucceedsSlantEqual:Bu,NotSucceedsTilde:Eu,NotSuperset:Pu,NotSupersetEqual:Ou,NotTilde:Lu,NotTildeEqual:Mu,NotTildeFullEqual:Du,NotTildeTilde:Iu,NotVerticalBar:Cu,nparallel:Su,npar:ku,nparsl:bu,npart:yu,npolint:Nu,npr:Tu,nprcue:xu,nprec:gu,npreceq:uu,npre:wu,nrarrc:vu,nrarr:$u,nrArr:hu,nrarrw:fu,nrightarrow:_u,nRightarrow:mu,nrtri:lu,nrtrie:cu,nsc:pu,nsccue:iu,nsce:du,Nscr:su,nscr:nu,nshortmid:au,nshortparallel:ru,nsim:ou,nsime:tu,nsimeq:eu,nsmid:Zw,nspar:Xw,nsqsube:Kw,nsqsupe:zw,nsub:Jw,nsubE:Qw,nsube:Yw,nsubset:qw,nsubseteq:Gw,nsubseteqq:Uw,nsucc:Vw,nsucceq:Ww,nsup:Aw,nsupE:Hw,nsupe:jw,nsupset:Rw,nsupseteq:Fw,nsupseteqq:Bw,ntgl:Ew,Ntilde:Pw,ntilde:Ow,ntlg:Lw,ntriangleleft:Mw,ntrianglelefteq:Dw,ntriangleright:Iw,ntrianglerighteq:Cw,Nu:Sw,nu:kw,num:bw,numero:yw,numsp:Nw,nvap:Tw,nvdash:xw,nvDash:gw,nVdash:uw,nVDash:ww,nvge:vw,nvgt:$w,nvHarr:hw,nvinfin:fw,nvlArr:_w,nvle:mw,nvlt:lw,nvltrie:cw,nvrArr:pw,nvrtrie:iw,nvsim:dw,nwarhk:sw,nwarr:nw,nwArr:aw,nwarrow:rw,nwnear:ow,Oacute:tw,oacute:ew,oast:Zv,Ocirc:Xv,ocirc:Kv,ocir:zv,Ocy:Jv,ocy:Qv,odash:Yv,Odblac:qv,odblac:Gv,odiv:Uv,odot:Vv,odsold:Wv,OElig:Av,oelig:Hv,ofcir:jv,Ofr:Rv,ofr:Fv,ogon:Bv,Ograve:Ev,ograve:Pv,ogt:Ov,ohbar:Lv,ohm:Mv,oint:Dv,olarr:Iv,olcir:Cv,olcross:Sv,oline:kv,olt:bv,Omacr:yv,omacr:Nv,Omega:Tv,omega:xv,Omicron:gv,omicron:uv,omid:wv,ominus:vv,Oopf:$v,oopf:hv,opar:fv,OpenCurlyDoubleQuote:_v,OpenCurlyQuote:mv,operp:lv,oplus:cv,orarr:pv,Or:iv,or:dv,ord:sv,order:nv,orderof:av,ordf:rv,ordm:ov,origof:tv,oror:ev,orslope:Z$,orv:X$,oS:K$,Oscr:z$,oscr:J$,Oslash:Q$,oslash:Y$,osol:q$,Otilde:G$,otilde:U$,otimesas:V$,Otimes:W$,otimes:A$,Ouml:H$,ouml:j$,ovbar:R$,OverBar:F$,OverBrace:B$,OverBracket:E$,OverParenthesis:P$,para:O$,parallel:L$,par:M$,parsim:D$,parsl:I$,part:C$,PartialD:S$,Pcy:k$,pcy:b$,percnt:y$,period:N$,permil:T$,perp:x$,pertenk:g$,Pfr:u$,pfr:w$,Phi:v$,phi:$$,phiv:h$,phmmat:f$,phone:_$,Pi:m$,pi:l$,pitchfork:c$,piv:p$,planck:i$,planckh:d$,plankv:s$,plusacir:n$,plusb:a$,pluscir:r$,plus:o$,plusdo:t$,plusdu:e$,pluse:Zh,PlusMinus:Xh,plusmn:Kh,plussim:zh,plustwo:Jh,pm:Qh,Poincareplane:Yh,pointint:qh,popf:Gh,Popf:Uh,pound:Vh,prap:Wh,Pr:Ah,pr:Hh,prcue:jh,precapprox:Rh,prec:Fh,preccurlyeq:Bh,Precedes:Eh,PrecedesEqual:Ph,PrecedesSlantEqual:Oh,PrecedesTilde:Lh,preceq:Mh,precnapprox:Dh,precneqq:Ih,precnsim:Ch,pre:Sh,prE:kh,precsim:bh,prime:yh,Prime:Nh,primes:Th,prnap:xh,prnE:gh,prnsim:uh,prod:wh,Product:vh,profalar:$h,profline:hh,profsurf:fh,prop:_h,Proportional:mh,Proportion:lh,propto:ch,prsim:ph,prurel:ih,Pscr:dh,pscr:sh,Psi:nh,psi:ah,puncsp:rh,Qfr:oh,qfr:th,qint:eh,qopf:Zf,Qopf:Xf,qprime:Kf,Qscr:zf,qscr:Jf,quaternions:Qf,quatint:Yf,quest:qf,questeq:Gf,quot:Uf,QUOT:Vf,rAarr:Wf,race:Af,Racute:Hf,racute:jf,radic:Rf,raemptyv:Ff,rang:Bf,Rang:Ef,rangd:Pf,range:Of,rangle:Lf,raquo:Mf,rarrap:Df,rarrb:If,rarrbfs:Cf,rarrc:Sf,rarr:kf,Rarr:bf,rArr:yf,rarrfs:Nf,rarrhk:Tf,rarrlp:xf,rarrpl:gf,rarrsim:uf,Rarrtl:wf,rarrtl:vf,rarrw:$f,ratail:hf,rAtail:ff,ratio:_f,rationals:mf,rbarr:lf,rBarr:cf,RBarr:pf,rbbrk:df,rbrace:sf,rbrack:nf,rbrke:af,rbrksld:rf,rbrkslu:of,Rcaron:tf,rcaron:ef,Rcedil:Z_,rcedil:X_,rceil:K_,rcub:z_,Rcy:J_,rcy:Q_,rdca:Y_,rdldhar:q_,rdquo:G_,rdquor:U_,rdsh:V_,real:W_,realine:A_,realpart:H_,reals:j_,Re:R_,rect:F_,reg:B_,REG:E_,ReverseElement:P_,ReverseEquilibrium:O_,ReverseUpEquilibrium:L_,rfisht:M_,rfloor:D_,rfr:I_,Rfr:C_,rHar:S_,rhard:k_,rharu:b_,rharul:y_,Rho:N_,rho:T_,rhov:x_,RightAngleBracket:g_,RightArrowBar:u_,rightarrow:w_,RightArrow:v_,Rightarrow:$_,RightArrowLeftArrow:h_,rightarrowtail:f_,RightCeiling:__,RightDoubleBracket:m_,RightDownTeeVector:l_,RightDownVectorBar:c_,RightDownVector:p_,RightFloor:i_,rightharpoondown:d_,rightharpoonup:s_,rightleftarrows:n_,rightleftharpoons:a_,rightrightarrows:r_,rightsquigarrow:o_,RightTeeArrow:t_,RightTee:e_,RightTeeVector:Zm,rightthreetimes:Xm,RightTriangleBar:Km,RightTriangle:zm,RightTriangleEqual:Jm,RightUpDownVector:Qm,RightUpTeeVector:Ym,RightUpVectorBar:qm,RightUpVector:Gm,RightVectorBar:Um,RightVector:Vm,ring:Wm,risingdotseq:Am,rlarr:Hm,rlhar:jm,rlm:Rm,rmoustache:Fm,rmoust:Bm,rnmid:Em,roang:Pm,roarr:Om,robrk:Lm,ropar:Mm,ropf:Dm,Ropf:Im,roplus:Cm,rotimes:Sm,RoundImplies:km,rpar:bm,rpargt:ym,rppolint:Nm,rrarr:Tm,Rrightarrow:xm,rsaquo:gm,rscr:um,Rscr:wm,rsh:vm,Rsh:$m,rsqb:hm,rsquo:fm,rsquor:_m,rthree:mm,rtimes:lm,rtri:cm,rtrie:pm,rtrif:im,rtriltri:dm,RuleDelayed:sm,ruluhar:nm,rx:am,Sacute:rm,sacute:om,sbquo:tm,scap:em,Scaron:Zl,scaron:Xl,Sc:Kl,sc:zl,sccue:Jl,sce:Ql,scE:Yl,Scedil:ql,scedil:Gl,Scirc:Ul,scirc:Vl,scnap:Wl,scnE:Al,scnsim:Hl,scpolint:jl,scsim:Rl,Scy:Fl,scy:Bl,sdotb:El,sdot:Pl,sdote:Ol,searhk:Ll,searr:Ml,seArr:Dl,searrow:Il,sect:Cl,semi:Sl,seswar:kl,setminus:bl,setmn:yl,sext:Nl,Sfr:Tl,sfr:xl,sfrown:gl,sharp:ul,SHCHcy:wl,shchcy:vl,SHcy:$l,shcy:hl,ShortDownArrow:fl,ShortLeftArrow:_l,shortmid:ml,shortparallel:ll,ShortRightArrow:cl,ShortUpArrow:pl,shy:il,Sigma:dl,sigma:sl,sigmaf:nl,sigmav:al,sim:rl,simdot:ol,sime:tl,simeq:el,simg:Zc,simgE:Xc,siml:Kc,simlE:zc,simne:Jc,simplus:Qc,simrarr:Yc,slarr:qc,SmallCircle:Gc,smallsetminus:Uc,smashp:Vc,smeparsl:Wc,smid:Ac,smile:Hc,smt:jc,smte:Rc,smtes:Fc,SOFTcy:Bc,softcy:Ec,solbar:Pc,solb:Oc,sol:Lc,Sopf:Mc,sopf:Dc,spades:Ic,spadesuit:Cc,spar:Sc,sqcap:kc,sqcaps:bc,sqcup:yc,sqcups:Nc,Sqrt:Tc,sqsub:xc,sqsube:gc,sqsubset:uc,sqsubseteq:wc,sqsup:vc,sqsupe:$c,sqsupset:hc,sqsupseteq:fc,square:_c,Square:mc,SquareIntersection:lc,SquareSubset:cc,SquareSubsetEqual:pc,SquareSuperset:ic,SquareSupersetEqual:dc,SquareUnion:sc,squarf:nc,squ:ac,squf:rc,srarr:oc,Sscr:tc,sscr:ec,ssetmn:Zp,ssmile:Xp,sstarf:Kp,Star:zp,star:Jp,starf:Qp,straightepsilon:Yp,straightphi:qp,strns:Gp,sub:Up,Sub:Vp,subdot:Wp,subE:Ap,sube:Hp,subedot:jp,submult:Rp,subnE:Fp,subne:Bp,subplus:Ep,subrarr:Pp,subset:Op,Subset:Lp,subseteq:Mp,subseteqq:Dp,SubsetEqual:Ip,subsetneq:Cp,subsetneqq:Sp,subsim:kp,subsub:bp,subsup:yp,succapprox:Np,succ:Tp,succcurlyeq:xp,Succeeds:gp,SucceedsEqual:up,SucceedsSlantEqual:wp,SucceedsTilde:vp,succeq:$p,succnapprox:hp,succneqq:fp,succnsim:_p,succsim:mp,SuchThat:lp,sum:cp,Sum:pp,sung:ip,sup1:dp,sup2:sp,sup3:np,sup:ap,Sup:rp,supdot:op,supdsub:tp,supE:ep,supe:Zi,supedot:Xi,Superset:Ki,SupersetEqual:zi,suphsol:Ji,suphsub:Qi,suplarr:Yi,supmult:qi,supnE:Gi,supne:Ui,supplus:Vi,supset:Wi,Supset:Ai,supseteq:Hi,supseteqq:ji,supsetneq:Ri,supsetneqq:Fi,supsim:Bi,supsub:Ei,supsup:Pi,swarhk:Oi,swarr:Li,swArr:Mi,swarrow:Di,swnwar:Ii,szlig:Ci,Tab:Si,target:ki,Tau:bi,tau:yi,tbrk:Ni,Tcaron:Ti,tcaron:xi,Tcedil:gi,tcedil:ui,Tcy:wi,tcy:vi,tdot:$i,telrec:hi,Tfr:fi,tfr:_i,there4:mi,therefore:li,Therefore:ci,Theta:pi,theta:ii,thetasym:di,thetav:si,thickapprox:ni,thicksim:ai,ThickSpace:ri,ThinSpace:oi,thinsp:ti,thkap:ei,thksim:Zd,THORN:Xd,thorn:Kd,tilde:zd,Tilde:Jd,TildeEqual:Qd,TildeFullEqual:Yd,TildeTilde:qd,timesbar:Gd,timesb:Ud,times:Vd,timesd:Wd,tint:Ad,toea:Hd,topbot:jd,topcir:Rd,top:Fd,Topf:Bd,topf:Ed,topfork:Pd,tosa:Od,tprime:Ld,trade:Md,TRADE:Dd,triangle:Id,triangledown:Cd,triangleleft:Sd,trianglelefteq:kd,triangleq:bd,triangleright:yd,trianglerighteq:Nd,tridot:Td,trie:xd,triminus:gd,TripleDot:ud,triplus:wd,trisb:vd,tritime:$d,trpezium:hd,Tscr:fd,tscr:_d,TScy:md,tscy:ld,TSHcy:cd,tshcy:pd,Tstrok:id,tstrok:dd,twixt:sd,twoheadleftarrow:nd,twoheadrightarrow:ad,Uacute:rd,uacute:od,uarr:td,Uarr:ed,uArr:Zs,Uarrocir:Xs,Ubrcy:Ks,ubrcy:zs,Ubreve:Js,ubreve:Qs,Ucirc:Ys,ucirc:qs,Ucy:Gs,ucy:Us,udarr:Vs,Udblac:Ws,udblac:As,udhar:Hs,ufisht:js,Ufr:Rs,ufr:Fs,Ugrave:Bs,ugrave:Es,uHar:Ps,uharl:Os,uharr:Ls,uhblk:Ms,ulcorn:Ds,ulcorner:Is,ulcrop:Cs,ultri:Ss,Umacr:ks,umacr:bs,uml:ys,UnderBar:Ns,UnderBrace:Ts,UnderBracket:xs,UnderParenthesis:gs,Union:us,UnionPlus:ws,Uogon:vs,uogon:$s,Uopf:hs,uopf:fs,UpArrowBar:_s,uparrow:ms,UpArrow:ls,Uparrow:cs,UpArrowDownArrow:ps,updownarrow:is,UpDownArrow:ds,Updownarrow:ss,UpEquilibrium:ns,upharpoonleft:as,upharpoonright:rs,uplus:ts,UpperLeftArrow:es,UpperRightArrow:Zn,upsi:Xn,Upsi:Kn,upsih:zn,Upsilon:Jn,upsilon:Qn,UpTeeArrow:Yn,UpTee:qn,upuparrows:Gn,urcorn:Un,urcorner:Vn,urcrop:Wn,Uring:An,uring:Hn,urtri:jn,Uscr:Rn,uscr:Fn,utdot:Bn,Utilde:En,utilde:Pn,utri:On,utrif:Ln,uuarr:Mn,Uuml:Dn,uuml:In,uwangle:Cn,vangrt:Sn,varepsilon:kn,varkappa:bn,varnothing:yn,varphi:Nn,varpi:Tn,varpropto:xn,varr:gn,vArr:un,varrho:wn,varsigma:vn,varsubsetneq:$n,varsubsetneqq:hn,varsupsetneq:fn,varsupsetneqq:_n,vartheta:mn,vartriangleleft:ln,vartriangleright:cn,vBar:pn,Vbar:dn,vBarv:sn,Vcy:nn,vcy:an,vdash:rn,vDash:on,Vdash:tn,VDash:en,Vdashl:Za,veebar:Xa,vee:Ka,Vee:za,veeeq:Ja,vellip:Qa,verbar:Ya,Verbar:qa,vert:Ga,Vert:Ua,VerticalBar:Va,VerticalLine:Wa,VerticalSeparator:Aa,VerticalTilde:Ha,VeryThinSpace:ja,Vfr:Ra,vfr:Fa,vltri:Ba,vnsub:Ea,vnsup:Pa,Vopf:Oa,vopf:La,vprop:Ma,vrtri:Da,Vscr:Ia,vscr:Ca,vsubnE:Sa,vsubne:ka,vsupnE:ba,vsupne:ya,Vvdash:Na,vzigzag:Ta,Wcirc:xa,wcirc:ga,wedbar:ua,wedge:wa,Wedge:va,wedgeq:$a,weierp:ha,Wfr:fa,wfr:_a,Wopf:ma,wopf:la,wp:ca,wr:pa,wreath:ia,Wscr:da,wscr:sa,xcap:na,xcirc:aa,xcup:ra,xdtri:oa,Xfr:ta,xfr:ea,xharr:Zr,xhArr:Xr,Xi:Kr,xi:zr,xlarr:Jr,xlArr:Qr,xmap:Yr,xnis:qr,xodot:Gr,Xopf:Ur,xopf:Vr,xoplus:Wr,xotime:Ar,xrarr:Hr,xrArr:jr,Xscr:Rr,xscr:Fr,xsqcup:Br,xuplus:Er,xutri:Pr,xvee:Or,xwedge:Lr,Yacute:Mr,yacute:Dr,YAcy:Ir,yacy:Cr,Ycirc:Sr,ycirc:kr,Ycy:br,ycy:yr,yen:Nr,Yfr:Tr,yfr:xr,YIcy:gr,yicy:ur,Yopf:wr,yopf:vr,Yscr:$r,yscr:hr,YUcy:fr,yucy:_r,yuml:mr,Yuml:lr,Zacute:cr,zacute:pr,Zcaron:ir,zcaron:dr,Zcy:sr,zcy:nr,Zdot:ar,zdot:rr,zeetrf:or,ZeroWidthSpace:tr,Zeta:er,zeta:Zo,zfr:Xo,Zfr:Ko,ZHcy:zo,zhcy:Jo,zigrarr:Qo,zopf:Yo,Zopf:qo,Zscr:Go,zscr:Uo,zwj:Vo,zwnj:Wo},Ao="Á",Ho="á",jo="Â",Ro="â",Fo="´",Bo="Æ",Eo="æ",Po="À",Oo="à",Lo="&",Mo="&",Do="Å",Io="å",Co="Ã",So="ã",ko="Ä",bo="ä",yo="¦",No="Ç",To="ç",xo="¸",go="¢",uo="©",wo="©",vo="¤",$o="°",ho="÷",fo="É",_o="é",mo="Ê",lo="ê",co="È",po="è",io="Ð",so="ð",no="Ë",ao="ë",ro="½",oo="¼",to="¾",eo=">",Zt=">",Xt="Í",Kt="í",zt="Î",Jt="î",Qt="¡",Yt="Ì",qt="ì",Gt="¿",Ut="Ï",Vt="ï",Wt="«",At="<",Ht="<",jt="¯",Rt="µ",Ft="·",Bt=" ",Et="¬",Pt="Ñ",Ot="ñ",Lt="Ó",Mt="ó",Dt="Ô",It="ô",Ct="Ò",St="ò",kt="ª",bt="º",yt="Ø",Nt="ø",Tt="Õ",xt="õ",gt="Ö",ut="ö",wt="¶",vt="±",$t="£",ht='"',ft='"',_t="»",mt="®",lt="®",ct="§",pt="­",it="¹",dt="²",st="³",nt="ß",at="Þ",rt="þ",ot="×",tt="Ú",et="ú",Ze="Û",Xe="û",Ke="Ù",ze="ù",Je="¨",Qe="Ü",Ye="ü",qe="Ý",Ge="ý",Ue="¥",Ve="ÿ",We={Aacute:Ao,aacute:Ho,Acirc:jo,acirc:Ro,acute:Fo,AElig:Bo,aelig:Eo,Agrave:Po,agrave:Oo,amp:Lo,AMP:Mo,Aring:Do,aring:Io,Atilde:Co,atilde:So,Auml:ko,auml:bo,brvbar:yo,Ccedil:No,ccedil:To,cedil:xo,cent:go,copy:uo,COPY:wo,curren:vo,deg:$o,divide:ho,Eacute:fo,eacute:_o,Ecirc:mo,ecirc:lo,Egrave:co,egrave:po,ETH:io,eth:so,Euml:no,euml:ao,frac12:ro,frac14:oo,frac34:to,gt:eo,GT:Zt,Iacute:Xt,iacute:Kt,Icirc:zt,icirc:Jt,iexcl:Qt,Igrave:Yt,igrave:qt,iquest:Gt,Iuml:Ut,iuml:Vt,laquo:Wt,lt:At,LT:Ht,macr:jt,micro:Rt,middot:Ft,nbsp:Bt,not:Et,Ntilde:Pt,ntilde:Ot,Oacute:Lt,oacute:Mt,Ocirc:Dt,ocirc:It,Ograve:Ct,ograve:St,ordf:kt,ordm:bt,Oslash:yt,oslash:Nt,Otilde:Tt,otilde:xt,Ouml:gt,ouml:ut,para:wt,plusmn:vt,pound:$t,quot:ht,QUOT:ft,raquo:_t,reg:mt,REG:lt,sect:ct,shy:pt,sup1:it,sup2:dt,sup3:st,szlig:nt,THORN:at,thorn:rt,times:ot,Uacute:tt,uacute:et,Ucirc:Ze,ucirc:Xe,Ugrave:Ke,ugrave:ze,uml:Je,Uuml:Qe,uuml:Ye,Yacute:qe,yacute:Ge,yen:Ue,yuml:Ve},Ae="&",He="'",je=">",Re="<",Fe='"',eJ={amp:Ae,apos:He,gt:je,lt:Re,quot:Fe},Z4={},Be={"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376},Ee=Q3&&Q3.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}};Object.defineProperty(Z4,"__esModule",{value:!0});var gK=Ee(Be),Pe=String.fromCodePoint||function(Z){var X="";if(Z>65535)Z-=65536,X+=String.fromCharCode(Z>>>10&1023|55296),Z=56320|Z&1023;return X+=String.fromCharCode(Z),X};function Oe(Z){if(Z>=55296&&Z<=57343||Z>1114111)return"�";if(Z in gK.default)Z=gK.default[Z];return Pe(Z)}Z4.default=Oe;var F1=Q3&&Q3.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}};Object.defineProperty(S5,"__esModule",{value:!0});S5.decodeHTML=S5.decodeHTMLStrict=S5.decodeXML=void 0;var j6=F1(tJ),Le=F1(We),Me=F1(eJ),uK=F1(Z4),De=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;S5.decodeXML=ZQ(Me.default);S5.decodeHTMLStrict=ZQ(j6.default);function ZQ(Z){var X=XQ(Z);return function(K){return String(K).replace(De,X)}}var wK=function(Z,X){return Z<X?1:-1};S5.decodeHTML=function(){var Z=Object.keys(Le.default).sort(wK),X=Object.keys(j6.default).sort(wK);for(var K=0,z=0;K<X.length;K++)if(Z[z]===X[K])X[K]+=";?",z++;else X[K]+=";";var J=new RegExp("&(?:"+X.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),Q=XQ(j6.default);function Y(q){if(q.substr(-1)!==";")q+=";";return Q(q)}return function(q){return String(q).replace(J,Y)}}();function XQ(Z){return function X(K){if(K.charAt(1)==="#"){var z=K.charAt(2);if(z==="X"||z==="x")return uK.default(parseInt(K.substr(3),16));return uK.default(parseInt(K.substr(2),10))}return Z[K.slice(1,-1)]||K}}var h8={},KQ=Q3&&Q3.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}};Object.defineProperty(h8,"__esModule",{value:!0});h8.escapeUTF8=h8.escape=h8.encodeNonAsciiHTML=h8.encodeHTML=h8.encodeXML=void 0;var Ie=KQ(eJ),zQ=QQ(Ie.default),JQ=YQ(zQ);h8.encodeXML=UQ(zQ);var Ce=KQ(tJ),X4=QQ(Ce.default),Se=YQ(X4);h8.encodeHTML=be(X4,Se);h8.encodeNonAsciiHTML=UQ(X4);function QQ(Z){return Object.keys(Z).sort().reduce(function(X,K){return X[Z[K]]="&"+K+";",X},{})}function YQ(Z){var X=[],K=[];for(var z=0,J=Object.keys(Z);z<J.length;z++){var Q=J[z];if(Q.length===1)X.push("\\"+Q);else K.push(Q)}X.sort();for(var Y=0;Y<X.length-1;Y++){var q=Y;while(q<X.length-1&&X[q].charCodeAt(1)+1===X[q+1].charCodeAt(1))q+=1;var G=1+q-Y;if(G<3)continue;X.splice(Y,G,X[Y]+"-"+X[q])}return K.unshift("["+X.join("")+"]"),new RegExp(K.join("|"),"g")}var qQ=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,ke=String.prototype.codePointAt!=null?function(Z){return Z.codePointAt(0)}:function(Z){return(Z.charCodeAt(0)-55296)*1024+Z.charCodeAt(1)-56320+65536};function B1(Z){return"&#x"+(Z.length>1?ke(Z):Z.charCodeAt(0)).toString(16).toUpperCase()+";"}function be(Z,X){return function(K){return K.replace(X,function(z){return Z[z]}).replace(qQ,B1)}}var GQ=new RegExp(JQ.source+"|"+qQ.source,"g");function ye(Z){return Z.replace(GQ,B1)}h8.escape=ye;function Ne(Z){return Z.replace(JQ,B1)}h8.escapeUTF8=Ne;function UQ(Z){return function(X){return X.replace(GQ,function(K){return Z[K]||B1(K)})}}(function(Z){Object.defineProperty(Z,"__esModule",{value:!0}),Z.decodeXMLStrict=Z.decodeHTML5Strict=Z.decodeHTML4Strict=Z.decodeHTML5=Z.decodeHTML4=Z.decodeHTMLStrict=Z.decodeHTML=Z.decodeXML=Z.encodeHTML5=Z.encodeHTML4=Z.escapeUTF8=Z.escape=Z.encodeNonAsciiHTML=Z.encodeHTML=Z.encodeXML=Z.encode=Z.decodeStrict=Z.decode=void 0;var X=S5,K=h8;function z(G,U){return(!U||U<=0?X.decodeXML:X.decodeHTML)(G)}Z.decode=z;function J(G,U){return(!U||U<=0?X.decodeXML:X.decodeHTMLStrict)(G)}Z.decodeStrict=J;function Q(G,U){return(!U||U<=0?K.encodeXML:K.encodeHTML)(G)}Z.encode=Q;var Y=h8;Object.defineProperty(Z,"encodeXML",{enumerable:!0,get:function(){return Y.encodeXML}}),Object.defineProperty(Z,"encodeHTML",{enumerable:!0,get:function(){return Y.encodeHTML}}),Object.defineProperty(Z,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return Y.encodeNonAsciiHTML}}),Object.defineProperty(Z,"escape",{enumerable:!0,get:function(){return Y.escape}}),Object.defineProperty(Z,"escapeUTF8",{enumerable:!0,get:function(){return Y.escapeUTF8}}),Object.defineProperty(Z,"encodeHTML4",{enumerable:!0,get:function(){return Y.encodeHTML}}),Object.defineProperty(Z,"encodeHTML5",{enumerable:!0,get:function(){return Y.encodeHTML}});var q=S5;Object.defineProperty(Z,"decodeXML",{enumerable:!0,get:function(){return q.decodeXML}}),Object.defineProperty(Z,"decodeHTML",{enumerable:!0,get:function(){return q.decodeHTML}}),Object.defineProperty(Z,"decodeHTMLStrict",{enumerable:!0,get:function(){return q.decodeHTMLStrict}}),Object.defineProperty(Z,"decodeHTML4",{enumerable:!0,get:function(){return q.decodeHTML}}),Object.defineProperty(Z,"decodeHTML5",{enumerable:!0,get:function(){return q.decodeHTML}}),Object.defineProperty(Z,"decodeHTML4Strict",{enumerable:!0,get:function(){return q.decodeHTMLStrict}}),Object.defineProperty(Z,"decodeHTML5Strict",{enumerable:!0,get:function(){return q.decodeHTMLStrict}}),Object.defineProperty(Z,"decodeXMLStrict",{enumerable:!0,get:function(){return q.decodeXML}})})(e6);var VQ="&(?:#x[a-f0-9]{1,6}|#[0-9]{1,7}|[a-z][a-z0-9]{1,31});",Te=92,xe=/[\\&]/,K4="[!\"#$%&'()*+,./:;<=>?@[\\\\\\]^_`{|}~-]",ge=new RegExp("\\\\"+K4+"|"+VQ,"gi"),ue='[&<>"]',vK=new RegExp(ue,"g"),we=function(Z){if(Z.charCodeAt(0)===Te)return Z.charAt(1);return e6.decodeHTML(Z)};function m3(Z){if(xe.test(Z))return Z.replace(ge,we);return Z}function y7(Z){try{return iW(Z)}catch(X){return Z}}function ve(Z){switch(Z){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return Z}}function o0(Z){if(vK.test(Z))return Z.replace(vK,ve);return Z}function R6(Z,X){var K=[];for(var z=0;z<X;z++)K.push(Z);return K.join("")}function $K(Z){if(!Z)return!0;return!/[^ \t]+/.test(Z)}var $e=function(){function Z(X){this.current=X,this.root=X,this.entering=!0}return Z.prototype.next=function(){var X=this.current,K=this.entering;if(X===null)return null;var z=z4(X);if(K&&z)if(X.firstChild)this.current=X.firstChild,this.entering=!0;else this.entering=!1;else if(X===this.root)this.current=null;else if(X.next===null)this.current=X.parent,this.entering=!1;else this.current=X.next,this.entering=!0;return{entering:K,node:X}},Z.prototype.resumeAt=function(X,K){this.current=X,this.entering=K===!0},Z}();function z4(Z){switch(Z.type){case"document":case"blockQuote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"strike":case"link":case"image":case"table":case"tableHead":case"tableBody":case"tableRow":case"tableCell":case"tableDelimRow":case"customInline":return!0;default:return!1}}var he=1,E1={};function fe(Z){return E1[Z]}function F6(Z){delete E1[Z]}function _e(){E1={}}var i3=function(){function Z(X,K){if(this.parent=null,this.prev=null,this.next=null,this.firstChild=null,this.lastChild=null,this.literal=null,X==="document")this.id=-1;else this.id=he++;this.type=X,this.sourcepos=K,E1[this.id]=this}return Z.prototype.isContainer=function(){return z4(this)},Z.prototype.unlink=function(){if(this.prev)this.prev.next=this.next;else if(this.parent)this.parent.firstChild=this.next;if(this.next)this.next.prev=this.prev;else if(this.parent)this.parent.lastChild=this.prev;this.parent=null,this.next=null,this.prev=null},Z.prototype.replaceWith=function(X){this.insertBefore(X),this.unlink()},Z.prototype.insertAfter=function(X){if(X.unlink(),X.next=this.next,X.next)X.next.prev=X;if(X.prev=this,this.next=X,this.parent){if(X.parent=this.parent,!X.next)X.parent.lastChild=X}},Z.prototype.insertBefore=function(X){if(X.unlink(),X.prev=this.prev,X.prev)X.prev.next=X;if(X.next=this,this.prev=X,X.parent=this.parent,!X.prev)X.parent.firstChild=X},Z.prototype.appendChild=function(X){if(X.unlink(),X.parent=this,this.lastChild)this.lastChild.next=X,X.prev=this.lastChild,this.lastChild=X;else this.firstChild=X,this.lastChild=X},Z.prototype.prependChild=function(X){if(X.unlink(),X.parent=this,this.firstChild)this.firstChild.prev=X,X.next=this.firstChild,this.firstChild=X;else this.firstChild=X,this.lastChild=X},Z.prototype.walker=function(){return new $e(this)},Z}(),y5=function(Z){p8(X,Z);function X(K,z){var J=Z.call(this,K,z)||this;return J.open=!0,J.lineOffsets=null,J.stringContent=null,J.lastLineBlank=!1,J.lastLineChecked=!1,J.type=K,J}return X}(i3),me=function(Z){p8(X,Z);function X(){var K=Z!==null&&Z.apply(this,arguments)||this;return K.listData=null,K}return X}(y5),le=function(Z){p8(X,Z);function X(){var K=Z!==null&&Z.apply(this,arguments)||this;return K.level=0,K.headingType="atx",K}return X}(y5),ce=function(Z){p8(X,Z);function X(){var K=Z!==null&&Z.apply(this,arguments)||this;return K.isFenced=!1,K.fenceChar=null,K.fenceLength=0,K.fenceOffset=-1,K.info=null,K.infoPadding=0,K}return X}(y5),pe=function(Z){p8(X,Z);function X(){var K=Z!==null&&Z.apply(this,arguments)||this;return K.columns=[],K}return X}(y5),ie=function(Z){p8(X,Z);function X(){var K=Z!==null&&Z.apply(this,arguments)||this;return K.startIdx=0,K.endIdx=0,K.paddingLeft=0,K.paddingRight=0,K.ignored=!1,K}return X}(y5),de=function(Z){p8(X,Z);function X(){var K=Z!==null&&Z.apply(this,arguments)||this;return K.title="",K.dest="",K.label="",K}return X}(y5),se=function(Z){p8(X,Z);function X(){var K=Z!==null&&Z.apply(this,arguments)||this;return K.syntaxLength=0,K.offset=-1,K.info="",K}return X}(y5),ne=function(Z){p8(X,Z);function X(){var K=Z!==null&&Z.apply(this,arguments)||this;return K.htmlBlockType=-1,K}return X}(y5),ae=function(Z){p8(X,Z);function X(){var K=Z!==null&&Z.apply(this,arguments)||this;return K.destination=null,K.title=null,K.extendedAutolink=!1,K}return X}(i3),re=function(Z){p8(X,Z);function X(){var K=Z!==null&&Z.apply(this,arguments)||this;return K.tickCount=0,K}return X}(i3),oe=function(Z){p8(X,Z);function X(){var K=Z!==null&&Z.apply(this,arguments)||this;return K.info="",K}return X}(i3);function e(Z,X){switch(Z){case"heading":return new le(Z,X);case"list":case"item":return new me(Z,X);case"link":case"image":return new ae(Z,X);case"codeBlock":return new ce(Z,X);case"htmlBlock":return new ne(Z,X);case"table":return new pe(Z,X);case"tableCell":return new ie(Z,X);case"document":case"paragraph":case"blockQuote":case"thematicBreak":case"tableRow":case"tableBody":case"tableHead":case"frontMatter":return new y5(Z,X);case"code":return new re(Z,X);case"refDef":return new de(Z,X);case"customBlock":return new se(Z,X);case"customInline":return new oe(Z,X);default:return new i3(Z,X)}}function WQ(Z){return Z.type==="codeBlock"}function te(Z){return Z.type==="htmlBlock"}function ee(Z){return Z.type==="heading"}function hK(Z){return Z.type==="list"}function Z88(Z){return Z.type==="table"}function n0(Z){return Z.type==="refDef"}function AQ(Z){return Z.type==="customBlock"}function X88(Z){return Z.type==="customInline"}function z8(Z,X){var K=e("text",X);return K.literal=Z,K}var HQ="[A-Za-z][A-Za-z0-9-]*",K88="[a-zA-Z_:][a-zA-Z0-9:._-]*",z88="[^\"'=<>`\\x00-\\x20]+",J88="'[^']*'",Q88='"[^"]*"',Y88="(?:"+z88+"|"+J88+"|"+Q88+")",q88="(?:\\s*=\\s*"+Y88+")",G88="(?:\\s+"+K88+q88+"?)",jQ="<"+HQ+G88+"*\\s*/?>",RQ="</"+HQ+"\\s*[>]",U88="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",V88="[<][?].*?[?][>]",W88="<![A-Z]+\\s+[^>]*>",A88="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",H88="(?:"+jQ+"|"+RQ+"|"+U88+"|"+V88+"|"+W88+"|"+A88+")",j88=new RegExp("^"+H88,"i");/*! http://mths.be/fromcodepoint v0.2.1 by @mathias */var B6;if(String.fromCodePoint)B6=function(Z){try{return String.fromCodePoint(Z)}catch(X){if(X instanceof RangeError)return String.fromCharCode(65533);throw X}};else E6=String.fromCharCode,P6=Math.floor,B6=function(){var Z=[];for(var X=0;X<arguments.length;X++)Z[X]=arguments[X];var K=16384,z=[],J,Q,Y=-1,q=Z.length;if(!q)return"";var G="";while(++Y<q){var U=Number(Z[Y]);if(!isFinite(U)||U<0||U>1114111||P6(U)!==U)return String.fromCharCode(65533);if(U<=65535)z.push(U);else U-=65536,J=(U>>10)+55296,Q=U%1024+56320,z.push(J,Q);if(Y+1===q||z.length>K)G+=E6.apply(void 0,z),z.length=0}return G};var E6,P6,c9=B6,R88="(?:[w-]+.)*[A-Za-z0-9-]+.[A-Za-z0-9-]+",F88="[^<\\s]*[^<?!.,:*_?~\\s]",B88="[\\w.+-]+@(?:[\\w-]+\\.)+[\\w-]+";function E88(Z){var X=/\)+$/.exec(Z);if(X){var K=0;for(var z=0,J=Z;z<J.length;z++){var Q=J[z];if(Q==="(")if(K<0)K=1;else K+=1;else if(Q===")")K-=1}if(K<0){var Y=Math.min(-K,X[0].length);return Z.substring(0,Z.length-Y)}}return Z}function P88(Z){return Z.replace(/&[A-Za-z0-9]+;$/,"")}function O88(Z){var X=new RegExp(B88,"g"),K=[],z;while(z=X.exec(Z)){var J=z[0];if(!/[_-]+$/.test(J))K.push({text:J,range:[z.index,z.index+J.length-1],url:"mailto:"+J})}return K}function L88(Z){var X=new RegExp("(www|https?://)."+R88+F88,"g"),K=[],z;while(z=X.exec(Z)){var J=P88(E88(z[0])),Q=z[1]==="www"?"http://":"";K.push({text:J,range:[z.index,z.index+J.length-1],url:""+Q+J})}return K}function M88(Z){return H6(H6([],L88(Z)),O88(Z)).sort(function(X,K){return X.range[0]-K.range[0]})}function D88(Z,X){if(typeof X==="boolean")X=M88;var K,z=function(){var{entering:J,node:Q}=K;if(J&&Q.type==="text"&&Q.parent.type!=="link"){var Y=Q.literal,q=X(Y);if(!q||!q.length)return"continue";var G=0,U=Q.sourcepos[0],V=U[0],W=U[1],A=function(w,N){return[[V,W+w],[V,W+N]]},j=[];for(var H=0,R=q;H<R.length;H++){var F=R[H],B=F.range,O=F.url,L=F.text;if(B[0]>G)j.push(z8(Y.substring(G,B[0]),A(G,B[0]-1)));var D=e("link",A.apply(void 0,B));D.appendChild(z8(L,A.apply(void 0,B))),D.destination=O,D.extendedAutolink=!0,j.push(D),G=B[1]+1}if(G<Y.length)j.push(z8(Y.substring(G),A(G,Y.length-1)));for(var I=0,k=j;I<k.length;I++){var x=k[I];Q.insertBefore(x)}Q.unlink()}};while(K=Z.next())z()}function Z1(Z){return Z[Z.length-1]}function fK(Z){return Z.slice(1,Z.length-1).trim().replace(/[ \t\r\n]+/," ").toLowerCase().toUpperCase()}function N7(Z,X){Object.keys(Z).forEach(function(K){X(K,Z[K])})}function I88(Z){var X=[];for(var K=1;K<arguments.length;K++)X[K-1]=arguments[K];var z=j8({},Z);return X.forEach(function(J){delete z[J]}),z}function a0(Z){return!Object.keys(Z).length}function C88(Z){Object.keys(Z).forEach(function(X){delete Z[X]})}var O6=10,p9=42,T7=95,S88=96,_K=91,k88=93,x7=126,mK=60,b88=33,lK=92,y88=38,cK=40,i9=41,N88=58,U0=39,V0=34,W0=36,d9="\\\\"+K4,pK=new RegExp(/[!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/),T88=new RegExp('^(?:"('+d9+'|[^"\\x00])*"|'+("'("+d9+"|[^'\\x00])*'")+"|"+("\\(("+d9+"|[^()\\x00])*\\))")),x88=/^(?:<(?:[^<>\n\\\x00]|\\.)*>)/,iK=new RegExp("^"+K4),g88=new RegExp("^"+VQ,"i"),u88=/`+/,w88=/^`+/,v88=/\.\.\./g,$88=/--+/g,h88=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,f88=/^<[A-Za-z][A-Za-z0-9.+-]{1,31}:[^<>\x00-\x20]*>/i,_88=/^ *(?:\n *)?/,s9=/^[ \t\n\x0b\x0c\x0d]/,dK=/^\s/,m88=/ *$/,l88=/^ */,sK=/^ *(?:\n|$)/,c88=/^\[(?:[^\\\[\]]|\\.){0,1000}\]/,p88=/^[^\n`\[\]\\!<&*_'"~$]+/m,i88=function(){function Z(X){this.subject="",this.delimiters=null,this.brackets=null,this.pos=0,this.lineStartNum=0,this.lineIdx=0,this.lineOffsets=[0],this.linePosOffset=0,this.refMap={},this.refLinkCandidateMap={},this.refDefCandidateMap={},this.options=X}return Z.prototype.sourcepos=function(X,K){var z=this.linePosOffset+this.lineOffsets[this.lineIdx],J=this.lineStartNum+this.lineIdx,Q=[J,X+z];if(typeof K==="number")return[Q,[J,K+z]];return Q},Z.prototype.nextLine=function(){this.lineIdx+=1,this.linePosOffset=-this.pos},Z.prototype.match=function(X){var K=X.exec(this.subject.slice(this.pos));if(K===null)return null;return this.pos+=K.index+K[0].length,K[0]},Z.prototype.peek=function(){if(this.pos<this.subject.length)return this.subject.charCodeAt(this.pos);return-1},Z.prototype.spnl=function(){return this.match(_88),!0},Z.prototype.parseBackticks=function(X){var K=this.pos+1,z=this.match(w88);if(z===null)return!1;var J=this.pos,Q;while((Q=this.match(u88))!==null)if(Q===z){var Y=this.subject.slice(J,this.pos-z.length),q=this.sourcepos(K,this.pos),G=Y.split(`
`);if(G.length>1){var U=Z1(G);this.lineIdx+=G.length-1,this.linePosOffset=-(this.pos-U.length-z.length),q[1]=this.sourcepos(this.pos),Y=G.join(" ")}var V=e("code",q);if(Y.length>0&&Y.match(/[^ ]/)!==null&&Y[0]==" "&&Y[Y.length-1]==" ")V.literal=Y.slice(1,Y.length-1);else V.literal=Y;return V.tickCount=z.length,X.appendChild(V),!0}return this.pos=J,X.appendChild(z8(z,this.sourcepos(K,this.pos-1))),!0},Z.prototype.parseBackslash=function(X){var K=this.subject,z;this.pos+=1;var J=this.pos;if(this.peek()===O6)this.pos+=1,z=e("linebreak",this.sourcepos(this.pos-1,this.pos)),X.appendChild(z),this.nextLine();else if(iK.test(K.charAt(this.pos)))X.appendChild(z8(K.charAt(this.pos),this.sourcepos(J,this.pos))),this.pos+=1;else X.appendChild(z8("\\",this.sourcepos(J,J)));return!0},Z.prototype.parseAutolink=function(X){var K,z,J,Q=this.pos+1;if(K=this.match(h88))return z=K.slice(1,K.length-1),J=e("link",this.sourcepos(Q,this.pos)),J.destination=y7("mailto:"+z),J.title="",J.appendChild(z8(z,this.sourcepos(Q+1,this.pos-1))),X.appendChild(J),!0;if(K=this.match(f88))return z=K.slice(1,K.length-1),J=e("link",this.sourcepos(Q,this.pos)),J.destination=y7(z),J.title="",J.appendChild(z8(z,this.sourcepos(Q+1,this.pos-1))),X.appendChild(J),!0;return!1},Z.prototype.parseHtmlTag=function(X){var K=this.pos+1,z=this.match(j88);if(z===null)return!1;var J=e("htmlInline",this.sourcepos(K,this.pos));return J.literal=z,X.appendChild(J),!0},Z.prototype.scanDelims=function(X){var K=0,z=this.pos;if(X===U0||X===V0)K++,this.pos++;else while(this.peek()===X)K++,this.pos++;if(K===0||K<2&&(X===x7||X===W0))return this.pos=z,null;var J=z===0?`
`:this.subject.charAt(z-1),Q=this.peek(),Y;if(Q===-1)Y=`
`;else Y=c9(Q);var q=dK.test(Y),G=pK.test(Y),U=dK.test(J),V=pK.test(J),W=!q&&(!G||U||V),A=!U&&(!V||q||G),j,H;if(X===T7)j=W&&(!A||V),H=A&&(!W||G);else if(X===U0||X===V0)j=W&&!A,H=A;else if(X===W0)j=!q,H=!U;else j=W,H=A;return this.pos=z,{numdelims:K,canOpen:j,canClose:H}},Z.prototype.handleDelim=function(X,K){var z=this.scanDelims(X);if(!z)return!1;var J=z.numdelims,Q=this.pos+1,Y;if(this.pos+=J,X===U0)Y="’";else if(X===V0)Y="“";else Y=this.subject.slice(Q-1,this.pos);var q=z8(Y,this.sourcepos(Q,this.pos));if(K.appendChild(q),(z.canOpen||z.canClose)&&(this.options.smart||X!==U0&&X!==V0)){if(this.delimiters={cc:X,numdelims:J,origdelims:J,node:q,previous:this.delimiters,next:null,canOpen:z.canOpen,canClose:z.canClose},this.delimiters.previous)this.delimiters.previous.next=this.delimiters}return!0},Z.prototype.removeDelimiter=function(X){if(X.previous!==null)X.previous.next=X.next;if(X.next===null)this.delimiters=X.previous;else X.next.previous=X.previous},Z.prototype.removeDelimitersBetween=function(X,K){if(X.next!==K)X.next=K,K.previous=X},Z.prototype.processEmphasis=function(X){var K,z,J,Q,Y,q,G,U=!1,V=(K={},K[T7]=[X,X,X],K[p9]=[X,X,X],K[U0]=[X],K[V0]=[X],K[x7]=[X],K[W0]=[X],K);J=this.delimiters;while(J!==null&&J.previous!==X)J=J.previous;while(J!==null){var W=J.cc,A=W===T7||W===p9;if(!J.canClose)J=J.next;else{z=J.previous,G=!1;while(z!==null&&z!==X&&z!==V[W][A?J.origdelims%3:0]){if(U=A&&(J.canOpen||z.canClose)&&J.origdelims%3!==0&&(z.origdelims+J.origdelims)%3===0,z.cc===J.cc&&z.canOpen&&!U){G=!0;break}z=z.previous}if(Q=J,A||W===x7||W===W0){if(!G)J=J.next;else if(z){var j=J.numdelims>=2&&z.numdelims>=2?2:1,H=A?0:1;Y=z.node,q=J.node;var R=A?j===1?"emph":"strong":"strike";if(W===W0)R="customInline";var F=e(R),B=Y.sourcepos[1],O=q.sourcepos[0];F.sourcepos=[[B[0],B[1]-j+1],[O[0],O[1]+j-1]],Y.sourcepos[1][1]-=j,q.sourcepos[0][1]+=j,Y.literal=Y.literal.slice(j),q.literal=q.literal.slice(j),z.numdelims-=j,J.numdelims-=j;var L=Y.next,D=void 0;while(L&&L!==q)D=L.next,L.unlink(),F.appendChild(L),L=D;if(W===W0){var I=F.firstChild,k=I.literal||"",x=k.split(/\s/)[0];if(F.info=x,k.length<=x.length)I.unlink();else I.sourcepos[0][1]+=x.length,I.literal=k.replace(x+" ","")}if(Y.insertAfter(F),this.removeDelimitersBetween(z,J),z.numdelims<=H){if(z.numdelims===0)Y.unlink();this.removeDelimiter(z)}if(J.numdelims<=H){if(J.numdelims===0)q.unlink();var w=J.next;this.removeDelimiter(J),J=w}}}else if(W===U0){if(J.node.literal="’",G)z.node.literal="‘";J=J.next}else if(W===V0){if(J.node.literal="”",G)z.node.literal="“";J=J.next}if(!G){if(V[W][A?Q.origdelims%3:0]=Q.previous,!Q.canOpen)this.removeDelimiter(Q)}}}while(this.delimiters!==null&&this.delimiters!==X)this.removeDelimiter(this.delimiters)},Z.prototype.parseLinkTitle=function(){var X=this.match(T88);if(X===null)return null;return m3(X.substr(1,X.length-2))},Z.prototype.parseLinkDestination=function(){var X=this.match(x88);if(X===null){if(this.peek()===mK)return null;var K=this.pos,z=0,J=void 0;while((J=this.peek())!==-1)if(J===lK&&iK.test(this.subject.charAt(this.pos+1))){if(this.pos+=1,this.peek()!==-1)this.pos+=1}else if(J===cK)this.pos+=1,z+=1;else if(J===i9)if(z<1)break;else this.pos+=1,z-=1;else if(s9.exec(c9(J))!==null)break;else this.pos+=1;if(this.pos===K&&J!==i9)return null;if(z!==0)return null;return X=this.subject.substr(K,this.pos-K),y7(m3(X))}return y7(m3(X.substr(1,X.length-2)))},Z.prototype.parseLinkLabel=function(){var X=this.match(c88);if(X===null||X.length>1001)return 0;return X.length},Z.prototype.parseOpenBracket=function(X){var K=this.pos;this.pos+=1;var z=z8("[",this.sourcepos(this.pos,this.pos));return X.appendChild(z),this.addBracket(z,K,!1),!0},Z.prototype.parseBang=function(X){var K=this.pos;if(this.pos+=1,this.peek()===_K){this.pos+=1;var z=z8("![",this.sourcepos(this.pos-1,this.pos));X.appendChild(z),this.addBracket(z,K+1,!0)}else{var z=z8("!",this.sourcepos(this.pos,this.pos));X.appendChild(z)}return!0},Z.prototype.parseCloseBracket=function(X){var K=null,z=null,J=!1;this.pos+=1;var Q=this.pos,Y=this.brackets;if(Y===null)return X.appendChild(z8("]",this.sourcepos(Q,Q))),!0;if(!Y.active)return X.appendChild(z8("]",this.sourcepos(Q,Q))),this.removeBracket(),!0;var q=Y.image,G=this.pos;if(this.peek()===cK)if(this.pos++,this.spnl()&&(K=this.parseLinkDestination())!==null&&this.spnl()&&(s9.test(this.subject.charAt(this.pos-1))&&(z=this.parseLinkTitle())||!0)&&this.spnl()&&this.peek()===i9)this.pos+=1,J=!0;else this.pos=G;var U="";if(!J){var V=this.pos,W=this.parseLinkLabel();if(W>2)U=this.subject.slice(V,V+W);else if(!Y.bracketAfter)U=this.subject.slice(Y.index,Q);if(W===0)this.pos=G;if(U){U=fK(U);var A=this.refMap[U];if(A)K=A.destination,z=A.title,J=!0}}if(J){var j=e(q?"image":"link");j.destination=K,j.title=z||"",j.sourcepos=[Y.startpos,this.sourcepos(this.pos)];var H=Y.node.next,R=void 0;while(H)R=H.next,H.unlink(),j.appendChild(H),H=R;if(X.appendChild(j),this.processEmphasis(Y.previousDelimiter),this.removeBracket(),Y.node.unlink(),!q){Y=this.brackets;while(Y!==null){if(!Y.image)Y.active=!1;Y=Y.previous}}if(this.options.referenceDefinition)this.refLinkCandidateMap[X.id]={node:X,refLabel:U};return!0}if(this.removeBracket(),this.pos=Q,X.appendChild(z8("]",this.sourcepos(Q,Q))),this.options.referenceDefinition)this.refLinkCandidateMap[X.id]={node:X,refLabel:U};return!0},Z.prototype.addBracket=function(X,K,z){if(this.brackets!==null)this.brackets.bracketAfter=!0;this.brackets={node:X,startpos:this.sourcepos(K+(z?0:1)),previous:this.brackets,previousDelimiter:this.delimiters,index:K,image:z,active:!0}},Z.prototype.removeBracket=function(){if(this.brackets)this.brackets=this.brackets.previous},Z.prototype.parseEntity=function(X){var K,z=this.pos+1;if(K=this.match(g88))return X.appendChild(z8(e6.decodeHTML(K),this.sourcepos(z,this.pos))),!0;return!1},Z.prototype.parseString=function(X){var K,z=this.pos+1;if(K=this.match(p88)){if(this.options.smart){var J=K.replace(v88,"…").replace($88,function(Y){var q=0,G=0;if(Y.length%3===0)G=Y.length/3;else if(Y.length%2===0)q=Y.length/2;else if(Y.length%3===2)q=1,G=(Y.length-2)/3;else q=2,G=(Y.length-4)/3;return R6("—",G)+R6("–",q)});X.appendChild(z8(J,this.sourcepos(z,this.pos)))}else{var Q=z8(K,this.sourcepos(z,this.pos));X.appendChild(Q)}return!0}return!1},Z.prototype.parseNewline=function(X){this.pos+=1;var K=X.lastChild;if(K&&K.type==="text"&&K.literal[K.literal.length-1]===" "){var z=K.literal[K.literal.length-2]===" ",J=K.literal.length;K.literal=K.literal.replace(m88,"");var Q=J-K.literal.length;K.sourcepos[1][1]-=Q,X.appendChild(e(z?"linebreak":"softbreak",this.sourcepos(this.pos-Q,this.pos)))}else X.appendChild(e("softbreak",this.sourcepos(this.pos,this.pos)));return this.nextLine(),this.match(l88),!0},Z.prototype.parseReference=function(X,K){if(!this.options.referenceDefinition)return 0;this.subject=X.stringContent,this.pos=0;var z=null,J=this.pos,Q=this.parseLinkLabel();if(Q===0)return 0;var Y=this.subject.substr(0,Q);if(this.peek()===N88)this.pos++;else return this.pos=J,0;this.spnl();var q=this.parseLinkDestination();if(q===null)return this.pos=J,0;var G=this.pos;if(this.spnl(),this.pos!==G)z=this.parseLinkTitle();if(z===null)z="",this.pos=G;var U=!0;if(this.match(sK)===null)if(z==="")U=!1;else z="",this.pos=G,U=this.match(sK)!==null;if(!U)return this.pos=J,0;var V=fK(Y);if(V==="")return this.pos=J,0;var W=this.getReferenceDefSourcepos(X);X.sourcepos[0][0]=W[1][0]+1;var A=e("refDef",W);if(A.title=z,A.dest=q,A.label=V,X.insertBefore(A),!K[V])K[V]=D6(A);else this.refDefCandidateMap[A.id]=A;return this.pos-J},Z.prototype.mergeTextNodes=function(X){var K,z=[];while(K=X.next()){var{entering:J,node:Q}=K;if(J&&Q.type==="text")z.push(Q);else if(z.length===1)z=[];else if(z.length>1){var Y=z[0],q=z[z.length-1];if(Y.sourcepos&&q.sourcepos)Y.sourcepos[1]=q.sourcepos[1];if(Y.next=q.next,Y.next)Y.next.prev=Y;for(var G=1;G<z.length;G+=1)Y.literal+=z[G].literal,z[G].unlink();z=[]}}},Z.prototype.getReferenceDefSourcepos=function(X){var K=X.stringContent.split(/\n|\r\n/),z=!1,J=0,Q={line:0,ch:0};for(var Y=0;Y<K.length;Y+=1){var q=K[Y];if(s9.test(q))break;if(/\:/.test(q)&&J===0){if(z)break;var G=q.indexOf(":")===q.length-1?Y+1:Y;Q={line:G,ch:K[G].length},z=!0}var U=q.match(/'|"/g);if(U)J+=U.length;if(J===2){Q={line:Y,ch:q.length};break}}return[[X.sourcepos[0][0],X.sourcepos[0][1]],[X.sourcepos[0][0]+Q.line,Q.ch]]},Z.prototype.parseInline=function(X){var K,z=!1,J=this.peek();if(J===-1)return!1;switch(J){case O6:z=this.parseNewline(X);break;case lK:z=this.parseBackslash(X);break;case S88:z=this.parseBackticks(X);break;case p9:case T7:case x7:case W0:z=this.handleDelim(J,X);break;case U0:case V0:z=!!((K=this.options)===null||K===void 0?void 0:K.smart)&&this.handleDelim(J,X);break;case _K:z=this.parseOpenBracket(X);break;case b88:z=this.parseBang(X);break;case k88:z=this.parseCloseBracket(X);break;case mK:z=this.parseAutolink(X)||this.parseHtmlTag(X);break;case y88:if(!X.disabledEntityParse)z=this.parseEntity(X);break;default:z=this.parseString(X);break}if(!z)this.pos+=1,X.appendChild(z8(c9(J),this.sourcepos(this.pos,this.pos+1)));return!0},Z.prototype.parse=function(X){if(this.subject=X.stringContent.trim(),this.pos=0,this.delimiters=null,this.brackets=null,this.lineOffsets=X.lineOffsets||[0],this.lineIdx=0,this.linePosOffset=0,this.lineStartNum=X.sourcepos[0][0],ee(X))this.lineOffsets[0]+=X.level+1;while(this.parseInline(X));X.stringContent=null,this.processEmphasis(null),this.mergeTextNodes(X.walker());var K=this.options,z=K.extendedAutolinks,J=K.customParser;if(z)D88(X.walker(),z);if(J&&X.firstChild){var Q,Y=X.firstChild.walker();while(Q=Y.next()){var{node:q,entering:G}=Q;if(J[q.type])J[q.type](q,{entering:G,options:this.options})}}},Z}(),d88=/^\[([ \txX])\][ \t]+/;function s88(Z,X){if(X.firstChild&&X.firstChild.type==="paragraph"){var K=X.firstChild,z=K.stringContent.match(d88);if(z){var J=z[0].length;K.stringContent=K.stringContent.substring(J-1),K.sourcepos[0][1]+=J,K.lineOffsets[0]+=J,X.listData.task=!0,X.listData.checked=/[xX]/.test(z[1])}}}var n88={continue:function(){return 0},finalize:function(){},canContain:function(Z){return Z==="tableHead"||Z==="tableBody"},acceptsLines:!1},a88={continue:function(){return 0},finalize:function(){},canContain:function(Z){return Z==="tableRow"},acceptsLines:!1},r88={continue:function(){return 1},finalize:function(){},canContain:function(Z){return Z==="tableRow"||Z==="tableDelimRow"},acceptsLines:!1},o88={continue:function(){return 1},finalize:function(){},canContain:function(Z){return Z==="tableDelimCell"},acceptsLines:!1},t88={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},e88={continue:function(){return 1},finalize:function(){},canContain:function(Z){return Z==="tableCell"},acceptsLines:!1},Z58={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},X1=4,FQ=9,BQ=62,X58=60,EQ=32,PQ=91,OQ=/[^ \t\f\v\r\n]/,K58=/^(?:`{3,}|~{3,})(?= *$)/;function nK(Z){var X=Z;while(X){if(X.lastLineBlank)return!0;var K=X.type;if(!X.lastLineChecked&&(K==="list"||K==="item"))X.lastLineChecked=!0,X=X.lastChild;else{X.lastLineChecked=!0;break}}return!1}function f8(Z,X){if(X<Z.length)return Z.charCodeAt(X);return-1}function LQ(Z){return!OQ.test(Z)}function Y3(Z){return Z===EQ||Z===FQ}var z58=/^\$\$$/,J58={continue:function(Z,X){var K=Z.currentLine,z=K.match(z58);if(z)return Z.lastLineLength=z[0].length,Z.finalize(X,Z.lineNumber),2;var J=X.offset;while(J>0&&Y3(f8(K,Z.offset)))Z.advanceOffset(1,!0),J--;return 0},finalize:function(Z,X){if(X.stringContent===null)return;var K=X.stringContent,z=K.indexOf(`
`),J=K.slice(0,z),Q=K.slice(z+1),Y=J.match(/^(\s*)(.*)/);X.info=m3(Y[2].trim()),X.literal=Q,X.stringContent=null},canContain:function(){return!1},acceptsLines:!0},MQ={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!0},Q58={continue:function(){return 0},finalize:function(){},canContain:function(Z){return Z!=="item"},acceptsLines:!1},Y58={continue:function(){return 0},finalize:function(Z,X){var K=X.firstChild;while(K){if(nK(K)&&K.next){X.listData.tight=!1;break}var z=K.firstChild;while(z){if(nK(z)&&(K.next||z.next)){X.listData.tight=!1;break}z=z.next}K=K.next}},canContain:function(Z){return Z==="item"},acceptsLines:!1},q58={continue:function(Z){var X=Z.currentLine;if(!Z.indented&&f8(X,Z.nextNonspace)===BQ){if(Z.advanceNextNonspace(),Z.advanceOffset(1,!1),Y3(f8(X,Z.offset)))Z.advanceOffset(1,!0)}else return 1;return 0},finalize:function(){},canContain:function(Z){return Z!=="item"},acceptsLines:!1},G58={continue:function(Z,X){if(Z.blank){if(X.firstChild===null)return 1;Z.advanceNextNonspace()}else if(Z.indent>=X.listData.markerOffset+X.listData.padding)Z.advanceOffset(X.listData.markerOffset+X.listData.padding,!0);else return 1;return 0},finalize:s88,canContain:function(Z){return Z!=="item"},acceptsLines:!1},U58={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},V58={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},W58={continue:function(Z,X){var{currentLine:K,indent:z}=Z;if(X.isFenced){var J=z<=3&&K.charAt(Z.nextNonspace)===X.fenceChar&&K.slice(Z.nextNonspace).match(K58);if(J&&J[0].length>=X.fenceLength)return Z.lastLineLength=Z.offset+z+J[0].length,Z.finalize(X,Z.lineNumber),2;var Q=X.fenceOffset;while(Q>0&&Y3(f8(K,Z.offset)))Z.advanceOffset(1,!0),Q--}else if(z>=X1)Z.advanceOffset(X1,!0);else if(Z.blank)Z.advanceNextNonspace();else return 1;return 0},finalize:function(Z,X){var K;if(X.stringContent===null)return;if(X.isFenced){var z=X.stringContent,J=z.indexOf(`
`),Q=z.slice(0,J),Y=z.slice(J+1),q=Q.match(/^(\s*)(.*)/);X.infoPadding=q[1].length,X.info=m3(q[2].trim()),X.literal=Y}else X.literal=(K=X.stringContent)===null||K===void 0?void 0:K.replace(/(\n *)+$/,`
`);X.stringContent=null},canContain:function(){return!1},acceptsLines:!0},A58={continue:function(Z,X){return Z.blank&&(X.htmlBlockType===6||X.htmlBlockType===7)?1:0},finalize:function(Z,X){var K;X.literal=((K=X.stringContent)===null||K===void 0?void 0:K.replace(/(\n *)+$/,""))||null,X.stringContent=null},canContain:function(){return!1},acceptsLines:!0},H58={continue:function(Z){return Z.blank?1:0},finalize:function(Z,X){if(X.stringContent===null)return;var K,z=!1;while(f8(X.stringContent,0)===PQ&&(K=Z.inlineParser.parseReference(X,Z.refMap)))X.stringContent=X.stringContent.slice(K),z=!0;if(z&&LQ(X.stringContent))X.unlink()},canContain:function(){return!1},acceptsLines:!0},j58=MQ,R58=MQ,r0={document:Q58,list:Y58,blockQuote:q58,item:G58,heading:U58,thematicBreak:V58,codeBlock:W58,htmlBlock:A58,paragraph:H58,table:n88,tableBody:a88,tableHead:r88,tableRow:e88,tableCell:Z58,tableDelimRow:o88,tableDelimCell:t88,refDef:j58,customBlock:J58,frontMatter:R58};function L6(Z){var X=0,K=0,z=[];for(var J=0;J<Z.length;J+=1)if(Z[J]==="|"&&Z[J-1]!=="\\"){var Q=Z.substring(X,J);if(X===0&&$K(Q))K=J+1;else z.push(Q);X=J+1}if(X<Z.length){var Q=Z.substring(X,Z.length);if(!$K(Q))z.push(Q)}return[K,z]}function M6(Z,X,K,z){var J=[];for(var Q=0,Y=X;Q<Y.length;Q++){var q=Y[Q],G=q.match(/^[ \t]+/),U=G?G[0].length:0,V=void 0,W=void 0;if(U===q.length)U=0,V=0,W="";else{var A=q.match(/[ \t]+$/);V=A?A[0].length:0,W=q.slice(U,q.length-V)}var j=z+U,H=e(Z,[[K,z],[K,z+q.length-1]]);H.stringContent=W.replace(/\\\|/g,"|"),H.startIdx=J.length,H.endIdx=J.length,H.lineOffsets=[j-1],H.paddingLeft=U,H.paddingRight=V,J.push(H),z+=q.length+1}return J}function F58(Z){var X=null,K=Z.stringContent,z=K[0],J=K[K.length-1];if(J===":")X=z===":"?"center":"right";else if(z===":")X="left";return{align:X}}var B58=function(Z,X){var K=X.stringContent;if(X.type==="paragraph"&&!Z.indented&&!Z.blank){var z=K.length-1,J=K.lastIndexOf(`
`,z-1)+1,Q=K.slice(J,z),Y=Z.currentLine.slice(Z.nextNonspace),q=L6(Q),G=q[0],U=q[1],V=L6(Y),W=V[0],A=V[1],j=/^[ \t]*:?-+:?[ \t]*$/;if(!U.length||!A.length||A.some(function(w){return!j.test(w)})||A.length===1&&Y.indexOf("|")!==0)return 0;var H=X.lineOffsets,R=Z.lineNumber-1,F=Z1(H)+1,B=e("table",[[R,F],[Z.lineNumber,Z.offset]]);if(B.columns=A.map(function(){return{align:null}}),X.insertAfter(B),H.length===1)X.unlink();else{X.stringContent=K.slice(0,J);var O=K.lastIndexOf(`
`,J-2)+1,L=J-O-1;Z.lastLineLength=H[H.length-2]+L,Z.finalize(X,R-1)}Z.advanceOffset(Z.currentLine.length-Z.offset,!1);var D=e("tableHead",[[R,F],[Z.lineNumber,Z.offset]]);B.appendChild(D);var I=e("tableRow",[[R,F],[R,F+Q.length-1]]),k=e("tableDelimRow",[[Z.lineNumber,Z.nextNonspace+1],[Z.lineNumber,Z.offset]]);D.appendChild(I),D.appendChild(k),M6("tableCell",U,R,F+G).forEach(function(w){I.appendChild(w)});var x=M6("tableDelimCell",A,Z.lineNumber,Z.nextNonspace+1+W);return x.forEach(function(w){k.appendChild(w)}),B.columns=x.map(F58),Z.tip=B,2}return 0},E58=function(Z,X){if(X.type!=="table"&&X.type!=="tableBody"||!Z.blank&&Z.currentLine.indexOf("|")===-1)return 0;if(Z.advanceOffset(Z.currentLine.length-Z.offset,!1),Z.blank){var K=X;if(X.type==="tableBody")K=X.parent,Z.finalize(X,Z.lineNumber-1);return Z.finalize(K,Z.lineNumber-1),0}var z=X;if(X.type==="table")z=Z.addChild("tableBody",Z.nextNonspace),z.stringContent=null;var J=e("tableRow",[[Z.lineNumber,Z.nextNonspace+1],[Z.lineNumber,Z.currentLine.length]]);z.appendChild(J);var Q=z.parent,Y=Z.currentLine.slice(Z.nextNonspace),q=L6(Y),G=q[0],U=q[1];return M6("tableCell",U,Z.lineNumber,Z.nextNonspace+1+G).forEach(function(V,W){if(W>=Q.columns.length)V.ignored=!0;J.appendChild(V)}),2},P58=/^(\$\$)(\s*[a-zA-Z])+/,O58=/^(\$\$)(\s*[a-zA-Z])+.*(\$\$)/,L58=function(Z){var X;if(!Z.indented&&!O58.test(Z.currentLine)&&(X=Z.currentLine.match(P58))){var K=X[1].length;Z.closeUnmatchedBlocks();var z=Z.addChild("customBlock",Z.nextNonspace);return z.syntaxLength=K,z.offset=Z.indent,Z.advanceNextNonspace(),Z.advanceOffset(K,!1),2}return 0},M58=/^`{3,}(?!.*`)|^~{3,}/,D58=[/./,/^<(?:script|pre|style)(?:\s|>|$)/i,/^<!--/,/^<[?]/,/^<![A-Z]/,/^<!\[CDATA\[/,/^<[/]?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[123456]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|[/]?[>]|$)/i,new RegExp("^(?:"+jQ+"|"+RQ+")\\s*$","i")],I58=/^(?:=+|-+)[ \t]*$/,C58=/^#{1,6}(?:[ \t]+|$)/,S58=/^(?:(?:\*[ \t]*){3,}|(?:_[ \t]*){3,}|(?:-[ \t]*){3,})[ \t]*$/,DQ=/^[*+-]/,IQ=/^(\d{1,9})([.)])/;function k58(Z,X){var K=Z.currentLine.slice(Z.nextNonspace),z,J,Q={type:"bullet",tight:!0,bulletChar:"",start:0,delimiter:"",padding:0,markerOffset:Z.indent,task:!1,checked:!1};if(Z.indent>=4)return null;if(z=K.match(DQ))Q.type="bullet",Q.bulletChar=z[0][0];else if((z=K.match(IQ))&&(X.type!=="paragraph"||z[1]==="1"))Q.type="ordered",Q.start=parseInt(z[1],10),Q.delimiter=z[2];else return null;if(J=f8(Z.currentLine,Z.nextNonspace+z[0].length),!(J===-1||J===FQ||J===EQ))return null;if(X.type==="paragraph"&&!Z.currentLine.slice(Z.nextNonspace+z[0].length).match(OQ))return null;Z.advanceNextNonspace(),Z.advanceOffset(z[0].length,!0);var{column:Y,offset:q}=Z;do Z.advanceOffset(1,!0),J=f8(Z.currentLine,Z.offset);while(Z.column-Y<5&&Y3(J));var G=f8(Z.currentLine,Z.offset)===-1,U=Z.column-Y;if(U>=5||U<1||G){if(Q.padding=z[0].length+1,Z.column=Y,Z.offset=q,Y3(f8(Z.currentLine,Z.offset)))Z.advanceOffset(1,!0)}else Q.padding=z[0].length+U;return Q}function b58(Z,X){return Z.type===X.type&&Z.delimiter===X.delimiter&&Z.bulletChar===X.bulletChar}function CQ(Z,X){return Z.options.disallowDeepHeading&&(X.type==="blockQuote"||X.type==="item")}var y58=function(Z){if(!Z.indented&&f8(Z.currentLine,Z.nextNonspace)===BQ){if(Z.advanceNextNonspace(),Z.advanceOffset(1,!1),Y3(f8(Z.currentLine,Z.offset)))Z.advanceOffset(1,!0);return Z.closeUnmatchedBlocks(),Z.addChild("blockQuote",Z.nextNonspace),1}return 0},N58=function(Z,X){var K;if(!Z.indented&&!CQ(Z,X)&&(K=Z.currentLine.slice(Z.nextNonspace).match(C58))){Z.advanceNextNonspace(),Z.advanceOffset(K[0].length,!1),Z.closeUnmatchedBlocks();var z=Z.addChild("heading",Z.nextNonspace);return z.level=K[0].trim().length,z.headingType="atx",z.stringContent=Z.currentLine.slice(Z.offset).replace(/^[ \t]*#+[ \t]*$/,"").replace(/[ \t]+#+[ \t]*$/,""),Z.advanceOffset(Z.currentLine.length-Z.offset),2}return 0},T58=function(Z){var X;if(!Z.indented&&(X=Z.currentLine.slice(Z.nextNonspace).match(M58))){var K=X[0].length;Z.closeUnmatchedBlocks();var z=Z.addChild("codeBlock",Z.nextNonspace);return z.isFenced=!0,z.fenceLength=K,z.fenceChar=X[0][0],z.fenceOffset=Z.indent,Z.advanceNextNonspace(),Z.advanceOffset(K,!1),2}return 0},x58=function(Z,X){if(!Z.indented&&f8(Z.currentLine,Z.nextNonspace)===X58){var K=Z.currentLine.slice(Z.nextNonspace),z=Z.options.disallowedHtmlBlockTags,J=void 0;for(J=1;J<=7;J++){var Q=K.match(D58[J]);if(Q){if(J===7){if(X.type==="paragraph")return 0;if(z.length>0){var Y=new RegExp("</?(?:"+z.join("|")+")","i");if(Y.test(Q[0]))return 0}}Z.closeUnmatchedBlocks();var q=Z.addChild("htmlBlock",Z.offset);return q.htmlBlockType=J,2}}}return 0},g58=function(Z,X){var K;if(X.stringContent!==null&&!Z.indented&&X.type==="paragraph"&&!CQ(Z,X.parent)&&(K=Z.currentLine.slice(Z.nextNonspace).match(I58))){Z.closeUnmatchedBlocks();var z=void 0;while(f8(X.stringContent,0)===PQ&&(z=Z.inlineParser.parseReference(X,Z.refMap)))X.stringContent=X.stringContent.slice(z);if(X.stringContent.length>0){var J=e("heading",X.sourcepos);return J.level=K[0][0]==="="?1:2,J.headingType="setext",J.stringContent=X.stringContent,X.insertAfter(J),X.unlink(),Z.tip=J,Z.advanceOffset(Z.currentLine.length-Z.offset,!1),2}return 0}return 0},u58=function(Z){if(!Z.indented&&S58.test(Z.currentLine.slice(Z.nextNonspace)))return Z.closeUnmatchedBlocks(),Z.addChild("thematicBreak",Z.nextNonspace),Z.advanceOffset(Z.currentLine.length-Z.offset,!1),2;return 0},w58=function(Z,X){var K,z=X;if((!Z.indented||X.type==="list")&&(K=k58(Z,z))){if(Z.closeUnmatchedBlocks(),Z.tip.type!=="list"||!b58(z.listData,K))z=Z.addChild("list",Z.nextNonspace),z.listData=K;return z=Z.addChild("item",Z.nextNonspace),z.listData=K,1}return 0},v58=function(Z){if(Z.indented&&Z.tip.type!=="paragraph"&&!Z.blank)return Z.advanceOffset(X1,!0),Z.closeUnmatchedBlocks(),Z.addChild("codeBlock",Z.offset),2;return 0},n9=[y58,N58,T58,x58,g58,u58,w58,v58,B58,E58,L58],SQ=/^(-{3}|\+{3}|;{3})$/,$58=function(Z,X){var{currentLine:K,lineNumber:z,indented:J}=Z;if(z===1&&!J&&X.type==="document"&&SQ.test(K)){Z.closeUnmatchedBlocks();var Q=Z.addChild("frontMatter",Z.nextNonspace);return Q.stringContent=K,Z.advanceNextNonspace(),Z.advanceOffset(K.length,!1),2}return 0},h58={continue:function(Z,X){var K=Z.currentLine,z=K.match(SQ);if(X.type==="frontMatter"&&z)return X.stringContent+=K,Z.lastLineLength=z[0].length,Z.finalize(X,Z.lineNumber),2;return 0},finalize:function(Z,X){if(X.stringContent===null)return;X.literal=X.stringContent,X.stringContent=null},canContain:function(){return!1},acceptsLines:!0},f58=[/./,/<\/(?:script|pre|style)>/i,/-->/,/\?>/,/>/,/\]\]>/],_58=/^[#`~*+_=<>0-9-;$]/,m58=/\r\n|\n|\r/;function a9(){return e("document",[[1,1],[0,0]])}var l58={smart:!1,tagFilter:!1,extendedAutolinks:!1,disallowedHtmlBlockTags:[],referenceDefinition:!1,disallowDeepHeading:!1,customParser:null,frontMatter:!1},c58=function(){function Z(X){if(this.options=j8(j8({},l58),X),this.doc=a9(),this.tip=this.doc,this.oldtip=this.doc,this.lineNumber=0,this.offset=0,this.column=0,this.nextNonspace=0,this.nextNonspaceColumn=0,this.indent=0,this.currentLine="",this.indented=!1,this.blank=!1,this.partiallyConsumedTab=!1,this.allClosed=!0,this.lastMatchedContainer=this.doc,this.refMap={},this.refLinkCandidateMap={},this.refDefCandidateMap={},this.lastLineLength=0,this.lines=[],this.options.frontMatter)r0.frontMatter=h58,n9.unshift($58);this.inlineParser=new i88(this.options)}return Z.prototype.advanceOffset=function(X,K){if(K===void 0)K=!1;var z=this.currentLine,J,Q,Y;while(X>0&&(Y=z[this.offset]))if(Y==="\t")if(J=4-this.column%4,K)this.partiallyConsumedTab=J>X,Q=J>X?X:J,this.column+=Q,this.offset+=this.partiallyConsumedTab?0:1,X-=Q;else this.partiallyConsumedTab=!1,this.column+=J,this.offset+=1,X-=1;else this.partiallyConsumedTab=!1,this.offset+=1,this.column+=1,X-=1},Z.prototype.advanceNextNonspace=function(){this.offset=this.nextNonspace,this.column=this.nextNonspaceColumn,this.partiallyConsumedTab=!1},Z.prototype.findNextNonspace=function(){var X=this.currentLine,K=this.offset,z=this.column,J;while((J=X.charAt(K))!=="")if(J===" ")K++,z++;else if(J==="\t")K++,z+=4-z%4;else break;this.blank=J===`
`||J==="\r"||J==="",this.nextNonspace=K,this.nextNonspaceColumn=z,this.indent=this.nextNonspaceColumn-this.column,this.indented=this.indent>=X1},Z.prototype.addLine=function(){if(this.partiallyConsumedTab){this.offset+=1;var X=4-this.column%4;this.tip.stringContent+=R6(" ",X)}if(this.tip.lineOffsets)this.tip.lineOffsets.push(this.offset);else this.tip.lineOffsets=[this.offset];this.tip.stringContent+=this.currentLine.slice(this.offset)+`
`},Z.prototype.addChild=function(X,K){while(!r0[this.tip.type].canContain(X))this.finalize(this.tip,this.lineNumber-1);var z=K+1,J=e(X,[[this.lineNumber,z],[0,0]]);return J.stringContent="",this.tip.appendChild(J),this.tip=J,J},Z.prototype.closeUnmatchedBlocks=function(){if(!this.allClosed){while(this.oldtip!==this.lastMatchedContainer){var X=this.oldtip.parent;this.finalize(this.oldtip,this.lineNumber-1),this.oldtip=X}this.allClosed=!0}},Z.prototype.finalize=function(X,K){var z=X.parent;X.open=!1,X.sourcepos[1]=[K,this.lastLineLength],r0[X.type].finalize(this,X),this.tip=z},Z.prototype.processInlines=function(X){var K,z=this.options.customParser,J=X.walker();this.inlineParser.refMap=this.refMap,this.inlineParser.refLinkCandidateMap=this.refLinkCandidateMap,this.inlineParser.refDefCandidateMap=this.refDefCandidateMap,this.inlineParser.options=this.options;while(K=J.next()){var{node:Q,entering:Y}=K,q=Q.type;if(z&&z[q])z[q](Q,{entering:Y,options:this.options});if(!Y&&(q==="paragraph"||q==="heading"||q==="tableCell"&&!Q.ignored))this.inlineParser.parse(Q)}},Z.prototype.incorporateLine=function(X){var K=this.doc;if(this.oldtip=this.tip,this.offset=0,this.column=0,this.blank=!1,this.partiallyConsumedTab=!1,this.lineNumber+=1,X.indexOf("\x00")!==-1)X=X.replace(/\0/g,"�");this.currentLine=X;var z=!0,J;while((J=K.lastChild)&&J.open){switch(K=J,this.findNextNonspace(),r0[K.type].continue(this,K)){case 0:break;case 1:z=!1;break;case 2:this.lastLineLength=X.length;return;default:throw new Error("continue returned illegal value, must be 0, 1, or 2")}if(!z){K=K.parent;break}}this.allClosed=K===this.oldtip,this.lastMatchedContainer=K;var Q=K.type!=="paragraph"&&r0[K.type].acceptsLines,Y=n9.length;while(!Q){if(this.findNextNonspace(),K.type!=="table"&&K.type!=="tableBody"&&K.type!=="paragraph"&&!this.indented&&!_58.test(X.slice(this.nextNonspace))){this.advanceNextNonspace();break}var q=0;while(q<Y){var G=n9[q](this,K);if(G===1){K=this.tip;break}else if(G===2){K=this.tip,Q=!0;break}else q++}if(q===Y){this.advanceNextNonspace();break}}if(!this.allClosed&&!this.blank&&this.tip.type==="paragraph")this.addLine();else{if(this.closeUnmatchedBlocks(),this.blank&&K.lastChild)K.lastChild.lastLineBlank=!0;var U=K.type,V=this.blank&&!(U==="blockQuote"||WQ(K)&&K.isFenced||U==="item"&&!K.firstChild&&K.sourcepos[0][0]===this.lineNumber),W=K;while(W)W.lastLineBlank=V,W=W.parent;if(r0[U].acceptsLines){if(this.addLine(),te(K)&&K.htmlBlockType>=1&&K.htmlBlockType<=5&&f58[K.htmlBlockType].test(this.currentLine.slice(this.offset)))this.lastLineLength=X.length,this.finalize(K,this.lineNumber)}else if(this.offset<X.length&&!this.blank)K=this.addChild("paragraph",this.offset),this.advanceNextNonspace(),this.addLine()}this.lastLineLength=X.length},Z.prototype.parse=function(X,K){this.doc=a9(),this.tip=this.doc,this.lineNumber=0,this.lastLineLength=0,this.offset=0,this.column=0,this.lastMatchedContainer=this.doc,this.currentLine="";var z=X.split(m58),J=z.length;if(this.lines=K?K:z,this.options.referenceDefinition)this.clearRefMaps();if(X.charCodeAt(X.length-1)===O6)J-=1;for(var Q=0;Q<J;Q++)this.incorporateLine(z[Q]);while(this.tip)this.finalize(this.tip,J);return this.processInlines(this.doc),this.doc},Z.prototype.partialParseStart=function(X,K){this.doc=a9(),this.tip=this.doc,this.lineNumber=X-1,this.lastLineLength=0,this.offset=0,this.column=0,this.lastMatchedContainer=this.doc,this.currentLine="";var z=K.length;for(var J=0;J<z;J++)this.incorporateLine(K[J]);return this.doc},Z.prototype.partialParseExtends=function(X){for(var K=0;K<X.length;K++)this.incorporateLine(X[K])},Z.prototype.partialParseFinish=function(){while(this.tip)this.finalize(this.tip,this.lineNumber);this.processInlines(this.doc)},Z.prototype.setRefMaps=function(X,K,z){this.refMap=X,this.refLinkCandidateMap=K,this.refDefCandidateMap=z},Z.prototype.clearRefMaps=function(){[this.refMap,this.refLinkCandidateMap,this.refDefCandidateMap].forEach(function(X){C88(X)})},Z}();function aK(Z,X){if(Z[0]<X[0])return 1;if(Z[0]>X[0])return-1;if(Z[1]<X[1])return 1;if(Z[1]>X[1])return-1;return 0}function p58(Z,X){var K=Z[0],z=Z[1];if(aK(z,X)===1)return 1;if(aK(K,X)===-1)return-1;return 0}function i58(Z,X){if(Z.parent!==X.parent||Z===X)return;var K=Z.next;while(K&&K!==X){var z=K.next;for(var J=0,Q=["parent","prev","next"];J<Q.length;J++){var Y=Q[J];if(K[Y])F6(K[Y].id),K[Y]=null}K=z}if(Z.next=X.next,X.next)X.next.prev=Z;else Z.parent.lastChild=Z}function d58(Z){var X=[],K=Z.firstChild;while(K)X.push(K),K=K.next;return X}function rK(Z,X){for(var K=0,z=X;K<z.length;K++){var J=z[K];Z.insertBefore(J)}}function s58(Z,X){for(var K=X.length-1;K>=0;K-=1)Z.prependChild(X[K])}function n58(Z,X){if(!Z||!Z.parent||X===0)return;var K=Z.parent.walker();K.resumeAt(Z,!0);var z;while(z=K.next()){var{node:J,entering:Q}=z;if(Q)J.sourcepos[0][0]+=X,J.sourcepos[1][0]+=X}}function kQ(Z,X){var K=Z[0],z=Z[1];if(z[0]<X)return 1;if(K[0]>X)return-1;return 0}function g7(Z,X){var K=Z.firstChild;while(K){var z=kQ(K.sourcepos,X);if(z===0)return K;if(z===-1)return K.prev||K;K=K.next}return Z.lastChild}function a58(Z){while(Z.lastChild)Z=Z.lastChild;return Z}function r58(Z){while(Z.parent&&Z.parent.type!=="document"&&Z.parent.sourcepos[0][0]===Z.sourcepos[0][0])Z=Z.parent;return Z}function o58(Z,X){var K=Z.firstChild,z=null;while(K){var J=kQ(K.sourcepos,X);if(J===0){if(K.sourcepos[0][0]===X||!K.firstChild)return K;z=K,K=K.firstChild}else if(J===-1)break;else z=K,K=K.next}if(z)return r58(a58(z));return null}function t58(Z,X){var K=Z,z=null;while(K){var J=p58(K.sourcepos,X);if(J===0)if(K.firstChild)z=K,K=K.firstChild;else return K;else if(J===-1)return z;else if(K.next)K=K.next;else return z}return K}function bQ(Z){return fe(Z)||null}function r9(Z,X,K){if(K===void 0)K=null;if(X){var z=X.walker();while(X&&X!==K){Z(X);var J=z.next();if(J)X=J.node;else break}}}function e58(Z){var X=bQ(Z);if(!X)return!0;while(X&&X.type!=="document"){if(!X.parent&&!X.prev&&!X.next)return!0;X=X.parent}return!1}var oK=/\r\n|\n|\r/;function Z08(Z){var X=Z.match(/^[ \t]+/);if(X&&(X[0].length>=2||/\t/.test(X[0])))return!0;var K=X?Z.slice(X.length):Z;return DQ.test(K)||IQ.test(K)}function X08(Z){return!LQ(Z)&&Z.indexOf("|")!==-1}function D6(Z){var{id:X,title:K,sourcepos:z,dest:J}=Z;return{id:X,title:K,sourcepos:z,unlinked:!1,destination:J}}var yQ=function(){function Z(X,K){this.refMap={},this.refLinkCandidateMap={},this.refDefCandidateMap={},this.referenceDefinition=!!(K===null||K===void 0?void 0:K.referenceDefinition),this.parser=new c58(K),this.parser.setRefMaps(this.refMap,this.refLinkCandidateMap,this.refDefCandidateMap),this.eventHandlerMap={change:[]},X=X||"",this.lineTexts=X.split(oK),this.root=this.parser.parse(X,this.lineTexts)}return Z.prototype.updateLineTexts=function(X,K,z){var J,Q=X[0],Y=X[1],q=K[0],G=K[1],U=z.split(oK),V=U.length,W=this.lineTexts[Q-1],A=this.lineTexts[q-1];U[0]=W.slice(0,Y-1)+U[0],U[V-1]=U[V-1]+A.slice(G-1);var j=q-Q+1;return(J=this.lineTexts).splice.apply(J,H6([Q-1,j],U)),V-j},Z.prototype.updateRootNodeState=function(){if(this.lineTexts.length===1&&this.lineTexts[0]===""){this.root.lastLineBlank=!0,this.root.sourcepos=[[1,1],[1,0]];return}if(this.root.lastChild)this.root.lastLineBlank=this.root.lastChild.lastLineBlank;var X=this.lineTexts,K=X.length-1;while(X[K]==="")K-=1;if(X.length-2>K)K+=1;this.root.sourcepos[1]=[K+1,X[K].length]},Z.prototype.replaceRangeNodes=function(X,K,z){if(!X)if(K)rK(K,z),F6(K.id),K.unlink();else s58(this.root,z);else rK(X,z),i58(X,K),[X.id,K.id].forEach(function(J){return F6(J)}),X.unlink()},Z.prototype.getNodeRange=function(X,K){var z=g7(this.root,X[0]),J=g7(this.root,K[0]);if(J&&J.next&&K[0]+1===J.next.sourcepos[0][0])J=J.next;return[z,J]},Z.prototype.trigger=function(X,K){this.eventHandlerMap[X].forEach(function(z){z(K)})},Z.prototype.extendEndLine=function(X){while(this.lineTexts[X]==="")X+=1;return X},Z.prototype.parseRange=function(X,K,z,J){if(X&&X.prev&&(hK(X.prev)&&Z08(this.lineTexts[z-1])||Z88(X.prev)&&X08(this.lineTexts[z-1])))X=X.prev,z=X.sourcepos[0][0];var Q=this.lineTexts.slice(z-1,J),Y=this.parser.partialParseStart(z,Q),q=K?K.next:this.root.firstChild,G=Y.lastChild,U=G&&WQ(G)&&G.open,V=G&&AQ(G)&&G.open,W=G&&hK(G);while((U||V)&&q||W&&q&&(q.type==="list"||q.sourcepos[0][1]>=2)){var A=this.extendEndLine(q.sourcepos[1][0]);if(this.parser.partialParseExtends(this.lineTexts.slice(J,A)),!X)X=K;K=q,J=A,q=q.next}this.parser.partialParseFinish();var j=d58(Y);return{newNodes:j,extStartNode:X,extEndNode:K}},Z.prototype.getRemovedNodeRange=function(X,K){if(!X||X&&n0(X)||K&&n0(K))return null;return{id:[X.id,K.id],line:[X.sourcepos[0][0]-1,K.sourcepos[1][0]-1]}},Z.prototype.markDeletedRefMap=function(X,K){var z=this;if(!a0(this.refMap)){var J=function(Q){if(n0(Q)){var Y=z.refMap[Q.label];if(Y&&Q.id===Y.id)Y.unlinked=!0}};if(X)r9(J,X.parent,K);if(K)r9(J,K)}},Z.prototype.replaceWithNewRefDefState=function(X){var K=this;if(!a0(this.refMap)){var z=function(J){if(n0(J)){var Q=J.label,Y=K.refMap[Q];if(!Y||Y.unlinked)K.refMap[Q]=D6(J)}};X.forEach(function(J){r9(z,J)})}},Z.prototype.replaceWithRefDefCandidate=function(){var X=this;if(!a0(this.refDefCandidateMap))N7(this.refDefCandidateMap,function(K,z){var{label:J,sourcepos:Q}=z,Y=X.refMap[J];if(!Y||Y.unlinked||Y.sourcepos[0][0]>Q[0][0])X.refMap[J]=D6(z)})},Z.prototype.getRangeWithRefDef=function(X,K,z,J,Q){if(this.referenceDefinition&&!a0(this.refMap)){var Y=g7(this.root,X-1),q=g7(this.root,K+1);if(Y&&n0(Y)&&Y!==z&&Y!==J)z=Y,X=z.sourcepos[0][0];if(q&&n0(q)&&q!==z&&q!==J)J=q,K=this.extendEndLine(J.sourcepos[1][0]+Q)}return[z,J,X,K]},Z.prototype.parse=function(X,K,z){if(z===void 0)z=0;var J=this.getNodeRange(X,K),Q=J[0],Y=J[1],q=Q?Math.min(Q.sourcepos[0][0],X[0]):X[0],G=this.extendEndLine((Y?Math.max(Y.sourcepos[1][0],K[0]):K[0])+z),U=this.parseRange.apply(this,this.getRangeWithRefDef(q,G,Q,Y,z)),V=U.newNodes,W=U.extStartNode,A=U.extEndNode,j=this.getRemovedNodeRange(W,A),H=A?A.next:this.root.firstChild;if(this.referenceDefinition)this.markDeletedRefMap(W,A),this.replaceRangeNodes(W,A,V),this.replaceWithNewRefDefState(V);else this.replaceRangeNodes(W,A,V);return{nodes:V,removedNodeRange:j,nextNode:H}},Z.prototype.parseRefLink=function(){var X=this,K=[];if(!a0(this.refMap))N7(this.refMap,function(z,J){if(J.unlinked)delete X.refMap[z];N7(X.refLinkCandidateMap,function(Q,Y){var{node:q,refLabel:G}=Y;if(G===z)K.push(X.parse(q.sourcepos[0],q.sourcepos[1]))})});return K},Z.prototype.removeUnlinkedCandidate=function(){if(!a0(this.refDefCandidateMap))[this.refLinkCandidateMap,this.refDefCandidateMap].forEach(function(X){N7(X,function(K){if(e58(K))delete X[K]})})},Z.prototype.editMarkdown=function(X,K,z){var J=this.updateLineTexts(X,K,z),Q=this.parse(X,K,J),Y=I88(Q,"nextNode");n58(Q.nextNode,J),this.updateRootNodeState();var q=[Y];if(this.referenceDefinition)this.removeUnlinkedCandidate(),this.replaceWithRefDefCandidate(),q=q.concat(this.parseRefLink());return this.trigger("change",q),q},Z.prototype.getLineTexts=function(){return this.lineTexts},Z.prototype.getRootNode=function(){return this.root},Z.prototype.findNodeAtPosition=function(X){var K=t58(this.root,X);if(!K||K===this.root)return null;return K},Z.prototype.findFirstNodeAtLine=function(X){return o58(this.root,X)},Z.prototype.on=function(X,K){this.eventHandlerMap[X].push(K)},Z.prototype.off=function(X,K){var z=this.eventHandlerMap[X],J=z.indexOf(K);z.splice(J,1)},Z.prototype.findNodeById=function(X){return bQ(X)},Z.prototype.removeAllNode=function(){_e()},Z}(),K08=["title","textarea","style","xmp","iframe","noembed","noframes","script","plaintext"],tK=new RegExp("<(/?(?:"+K08.join("|")+")[^>]*>)","ig");function eK(Z){if(tK.test(Z))return Z.replace(tK,function(X,K){return"&lt;"+K});return Z}var Zz={heading:function(Z,X){var K=X.entering;return{type:K?"openTag":"closeTag",tagName:"h"+Z.level,outerNewLine:!0}},text:function(Z){return{type:"text",content:Z.literal}},softbreak:function(Z,X){var K=X.options;return{type:"html",content:K.softbreak}},linebreak:function(){return{type:"html",content:`<br />
`}},emph:function(Z,X){var K=X.entering;return{type:K?"openTag":"closeTag",tagName:"em"}},strong:function(Z,X){var K=X.entering;return{type:K?"openTag":"closeTag",tagName:"strong"}},paragraph:function(Z,X){var K,z=X.entering,J=(K=Z.parent)===null||K===void 0?void 0:K.parent;if(J&&J.type==="list"){if(J.listData.tight)return null}return{type:z?"openTag":"closeTag",tagName:"p",outerNewLine:!0}},thematicBreak:function(){return{type:"openTag",tagName:"hr",outerNewLine:!0,selfClose:!0}},blockQuote:function(Z,X){var K=X.entering;return{type:K?"openTag":"closeTag",tagName:"blockquote",outerNewLine:!0,innerNewLine:!0}},list:function(Z,X){var K=X.entering,z=Z.listData,J=z.type,Q=z.start,Y=J==="bullet"?"ul":"ol",q={};if(Y==="ol"&&Q!==null&&Q!==1)q.start=Q.toString();return{type:K?"openTag":"closeTag",tagName:Y,attributes:q,outerNewLine:!0}},item:function(Z,X){var K=X.entering;return{type:K?"openTag":"closeTag",tagName:"li",outerNewLine:!0}},htmlInline:function(Z,X){var K=X.options,z=K.tagFilter?eK(Z.literal):Z.literal;return{type:"html",content:z}},htmlBlock:function(Z,X){var K=X.options,z=K.tagFilter?eK(Z.literal):Z.literal;if(K.nodeId)return[{type:"openTag",tagName:"div",outerNewLine:!0},{type:"html",content:z},{type:"closeTag",tagName:"div",outerNewLine:!0}];return{type:"html",content:z,outerNewLine:!0}},code:function(Z){return[{type:"openTag",tagName:"code"},{type:"text",content:Z.literal},{type:"closeTag",tagName:"code"}]},codeBlock:function(Z){var X=Z.info,K=X?X.split(/\s+/):[],z=[];if(K.length>0&&K[0].length>0)z.push("language-"+o0(K[0]));return[{type:"openTag",tagName:"pre",outerNewLine:!0},{type:"openTag",tagName:"code",classNames:z},{type:"text",content:Z.literal},{type:"closeTag",tagName:"code"},{type:"closeTag",tagName:"pre",outerNewLine:!0}]},link:function(Z,X){var K=X.entering;if(K){var z=Z,J=z.title,Q=z.destination;return{type:"openTag",tagName:"a",attributes:j8({href:o0(Q)},J&&{title:o0(J)})}}return{type:"closeTag",tagName:"a"}},image:function(Z,X){var{getChildrenText:K,skipChildren:z}=X,J=Z,Q=J.title,Y=J.destination;return z(),{type:"openTag",tagName:"img",selfClose:!0,attributes:j8({src:o0(Y),alt:K(Z)},Q&&{title:o0(Q)})}},customBlock:function(Z,X,K){var z=Z.info.trim().toLowerCase(),J=K[z];if(J)try{return J(Z,X)}catch(Q){console.warn("[@toast-ui/editor] - The error occurred when "+z+" block node was parsed in markdown renderer: "+Q)}return[{type:"openTag",tagName:"div",outerNewLine:!0},{type:"text",content:Z.literal},{type:"closeTag",tagName:"div",outerNewLine:!0}]},frontMatter:function(Z){return[{type:"openTag",tagName:"div",outerNewLine:!0,attributes:{style:"white-space: pre; display: none;"}},{type:"text",content:Z.literal},{type:"closeTag",tagName:"div",outerNewLine:!0}]},customInline:function(Z,X,K){var z=Z,J=z.info,Q=z.firstChild,Y=J.trim().toLowerCase(),q=K[Y],G=X.entering;if(q)try{return q(Z,X)}catch(U){console.warn("[@toast-ui/editor] - The error occurred when "+Y+" inline node was parsed in markdown renderer: "+U)}return G?[{type:"openTag",tagName:"span"},{type:"text",content:"$$"+J+(Q?" ":"")}]:[{type:"text",content:"$$"},{type:"closeTag",tagName:"span"}]}},Xz={strike:function(Z,X){var K=X.entering;return{type:K?"openTag":"closeTag",tagName:"del"}},item:function(Z,X){var K=X.entering,z=Z.listData,J=z.checked,Q=z.task;if(K){var Y={type:"openTag",tagName:"li",outerNewLine:!0};if(Q)return[Y,{type:"openTag",tagName:"input",selfClose:!0,attributes:j8(j8({},J&&{checked:""}),{disabled:"",type:"checkbox"})},{type:"text",content:" "}];return Y}return{type:"closeTag",tagName:"li",outerNewLine:!0}},table:function(Z,X){var K=X.entering;return{type:K?"openTag":"closeTag",tagName:"table",outerNewLine:!0}},tableHead:function(Z,X){var K=X.entering;return{type:K?"openTag":"closeTag",tagName:"thead",outerNewLine:!0}},tableBody:function(Z,X){var K=X.entering;return{type:K?"openTag":"closeTag",tagName:"tbody",outerNewLine:!0}},tableRow:function(Z,X){var K=X.entering;if(K)return{type:"openTag",tagName:"tr",outerNewLine:!0};var z=[];if(Z.lastChild){var J=Z.parent.parent.columns.length,Q=Z.lastChild.endIdx;for(var Y=Q+1;Y<J;Y+=1)z.push({type:"openTag",tagName:"td",outerNewLine:!0},{type:"closeTag",tagName:"td",outerNewLine:!0})}return z.push({type:"closeTag",tagName:"tr",outerNewLine:!0}),z},tableCell:function(Z,X){var K=X.entering;if(Z.ignored)return{type:"text",content:""};var z=Z.parent.parent,J=z.type==="tableHead"?"th":"td",Q=z.parent,Y=Q.columns[Z.startIdx],q=(Y===null||Y===void 0?void 0:Y.align)?{align:Y.align}:null;if(K)return j8({type:"openTag",tagName:J,outerNewLine:!0},q&&{attributes:q});return{type:"closeTag",tagName:J,outerNewLine:!0}}},z08={softbreak:`
`,gfm:!1,tagFilter:!1,nodeId:!1};function J08(Z){var X=[],K=Z.walker(),z=null;while(z=K.next()){var J=z.node;if(J.type==="text")X.push(J.literal)}return X.join("")}var J4=function(){function Z(X){this.buffer=[],this.options=j8(j8({},z08),X),this.convertors=this.createConvertors(),delete this.options.convertors}return Z.prototype.createConvertors=function(){var X=j8({},Zz);if(this.options.gfm)X=j8(j8({},X),Xz);if(this.options.convertors){var K=this.options.convertors,z=Object.keys(K),J=j8(j8({},Zz),Xz);z.forEach(function(Q){var Y=X[Q],q=K[Q],G=Object.keys(J).indexOf(Q)===-1?Q.toLowerCase():Q;if(Y)X[G]=function(U,V,W){return V.origin=function(){return Y(U,V,W)},q(U,V)};else X[G]=q})}return X},Z.prototype.getConvertors=function(){return this.convertors},Z.prototype.getOptions=function(){return this.options},Z.prototype.render=function(X){var K=this;this.buffer=[];var z=X.walker(),J=null,Q=function(){var{node:q,entering:G}=J,U=Y.convertors[q.type];if(!U)return"continue";var V=!1,W={entering:G,leaf:!z4(q),options:Y.options,getChildrenText:J08,skipChildren:function(){V=!0}},A=AQ(q)||X88(q)?U(q,W,Y.convertors):U(q,W);if(A){var j=Array.isArray(A)?A:[A];if(j.forEach(function(H,R){if(H.type==="openTag"&&K.options.nodeId&&R===0){if(!H.attributes)H.attributes={};H.attributes["data-nodeid"]=String(q.id)}K.renderHTMLNode(H)}),V)z.resumeAt(q,!1),z.next()}},Y=this;while(J=z.next())Q();return this.addNewLine(),this.buffer.join("")},Z.prototype.renderHTMLNode=function(X){switch(X.type){case"openTag":case"closeTag":this.renderElementNode(X);break;case"text":this.renderTextNode(X);break;case"html":this.renderRawHtmlNode(X);break}},Z.prototype.generateOpenTagString=function(X){var K=this,z=X.tagName,J=X.classNames,Q=X.attributes;if(this.buffer.push("<"+z),J&&J.length>0)this.buffer.push(' class="'+J.join(" ")+'"');if(Q)Object.keys(Q).forEach(function(Y){var q=Q[Y];K.buffer.push(" "+Y+'="'+q+'"')});if(X.selfClose)this.buffer.push(" /");this.buffer.push(">")},Z.prototype.generateCloseTagString=function(X){var K=X.tagName;this.buffer.push("</"+K+">")},Z.prototype.addNewLine=function(){if(this.buffer.length&&Z1(Z1(this.buffer))!==`
`)this.buffer.push(`
`)},Z.prototype.addOuterNewLine=function(X){if(X.outerNewLine)this.addNewLine()},Z.prototype.addInnerNewLine=function(X){if(X.innerNewLine)this.addNewLine()},Z.prototype.renderTextNode=function(X){this.buffer.push(o0(X.content))},Z.prototype.renderRawHtmlNode=function(X){this.addOuterNewLine(X),this.buffer.push(X.content),this.addOuterNewLine(X)},Z.prototype.renderElementNode=function(X){if(X.type==="openTag")if(this.addOuterNewLine(X),this.generateOpenTagString(X),X.selfClose)this.addOuterNewLine(X);else this.addInnerNewLine(X);else this.addInnerNewLine(X),this.generateCloseTagString(X),this.addOuterNewLine(X)},Z}();/*! @license DOMPurify 2.3.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.3/LICENSE */function Q08(Z){if(Array.isArray(Z)){for(var X=0,K=Array(Z.length);X<Z.length;X++)K[X]=Z[X];return K}else return Array.from(Z)}var{hasOwnProperty:Y08,setPrototypeOf:Kz,isFrozen:q08,getPrototypeOf:G08,getOwnPropertyDescriptor:U08,freeze:x8,seal:k5,create:V08}=Object,NQ=typeof Reflect!=="undefined"&&Reflect,K1=NQ.apply,I6=NQ.construct;if(!K1)K1=function Z(X,K,z){return X.apply(K,z)};if(!x8)x8=function Z(X){return X};if(!k5)k5=function Z(X){return X};if(!I6)I6=function Z(X,K){return new(Function.prototype.bind.apply(X,[null].concat(Q08(K))))};var W08=t8(Array.prototype.forEach),zz=t8(Array.prototype.pop),u3=t8(Array.prototype.push),f7=t8(String.prototype.toLowerCase),Jz=t8(String.prototype.match),d5=t8(String.prototype.replace),A08=t8(String.prototype.indexOf),H08=t8(String.prototype.trim),M5=t8(RegExp.prototype.test),Qz=j08(TypeError);function t8(Z){return function(X){for(var K=arguments.length,z=Array(K>1?K-1:0),J=1;J<K;J++)z[J-1]=arguments[J];return K1(Z,X,z)}}function j08(Z){return function(){for(var X=arguments.length,K=Array(X),z=0;z<X;z++)K[z]=arguments[z];return I6(Z,K)}}function h(Z,X){if(Kz)Kz(Z,null);var K=X.length;while(K--){var z=X[K];if(typeof z==="string"){var J=f7(z);if(J!==z){if(!q08(X))X[K]=J;z=J}}Z[z]=!0}return Z}function A0(Z){var X=V08(null),K=void 0;for(K in Z)if(K1(Y08,Z,[K]))X[K]=Z[K];return X}function u7(Z,X){while(Z!==null){var K=U08(Z,X);if(K){if(K.get)return t8(K.get);if(typeof K.value==="function")return t8(K.value)}Z=G08(Z)}function z(J){return console.warn("fallback value for",J),null}return z}var Yz=x8(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),o9=x8(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),t9=x8(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),R08=x8(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),e9=x8(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),F08=x8(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),qz=x8(["#text"]),Gz=x8(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Z6=x8(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Uz=x8(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),w7=x8(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),B08=k5(/\{\{[\s\S]*|[\s\S]*\}\}/gm),E08=k5(/<%[\s\S]*|[\s\S]*%>/gm),P08=k5(/^data-[\-\w.\u00B7-\uFFFF]/),O08=k5(/^aria-[\-\w]+$/),L08=k5(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),M08=k5(/^(?:\w+script|data):/i),D08=k5(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),_3=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol==="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z};function Y5(Z){if(Array.isArray(Z)){for(var X=0,K=Array(Z.length);X<Z.length;X++)K[X]=Z[X];return K}else return Array.from(Z)}var I08=function Z(){return typeof window==="undefined"?null:window},C08=function Z(X,K){if((typeof X==="undefined"?"undefined":_3(X))!=="object"||typeof X.createPolicy!=="function")return null;var z=null,J="data-tt-policy-suffix";if(K.currentScript&&K.currentScript.hasAttribute(J))z=K.currentScript.getAttribute(J);var Q="dompurify"+(z?"#"+z:"");try{return X.createPolicy(Q,{createHTML:function Y(q){return q}})}catch(Y){return console.warn("TrustedTypes policy "+Q+" could not be created."),null}};function TQ(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:I08(),X=function g(E){return TQ(E)};if(X.version="2.3.3",X.removed=[],!Z||!Z.document||Z.document.nodeType!==9)return X.isSupported=!1,X;var{document:K,document:z,DocumentFragment:J,HTMLTemplateElement:Q,Node:Y,Element:q,NodeFilter:G,NamedNodeMap:U}=Z,V=U===void 0?Z.NamedNodeMap||Z.MozNamedAttrMap:U,W=Z.Text,A=Z.Comment,j=Z.DOMParser,H=Z.trustedTypes,R=q.prototype,F=u7(R,"cloneNode"),B=u7(R,"nextSibling"),O=u7(R,"childNodes"),L=u7(R,"parentNode");if(typeof Q==="function"){var D=z.createElement("template");if(D.content&&D.content.ownerDocument)z=D.content.ownerDocument}var I=C08(H,K),k=I&&n3?I.createHTML(""):"",x=z,w=x.implementation,N=x.createNodeIterator,c=x.createDocumentFragment,r=x.getElementsByTagName,g8=K.importNode,d3={};try{d3=A0(z).documentMode?z.documentMode:{}}catch(g){}var e8={};X.isSupported=typeof L==="function"&&w&&typeof w.createHTMLDocument!=="undefined"&&d3!==9;var L1=B08,M1=E08,PY=P08,OY=O08,LY=M08,W4=D08,D1=L08,B8=null,A4=h({},[].concat(Y5(Yz),Y5(o9),Y5(t9),Y5(e9),Y5(qz))),E8=null,H4=h({},[].concat(Y5(Gz),Y5(Z6),Y5(Uz),Y5(w7))),I1=null,C1=null,j4=!0,S1=!0,R4=!1,L0=!1,M0=!1,k1=!1,b1=!1,D0=!1,s3=!1,F4=!0,n3=!1,B4=!0,y1=!0,W3=!1,I0={},C0=null,E4=h({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),P4=null,O4=h({},["audio","video","img","source","image","track"]),N1=null,L4=h({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),T1="http://www.w3.org/1998/Math/MathML",x1="http://www.w3.org/2000/svg",N5="http://www.w3.org/1999/xhtml",a3=N5,g1=!1,S0=void 0,MY=["application/xhtml+xml","text/html"],DY="text/html",k0=void 0,b0=null,IY=z.createElement("form"),u1=function g(E){if(b0&&b0===E)return;if(!E||(typeof E==="undefined"?"undefined":_3(E))!=="object")E={};if(E=A0(E),B8="ALLOWED_TAGS"in E?h({},E.ALLOWED_TAGS):A4,E8="ALLOWED_ATTR"in E?h({},E.ALLOWED_ATTR):H4,N1="ADD_URI_SAFE_ATTR"in E?h(A0(L4),E.ADD_URI_SAFE_ATTR):L4,P4="ADD_DATA_URI_TAGS"in E?h(A0(O4),E.ADD_DATA_URI_TAGS):O4,C0="FORBID_CONTENTS"in E?h({},E.FORBID_CONTENTS):E4,I1="FORBID_TAGS"in E?h({},E.FORBID_TAGS):{},C1="FORBID_ATTR"in E?h({},E.FORBID_ATTR):{},I0="USE_PROFILES"in E?E.USE_PROFILES:!1,j4=E.ALLOW_ARIA_ATTR!==!1,S1=E.ALLOW_DATA_ATTR!==!1,R4=E.ALLOW_UNKNOWN_PROTOCOLS||!1,L0=E.SAFE_FOR_TEMPLATES||!1,M0=E.WHOLE_DOCUMENT||!1,D0=E.RETURN_DOM||!1,s3=E.RETURN_DOM_FRAGMENT||!1,F4=E.RETURN_DOM_IMPORT!==!1,n3=E.RETURN_TRUSTED_TYPE||!1,b1=E.FORCE_BODY||!1,B4=E.SANITIZE_DOM!==!1,y1=E.KEEP_CONTENT!==!1,W3=E.IN_PLACE||!1,D1=E.ALLOWED_URI_REGEXP||D1,a3=E.NAMESPACE||N5,S0=MY.indexOf(E.PARSER_MEDIA_TYPE)===-1?S0=DY:S0=E.PARSER_MEDIA_TYPE,k0=S0==="application/xhtml+xml"?function(C){return C}:f7,L0)S1=!1;if(s3)D0=!0;if(I0){if(B8=h({},[].concat(Y5(qz))),E8=[],I0.html===!0)h(B8,Yz),h(E8,Gz);if(I0.svg===!0)h(B8,o9),h(E8,Z6),h(E8,w7);if(I0.svgFilters===!0)h(B8,t9),h(E8,Z6),h(E8,w7);if(I0.mathMl===!0)h(B8,e9),h(E8,Uz),h(E8,w7)}if(E.ADD_TAGS){if(B8===A4)B8=A0(B8);h(B8,E.ADD_TAGS)}if(E.ADD_ATTR){if(E8===H4)E8=A0(E8);h(E8,E.ADD_ATTR)}if(E.ADD_URI_SAFE_ATTR)h(N1,E.ADD_URI_SAFE_ATTR);if(E.FORBID_CONTENTS){if(C0===E4)C0=A0(C0);h(C0,E.FORBID_CONTENTS)}if(y1)B8["#text"]=!0;if(M0)h(B8,["html","head","body"]);if(B8.table)h(B8,["tbody"]),delete I1.tbody;if(x8)x8(E);b0=E},M4=h({},["mi","mo","mn","ms","mtext"]),D4=h({},["foreignobject","desc","title","annotation-xml"]),r3=h({},o9);h(r3,t9),h(r3,R08);var w1=h({},e9);h(w1,F08);var CY=function g(E){var C=L(E);if(!C||!C.tagName)C={namespaceURI:N5,tagName:"template"};var T=f7(E.tagName),i=f7(C.tagName);if(E.namespaceURI===x1){if(C.namespaceURI===N5)return T==="svg";if(C.namespaceURI===T1)return T==="svg"&&(i==="annotation-xml"||M4[i]);return Boolean(r3[T])}if(E.namespaceURI===T1){if(C.namespaceURI===N5)return T==="math";if(C.namespaceURI===x1)return T==="math"&&D4[i];return Boolean(w1[T])}if(E.namespaceURI===N5){if(C.namespaceURI===x1&&!D4[i])return!1;if(C.namespaceURI===T1&&!M4[i])return!1;var P8=h({},["title","style","font","a","script"]);return!w1[T]&&(P8[T]||!r3[T])}return!1},A5=function g(E){u3(X.removed,{element:E});try{E.parentNode.removeChild(E)}catch(C){try{E.outerHTML=k}catch(T){E.remove()}}},I4=function g(E,C){try{u3(X.removed,{attribute:C.getAttributeNode(E),from:C})}catch(T){u3(X.removed,{attribute:null,from:C})}if(C.removeAttribute(E),E==="is"&&!E8[E])if(D0||s3)try{A5(C)}catch(T){}else try{C.setAttribute(E,"")}catch(T){}},C4=function g(E){var C=void 0,T=void 0;if(b1)E="<remove></remove>"+E;else{var i=Jz(E,/^[\r\n\t ]+/);T=i&&i[0]}if(S0==="application/xhtml+xml")E='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+E+"</body></html>";var P8=I?I.createHTML(E):E;if(a3===N5)try{C=new j().parseFromString(P8,S0)}catch(L8){}if(!C||!C.documentElement){C=w.createDocument(a3,"template",null);try{C.documentElement.innerHTML=g1?"":P8}catch(L8){}}var O8=C.body||C.documentElement;if(E&&T)O8.insertBefore(z.createTextNode(T),O8.childNodes[0]||null);if(a3===N5)return r.call(C,M0?"html":"body")[0];return M0?C.documentElement:O8},S4=function g(E){return N.call(E.ownerDocument||E,E,G.SHOW_ELEMENT|G.SHOW_COMMENT|G.SHOW_TEXT,null,!1)},SY=function g(E){if(E instanceof W||E instanceof A)return!1;if(typeof E.nodeName!=="string"||typeof E.textContent!=="string"||typeof E.removeChild!=="function"||!(E.attributes instanceof V)||typeof E.removeAttribute!=="function"||typeof E.setAttribute!=="function"||typeof E.namespaceURI!=="string"||typeof E.insertBefore!=="function")return!0;return!1},A3=function g(E){return(typeof Y==="undefined"?"undefined":_3(Y))==="object"?E instanceof Y:E&&(typeof E==="undefined"?"undefined":_3(E))==="object"&&typeof E.nodeType==="number"&&typeof E.nodeName==="string"},H5=function g(E,C,T){if(!e8[E])return;W08(e8[E],function(i){i.call(X,C,T,b0)})},k4=function g(E){var C=void 0;if(H5("beforeSanitizeElements",E,null),SY(E))return A5(E),!0;if(Jz(E.nodeName,/[\u0080-\uFFFF]/))return A5(E),!0;var T=k0(E.nodeName);if(H5("uponSanitizeElement",E,{tagName:T,allowedTags:B8}),!A3(E.firstElementChild)&&(!A3(E.content)||!A3(E.content.firstElementChild))&&M5(/<[/\w]/g,E.innerHTML)&&M5(/<[/\w]/g,E.textContent))return A5(E),!0;if(T==="select"&&M5(/<template/i,E.innerHTML))return A5(E),!0;if(!B8[T]||I1[T]){if(y1&&!C0[T]){var i=L(E)||E.parentNode,P8=O(E)||E.childNodes;if(P8&&i){var O8=P8.length;for(var L8=O8-1;L8>=0;--L8)i.insertBefore(F(P8[L8],!0),B(E))}}return A5(E),!0}if(E instanceof q&&!CY(E))return A5(E),!0;if((T==="noscript"||T==="noembed")&&M5(/<\/no(script|embed)/i,E.innerHTML))return A5(E),!0;if(L0&&E.nodeType===3){if(C=E.textContent,C=d5(C,L1," "),C=d5(C,M1," "),E.textContent!==C)u3(X.removed,{element:E.cloneNode()}),E.textContent=C}return H5("afterSanitizeElements",E,null),!1},b4=function g(E,C,T){if(B4&&(C==="id"||C==="name")&&((T in z)||(T in IY)))return!1;if(S1&&!C1[C]&&M5(PY,C));else if(j4&&M5(OY,C));else if(!E8[C]||C1[C])return!1;else if(N1[C]);else if(M5(D1,d5(T,W4,"")));else if((C==="src"||C==="xlink:href"||C==="href")&&E!=="script"&&A08(T,"data:")===0&&P4[E]);else if(R4&&!M5(LY,d5(T,W4,"")));else if(!T);else return!1;return!0},y4=function g(E){var C=void 0,T=void 0,i=void 0,P8=void 0;H5("beforeSanitizeAttributes",E,null);var O8=E.attributes;if(!O8)return;var L8={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:E8};P8=O8.length;while(P8--){C=O8[P8];var j5=C,H3=j5.name,N4=j5.namespaceURI;if(T=H08(C.value),i=k0(H3),L8.attrName=i,L8.attrValue=T,L8.keepAttr=!0,L8.forceKeepAttr=void 0,H5("uponSanitizeAttribute",E,L8),T=L8.attrValue,L8.forceKeepAttr)continue;if(I4(H3,E),!L8.keepAttr)continue;if(M5(/\/>/i,T)){I4(H3,E);continue}if(L0)T=d5(T,L1," "),T=d5(T,M1," ");var bY=k0(E.nodeName);if(!b4(bY,i,T))continue;try{if(N4)E.setAttributeNS(N4,H3,T);else E.setAttribute(H3,T);zz(X.removed)}catch(J68){}}H5("afterSanitizeAttributes",E,null)},kY=function g(E){var C=void 0,T=S4(E);H5("beforeSanitizeShadowDOM",E,null);while(C=T.nextNode()){if(H5("uponSanitizeShadowNode",C,null),k4(C))continue;if(C.content instanceof J)g(C.content);y4(C)}H5("afterSanitizeShadowDOM",E,null)};return X.sanitize=function(g,E){var C=void 0,T=void 0,i=void 0,P8=void 0,O8=void 0;if(g1=!g,g1)g="<!-->";if(typeof g!=="string"&&!A3(g)){if(typeof g.toString!=="function")throw Qz("toString is not a function");else if(g=g.toString(),typeof g!=="string")throw Qz("dirty is not a string, aborting")}if(!X.isSupported){if(_3(Z.toStaticHTML)==="object"||typeof Z.toStaticHTML==="function"){if(typeof g==="string")return Z.toStaticHTML(g);if(A3(g))return Z.toStaticHTML(g.outerHTML)}return g}if(!k1)u1(E);if(X.removed=[],typeof g==="string")W3=!1;if(W3);else if(g instanceof Y)if(C=C4("<!---->"),T=C.ownerDocument.importNode(g,!0),T.nodeType===1&&T.nodeName==="BODY")C=T;else if(T.nodeName==="HTML")C=T;else C.appendChild(T);else{if(!D0&&!L0&&!M0&&g.indexOf("<")===-1)return I&&n3?I.createHTML(g):g;if(C=C4(g),!C)return D0?null:k}if(C&&b1)A5(C.firstChild);var L8=S4(W3?g:C);while(i=L8.nextNode()){if(i.nodeType===3&&i===P8)continue;if(k4(i))continue;if(i.content instanceof J)kY(i.content);y4(i),P8=i}if(P8=null,W3)return g;if(D0){if(s3){O8=c.call(C.ownerDocument);while(C.firstChild)O8.appendChild(C.firstChild)}else O8=C;if(F4)O8=g8.call(K,O8,!0);return O8}var j5=M0?C.outerHTML:C.innerHTML;if(L0)j5=d5(j5,L1," "),j5=d5(j5,M1," ");return I&&n3?I.createHTML(j5):j5},X.setConfig=function(g){u1(g),k1=!0},X.clearConfig=function(){b0=null,k1=!1},X.isValidAttribute=function(g,E,C){if(!b0)u1({});var T=k0(g),i=k0(E);return b4(T,i,C)},X.addHook=function(g,E){if(typeof E!=="function")return;e8[g]=e8[g]||[],u3(e8[g],E)},X.removeHook=function(g){if(e8[g])zz(e8[g])},X.removeHooks=function(g){if(e8[g])e8[g]=[]},X.removeAllHooks=function(){e8={}},X}var S08=TQ(),k08=["iframe","embed"],xQ=[];function gQ(Z){if(F8(k08,Z))xQ.push(Z.toLowerCase())}function O0(Z,X){return S08.sanitize(Z,P({ADD_TAGS:xQ,ADD_ATTR:["rel","target","hreflang","type"],FORBID_TAGS:["input","script","textarea","form","button","select","meta","style","link","title","object","base"]},X))}function uQ(Z,X){return Z.literal.replace(new RegExp("(<\\s*"+X+"[^>]*>)|(</"+X+"\\s*[>])","ig"),"").trim()}function C6(Z){Z=Z.match(z3)[0];var X=Z.match(new RegExp(yJ,"g"));return X?X.reduce(function(K,z){var J=z.trim().split("="),Q=J[0],Y=J.slice(1);if(Y.length)K[Q]=Y.join("=").replace(/'|"/g,"").trim();return K},{}):{}}function S6(Z){return W5(Z.attributes).reduce(function(X,K){return X[K.nodeName]=K.nodeValue,X},{})}function Vz(Z,X,K,z){var J=z.getToDOMNode(X)(Z),Q=K(J.outerHTML),Y=document.createElement("div");Y.innerHTML=Q,J=Y.firstChild;var q=S6(J);return{dom:J,htmlAttrs:q}}var b08={htmlBlock:function(Z,X,K){return{atom:!0,content:"block+",group:"block",attrs:{htmlAttrs:{default:{}},childrenHTML:{default:""},htmlBlock:{default:!0}},parseDOM:[{tag:Z,getAttrs:function(z){return{htmlAttrs:S6(z),childrenHTML:z.innerHTML}}}],toDOM:function(z){var J=Vz(z,Z,X,K),Q=J.dom,Y=J.htmlAttrs;return Y.class=Y.class?Y.class+" html-block":"html-block",w8([Z,Y],W5(Q.childNodes))}}},htmlInline:function(Z,X,K){return{attrs:{htmlAttrs:{default:{}},htmlInline:{default:!0}},parseDOM:[{tag:Z,getAttrs:function(z){return{htmlAttrs:S6(z)}}}],toDOM:function(z){var J=Vz(z,Z,X,K).htmlAttrs;return[Z,J,0]}}}};function y08(Z,X,K){var z={nodes:{},marks:{}};return["htmlBlock","htmlInline"].forEach(function(J){if(Z[J])Object.keys(Z[J]).forEach(function(Q){var Y=J==="htmlBlock"?"nodes":"marks";gQ(Q),z[Y][Q]=b08[J](Q,X,K)})}),z}var N08=/^\s*<\s*\//,T08={paragraph:function(Z,X){var{entering:K,origin:z,options:J}=X;if(J.nodeId)return{type:K?"openTag":"closeTag",outerNewLine:!0,tagName:"p"};return z()},softbreak:function(Z){var X=Z.prev&&Z.prev.type==="htmlInline",K=X&&/<br ?\/?>/.test(Z.prev.literal),z=K?`
`:`<br>
`;return{type:"html",content:z}},item:function(Z,X){var K=X.entering;if(K){var z={},J=[];if(Z.listData.task){if(z["data-task"]="",J.push("task-list-item"),Z.listData.checked)J.push("checked"),z["data-task-checked"]=""}return{type:"openTag",tagName:"li",classNames:J,attributes:z,outerNewLine:!0}}return{type:"closeTag",tagName:"li",outerNewLine:!0}},code:function(Z){var X={"data-backticks":String(Z.tickCount)};return[{type:"openTag",tagName:"code",attributes:X},{type:"text",content:Z.literal},{type:"closeTag",tagName:"code"}]},codeBlock:function(Z){var X=Z,K=X.fenceLength,z=X.info,J=z?z.split(/\s+/):[],Q=[],Y={};if(K>3)Y["data-backticks"]=K;if(J.length>0&&J[0].length>0){var q=J[0];Q.push("lang-"+q),Y["data-language"]=q}return[{type:"openTag",tagName:"pre",classNames:Q},{type:"openTag",tagName:"code",attributes:Y},{type:"text",content:Z.literal},{type:"closeTag",tagName:"code"},{type:"closeTag",tagName:"pre"}]},customInline:function(Z,X){var{origin:K,entering:z,skipChildren:J}=X,Q=Z.info;if(Q.indexOf("widget")!==-1&&z){J();var Y=CJ(Z),q=IJ(Q,Y).outerHTML;return[{type:"openTag",tagName:"span",classNames:["tui-widget"]},{type:"html",content:q},{type:"closeTag",tagName:"span"}]}return K()}};function Q4(Z,X){var K=P({},T08);if(Z)K.link=function(z,J){var{entering:Q,origin:Y}=J,q=Y();if(Q)q.attributes=P(P({},q.attributes),Z);return q};if(X)Object.keys(X).forEach(function(z){var J=K[z],Q=X[z];if(J&&c8(Q))K[z]=function(Y,q){var G=P({},q);return G.origin=function(){return J(Y,q)},Q(Y,G)};else if(F8(["htmlBlock","htmlInline"],z)&&!c8(Q))K[z]=function(Y,q){var G=Y.literal.match(z3);if(G){var U=G[0],V=G[1],W=G[3],A=(V||W).toLowerCase(),j=Q[A],H=uQ(Y,A);if(j){var R=P({},Y);return R.attrs=C6(U),R.childrenHTML=H,R.type=A,q.entering=!N08.test(Y.literal),j(R,q)}}return q.origin()};else K[z]=Q});return K}var x08=["list","item","blockQuote"],g08=["UL","OL","BLOCKQUOTE"];function u08(Z,X){var K,z=Z.child(X);return!z.childCount||z.childCount===1&&!((K=z.firstChild.text)===null||K===void 0?void 0:K.trim())}function Wz(Z,X,K){var z=p3(X)-1,J=U1(X)-1,Q=K[z].getBoundingClientRect(),Y=K[J].offsetTop-K[z].offsetTop+K[J].clientHeight;return{height:Y<=0?K[z].clientHeight:Y+w08(Z,K,Math.min(J+1,Z.childCount-1)),rect:Q}}function w08(Z,X,K){var z=Z.childCount-1,J=0;while(K<=z&&u08(Z,K))J+=X[K].clientHeight,K+=1;return J}function v08(Z,X){while(!Z.getAttribute("data-nodeid")&&Z.parentElement!==X)Z=Z.parentElement;return Z}function z1(Z,X){var K=0;while(Z&&Z!==X){if(!F8(g08,Z.tagName))K+=Z.offsetTop;if(Z.offsetParent===X.offsetParent)break;Z=Z.parentElement}return K}function $08(Z,X){var K=X,z=null;while(K){var J=K.firstElementChild;if(!J)break;var Q=wQ(J,Z,z1(K,X));z=K,K=Q}var Y=K||z;return Y===X?null:Y}function wQ(Z,X,K){if(Z&&X>K+Z.offsetTop)return wQ(Z.nextElementSibling,X,K)||Z;return null}function h08(Z,X,K,z){var J=Math.min((Z-X)/K,1);return J*z}function X6(Z,X){var K=Z.querySelector('[data-nodeid="'+X.id+'"]');while(!K||IU(X))X=X.parent,K=Z.querySelector('[data-nodeid="'+X.id+'"]');return f08({mdNode:X,el:K})}function f08(Z){var{mdNode:X,el:K}=Z;while((F8(x08,X.type)||X.type==="table")&&X.firstChild)X=X.firstChild,K=K.firstElementChild;return{mdNode:X,el:K}}var a8={};function _08(Z,X){a8[Z]=a8[Z]||{},a8[Z].height=X}function m08(Z,X){a8[Z]=a8[Z]||{},a8[Z].offsetTop=X}function l08(Z){return a8[Z]&&a8[Z].height}function c08(Z){return a8[Z]&&a8[Z].offsetTop}function k6(Z){if(Z)delete a8[Number(Z.getAttribute("data-nodeid"))],W5(Z.children).forEach(function(X){k6(X)})}function p08(Z,X,K){var z=l08(K),J=c08(K),Q=z||Z.clientHeight,Y=J||z1(Z,X)||Z.offsetTop;if(!z)_08(K,Q);if(!J)m08(K,Y);return{nodeHeight:Q,offsetTop:Y}}var K6=y("md-preview-highlight");function i08(Z,X){var K=Z.firstChild;while(K&&K.next){if(V1(K.next)>X+1)break;K=K.next}return K}var vQ=function(){function Z(X,K){var z=document.createElement("div");this.el=z,this.eventEmitter=X,this.isViewer=!!K.isViewer,this.el.className=y("md-preview");var{linkAttributes:J,customHTMLRenderer:Q,sanitizer:Y,highlight:q}=K,G=q===void 0?!1:q;if(this.renderer=new J4({gfm:!0,nodeId:!0,convertors:Q4(J,Q)}),this.cursorNodeId=null,this.sanitizer=Y,this.initEvent(G),this.initContentSection(),this.isViewer)this.previewContent.style.overflowWrap="break-word"}return Z.prototype.initContentSection=function(){if(this.previewContent=uJ('<div class="'+y("contents")+'"></div>'),!this.isViewer)this.el.appendChild(this.previewContent)},Z.prototype.toggleActive=function(X){p6(this.el,"active",X)},Z.prototype.initEvent=function(X){var K=this;if(this.eventEmitter.listen("updatePreview",this.update.bind(this)),this.isViewer)return;if(X)this.eventEmitter.listen("changeToolbarState",function(z){var{mdNode:J,cursorPos:Q}=z;K.updateCursorNode(J,Q)}),this.eventEmitter.listen("blur",function(){K.removeHighlight()});oJ(this.el,"scroll",function(z){K.eventEmitter.emit("scroll","preview",$08(z.target.scrollTop,K.previewContent))}),this.eventEmitter.listen("changePreviewTabPreview",function(){return K.toggleActive(!0)}),this.eventEmitter.listen("changePreviewTabWrite",function(){return K.toggleActive(!1)})},Z.prototype.removeHighlight=function(){if(this.cursorNodeId){var X=this.getElementByNodeId(this.cursorNodeId);if(X)n8(X,K6)}},Z.prototype.updateCursorNode=function(X,K){if(X){if(X=K3(X,function(Y){return!kU(Y)}),X.type==="tableRow")X=i08(X,K[1]);else if(X.type==="tableBody")X=null}var z=X?X.id:null;if(this.cursorNodeId===z)return;var J=this.getElementByNodeId(this.cursorNodeId),Q=this.getElementByNodeId(z);if(J)n8(J,K6);if(Q)G5(Q,K6);this.cursorNodeId=z},Z.prototype.getElementByNodeId=function(X){return X?this.previewContent.querySelector('[data-nodeid="'+X+'"]'):null},Z.prototype.update=function(X){var K=this;X.forEach(function(z){return K.replaceRangeNodes(z)}),this.eventEmitter.emit("afterPreviewRender",this)},Z.prototype.replaceRangeNodes=function(X){var K=this,z=X.nodes,J=X.removedNodeRange,Q=this.previewContent,Y=this.eventEmitter.emitReduce("beforePreviewRender",this.sanitizer(z.map(function(H){return K.renderer.render(H)}).join("")));if(!J)Q.insertAdjacentHTML("afterbegin",Y);else{var q=J.id,G=q[0],U=q[1],V=this.getElementByNodeId(G),W=this.getElementByNodeId(U);if(V){V.insertAdjacentHTML("beforebegin",Y);var A=V;while(A&&A!==W){var j=A.nextElementSibling;B0(A),k6(A),A=j}if(A===null||A===void 0?void 0:A.parentNode)B0(A),k6(A)}}},Z.prototype.getRenderer=function(){return this.renderer},Z.prototype.destroy=function(){rJ(this.el,"scroll"),this.el=null},Z.prototype.getElement=function(){return this.el},Z.prototype.getHTML=function(){return s6(this.previewContent.innerHTML)},Z.prototype.setHTML=function(X){this.previewContent.innerHTML=X},Z.prototype.setHeight=function(X){V5(this.el,{height:X+"px"})},Z.prototype.setMinHeight=function(X){V5(this.el,{minHeight:X+"px"})},Z}();function I5(Z,X){var K=Z.depth;while(K){var z=Z.node(K);if(X(z,K))return{node:z,depth:K,offset:K>0?Z.before(K):0};K-=1}return null}function q3(Z){return!!I5(Z,function(X){var K=X.type;return K.name==="listItem"||K.name==="bulletList"||K.name==="orderedList"})}function J1(Z){return!!I5(Z,function(X){var K=X.type;return K.name==="tableHeadCell"||K.name==="tableBodyCell"})}function G3(Z){return I5(Z,function(X){var K=X.type;return K.name==="listItem"})}function P1(Z){return{tag:Z,getAttrs:function(X){var K=X.getAttribute("data-raw-html");return P({},K&&{rawHTML:K})}}}function $Q(Z){return Object.keys(Z).reduce(function(X,K){if(K!=="rawHTML"&&Z[K])K=K==="className"?"class":K,X[K]=Z[K];return X},{})}function hQ(Z){return{tag:Z,getAttrs:function(X){return["rawHTML","colspan","rowspan","extended"].reduce(function(K,z){var J=z==="rawHTML"?"data-raw-html":z,Q=X.getAttribute(J);if(Q)K[z]=F8(["rawHTML","extended"],z)?Q:Number(Q);return K},{})}}}function U8(){return{htmlAttrs:{default:null},classNames:{default:null}}}function X8(Z){var{htmlAttrs:X,classNames:K}=Z;return P(P({},X),{class:K?K.join(" "):null})}function d08(Z,X){var{parent:K,startIndex:z,endIndex:J}=Z,Q=K.contentMatchAt(z).findWrapping(X);if(Q){var Y=Q.length?Q[0]:X;return K.canReplaceWith(z,J,Y)?Q:null}return null}function s08(Z,X){var{parent:K,startIndex:z,endIndex:J}=Z,Q=K.child(z),Y=X.contentMatch.findWrapping(Q.type);if(Y){var q=Y.length?Y[Y.length-1]:X,G=q.contentMatch;for(var U=z;G&&U<J;U+=1)G=G.matchType(K.child(U).type);if(G&&G.validEnd)return Y}return null}function n08(Z,X,K,z){var J=d08(Z,K),Q=s08(X,K);if(J&&Q){var Y=J.map(function(G){return{type:G}}),q=Q.map(function(G){return{type:G,attrs:z}});return Y.concat({type:K}).concat(q)}return null}function a08(Z,X,K,z,J){var{start:Q,end:Y,startIndex:q,endIndex:G,parent:U}=X,V=M.empty;for(var W=K.length-1;W>=0;W-=1)V=M.from(K[W].type.create(K[W].attrs,V));Z.step(new t(Q-(z?2:0),Y,Q,Y,new S(V,0,0),K.length,!0));var A=0;for(var W=0;W<K.length;W+=1)if(K[W].type===J){A=W+1;break}var j=K.length-A,H=Q+K.length-(z?2:0);for(var W=q,R=G;W<R;W+=1){var F=W===q;if(!F&&u5(Z.doc,H,j))Z.split(H,j),H+=j*2;H+=U.child(W).nodeSize}return Z}function fQ(Z,X,K,z){var{$from:J,$to:Q,depth:Y}=X,q=X,G=!1;if(Y>=2&&J.node(Y-1).type.compatibleContent(K)&&X.startIndex===0&&J.index(Y-1)){var U=Z.doc.resolve(X.start-2);if(q=new N0(U,U,Y),X.endIndex<X.parent.childCount)X=new N0(J,Z.doc.resolve(Q.end(Y)),Y);G=!0}var V=n08(q,X,K,z);if(V)return a08(Z,X,V,G,K);return Z}function _Q(Z,X){var K=Z.resolve(X);while(K.node().type.name!=="paragraph")X-=2,K=Z.resolve(X);return G3(K)}function r08(Z,X){var{$from:K,$to:z}=X,J=G3(K),Q=G3(z);if(J&&Q)while(Q){var{offset:Y,node:q}=Q,G={task:!q.attrs.task,checked:!1};if(Z.setNodeMarkup(Y,null,G),Y===J.offset)break;Q=_Q(Z.doc,Y)}return Z}function o08(Z,X,K){var{$from:z,$to:J}=X,Q=G3(z),Y=G3(J);if(Q&&Y)while(Y){var{offset:q,node:G,depth:U}=Y;if(G.attrs.task)Z.setNodeMarkup(q,null,{task:!1,checked:!1});var V=Z.doc.resolve(q);if(V.parent.type!==K){var W=V.before(U-1);Z.setNodeMarkup(W,K)}if(q===Q.offset)break;Y=_Q(Z.doc,q)}return Z}function mQ(Z){return function(X,K){var{selection:z,tr:J}=X,Q=z.$from,Y=z.$to,q=Q.blockRange(Y);if(q){var G=q3(Q)?o08(J,q,Z):fQ(J,q,Z);return K(G),!0}return!1}}function t08(){return function(Z,X){var{selection:K,tr:z,schema:J}=Z,Q=K.$from,Y=K.$to,q=Q.blockRange(Y);if(q){var G=q3(Q)?r08(z,q):fQ(z,q,J.nodes.bulletList,{task:!0});return X(G),!0}return!1}}function e08(Z){return function(X,K){var{tr:z,selection:J}=X,Q=J.$from,Y=J.$to,q=Q.blockRange(Y,function(R){var{childCount:F,firstChild:B}=R;return!!F&&B.type===Z});if(q&&q.startIndex>0){var G=q.parent,U=G.child(q.startIndex-1);if(U.type!==Z)return!1;var V=U.lastChild&&U.lastChild.type===G.type,W=V?M.from(Z.create()):null,A=new S(M.from(Z.create(null,M.from(G.type.create(null,W)))),V?3:1,0),j=q.start,H=q.end;return z.step(new t(j-(V?3:1),H,j,H,A,1,!0)),K(z),!0}return!1}}function Z38(Z,X,K){var{$from:z,$to:J,end:Q,depth:Y,parent:q}=X,G=J.end(Y);if(Q<G)Z.step(new t(Q-1,G,Q,G,new S(M.from(K.create(null,q.copy())),1,0),1,!0)),X=new N0(Z.doc.resolve(z.pos),Z.doc.resolve(G),Y);return Z.lift(X,u0(X)),Z}function X38(Z,X){var{parent:K,end:z}=X;for(var J=X.endIndex-1,Q=X.startIndex;J>Q;J-=1)z-=K.child(J).nodeSize,Z.delete(z-1,z+1);var Y=Z.doc.resolve(X.start),q=Y.nodeAfter,G=X.startIndex===0,U=X.endIndex===K.childCount,V=Y.node(-1),W=Y.index(-1),A=V.canReplace(W+(G?0:1),W+1,q===null||q===void 0?void 0:q.content.append(U?M.empty:M.from(K)));if(q&&A){var j=Y.pos,H=j+q.nodeSize;Z.step(new t(j-(G?1:0),H+(U?1:0),j+1,H-1,new S((G?M.empty:M.from(K.copy(M.empty))).append(U?M.empty:M.from(K.copy(M.empty))),G?0:1,U?0:1),G?0:1))}return Z}function K38(Z){return function(X,K){var{tr:z,selection:J}=X,Q=J.$from,Y=J.$to,q=Q.blockRange(Y,function(V){var{childCount:W,firstChild:A}=V;return!!W&&A.type===Z});if(q){var G=Q.node(q.depth-1).type===Z,U=G?Z38(z,q,Z):X38(z,q);return K(U),!0}return!1}}function z38(Z){return function(X,K){var{tr:z,selection:J}=X,Q=J.$from,Y=J.$to;if(Q.depth<2||!Q.sameParent(Y))return!1;var q=Q.node(-1);if(q.type!==Z)return!1;if(Q.parent.content.size===0&&Q.node(-1).childCount===Q.indexAfter(-1)){if(Q.depth===2||Q.node(-3).type!==Z||Q.index(-2)!==Q.node(-2).childCount-1)return!1;var G=Q.index(-1)>0,U=M.empty;for(var V=Q.depth-(G?1:2);V>=Q.depth-3;V-=1)U=M.from(Q.node(V).copy(U));return U=U.append(M.from(Z.createAndFill())),z.replace(G?Q.before():Q.before(-1),Q.after(-3),new S(U,G?3:2,2)),z.setSelection($.near(z.doc.resolve(Q.pos+(G?3:2)))),K(z),!0}var W=Y.pos===Q.end()?q.contentMatchAt(0).defaultType:null,A=W&&[null,{type:W}];if(z.delete(Q.pos,Y.pos),u5(z.doc,Q.pos,2,A))return z.split(Q.pos,2,A),K(z),!0;return!1}}function J38(){return function(){return function(Z,X){var{selection:K,schema:z}=Z,J=K.$from,Q=K.$to,Y=J.blockRange(Q);if(Y&&q3(J))return e08(z.nodes.listItem)(Z,X);return!1}}}function Q38(){return function(){return function(Z,X){var{selection:K,schema:z}=Z,J=K.$from,Q=K.$to,Y=J.blockRange(Q);if(Y&&q3(J))return K38(z.nodes.listItem)(Z,X);return!1}}}function Y4(){return{indent:J38(),outdent:Q38()}}var Az=new Map,H8=function(){function Z(X,K,z,J){this.table=X,this.tableRows=K,this.tableStartPos=z,this.rowInfo=J}return Z.create=function(X){var K=I5(X,function(H){var R=H.type;return R.name==="table"});if(K){var{node:z,depth:J,offset:Q}=K,Y=Az.get(z);if((Y===null||Y===void 0?void 0:Y.tableStartPos)===Q+1)return Y;var q=[],G=X.start(J),U=z.child(0),V=z.child(1),W=b6(U,G),A=b6(V,G+U.nodeSize);U.forEach(function(H){return q.push(H)}),V.forEach(function(H){return q.push(H)});var j=new Z(z,q,G,W.concat(A));return Az.set(z,j),j}return null},Object.defineProperty(Z.prototype,"totalRowCount",{get:function(){return this.rowInfo.length},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"totalColumnCount",{get:function(){return this.rowInfo[0].length},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"tableStartOffset",{get:function(){return this.tableStartPos},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"tableEndOffset",{get:function(){return this.tableStartPos+this.table.nodeSize-1},enumerable:!1,configurable:!0}),Z.prototype.getCellInfo=function(X,K){return this.rowInfo[X][K]},Z.prototype.posAt=function(X,K){for(var z=0,J=this.tableStartPos;;z+=1){var Q=J+this.tableRows[z].nodeSize;if(z===X){var Y=K;while(Y<this.totalColumnCount&&this.rowInfo[z][Y].offset<J)Y+=1;return Y===this.totalColumnCount?Q:this.rowInfo[z][Y].offset}J=Q}},Z.prototype.getNodeAndPos=function(X,K){var z=this.rowInfo[X][K];return{node:this.table.nodeAt(z.offset-this.tableStartOffset),pos:z.offset}},Z.prototype.extendedRowspan=function(X,K){return!1},Z.prototype.extendedColspan=function(X,K){return!1},Z.prototype.getRowspanCount=function(X,K){return 0},Z.prototype.getColspanCount=function(X,K){return 0},Z.prototype.decreaseColspanCount=function(X,K){return 0},Z.prototype.decreaseRowspanCount=function(X,K){return 0},Z.prototype.getColspanStartInfo=function(X,K){return null},Z.prototype.getRowspanStartInfo=function(X,K){return null},Z.prototype.getCellStartOffset=function(X,K){var z=this.rowInfo[X][K].offset;return this.extendedRowspan(X,K)?this.posAt(X,K):z},Z.prototype.getCellEndOffset=function(X,K){var z=this.rowInfo[X][K],J=z.offset,Q=z.nodeSize;return this.extendedRowspan(X,K)?this.posAt(X,K):J+Q},Z.prototype.getCellIndex=function(X){for(var K=0;K<this.totalRowCount;K+=1){var z=this.rowInfo[K];for(var J=0;J<this.totalColumnCount;J+=1)if(z[J].offset+1>X.pos)return[K,J]}return[0,0]},Z.prototype.getRectOffsets=function(X,K){var z,J,Q;if(K===void 0)K=X;if(X.pos>K.pos)z=[K,X],X=z[0],K=z[1];var Y=this.getCellIndex(X),q=Y[0],G=Y[1],U=this.getCellIndex(K),V=U[0],W=U[1];return J=HK(q,V),q=J[0],V=J[1],Q=HK(G,W),G=Q[0],W=Q[1],this.getSpannedOffsets({startRowIdx:q,startColIdx:G,endRowIdx:V,endColIdx:W})},Z.prototype.getSpannedOffsets=function(X){return X},Z}(),b6=function(Z,X){var K=[];return Z.forEach(function(z,J){var Q={rowspanMap:{},colspanMap:{},length:0};z.forEach(function(Y,q){var G=Y.nodeSize,U=0;while(Q[U])U+=1;Q[U]={offset:X+J+q+2,nodeSize:G},Q.length+=1}),K.push(Q)}),K};function Y38(Z,X){return _6(H8.prototype,Z),b6=X,H8}function q38(Z,X,K){var{startRowIdx:z,startColIdx:J,endRowIdx:Q,endColIdx:Y}=K,q=[];for(var G=z;G<=Q;G+=1)for(var U=J;U<=Y;U+=1){var V=X.getCellInfo(G,U),W=V.offset,A=V.nodeSize;q.push(new X0(Z.resolve(W+1),Z.resolve(W+A-1)))}return q}function G38(Z,X){var K=[];if(Z.childCount)K.push(Z);if(X.childCount)K.push(X);return M.from(K)}var q4=function(Z){b(X,Z);function X(K,z){if(z===void 0)z=K;var J=this,Q=K.node(0),Y=H8.create(K),q=Y.getRectOffsets(K,z),G=q38(Q,Y,q);return J=Z.call(this,G[0].$from,G[0].$to,G)||this,J.startCell=K,J.endCell=z,J.offsetMap=Y,J.isCellSelection=!0,J.visible=!1,J}return X.prototype.map=function(K,z){var J=this.startCell.pos,Q=this.endCell.pos,Y=K.resolve(z.map(J)),q=K.resolve(z.map(Q)),G=H8.create(Y);if(this.offsetMap.totalColumnCount>G.totalColumnCount||this.offsetMap.totalRowCount>G.totalRowCount){var U={tableBody:1,tableRow:2,tableCell:3,paragraph:4},V=U[q.parent.type.name],W=q.end(q.depth-V),A=Math.min(W-4,q.pos);return _.create(K,A)}return new X(Y,q)},X.prototype.eq=function(K){return K instanceof X&&K.startCell.pos===this.startCell.pos&&K.endCell.pos===this.endCell.pos},X.prototype.content=function(){var K=this.startCell.node(-2),z=this.startCell.start(-2),J=K.child(1).firstChild,Q=K.child(0).type.create(),Y=K.child(1).type.create(),q=H8.create(this.startCell),G=q.getRectOffsets(this.startCell,this.endCell),U=G.startRowIdx,V=G.startColIdx,W=G.endRowIdx,A=G.endColIdx,j=!1;for(var H=U;H<=W;H+=1){var R=[];for(var F=V;F<=A;F+=1){var B=q.getCellInfo(H,F).offset,O=K.nodeAt(B-z);if(O)if(j=O.type.name==="tableHeadCell",q.extendedRowspan(H,F)||q.extendedColspan(H,F))R.push(O.type.create({extended:!0}));else R.push(O.copy(O.content))}var L=J.copy(M.from(R)),D=j?Q:Y;D.content=D.content.append(M.from(L))}return new S(G38(Q,Y),1,1)},X.prototype.toJSON=function(){return JSON.stringify(this)},X}($);function U38(Z,X,K){var z=X.nodes,J=z.tableRow,Q=z.tableHeadCell,Y=z.paragraph,q=[];for(var G=0;G<Z;G+=1){var U=K&&K[G],V=Y.create(null,U?X.text(U):[]);q.push(Q.create(null,V))}return[J.create(null,q)]}function lQ(Z,X,K,z){var J=K.nodes,Q=J.tableRow,Y=J.tableBodyCell,q=J.paragraph,G=[];for(var U=0;U<Z;U+=1){var V=[];for(var W=0;W<X;W+=1){var A=z&&z[U*X+W],j=q.create(null,A?K.text(A):[]);V.push(Y.create(null,j))}G.push(Q.create(null,V))}return G}function _7(Z,X,K,z){if(z===void 0)z=null;var J=K.nodes,Q=J.tableHeadCell,Y=J.tableBodyCell,q=J.paragraph,G=X===0?Q:Y,U=[];for(var V=0;V<Z;V+=1)U.push(G.create(z,q.create()));return U}function cQ(Z,X){while(Z&&Z!==X){if(Z.nodeName==="TD"||Z.nodeName==="TH")return Z;Z=Z.parentNode}return null}function pQ(Z){return I5(Z,function(X){var K=X.type;return K.name==="tableHeadCell"||K.name==="tableBodyCell"})}function q5(Z){if(Z instanceof _){var X=Z.$anchor,K=pQ(X);if(K){var z=X.node(0).resolve(X.before(K.depth));return{anchor:z,head:z}}}var J=Z,Q=J.startCell,Y=J.endCell;return{anchor:Q,head:Y}}function iQ(Z){var X;if(Z.size){var{content:K,openStart:z,openEnd:J}=Z;if(K.childCount!==1)return null;while(K.childCount===1&&(z>0&&J>0||((X=K.firstChild)===null||X===void 0?void 0:X.type.name)==="table"))z-=1,J-=1,K=K.firstChild.content;if(K.firstChild.type.name==="tableHead"||K.firstChild.type.name==="tableBody")return K}return null}function e0(Z){var{startRowIdx:X,startColIdx:K,endRowIdx:z,endColIdx:J}=Z,Q=z-X+1,Y=J-K+1;return{rowCount:Q,columnCount:Y}}function V38(Z,X){return P(P({},Z.attrs),X)}var s5=new v5("cellSelection"),W38=2,A38=function(){function Z(X){this.view=X,this.handlers={mousedown:this.handleMousedown.bind(this),mousemove:this.handleMousemove.bind(this),mouseup:this.handleMouseup.bind(this)},this.startCellPos=null,this.init()}return Z.prototype.init=function(){this.view.dom.addEventListener("mousedown",this.handlers.mousedown)},Z.prototype.handleMousedown=function(X){var K=cQ(X.target,this.view.dom);if(X.button===W38){X.preventDefault();return}if(K){var z=this.getCellPos(X);if(z)this.startCellPos=z;this.bindEvent()}},Z.prototype.handleMousemove=function(X){var K=s5.getState(this.view.state),z=this.getCellPos(X),J=this.startCellPos,Q;if(K)Q=this.view.state.doc.resolve(K);else if(J!==z)Q=J;if(Q&&J&&z)this.setCellSelection(J,z)},Z.prototype.handleMouseup=function(){if(this.startCellPos=null,this.unbindEvent(),s5.getState(this.view.state)!==null)this.view.dispatch(this.view.state.tr.setMeta(s5,-1))},Z.prototype.bindEvent=function(){var X=this.view.dom;X.addEventListener("mousemove",this.handlers.mousemove),X.addEventListener("mouseup",this.handlers.mouseup)},Z.prototype.unbindEvent=function(){var X=this.view.dom;X.removeEventListener("mousemove",this.handlers.mousemove),X.removeEventListener("mouseup",this.handlers.mouseup)},Z.prototype.getCellPos=function(X){var{clientX:K,clientY:z}=X,J=this.view.posAtCoords({left:K,top:z});if(J){var Q=this.view.state.doc,Y=Q.resolve(J.pos),q=pQ(Y);if(q){var G=Y.before(q.depth);return Q.resolve(G)}}return null},Z.prototype.setCellSelection=function(X,K){var z=this.view.state,J=z.selection,Q=z.tr,Y=s5.getState(this.view.state)===null,q=new q4(X,K);if(Y||!J.eq(q)){var G=Q.setSelection(q);if(Y)G.setMeta(s5,K.pos);this.view.dispatch(G)}},Z.prototype.destroy=function(){this.view.dom.removeEventListener("mousedown",this.handlers.mousedown)},Z}(),H38=y("cell-selected");function j38(Z){var{selection:X,doc:K}=Z;if(X instanceof q4){var z=[],J=X.ranges;return J.forEach(function(Q){var{$from:Y,$to:q}=Q;z.push(b8.node(Y.pos-1,q.pos+1,{class:H38}))}),o.create(K,z)}return null}function R38(){return new K8({key:s5,state:{init:function(){return null},apply:function(Z,X){var K=Z.getMeta(s5);if(K)return K===-1?null:K;if(p7(X)||!Z.docChanged)return X;var z=Z.mapping.mapResult(X),J=z.deleted,Q=z.pos;return J?null:Q}},props:{decorations:j38,createSelectionBetween:function(Z){var X=Z.state;if(!p7(s5.getState(X)))return X.selection;return null}},view:function(Z){return new A38(Z)}})}var dQ=function(){function Z(){this.keys=[],this.values=[]}return Z.prototype.getKeyIndex=function(X){return R0(X,this.keys)},Z.prototype.get=function(X){return this.values[this.getKeyIndex(X)]},Z.prototype.set=function(X,K){var z=this.getKeyIndex(X);if(z>-1)this.values[z]=K;else this.keys.push(X),this.values.push(K);return this},Z.prototype.has=function(X){return this.getKeyIndex(X)>-1},Z.prototype.delete=function(X){var K=this.getKeyIndex(X);if(K>-1)return this.keys.splice(K,1),this.values.splice(K,1),!0;return!1},Z.prototype.forEach=function(X,K){var z=this;if(K===void 0)K=this;this.values.forEach(function(J,Q){if(J&&z.keys[Q])X.call(K,J,z.keys[Q],z)})},Z.prototype.clear=function(){this.keys=[],this.values=[]},Z}(),z6="en-US",F38=function(){function Z(){this.code=z6,this.langs=new dQ}return Z.prototype.setCode=function(X){this.code=X||z6},Z.prototype.setLanguage=function(X,K){var z=this;X=[].concat(X),X.forEach(function(J){if(!z.langs.has(J))z.langs.set(J,K);else{var Q=z.langs.get(J);z.langs.set(J,u6(Q,K))}})},Z.prototype.get=function(X,K){if(!K)K=this.code;var z=this.langs.get(K);if(!z)z=this.langs.get(z6);var J=z[X];if(!J)throw new Error('There is no text key "'+X+'" in '+K);return J},Z}(),v=new F38,B38=[[{action:"Add row to up",command:"addRowToUp",disableInThead:!0,className:"add-row-up"},{action:"Add row to down",command:"addRowToDown",disableInThead:!0,className:"add-row-down"},{action:"Remove row",command:"removeRow",disableInThead:!0,className:"remove-row"}],[{action:"Add column to left",command:"addColumnToLeft",className:"add-column-left"},{action:"Add column to right",command:"addColumnToRight",className:"add-column-right"},{action:"Remove column",command:"removeColumn",className:"remove-column"}],[{action:"Align column to left",command:"alignColumn",payload:{align:"left"},className:"align-column-left"},{action:"Align column to center",command:"alignColumn",payload:{align:"center"},className:"align-column-center"},{action:"Align column to right",command:"alignColumn",payload:{align:"right"},className:"align-column-right"}],[{action:"Remove table",command:"removeTable",className:"remove-table"}]];function E38(Z,X){return B38.map(function(K){return K.map(function(z){var{action:J,command:Q,payload:Y,disableInThead:q,className:G}=z;return{label:v.get(J),onClick:function(){Z.emit("command",Q,Y)},disabled:X&&!!q,className:G}})}).concat()}function P38(Z){return new K8({props:{handleDOMEvents:{contextmenu:function(X,K){var z=cQ(K.target,X.dom);if(z){K.preventDefault();var J=K,Q=J.clientX,Y=J.clientY,q=X.dom.parentNode.getBoundingClientRect(),G=q.left,U=q.top,V=z.nodeName==="TH";return Z.emit("contextmenu",{pos:{left:Q-G+10+"px",top:Y-U+30+"px"},menuGroups:E38(Z,V),tableCell:z}),!0}return!1}}}})}function O38(){return new K8({props:{handleDOMEvents:{mousedown:function(Z,X){var K=X,z=K.clientX,J=K.clientY,Q=Z.posAtCoords({left:z,top:J});if(Q){var Y=Z.state,q=Y.doc,G=Y.tr,U=q.resolve(Q.pos),V=G3(U),W=X.target,A=getComputedStyle(W,":before"),j=X,H=j.offsetX,R=j.offsetY;if(!V||!c6(A,H,R))return!1;X.preventDefault();var F=U.before(V.depth),B=V.node.attrs;return G.setNodeMarkup(F,null,P(P({},B),{checked:!B.checked})),Z.dispatch(G),!0}return!1}}}})}var L38=["image","link","customBlock","frontMatter"],M38=["strong","strike","emph","code"],sQ=["bulletList","orderedList","taskList"];function D38(Z,X){var K=Z.type.name;if(K==="listItem")return Z.attrs.task?"taskList":X.type.name;if(K.indexOf("table")!==-1)return"table";return K}function I38(Z,X){X[Z]={active:!0},sQ.filter(function(K){return K!==Z}).forEach(function(K){if(X[K])delete X[K]})}function C38(Z,X,K,z){M38.forEach(function(J){var Q=K.marks[J],Y=Z.marksAcross(X)||[],q=!!Q.isInSet(Y);if(q)z[J]={active:!0}})}function S38(Z,X,K){var{$from:z,$to:J,from:Q,to:Y}=Z,q={indent:{active:!1,disabled:!0},outdent:{active:!1,disabled:!0}};return X.nodesBetween(Q,Y,function(G,U,V){var W=D38(G,V);if(F8(L38,W))return;if(F8(sQ,W))I38(W,q),q.indent.disabled=!1,q.outdent.disabled=!1;else if(W==="paragraph"||W==="text")C38(z,J,K,q);else q[W]={active:!0}}),q}function k38(Z){return new K8({view:function(){return{update:function(X){var K=X.state,z=K.selection,J=K.doc,Q=K.schema;Z.emit("changeToolbarState",{toolbarState:S38(z,J,Q)})}}}})}var b38=function(){function Z(X,K,z,J){var Q=this;this.openEditor=function(){if(Q.innerEditorView)throw new Error("The editor is already opened.");Q.dom.draggable=!1,Q.wrapper.style.display="none",Q.innerViewContainer.style.display="block",Q.innerEditorView=new T3(Q.innerViewContainer,{state:w5.create({doc:Q.node,plugins:[p0({"Mod-z":function(){return s0(Q.innerEditorView.state,Q.innerEditorView.dispatch)},"Shift-Mod-z":function(){return C7(Q.innerEditorView.state,Q.innerEditorView.dispatch)},Tab:function(Y,q){return q(Y.tr.insertText("\t")),!0},Enter:y9,Escape:function(){return Q.cancelEditing(),!0},"Ctrl-Enter":function(){return Q.saveAndFinishEditing(),!0}}),$9()]}),dispatchTransaction:function(Y){return Q.dispatchInner(Y)},handleDOMEvents:{mousedown:function(){if(Q.editorView.hasFocus())Q.innerEditorView.focus();return!0},blur:function(){return Q.saveAndFinishEditing(),!0}}}),Q.innerEditorView.focus()},this.node=X,this.editorView=K,this.getPos=z,this.toDOMAdaptor=J,this.innerEditorView=null,this.canceled=!1,this.dom=document.createElement("div"),this.dom.className=y("custom-block"),this.wrapper=document.createElement("div"),this.wrapper.className=y("custom-block-view"),this.createInnerViewContainer(),this.renderCustomBlock(),this.dom.appendChild(this.innerViewContainer),this.dom.appendChild(this.wrapper)}return Z.prototype.renderToolArea=function(){var X=this,K=document.createElement("div"),z=document.createElement("span"),J=document.createElement("button");K.className="tool",z.textContent=this.node.attrs.info,z.className="info",J.type="button",J.addEventListener("click",function(){return X.openEditor()}),K.appendChild(z),K.appendChild(J),this.wrapper.appendChild(K)},Z.prototype.renderCustomBlock=function(){var X=this.toDOMAdaptor.getToDOMNode(this.node.attrs.info);if(X){var K=X(this.node);while(this.wrapper.hasChildNodes())this.wrapper.removeChild(this.wrapper.lastChild);if(K)this.wrapper.appendChild(K);this.renderToolArea()}},Z.prototype.createInnerViewContainer=function(){this.innerViewContainer=document.createElement("div"),this.innerViewContainer.className=y("custom-block-editor"),this.innerViewContainer.style.display="none"},Z.prototype.closeEditor=function(){if(this.innerEditorView)this.innerEditorView.destroy(),this.innerEditorView=null,this.innerViewContainer.style.display="none";this.wrapper.style.display="block"},Z.prototype.saveAndFinishEditing=function(){var X=this.editorView.state.selection.to,K=this.editorView.state;this.editorView.dispatch(K.tr.setSelection(n(K.tr,X))),this.editorView.focus(),this.renderCustomBlock(),this.closeEditor()},Z.prototype.cancelEditing=function(){var X=QK(this.innerEditorView.state);this.canceled=!0;while(X--)s0(this.innerEditorView.state,this.innerEditorView.dispatch),s0(this.editorView.state,this.editorView.dispatch);this.canceled=!1;var K=this.editorView.state.selection.to,z=this.editorView.state;this.editorView.dispatch(z.tr.setSelection(_.create(z.doc,K))),this.editorView.focus(),this.closeEditor()},Z.prototype.dispatchInner=function(X){var K=this.innerEditorView.state.applyTransaction(X),z=K.state,J=K.transactions;if(this.innerEditorView.updateState(z),!this.canceled&&c8(this.getPos)){var Q=this.editorView.state.tr,Y=k8.offset(this.getPos()+1);for(var q=0;q<J.length;q+=1){var G=J[q].steps;for(var U=0;U<G.length;U+=1)Q.step(G[U].map(Y))}if(Q.docChanged)this.editorView.dispatch(Q)}},Z.prototype.update=function(X){if(!X.sameMarkup(this.node))return!1;if(this.node=X,!this.innerEditorView)this.renderCustomBlock();return!0},Z.prototype.stopEvent=function(X){return!!this.innerEditorView&&!!X.target&&this.innerEditorView.dom.contains(X.target)},Z.prototype.ignoreMutation=function(){return!0},Z.prototype.destroy=function(){this.dom.removeEventListener("dblclick",this.openEditor),this.closeEditor()},Z}(),Hz="image-link",y38=function(){function Z(X,K,z,J){var Q=this,Y;this.handleMousedown=function(q){q.preventDefault();var{target:G,offsetX:U,offsetY:V}=q;if(Q.imageLink&&c8(Q.getPos)&&kJ(G,Hz)){var W=getComputedStyle(G,":before");if(q.stopPropagation(),c6(W,U,V)){var A=Q.view.state.tr,j=Q.getPos();A.setSelection(n(A,j,j+1)),Q.view.dispatch(A),Q.eventEmitter.emit("openPopup","link",Q.imageLink.attrs)}}},this.node=X,this.view=K,this.getPos=z,this.eventEmitter=J,this.imageLink=(Y=X.marks.filter(function(q){var G=q.type;return G.name==="link"})[0])!==null&&Y!==void 0?Y:null,this.dom=this.createElement(),this.bindEvent()}return Z.prototype.createElement=function(){var X=this.createImageElement(this.node);if(this.imageLink){var K=document.createElement("span");return K.className=Hz,K.appendChild(X),K}return X},Z.prototype.createImageElement=function(X){var K=document.createElement("img"),z=X.attrs,J=z.imageUrl,Q=z.altText,Y=X8(X.attrs);if(K.src=J,Q)K.alt=Q;return d6(Y,K),K},Z.prototype.bindEvent=function(){if(this.imageLink)this.dom.addEventListener("mousedown",this.handleMousedown)},Z.prototype.stopEvent=function(){return!0},Z.prototype.destroy=function(){if(this.imageLink)this.dom.removeEventListener("mousedown",this.handleMousedown)},Z}(),N38="toastui-editor-ww-code-block",T38="toastui-editor-ww-code-block-language",x38=function(){function Z(X,K,z,J){var Q=this;this.contentDOM=null,this.input=null,this.timer=null,this.handleMousedown=function(Y){var q=Y.target,G=getComputedStyle(q,":after");if(G.backgroundImage!=="none"&&c8(Q.getPos)){var U=Q.view.coordsAtPos(Q.getPos()),V=U.top,W=U.right;Q.createLanguageEditor({top:V,right:W})}},this.handleKeydown=function(Y){if(Y.key==="Enter"&&Q.input)Y.preventDefault(),Q.changeLanguage()},this.node=X,this.view=K,this.getPos=z,this.eventEmitter=J,this.createElement(),this.bindDOMEvent(),this.bindEvent()}return Z.prototype.createElement=function(){var X=this.node.attrs.language,K=document.createElement("div");K.setAttribute("data-language",X||"text"),K.className=N38;var z=this.createCodeBlockElement(),J=z.firstChild;K.appendChild(z),this.dom=K,this.contentDOM=J},Z.prototype.createCodeBlockElement=function(){var X=document.createElement("pre"),K=document.createElement("code"),z=this.node.attrs.language,J=X8(this.node.attrs);if(z)K.setAttribute("data-language",z);return d6(J,X),X.appendChild(K),X},Z.prototype.createLanguageEditor=function(X){var K=this,z=X.top,J=X.right,Q=document.createElement("span");Q.className=T38;var Y=document.createElement("input");Y.type="text",Y.value=this.node.attrs.language,Q.appendChild(Y),this.view.dom.parentElement.appendChild(Q);var q=Q.clientWidth;V5(Q,{top:z+10+"px",left:J-q-10+"px",width:q+"px"}),this.input=Y,this.input.addEventListener("blur",function(){return K.changeLanguage()}),this.input.addEventListener("keydown",this.handleKeydown),this.clearTimer(),this.timer=setTimeout(function(){K.input.focus()})},Z.prototype.bindDOMEvent=function(){if(this.dom)this.dom.addEventListener("click",this.handleMousedown)},Z.prototype.bindEvent=function(){var X=this;this.eventEmitter.listen("scroll",function(){if(X.input)X.reset()})},Z.prototype.changeLanguage=function(){if(this.input&&c8(this.getPos)){var X=this.input.value;this.reset();var K=this.getPos(),z=this.view.state.tr;z.setNodeMarkup(K,null,{language:X}),this.view.dispatch(z)}},Z.prototype.reset=function(){var X;if((X=this.input)===null||X===void 0?void 0:X.parentElement){var K=this.input.parentElement;this.input=null,B0(K)}},Z.prototype.clearTimer=function(){if(this.timer)clearTimeout(this.timer),this.timer=null},Z.prototype.stopEvent=function(){return!0},Z.prototype.update=function(X){if(!X.sameMarkup(this.node))return!1;return this.node=X,!0},Z.prototype.destroy=function(){if(this.reset(),this.clearTimer(),this.dom)this.dom.removeEventListener("click",this.handleMousedown)},Z}(),g38=/MsoListParagraph/,nQ=/style=(.|\n)*mso-/,aQ=/mso-list:(.*)/,u38=/O:P/,w38=/^(n|u|l)/,v38="p.MsoListParagraph";function $38(Z){return nQ.test(Z)}function h38(Z){var X=[],K=document.createTreeWalker(Z,1,null,!1);while(K.nextNode()){var z=K.currentNode;if(A1(z)){var J=z,Q=J.outerHTML,Y=J.textContent,q=nQ.test(Q),G=aQ.test(Q);if(q&&!G&&Y)X.push([z,!0]);else if(u38.test(z.nodeName)||q&&!Y||G)X.push([z,!1])}}return X.forEach(function(U){var V=U[0],W=U[1];if(W)XV(V);else B0(V)}),Z.innerHTML.trim()}function f38(Z,X){var K=Z.getAttribute("style");if(K){var z=K.match(aQ),J=z[1],Q=J.trim().split(" "),Y=Q[1],q=parseInt(Y.replace("level",""),10),G=w38.test(Z.textContent||"");return{id:X,level:q,prev:null,parent:null,children:[],unordered:G,contents:h38(Z)}}return null}function _38(Z,X){if(X.level<Z.level)X.children.push(Z),Z.parent=X;else{while(X){if(X.level===Z.level)break;X=X.parent}if(X){if(Z.prev=X,Z.parent=X.parent,Z.parent)Z.parent.children.push(Z)}}}function m38(Z){var X=[];return Z.forEach(function(K,z){var J=X[z-1],Q=f38(K,z);if(Q){if(J)_38(Q,J);X.push(Q)}}),X}function rQ(Z){var X=Z[0].unordered?"ul":"ol",K=document.createElement(X);return Z.forEach(function(z){var{children:J,contents:Q}=z,Y=document.createElement("li");if(Y.innerHTML=Q,K.appendChild(Y),J.length)K.appendChild(rQ(J))}),K}function l38(Z){var X=m38(Z),K=X.filter(function(z){var J=z.parent;return!J});return rQ(K)}function c38(Z){while(Z){if(A1(Z))break;Z=Z.nextSibling}return Z?!g38.test(Z.className):!0}function p38(Z){var X=document.createElement("div");X.innerHTML=Z;var K=[],z=tU(X,v38);z.forEach(function(Q){var Y=c38(Q.nextSibling);if(K.push(Q),Y){var q=l38(K),G=Q.nextSibling;if(G)ZV(q,G);else eU(X,q);K=[]}B0(Q)});var J=z.length?"<p></p>":"";return""+J+X.innerHTML}var jz="<!--StartFragment-->",i38="<!--EndFragment-->";function d38(Z){var X=Z.indexOf(jz),K=Z.lastIndexOf(i38);if(X>-1&&K>-1)Z=Z.slice(X+jz.length,K);return Z.replace(/<br[^>]*>/g,xJ)}function s38(Z){if(/<\/td>((?!<\/tr>)[\s\S])*$/i.test(Z))Z="<tr>"+Z+"</tr>";if(/<\/tr>((?!<\/table>)[\s\S])*$/i.test(Z))Z="<table>"+Z+"</table>";return Z}function n38(Z){if(Z=d38(Z),Z=s38(Z),$38(Z))Z=p38(Z);return Z}function a38(Z){var X=Z.reduce(function(K,z){return K.childCount>z.childCount?K:z});return X.childCount}function oQ(Z,X,K){var z=[],J=Z.childCount;for(var Q=0;Q<J;Q+=1)if(!Z.child(Q).attrs.extended){var Y=Q<J?K.create(Z.child(Q).attrs,Z.child(Q).content):K.createAndFill();z.push(Y)}return z}function tQ(Z,X,K){var z=K.nodes,J=z.tableRow,Q=z.tableHeadCell,Y=oQ(Z,X,Q);return J.create(null,Y)}function eQ(Z,X,K){var z=K.nodes,J=z.tableRow,Q=z.tableBodyCell,Y=oQ(Z,X,Q);return J.create(null,Y)}function r38(Z,X){var K=X.nodes,z=K.tableRow,J=K.tableBodyCell,Q=[];for(var Y=0;Y<Z;Y+=1){var q=J.createAndFill();Q.push(q)}return z.create({dummyRowForPasting:!0},Q)}function ZY(Z){var X=[],K=[];if(Z.firstChild.type.name==="tableHead"){var z=Z.firstChild;z.forEach(function(Q){return X.push(Q)})}if(Z.lastChild.type.name==="tableBody"){var J=Z.lastChild;J.forEach(function(Q){return K.push(Q)})}return w8(w8([],X),K)}function o38(Z,X,K){var z=tQ(Z,X,K);return K.nodes.tableHead.create(null,z)}function Rz(Z,X,K){var z=Z.map(function(Q){return eQ(Q,X,K)});if(!Z.length){var J=r38(X,K);z.push(J)}return K.nodes.tableBody.create(null,z)}function t38(Z,X,K,z){var J=a38(Z);if(K&&z)return X.nodes.table.create(null,[Rz(Z,J,X)]);var Q=Z[0],Y=Z.slice(1),q=[o38(Q,J,X)];if(Y.length)q.push(Rz(Y,J,X));return X.nodes.table.create(null,q)}function e38(Z,X,K){var z=[],J=Z.content,Q=Z.openStart,Y=Z.openEnd;return J.forEach(function(q){if(q.type.name==="table"){var G=iQ(new S(M.from(q),0,0));if(G){var U=ZY(G),V=G.firstChild.type.name==="tableBody",W=t38(U,X,V,K);z.push(W)}}else z.push(q)}),new S(M.from(z),Q,Y)}var Z78=4,X78=2;function m7(Z){return Z*Z78}function K78(Z,X,K){var z=[],J=ZY(Z),Q=J[0].childCount,Y=J.length,q=X.startRowIdx===0,G=J.slice(0,Y);if(q){var U=G.shift();if(U){var V=tQ(U,Q,K).content;z.push(V)}}return G.forEach(function(W){if(!W.attrs.dummyRowForPasting){var A=eQ(W,Q,K).content;z.push(A)}}),z}function z78(Z,X,K){var{startRowIdx:z,startColIdx:J}=X,Q=K.length,Y=0,q=function(j){var H=K[j].childCount;K[j].forEach(function(R){var F=R.attrs,B=F.colspan;if(B>1)H+=B-1}),Y=Math.max(Y,H)};for(var G=0;G<Q;G+=1)q(G);var U=z+Q-1,V=J+Y-1,W=Math.max(U+1-Z.totalRowCount,0),A=Math.max(V+1-Z.totalColumnCount,0);return{startRowIdx:z,startColIdx:J,endRowIdx:U,endColIdx:V,addedRowCount:W,addedColumnCount:A}}function J78(Z,X){var{startRowIdx:K,startColIdx:z,endRowIdx:J,endColIdx:Q,addedRowCount:Y,addedColumnCount:q}=Z;for(var G=K;G<=J-Y;G+=1)X.push({rowIdx:G,startColIdx:z,endColIdx:Q-q})}function Q78(Z,X,K,z,J){var{startRowIdx:Q,startColIdx:Y,endRowIdx:q,endColIdx:G,addedRowCount:U,addedColumnCount:V}=z,W=K.totalRowCount,A=0;for(var j=0;j<W;j+=1){var H=K.getCellInfo(j,G-V),R=H.offset,F=H.nodeSize,B=Z.mapping.map(R+F),O=_7(V,j,X);if(Z.insert(B,O),j>=Q&&j<=q-U){var L=K.getCellInfo(j,G-V),D=Z.mapping.map(L.offset),I=B+m7(V);J[A]={rowIdx:j,startColIdx:Y,endColIdx:G,dummyOffsets:[D,I]},A+=1}}}function Y78(Z,X,K,z,J){var{addedRowCount:Q,addedColumnCount:Y,startColIdx:q,endColIdx:G}=z,U=Z.mapping.maps.length,V=K.tableEndOffset-2,W=lQ(Q,K.totalColumnCount+Y,X),A=V;Z.insert(Z.mapping.slice(U).map(A),W);for(var j=0;j<Q;j+=1){var H=A+m7(q)+1,R=A+m7(G+1)+1,F=A+m7(K.totalColumnCount+Y)+X78;J.push({rowIdx:j+K.totalRowCount,startColIdx:q,endColIdx:G,dummyOffsets:[H,R]}),A=F}}function q78(Z,X,K,z){var J=Z.mapping.maps.length;K.forEach(function(Q,Y){var{rowIdx:q,startColIdx:G,endColIdx:U,dummyOffsets:V}=Q,W=Z.mapping.slice(J),A=new S(X[Y],0,0),j=V?V[0]:z.getCellStartOffset(q,G),H=V?V[1]:z.getCellEndOffset(q,U);Z.replace(W.map(j),W.map(H),A)})}function G78(Z,X){var K=Z.state,z=K.selection,J=K.schema,Q=K.tr,Y=q5(z),q=Y.anchor,G=Y.head;if(q&&G){var U=iQ(X);if(!U)return!1;var V=H8.create(q),W=V.getRectOffsets(q,G),A=K78(U,W,J),j=z78(V,W,A),H=[];if(V78(V,j)){if(J78(j,H),j.addedColumnCount)Q78(Q,J,V,j,H);if(j.addedRowCount)Y78(Q,J,V,j,H);q78(Q,A,H,V),Z.dispatch(Q),U78(Z,H,V.getCellInfo(0,0).offset)}return!0}return!1}function U78(Z,X,K){var z=Z.state,J=z.tr,Q=z.doc,Y=H8.create(Q.resolve(K)),q=X[0],G=q.rowIdx,U=q.startColIdx,V=C8(X),W=V.rowIdx,A=V.endColIdx,j=Y.getCellInfo(G,U).offset,H=Y.getCellInfo(W,A).offset;Z.dispatch(J.setSelection(new q4(Q.resolve(j),Q.resolve(H))))}function V78(Z,X){var K=Z.getSpannedOffsets(X),z=e0(K),J=z.rowCount,Q=z.columnCount,Y=e0(X),q=Y.rowCount,G=Y.columnCount;return J===q&&Q===G}var W78=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"doc"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{content:"block+"}},enumerable:!1,configurable:!0}),X}(d),A78=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"paragraph"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{content:"inline*",group:"block",attrs:P({},U8()),parseDOM:[{tag:"p"}],toDOM:function(K){var z=K.attrs;return["p",X8(z),0]}}},enumerable:!1,configurable:!0}),X}(d),H78=/\s{1,4}$/,j78=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"text"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{group:"inline"}},enumerable:!1,configurable:!0}),X.prototype.addSpaces=function(){return function(K,z){var{selection:J,tr:Q}=K,Y=J.$from,q=J.$to,G=Y.blockRange(q);if(G&&!q3(Y)&&!J1(Y))return z(Q.insertText("    ",Y.pos,q.pos)),!0;return!1}},X.prototype.removeSpaces=function(){return function(K,z){var{selection:J,tr:Q}=K,Y=J.$from,q=J.$to,G=J.from,U=Y.blockRange(q);if(U&&!q3(Y)&&!J1(Y)){var V=Y.nodeBefore;if(V&&V.isText){var W=V.text,A=W.replace(H78,""),j=W.length-A.length;return z(Q.delete(G-j,G)),!0}}return!1}},X.prototype.keymaps=function(){return{Tab:this.addSpaces(),"Shift-Tab":this.removeSpaces()}},X}(d),R78=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"heading"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"levels",{get:function(){return[1,2,3,4,5,6]},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){var K=this.levels.map(function(z){return{tag:"h"+z,getAttrs:function(J){var Q=J.getAttribute("data-raw-html");return P({level:z},Q&&{rawHTML:Q})}}});return{attrs:P({level:{default:1},headingType:{default:"atx"},rawHTML:{default:null}},U8()),content:"inline*",group:"block",defining:!0,parseDOM:K,toDOM:function(z){var J=z.attrs;return["h"+J.level,X8(J),0]}}},enumerable:!1,configurable:!0}),X.prototype.commands=function(){return function(K){return function(z,J){var Q=z.schema.nodes[K.level?"heading":"paragraph"];return L7(Q,K)(z,J)}}},X}(d),F78=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"codeBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{content:"text*",group:"block",attrs:P({language:{default:null},rawHTML:{default:null}},U8()),code:!0,defining:!0,marks:"",parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:function(K){var z=K.getAttribute("data-raw-html"),J=K.firstElementChild;return P({language:(J===null||J===void 0?void 0:J.getAttribute("data-language"))||null},z&&{rawHTML:z})}}],toDOM:function(K){var z=K.attrs;return[z.rawHTML||"pre",["code",P({"data-language":z.language},X8(z)),0]]}}},enumerable:!1,configurable:!0}),X.prototype.commands=function(){return function(){return function(K,z){return L7(K.schema.nodes.codeBlock)(K,z)}}},X.prototype.moveCursor=function(K){var z=this;return function(J,Q){var{tr:Y,doc:q,schema:G}=J,U=J.selection.$from,V=z.context.view;if(V.endOfTextblock(K)&&U.node().type.name==="codeBlock"){var W=U.parent.textContent.split(`
`),A=K==="up"?U.start():U.end(),j=K==="up"?[A,W[0].length+A]:[A-C8(W).length,A],H=q.resolve(K==="up"?U.before():U.after()),R=K==="up"?H.nodeBefore:H.nodeAfter;if(OU(U.pos,j[0],j[1])&&!R){var F=m6(Y,H,G);if(F)return Q(F),!0}}return!1}},X.prototype.keymaps=function(){var K=this.commands()();return{"Shift-Mod-p":K,"Shift-Mod-P":K,ArrowUp:this.moveCursor("up"),ArrowDown:this.moveCursor("down")}},X}(d),B78=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"bulletList"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{content:"listItem+",group:"block",attrs:P({rawHTML:{default:null}},U8()),parseDOM:[P1("ul")],toDOM:function(K){var z=K.attrs;return["ul",X8(z),0]}}},enumerable:!1,configurable:!0}),X.prototype.changeList=function(){return function(K,z){return mQ(K.schema.nodes.bulletList)(K,z)}},X.prototype.commands=function(){return{bulletList:this.changeList,taskList:t08}},X.prototype.keymaps=function(){var K=this.changeList(),z=Y4(),J=z.indent,Q=z.outdent;return{"Mod-u":K,"Mod-U":K,Tab:J(),"Shift-Tab":Q()}},X}(d),E78=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"orderedList"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{content:"listItem+",group:"block",attrs:P({order:{default:1},rawHTML:{default:null}},U8()),parseDOM:[{tag:"ol",getAttrs:function(K){var z=K.getAttribute("start"),J=K.getAttribute("data-raw-html");return P({order:K.hasAttribute("start")?Number(z):1},J&&{rawHTML:J})}}],toDOM:function(K){var z=K.attrs;return[z.rawHTML||"ol",P({start:z.order===1?null:z.order},X8(z)),0]}}},enumerable:!1,configurable:!0}),X.prototype.commands=function(){return function(){return function(K,z){return mQ(K.schema.nodes.orderedList)(K,z)}}},X.prototype.keymaps=function(){var K=this.commands()(),z=Y4(),J=z.indent,Q=z.outdent;return{"Mod-o":K,"Mod-O":K,Tab:J(),"Shift-Tab":Q()}},X}(d),P78=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"listItem"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{content:"paragraph block*",selectable:!1,attrs:{task:{default:!1},checked:{default:!1},rawHTML:{default:null}},defining:!0,parseDOM:[{tag:"li",getAttrs:function(K){var z=K.getAttribute("data-raw-html");return P({task:K.hasAttribute("data-task"),checked:K.hasAttribute("data-task-checked")},z&&{rawHTML:z})}}],toDOM:function(K){var z=K.attrs,J=z.task,Q=z.checked;if(!J)return[z.rawHTML||"li",0];var Y=["task-list-item"];if(Q)Y.push("checked");return[z.rawHTML||"li",P({class:Y.join(" "),"data-task":J},Q&&{"data-task-checked":Q}),0]}}},enumerable:!1,configurable:!0}),X.prototype.liftToPrevListItem=function(){return function(K,z){var{selection:J,tr:Q,schema:Y}=K,q=J.$from,G=J.empty,U=Y.nodes.listItem,V=q.parent,W=q.node(-1);if(G&&!V.childCount&&W.type===U){if(q.index(-2)>=1)return Q.delete(q.start(-1)-1,q.end(-1)),z(Q),!0;var A=q.node(-3);if(A.type===U)return Q.delete(q.start(-2)-1,q.end(-1)),z(Q),!0}return!1}},X.prototype.keymaps=function(){var K=function(z,J){return z38(z.schema.nodes.listItem)(z,J)};return{Backspace:this.liftToPrevListItem(),Enter:K}},X}(d),O78=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"blockQuote"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{attrs:P({rawHTML:{default:null}},U8()),content:"block+",group:"block",parseDOM:[P1("blockquote")],toDOM:function(K){var z=K.attrs;return["blockquote",X8(z),0]}}},enumerable:!1,configurable:!0}),X.prototype.commands=function(){return function(){return function(K,z){return tX(K.schema.nodes.blockQuote)(K,z)}}},X.prototype.keymaps=function(){var K=this.commands()();return{"Alt-q":K,"Alt-Q":K}},X}(d),L78={left:y78,right:b78,up:N78,down:T78};function M78(Z,X,K){var z=K[0],J=K[1],Q=X.resolve(Z.before(z-1));return J===z&&!Q.nodeBefore}function D78(Z){var X,K=Z.depth,z;while(K){if(z=Z.node(K),z.type.name==="tableBodyCell")break;if(z.type.name==="listItem"){var J=Z.node(K-1),Q=J.lastChild===z,Y=((X=z.lastChild)===null||X===void 0?void 0:X.type.name)!=="paragraph";if(!Q)return!1;return!Y}K-=1}return!1}function I78(Z,X,K,z,J){var Q=X[0],Y=X[1],q=X[2];if(Z==="left"||Z==="up"){if(J&&!M78(K,z,[Q,Y]))return!1;var G=K.before(q),U=z.resolve(G).nodeBefore;if(U)return!1}return!0}function C78(Z,X,K,z,J){if(Z==="right"||Z==="down"){if(J&&!D78(K))return!1;var Q=K.after(X),Y=z.resolve(Q).nodeAfter;if(Y)return!1}return!0}function S78(Z,X,K,z){var J=X[0],Q=X[1],Y=J+3,q=Q>=Y,G=q?J+1:Q,U=I78(Z,[Q,Y,G],K,z,q),V=C78(Z,G,K,z,q);return U&&V}function Fz(Z,X,K){var z=K[0],J=K[1],Q=X.getRowspanStartInfo(z,J),Y=Z==="up"&&z===0,q=Z==="down"&&((Q===null||Q===void 0?void 0:Q.count)>1?z+Q.count-1:z)===X.totalRowCount-1;return Y||q}function k78(Z,X,K){var z=Z.doc.resolve(X.tableStartOffset-1);if(!z.nodeBefore)return m6(Z,z,K);return Z.setSelection($.near(z,-1))}function J6(Z,X,K,z){if(z===void 0)z=!1;var J=Z.doc.resolve(X.tableEndOffset);if(z||!J.nodeAfter)return m6(Z,J,K);return Z.setSelection($.near(J,1))}function b78(Z,X){var K=Z[0],z=Z[1],J=X.totalRowCount,Q=X.totalColumnCount,Y=z===Q-1,q=K===J-1&&Y;if(!q){var G=z+1,U=X.getColspanStartInfo(K,z);if((U===null||U===void 0?void 0:U.count)>1)G+=U.count-1;if(Y||G===Q)K+=1,G=0;var V=X.getCellInfo(K,G).offset;return V+2}return null}function y78(Z,X){var K=Z[0],z=Z[1],J=X.totalColumnCount,Q=z===0,Y=K===0&&Q;if(!Y){if(z-=1,Q)K-=1,z=J-1;var q=X.getCellInfo(K,z),G=q.offset,U=q.nodeSize;return G+U-2}return null}function N78(Z,X){var K=Z[0],z=Z[1];if(K>0){var J=X.getCellInfo(K-1,z),Q=J.offset,Y=J.nodeSize;return Q+Y-2}return null}function T78(Z,X){var K=Z[0],z=Z[1],J=X.totalRowCount;if(K<J-1){var Q=K+1,Y=X.getRowspanStartInfo(K,z);if((Y===null||Y===void 0?void 0:Y.count)>1)Q+=Y.count-1;var q=X.getCellInfo(Q,z).offset;return q+2}return null}function Bz(Z,X,K,z){var J=L78[Z],Q=J(K,z);if(Q){var Y=Z==="right"||Z==="down"?1:-1;return X.setSelection($.near(X.doc.resolve(Q),Y))}return null}function x78(Z,X,K){var z=K[0],J=K[1];if(Z==="up"||Z==="down")return!1;var{tableStartOffset:Q,tableEndOffset:Y}=X,q=X.getCellInfo(z,J),G=q.offset,U=q.nodeSize,V=Z==="left"?Q:Y,W=Z==="left"?G-2:G+U+3;return V===W}function g78(Z,X,K){var z=Z.doc.resolve(X.before(K-3));return Z.setSelection(new u(z))}function u78(Z,X,K){var z,J,Q;if(Z==="up")z=K.startRowIdx,J=0,Q=-1;else z=K.endRowIdx,J=X.totalColumnCount-1,Q=X.getCellInfo(z,J).nodeSize+1;return{targetRowIdx:z,insertColIdx:J,nodeSize:Q}}function w78(Z,X,K){var z=Z.getCellInfo(X,0).offset,J=Z.getCellInfo(X,K-1),Q=J.offset,Y=J.nodeSize;return{from:z,to:Q+Y}}var v78=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"table"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{content:"tableHead{1} tableBody{1}",group:"block",attrs:P({rawHTML:{default:null}},U8()),parseDOM:[P1("table")],toDOM:function(K){var z=K.attrs;return["table",X8(z),0]}}},enumerable:!1,configurable:!0}),X.prototype.addTable=function(){return function(K){if(K===void 0)K={rowCount:2,columnCount:1,data:[]};return function(z,J){var{rowCount:Q,columnCount:Y,data:q}=K,G=z.schema,U=z.selection,V=z.tr,W=U.from,A=U.to,j=U.$from,H=W===A;if(H&&!J1(j)){var R=G.nodes,F=R.tableHead,B=R.tableBody,O=q===null||q===void 0?void 0:q.slice(0,Y),L=q===null||q===void 0?void 0:q.slice(Y,q.length),D=U38(Y,G,O),I=lQ(Q-1,Y,G,L),k=G.nodes.table.create(null,[F.create(null,D),B.create(null,I)]);return J(V.replaceSelectionWith(k)),!0}return!1}}},X.prototype.removeTable=function(){return function(){return function(K,z){var{selection:J,tr:Q}=K,Y=H8.create(J.$anchor);if(Y){var{tableStartOffset:q,tableEndOffset:G}=Y,U=q-1,V=n(Q.delete(U,G),U);return z(Q.setSelection(V)),!0}return!1}}},X.prototype.addColumn=function(K){return function(){return function(z,J){var{selection:Q,tr:Y,schema:q}=z,G=q5(Q),U=G.anchor,V=G.head;if(U&&V){var W=H8.create(U),A=W.getRectOffsets(U,V),j=K==="left"?A.startColIdx:A.endColIdx+1,H=e0(A).columnCount,R=W.totalRowCount;for(var F=0;F<R;F+=1){var B=_7(H,F,q);Y.insert(Y.mapping.map(W.posAt(F,j)),B)}return J(Y),!0}return!1}}},X.prototype.removeColumn=function(){return function(){return function(K,z){var{selection:J,tr:Q}=K,Y=q5(J),q=Y.anchor,G=Y.head;if(q&&G){var U=H8.create(q),V=U.getRectOffsets(q,G),W=U.totalColumnCount,A=U.totalRowCount,j=e0(V).columnCount,H=j===W;if(H)return!1;var{startColIdx:R,endColIdx:F}=V,B=Q.mapping.maps.length;for(var O=0;O<A;O+=1)for(var L=F;L>=R;L-=1){var D=U.getCellInfo(O,L),I=D.offset,k=D.nodeSize,x=Q.mapping.slice(B).map(I),w=x+k;Q.delete(x,w)}return z(Q),!0}return!1}}},X.prototype.addRow=function(K){return function(){return function(z,J){var{selection:Q,schema:Y,tr:q}=z,G=q5(Q),U=G.anchor,V=G.head;if(U&&V){var W=H8.create(U),A=W.totalColumnCount,j=W.getRectOffsets(U,V),H=e0(j).rowCount,R=u78(K,W,j),F=R.targetRowIdx,B=R.insertColIdx,O=R.nodeSize,L=F===0;if(!L){var D=[],I=q.mapping.map(W.posAt(F,B))+O,k=[];for(var x=0;x<A;x+=1)k=k.concat(_7(1,F,Y));for(var w=0;w<H;w+=1)D.push(Y.nodes.tableRow.create(null,k));return J(q.insert(I,D)),!0}}return!1}}},X.prototype.removeRow=function(){return function(){return function(K,z){var{selection:J,tr:Q}=K,Y=q5(J),q=Y.anchor,G=Y.head;if(q&&G){var U=H8.create(q),V=U.totalRowCount,W=U.totalColumnCount,A=U.getRectOffsets(q,G),j=e0(A).rowCount,H=A.startRowIdx,R=A.endRowIdx,F=H===0,B=j===V-1;if(B||F)return!1;for(var O=R;O>=H;O-=1){var L=w78(U,O,W),D=L.from,I=L.to;Q.delete(D-1,I+1)}return z(Q),!0}return!1}}},X.prototype.alignColumn=function(){return function(K){if(K===void 0)K={align:"center"};return function(z,J){var Q=K.align,Y=z.selection,q=z.tr,G=q5(Y),U=G.anchor,V=G.head;if(U&&V){var W=H8.create(U),A=W.totalRowCount,j=W.getRectOffsets(U,V),H=j.startColIdx,R=j.endColIdx;for(var F=0;F<A;F+=1)for(var B=H;B<=R;B+=1)if(!W.extendedRowspan(F,B)&&!W.extendedColspan(F,B)){var O=W.getNodeAndPos(F,B),L=O.node,D=O.pos,I=V38(L,{align:Q});q.setNodeMarkup(D,null,I)}return J(q),!0}return!1}}},X.prototype.moveToCell=function(K){return function(z,J){var{selection:Q,tr:Y,schema:q}=z,G=q5(Q),U=G.anchor,V=G.head;if(U&&V){var W=H8.create(U),A=W.getCellIndex(U),j=void 0;if(Fz(K,W,A))j=J6(Y,W,q);else j=Bz(K,Y,A,W);if(j)return J(j),!0}return!1}},X.prototype.moveInCell=function(K){var z=this;return function(J,Q){var{selection:Y,tr:q,doc:G,schema:U}=J,V=Y.$from,W=z.context.view;if(!W.endOfTextblock(K))return!1;var A=I5(V,function(L){var D=L.type;return D.name==="tableHeadCell"||D.name==="tableBodyCell"});if(A){var j=I5(V,function(L){var D=L.type;return D.name==="paragraph"}),H=A.depth;if(j&&S78(K,[H,j.depth],V,G)){var R=q5(Y).anchor,F=H8.create(R),B=F.getCellIndex(R),O=void 0;if(x78(K,F,B))O=g78(q,V,H);else if(Fz(K,F,B)){if(K==="up")O=k78(q,F,U);else if(K==="down")O=J6(q,F,U)}else O=Bz(K,q,B,F);if(O)return Q(O),!0}}return!1}},X.prototype.deleteCells=function(){return function(K,z){var{schema:J,selection:Q,tr:Y}=K,q=q5(Q),G=q.anchor,U=q.head,V=Q instanceof _;if(G&&U&&!V){var W=H8.create(G),A=W.getRectOffsets(G,U),j=A.startRowIdx,H=A.startColIdx,R=A.endRowIdx,F=A.endColIdx;for(var B=j;B<=R;B+=1)for(var O=H;O<=F;O+=1)if(!W.extendedRowspan(B,O)&&!W.extendedColspan(B,O)){var L=W.getNodeAndPos(B,O),D=L.node,I=L.pos,k=_7(1,B,J,D.attrs);Y.replaceWith(Y.mapping.map(I),Y.mapping.map(I+D.nodeSize),k)}return z(Y),!0}return!1}},X.prototype.exitTable=function(){return function(K,z){var{selection:J,tr:Q,schema:Y}=K,q=J.$from,G=I5(q,function(A){var j=A.type;return j.name==="tableHeadCell"||j.name==="tableBodyCell"});if(G){var U=I5(q,function(A){var j=A.type;return j.name==="paragraph"});if(U){var V=q5(J).anchor,W=H8.create(V);return z(J6(Q,W,Y,!0)),!0}}return!1}},X.prototype.commands=function(){return{addTable:this.addTable(),removeTable:this.removeTable(),addColumnToLeft:this.addColumn("left"),addColumnToRight:this.addColumn("right"),removeColumn:this.removeColumn(),addRowToUp:this.addRow("up"),addRowToDown:this.addRow("down"),removeRow:this.removeRow(),alignColumn:this.alignColumn()}},X.prototype.keymaps=function(){var K=this.deleteCells();return{Tab:this.moveToCell("right"),"Shift-Tab":this.moveToCell("left"),ArrowUp:this.moveInCell("up"),ArrowDown:this.moveInCell("down"),ArrowLeft:this.moveInCell("left"),ArrowRight:this.moveInCell("right"),Backspace:K,"Mod-Backspace":K,Delete:K,"Mod-Delete":K,"Mod-Enter":this.exitTable()}},X}(d),$78=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"tableHead"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{content:"tableRow{1}",attrs:P({rawHTML:{default:null}},U8()),parseDOM:[P1("thead")],toDOM:function(K){var z=K.attrs;return["thead",X8(z),0]}}},enumerable:!1,configurable:!0}),X}(d),h78=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"tableBody"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{content:"tableRow+",attrs:P({rawHTML:{default:null}},U8()),parseDOM:[{tag:"tbody",getAttrs:function(K){var z=K.querySelectorAll("tr"),J=z[0].children.length,Q=K.getAttribute("data-raw-html");if(!J)return!1;return P({},Q&&{rawHTML:Q})}}],toDOM:function(K){var z=K.attrs;return["tbody",X8(z),0]}}},enumerable:!1,configurable:!0}),X}(d),f78=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"tableRow"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{content:"(tableHeadCell | tableBodyCell)*",attrs:P({rawHTML:{default:null}},U8()),parseDOM:[{tag:"tr",getAttrs:function(K){var z=K.children.length,J=K.getAttribute("data-raw-html");if(!z)return!1;return P({},J&&{rawHTML:J})}}],toDOM:function(K){var z=K.attrs;return["tr",X8(z),0]}}},enumerable:!1,configurable:!0}),X}(d),_78=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"tableHeadCell"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{content:"paragraph+",attrs:P({align:{default:null},className:{default:null},rawHTML:{default:null},colspan:{default:null},extended:{default:null}},U8()),isolating:!0,parseDOM:[hQ("th")],toDOM:function(K){var z=K.attrs,J=$Q(z);return["th",P(P({},J),X8(z)),0]}}},enumerable:!1,configurable:!0}),X}(d),m78=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"tableBodyCell"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{content:"(paragraph | bulletList | orderedList)+",attrs:{align:{default:null},className:{default:null},rawHTML:{default:null},colspan:{default:null},rowspan:{default:null},extended:{default:null}},isolating:!0,parseDOM:[hQ("td")],toDOM:function(K){var z=K.attrs,J=$Q(z);return["td",J,0]}}},enumerable:!1,configurable:!0}),X}(d),l78=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"image"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{inline:!0,attrs:P({imageUrl:{default:""},altText:{default:null},rawHTML:{default:null}},U8()),group:"inline",selectable:!1,parseDOM:[{tag:"img[src]",getAttrs:function(K){var z=O0(K,{RETURN_DOM_FRAGMENT:!0}).firstChild,J=z.getAttribute("src")||"",Q=z.getAttribute("data-raw-html"),Y=z.getAttribute("alt");return P({imageUrl:J,altText:Y},Q&&{rawHTML:Q})}}],toDOM:function(K){var z=K.attrs;return[z.rawHTML||"img",P(P({src:t0(z.imageUrl)},z.altText&&{alt:z.altText}),X8(z))]}}},enumerable:!1,configurable:!0}),X.prototype.addImage=function(){return function(K){return function(z,J){var{schema:Q,tr:Y}=z,q=K,G=q.imageUrl,U=q.altText;if(!G)return!1;var V=Q.nodes.image.createAndFill(P({imageUrl:G},U&&{altText:U}));return J(Y.replaceSelectionWith(V).scrollIntoView()),!0}}},X.prototype.commands=function(){return{addImage:this.addImage()}},X}(d),Ez=1,c78=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"thematicBreak"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{attrs:P({rawHTML:{default:null}},U8()),group:"block",parseDOM:[{tag:"hr"}],selectable:!1,toDOM:function(K){var z=K.attrs;return["div",X8(z),[z.rawHTML||"hr"]]}}},enumerable:!1,configurable:!0}),X.prototype.hr=function(){var K=this;return function(){return function(z,J){var Q,Y=z.selection,q=Y.$from,G=Y.$to;if(q===G){var U=z.doc,V=z.schema.nodes,W=V.thematicBreak,A=V.paragraph,j=[W.create()],H=q.node(Ez),R=U.child(U.childCount-1)===H,F=U.resolve(q.after(Ez)),B=((Q=q.nodeAfter)===null||Q===void 0?void 0:Q.type.name)===K.name;if(R||B)j.push(A.create());return J(z.tr.insert(F.pos,j).scrollIntoView()),!0}return!1}}},X.prototype.commands=function(){return{hr:this.hr()}},X.prototype.keymaps=function(){var K=this.hr()();return{"Mod-l":K,"Mod-L":K}},X}(d),p78=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"strong"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){var K=["b","strong"].map(function(z){return{tag:z,getAttrs:function(J){var Q=J.getAttribute("data-raw-html");return P({},Q&&{rawHTML:Q})}}});return{attrs:P({rawHTML:{default:null}},U8()),parseDOM:K,toDOM:function(z){var J=z.attrs;return[J.rawHTML||"strong",X8(J)]}}},enumerable:!1,configurable:!0}),X.prototype.bold=function(){return function(){return function(K,z){return d0(K.schema.marks.strong)(K,z)}}},X.prototype.commands=function(){return{bold:this.bold()}},X.prototype.keymaps=function(){var K=this.bold()();return{"Mod-b":K,"Mod-B":K}},X}(a),i78=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"emph"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){var K=["i","em"].map(function(z){return{tag:z,getAttrs:function(J){var Q=J.getAttribute("data-raw-html");return P({},Q&&{rawHTML:Q})}}});return{attrs:P({rawHTML:{default:null}},U8()),parseDOM:K,toDOM:function(z){var J=z.attrs;return[J.rawHTML||"em",X8(J)]}}},enumerable:!1,configurable:!0}),X.prototype.italic=function(){return function(){return function(K,z){return d0(K.schema.marks.emph)(K,z)}}},X.prototype.commands=function(){return{italic:this.italic()}},X.prototype.keymaps=function(){var K=this.italic()();return{"Mod-i":K,"Mod-I":K}},X}(a),d78=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"strike"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){var K=["s","del"].map(function(z){return{tag:z,getAttrs:function(J){var Q=J.getAttribute("data-raw-html");return P({},Q&&{rawHTML:Q})}}});return{attrs:P({rawHTML:{default:null}},U8()),parseDOM:K,toDOM:function(z){var J=z.attrs;return[J.rawHTML||"del",X8(J)]}}},enumerable:!1,configurable:!0}),X.prototype.commands=function(){return function(){return function(K,z){return d0(K.schema.marks.strike)(K,z)}}},X.prototype.keymaps=function(){var K=this.commands()();return{"Mod-s":K,"Mod-S":K}},X}(a),s78=function(Z){b(X,Z);function X(K){var z=Z.call(this)||this;return z.linkAttributes=K,z}return Object.defineProperty(X.prototype,"name",{get:function(){return"link"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){var K=this;return{attrs:P({linkUrl:{default:""},title:{default:null},rawHTML:{default:null}},U8()),inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(z){var J=O0(z,{RETURN_DOM_FRAGMENT:!0}).firstChild,Q=J.getAttribute("href")||"",Y=J.getAttribute("title")||"",q=J.getAttribute("data-raw-html");return P({linkUrl:Q,title:Y},q&&{rawHTML:q})}}],toDOM:function(z){var J=z.attrs;return[J.rawHTML||"a",P(P({href:t0(J.linkUrl)},K.linkAttributes),X8(J))]}}},enumerable:!1,configurable:!0}),X.prototype.addLink=function(){return function(K){return function(z,J){var Q=K,Y=Q.linkUrl,q=Q.linkText,G=q===void 0?"":q,U=z.schema,V=z.tr,W=z.selection,A=W.empty,j=W.from,H=W.to;if(j&&H&&Y){var R={linkUrl:Y},F=U.mark("link",R);if(A&&G){var B=R8(U,G,F);V.replaceRangeWith(j,H,B)}else V.addMark(j,H,F);return J(V.scrollIntoView()),!0}return!1}}},X.prototype.toggleLink=function(){return function(K){return function(z,J){return d0(z.schema.marks.link,K)(z,J)}}},X.prototype.commands=function(){return{addLink:this.addLink(),toggleLink:this.toggleLink()}},X}(a),n78=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"code"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{attrs:P({rawHTML:{default:null}},U8()),parseDOM:[{tag:"code",getAttrs:function(K){var z=K.getAttribute("data-raw-html");return P({},z&&{rawHTML:z})}}],toDOM:function(K){var z=K.attrs;return[z.rawHTML||"code",X8(z)]}}},enumerable:!1,configurable:!0}),X.prototype.commands=function(){return function(){return function(K,z){return d0(K.schema.marks.code)(K,z)}}},X.prototype.keymaps=function(){var K=this.commands()();return{"Shift-Mod-c":K,"Shift-Mod-C":K}},X}(a),a78=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"customBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{content:"text*",group:"block",attrs:{info:{default:null}},atom:!0,code:!0,defining:!0,parseDOM:[{tag:"div[data-custom-info]",getAttrs:function(K){var z=K.getAttribute("data-custom-info");return{info:z}}}],toDOM:function(K){var z=K.attrs;return["div",{"data-custom-info":z.info||null},0]}}},enumerable:!1,configurable:!0}),X.prototype.commands=function(){return function(K){return function(z,J){return(K===null||K===void 0?void 0:K.info)?L7(z.schema.nodes.customBlock,K)(z,J):!1}}},X}(d),r78=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"frontMatter"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{content:"text*",group:"block",code:!0,defining:!0,parseDOM:[{preserveWhitespace:"full",tag:"div[data-front-matter]"}],toDOM:function(){return["div",{"data-front-matter":"true"},0]}}},enumerable:!1,configurable:!0}),X.prototype.commands=function(){return function(){return function(K,z,J){var Q=K.selection.$from;if(J.endOfTextblock("down")&&Q.node().type.name==="frontMatter")return O7(K,z);return!1}}},X.prototype.keymaps=function(){return{Enter:this.commands()()}},X}(d),o78=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(X.prototype,"name",{get:function(){return"htmlComment"},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"schema",{get:function(){return{content:"text*",group:"block",code:!0,defining:!0,parseDOM:[{preserveWhitespace:"full",tag:"div[data-html-comment]"}],toDOM:function(){return["div",{"data-html-comment":"true"},0]}}},enumerable:!1,configurable:!0}),X.prototype.commands=function(){return function(){return function(K,z,J){var Q=K.selection.$from;if(J.endOfTextblock("down")&&Q.node().type.name==="htmlComment")return O7(K,z);return!1}}},X.prototype.keymaps=function(){return{Enter:this.commands()()}},X}(d);function t78(Z){return new mJ([new W78,new A78,new j78,new R78,new F78,new B78,new E78,new P78,new O78,new v78,new $78,new h78,new f78,new _78,new m78,new l78,new c78,new p78,new i78,new d78,new s78(Z),new n78,new a78,new r78,new fJ,new o78])}var e78=y("contents"),Z18=function(Z){b(X,Z);function X(K,z){var J=Z.call(this,K)||this,Q=z.toDOMAdaptor,Y=z.htmlSchemaMap,q=Y===void 0?{}:Y,G=z.linkAttributes,U=G===void 0?{}:G,V=z.useCommandShortcut,W=V===void 0?!0:V,A=z.wwPlugins,j=A===void 0?[]:A,H=z.wwNodeViews,R=H===void 0?{}:H;return J.editorType="wysiwyg",J.el.classList.add("ww-mode"),J.toDOMAdaptor=Q,J.linkAttributes=U,J.extraPlugins=j,J.pluginNodeViews=R,J.specs=J.createSpecs(),J.schema=J.createSchema(q),J.context=J.createContext(),J.keymaps=J.createKeymaps(W),J.view=J.createView(),J.commands=J.createCommands(),J.specs.setContext(P(P({},J.context),{view:J.view})),J.initEvent(),J}return X.prototype.createSpecs=function(){return t78(this.linkAttributes)},X.prototype.createContext=function(){return{schema:this.schema,eventEmitter:this.eventEmitter}},X.prototype.createSchema=function(K){return new z7({nodes:P(P({},this.specs.nodes),K.nodes),marks:P(P({},this.specs.marks),K.marks)})},X.prototype.createPlugins=function(){return w8([R38(),P38(this.eventEmitter),O38(),k38(this.eventEmitter)],this.createPluginProps()).concat(this.defaultPlugins)},X.prototype.createPluginNodeViews=function(){var K=this,z=K.eventEmitter,J=K.pluginNodeViews,Q={};if(J)Object.keys(J).forEach(function(Y){Q[Y]=function(q,G,U){return J[Y](q,G,U,z)}});return Q},X.prototype.createView=function(){var K=this,z=this,J=z.toDOMAdaptor,Q=z.eventEmitter;return new T3(this.el,{state:this.createState(),attributes:{class:e78},nodeViews:P({customBlock:function(Y,q,G){return new b38(Y,q,G,J)},image:function(Y,q,G){return new y38(Y,q,G,Q)},codeBlock:function(Y,q,G){return new x38(Y,q,G,Q)},widget:hJ},this.createPluginNodeViews()),dispatchTransaction:function(Y){var q=K.view.state.applyTransaction(Y).state;K.view.updateState(q),K.emitChangeEvent(Y.scrollIntoView()),K.eventEmitter.emit("setFocusedNode",q.selection.$from.node(1))},transformPastedHTML:n38,transformPasted:function(Y){return e38(Y,K.schema,J1(K.view.state.selection.$from))},handlePaste:function(Y,q,G){return G78(Y,G)},handleKeyDown:function(Y,q){return K.eventEmitter.emit("keydown",K.editorType,q),!1},handleDOMEvents:{paste:function(Y,q){var G=q.clipboardData||window.clipboardData,U=G===null||G===void 0?void 0:G.items;if(U){var V=W5(U).some(function(A){return A.kind==="string"&&A.type==="text/rtf"});if(!V){var W=$J(U);if(W)q.preventDefault(),n6(K.eventEmitter,W,q.type)}}return!1},keyup:function(Y,q){return K.eventEmitter.emit("keyup",K.editorType,q),!1},scroll:function(){return K.eventEmitter.emit("scroll","editor"),!0}}})},X.prototype.createCommands=function(){return this.specs.commands(this.view,Y4())},X.prototype.getHTML=function(){return s6(this.view.dom.innerHTML)},X.prototype.getModel=function(){return this.view.state.doc},X.prototype.getSelection=function(){var K=this.view.state.selection,z=K.from,J=K.to;return[z,J]},X.prototype.getSchema=function(){return this.view.state.schema},X.prototype.replaceSelection=function(K,z,J){var Q=this.view.state,Y=Q.schema,q=Q.tr,G=K.split(`
`),U=G.map(function(A){return n7(Y,j0(A,Y))}),V=new S(M.from(U),1,1),W=D5(z)&&D5(J)?q.replaceRange(z,J,V):q.replaceSelection(V);this.view.dispatch(W),this.focus()},X.prototype.deleteSelection=function(K,z){var J=this.view.state.tr,Q=D5(K)&&D5(z)?J.deleteRange(K,z):J.deleteSelection();this.view.dispatch(Q.scrollIntoView())},X.prototype.getSelectedText=function(K,z){var J=this.view.state,Q=J.doc,Y=J.selection,q=Y.from,G=Y.to;if(D5(K)&&D5(z))q=K,G=z;return Q.textBetween(q,G,`
`)},X.prototype.setModel=function(K,z){if(z===void 0)z=!1;var J=this.view.state,Q=J.tr,Y=J.doc;if(this.view.dispatch(Q.replaceWith(0,Y.content.size,K)),z)this.moveCursorToEnd(!0)},X.prototype.setSelection=function(K,z){if(z===void 0)z=K;var J=this.view.state.tr,Q=n(J,K,z);this.view.dispatch(J.setSelection(Q).scrollIntoView())},X.prototype.addWidget=function(K,z,J){var Q=this.view,Y=Q.dispatch,q=Q.state;Y(q.tr.setMeta("widget",{pos:J!==null&&J!==void 0?J:q.selection.to,node:K,style:z}))},X.prototype.replaceWithWidget=function(K,z,J){var Q=this.view.state,Y=Q.tr,q=Q.schema,G=j0(J,q);this.view.dispatch(Y.replaceWith(K,z,G))},X.prototype.getRangeInfoOfNode=function(K){var z=this.view.state,J=z.doc,Q=z.selection,Y=K?J.resolve(K):Q.$from,q=Y.marks(),G=Y.node(),U=Y.start(),V=Y.end(),W=G.type.name;if(q.length||W==="paragraph"){var A=q[q.length-1],j=function(H){return H.length?F8(H,A):!0};W=A?A.type.name:"text",G.forEach(function(H,R){var{isText:F,nodeSize:B,marks:O}=H,L=Y.pos-U;if(F&&R<=L&&R+B>=L&&j(O))U=U+R,V=U+B})}return{range:[U,V],type:W}},X}(_J),X18=o8,K18=p7;function z18(Z){return!X18(Z)&&!K18(Z)}var J18=z18,Q18=J18;function Y18(Z){return Q18(Z)&&Z!==!1}var q18=Y18,G18=q18;function U18(Z){return!G18(Z)}var V18=U18,Pz=["afterPreviewRender","updatePreview","changeMode","needChangeMode","command","changePreviewStyle","changePreviewTabPreview","changePreviewTabWrite","scroll","contextmenu","show","hide","changeLanguage","changeToolbarState","toggleScrollSync","mixinTableOffsetMapPrototype","setFocusedNode","removePopupWidget","query","openPopup","closePopup","addImageBlobHook","beforePreviewRender","beforeConvertWysiwygToMarkdown","load","loadUI","change","caretChange","destroy","focus","blur","keydown","keyup"],XY=function(){function Z(){var X=this;this.events=new dQ,this.eventTypes=Pz.reduce(function(K,z){return P(P({},K),{type:z})},{}),this.hold=!1,Pz.forEach(function(K){X.addEventType(K)})}return Z.prototype.listen=function(X,K){var z=this.getTypeInfo(X),J=this.events.get(z.type)||[];if(!this.hasEventType(z.type))throw new Error("There is no event type "+z.type);if(z.namespace)K.namespace=z.namespace;J.push(K),this.events.set(z.type,J)},Z.prototype.emit=function(X){var K=[];for(var z=1;z<arguments.length;z++)K[z-1]=arguments[z];var J=this.getTypeInfo(X),Q=this.events.get(J.type),Y=[];if(!this.hold&&Q)Q.forEach(function(q){var G=q.apply(void 0,K);if(!o8(G))Y.push(G)});return Y},Z.prototype.emitReduce=function(X,K){var z=[];for(var J=2;J<arguments.length;J++)z[J-2]=arguments[J];var Q=this.events.get(X);if(!this.hold&&Q)Q.forEach(function(Y){var q=Y.apply(void 0,w8([K],z));if(!V18(q))K=q});return K},Z.prototype.getTypeInfo=function(X){var K=X.split(".");return{type:K[0],namespace:K[1]}},Z.prototype.hasEventType=function(X){return!o8(this.eventTypes[this.getTypeInfo(X).type])},Z.prototype.addEventType=function(X){if(this.hasEventType(X))throw new Error("There is already have event type "+X);this.eventTypes[X]=X},Z.prototype.removeEventHandler=function(X,K){var z=this,J=this.getTypeInfo(X),Q=J.type,Y=J.namespace;if(Q&&K)this.removeEventHandlerWithHandler(Q,K);else if(Q&&!Y)this.events.delete(Q);else if(!Q&&Y)this.events.forEach(function(q,G){z.removeEventHandlerWithTypeInfo(G,Y)});else if(Q&&Y)this.removeEventHandlerWithTypeInfo(Q,Y)},Z.prototype.removeEventHandlerWithHandler=function(X,K){var z=this.events.get(X);if(z){var J=z.indexOf(K);if(z.indexOf(K)>=0)z.splice(J,1)}},Z.prototype.removeEventHandlerWithTypeInfo=function(X,K){var z=[],J=this.events.get(X);if(!J)return;J.map(function(Q){if(Q.namespace!==K)z.push(Q);return null}),this.events.set(X,z)},Z.prototype.getEvents=function(){return this.events},Z.prototype.holdEventInvoke=function(X){this.hold=!0,X(),this.hold=!1},Z}(),W18=function(){function Z(X,K,z,J){this.eventEmitter=X,this.mdCommands=K,this.wwCommands=z,this.getEditorType=J,this.initEvent()}return Z.prototype.initEvent=function(){var X=this;this.eventEmitter.listen("command",function(K,z){X.exec(K,z)})},Z.prototype.addCommand=function(X,K,z){if(X==="markdown")this.mdCommands[K]=z;else this.wwCommands[K]=z},Z.prototype.deleteCommand=function(X,K){if(X==="markdown")delete this.mdCommands[K];else delete this.wwCommands[K]},Z.prototype.exec=function(X,K){var z=this.getEditorType();if(z==="markdown")this.mdCommands[X](K);else this.wwCommands[X](K)},Z}();function l7(Z){return Z[Z.length-1]===`
`?Z.slice(0,Z.length-1):Z}function y6(Z,X){var K=Z.schema,z=X.literal,J=z.match(z3);if(J){var Q=J[1],Y=J[3],q=(Q||Y).toLowerCase();return X.type==="htmlInline"&&!!(K.marks[q]||K.nodes[q])}return!1}function N6(Z){var X=Z.type;return F8(["text","strong","emph","strike","image","link","code"],X)}function Oz(Z){return(Z===null||Z===void 0?void 0:Z.type)==="softbreak"}function w3(Z){var{type:X,literal:K}=Z,z=X==="htmlInline"&&K.match(z3);if(z){var J=z[1],Q=z[3],Y=J||Q;if(Y)return F8(["ul","ol","li"],Y.toLowerCase())}return!1}function A18(Z){var X=Z.literal,K=/data-task/.test(X),z=/data-task-checked/.test(X);return{task:K,checked:z}}function Lz(Z){var X=[];for(var K=1;K<arguments.length;K++)X[K-1]=arguments[K];var z=document.createElement("div");z.innerHTML=O0(Z);var J=z.firstChild;return X.map(function(Q){return J.getAttribute(Q)||""})}function H18(Z){var X={};return Object.keys(Z).forEach(function(K){var z=K.split(", ");z.forEach(function(J){var Q=J.toLowerCase();X[Q]=Z[K]})}),X}var j18={"b, strong":function(Z,X,K){var z=Z.schema.marks.strong;if(K)Z.openMark(z.create({rawHTML:K}));else Z.closeMark(z)},"i, em":function(Z,X,K){var z=Z.schema.marks.emph;if(K)Z.openMark(z.create({rawHTML:K}));else Z.closeMark(z)},"s, del":function(Z,X,K){var z=Z.schema.marks.strike;if(K)Z.openMark(z.create({rawHTML:K}));else Z.closeMark(z)},code:function(Z,X,K){var z=Z.schema.marks.code;if(K)Z.openMark(z.create({rawHTML:K}));else Z.closeMark(z)},a:function(Z,X,K){var z=X.literal,J=Z.schema.marks.link;if(K){var Q=Lz(z,"href")[0];Z.openMark(J.create({linkUrl:Q,rawHTML:K}))}else Z.closeMark(J)},img:function(Z,X,K){var z=X.literal;if(K){var J=Lz(z,"src","alt"),Q=J[0],Y=J[1],q=Z.schema.nodes.image;Z.addNode(q,P({rawHTML:K,imageUrl:Q},Y&&{altText:Y}))}},hr:function(Z,X,K){Z.addNode(Z.schema.nodes.thematicBreak,{rawHTML:K})},br:function(Z,X){var K=Z.schema.nodes.paragraph,z=X.parent,J=X.prev,Q=X.next;if((z===null||z===void 0?void 0:z.type)==="paragraph"){if(Oz(J))Z.openNode(K);if(Oz(Q))Z.closeNode();else if(Q)Z.closeNode(),Z.openNode(K)}else if((z===null||z===void 0?void 0:z.type)==="tableCell"){if(J&&(N6(J)||y6(Z,J)))Z.closeNode();if(Q&&(N6(Q)||y6(Z,Q)))Z.openNode(K)}},pre:function(Z,X,K){var z,J,Q=document.createElement("div");Q.innerHTML=X.literal;var Y=(J=(z=Q.firstChild)===null||z===void 0?void 0:z.firstChild)===null||J===void 0?void 0:J.textContent;Z.openNode(Z.schema.nodes.codeBlock,{rawHTML:K}),Z.addText(l7(Y)),Z.closeNode()},"ul, ol":function(Z,X,K){if(X.parent.type==="tableCell"){var z=Z.schema.nodes,J=z.bulletList,Q=z.orderedList,Y=z.paragraph,q=K==="ul"?J:Q;if(K){if(X.prev&&!w3(X.prev))Z.closeNode();Z.openNode(q,{rawHTML:K})}else if(Z.closeNode(),X.next&&!w3(X.next))Z.openNode(Y)}},li:function(Z,X,K){var z;if(((z=X.parent)===null||z===void 0?void 0:z.type)==="tableCell"){var J=Z.schema.nodes,Q=J.listItem,Y=J.paragraph;if(K){var q=A18(X);if(X.prev&&!w3(X.prev))Z.closeNode();if(Z.openNode(Q,P({rawHTML:K},q)),X.next&&!w3(X.next))Z.openNode(Y)}else{if(X.prev&&!w3(X.prev))Z.closeNode();Z.closeNode()}}}},R18=H18(j18);function Mz(Z){return Z.type==="htmlInline"&&G6.test(Z.literal)}function KY(Z){W5(Z.childNodes).forEach(function(X){if(A1(X)){var K=X.nodeName.toLowerCase();if(X.setAttribute("data-raw-html",K),X.childNodes)KY(X)}})}var Dz={text:function(Z,X){Z.addText(X.literal||"")},paragraph:function(Z,X,K,z){var J,Q=K.entering;if(Q){var Y=Z.schema.nodes.paragraph;if(((J=X.prev)===null||J===void 0?void 0:J.type)==="paragraph")Z.openNode(Y,z),Z.closeNode();Z.openNode(Y,z)}else Z.closeNode()},heading:function(Z,X,K,z){var J=K.entering;if(J){var Q=X,Y=Q.level,q=Q.headingType;Z.openNode(Z.schema.nodes.heading,P({level:Y,headingType:q},z))}else Z.closeNode()},codeBlock:function(Z,X,K){var z=Z.schema.nodes.codeBlock,J=X,Q=J.info,Y=J.literal;Z.openNode(z,P({language:Q},K)),Z.addText(l7(Y||"")),Z.closeNode()},list:function(Z,X,K,z){var J=K.entering;if(J){var Q=Z.schema.nodes,Y=Q.bulletList,q=Q.orderedList,G=X.listData,U=G.type,V=G.start;if(U==="bullet")Z.openNode(Y,z);else Z.openNode(q,P({order:V},z))}else Z.closeNode()},item:function(Z,X,K,z){var J=K.entering,Q=Z.schema.nodes.listItem,Y=X.listData,q=Y.task,G=Y.checked;if(J){var U=P(P(P({},q&&{task:q}),G&&{checked:G}),z);Z.openNode(Q,U)}else Z.closeNode()},blockQuote:function(Z,X,K,z){var J=K.entering;if(J)Z.openNode(Z.schema.nodes.blockQuote,z);else Z.closeNode()},image:function(Z,X,K,z){var{entering:J,skipChildren:Q}=K,Y=Z.schema.nodes.image,q=X,G=q.destination,U=q.firstChild;if(J&&Q)Q();Z.addNode(Y,P(P({imageUrl:G},U&&{altText:U.literal}),z))},thematicBreak:function(Z,X,K,z){Z.addNode(Z.schema.nodes.thematicBreak,z)},strong:function(Z,X,K,z){var J=K.entering,Q=Z.schema.marks.strong;if(J)Z.openMark(Q.create(z));else Z.closeMark(Q)},emph:function(Z,X,K,z){var J=K.entering,Q=Z.schema.marks.emph;if(J)Z.openMark(Q.create(z));else Z.closeMark(Q)},link:function(Z,X,K,z){var J=K.entering,Q=Z.schema.marks.link,Y=X,q=Y.destination,G=Y.title;if(J){var U=P({linkUrl:q,title:G},z);Z.openMark(Q.create(U))}else Z.closeMark(Q)},softbreak:function(Z,X){if(X.parent.type==="paragraph"){var{prev:K,next:z}=X;if(K&&!Mz(K))Z.closeNode();if(z&&!Mz(z))Z.openNode(Z.schema.nodes.paragraph)}},table:function(Z,X,K,z){var J=K.entering;if(J)Z.openNode(Z.schema.nodes.table,z);else Z.closeNode()},tableHead:function(Z,X,K,z){var J=K.entering;if(J)Z.openNode(Z.schema.nodes.tableHead,z);else Z.closeNode()},tableBody:function(Z,X,K,z){var J=K.entering;if(J)Z.openNode(Z.schema.nodes.tableBody,z);else Z.closeNode()},tableRow:function(Z,X,K,z){var J=K.entering;if(J)Z.openNode(Z.schema.nodes.tableRow,z);else Z.closeNode()},tableCell:function(Z,X,K){var z=K.entering;if(!X.ignored){var J=function(H){return H&&(N6(H)||y6(Z,H))};if(z){var Q=Z.schema.nodes,Y=Q.tableHeadCell,q=Q.tableBodyCell,G=Q.paragraph,U=X.parent.parent,V=U.type==="tableHead"?Y:q,W=U.parent,A=(W.columns[X.startIdx]||{}).align,j=P({},X.attrs);if(A)j.align=A;if(Z.openNode(V,j),J(X.firstChild))Z.openNode(G)}else{if(J(X.lastChild))Z.closeNode();Z.closeNode()}}},strike:function(Z,X,K,z){var J=K.entering,Q=Z.schema.marks.strike;if(J)Z.openMark(Q.create(z));else Z.closeMark(Q)},code:function(Z,X,K,z){var J=Z.schema.marks.code;Z.openMark(J.create(z)),Z.addText(l7(X.literal||"")),Z.closeMark(J)},customBlock:function(Z,X){var K=Z.schema.nodes,z=K.customBlock,J=K.paragraph,Q=X,Y=Q.info,q=Q.literal;if(Z.openNode(z,{info:Y}),Z.addText(l7(q||"")),Z.closeNode(),!X.next)Z.openNode(J),Z.closeNode()},frontMatter:function(Z,X){Z.openNode(Z.schema.nodes.frontMatter),Z.addText(X.literal),Z.closeNode()},htmlInline:function(Z,X){var K=X.literal,z=K.match(z3),J=z[1],Q=z[3],Y=(J||Q).toLowerCase(),q=Z.schema.marks[Y],G=O0(K);if(q===null||q===void 0?void 0:q.spec.attrs.htmlInline)if(J){var U=C6(G);Z.openMark(q.create({htmlAttrs:U}))}else Z.closeMark(q);else{var V=R18[Y];if(V)V(Z,X,J)}},htmlBlock:function(Z,X){var K=X.literal,z=document.createElement("div"),J=rU.test(K);if(J)Z.openNode(Z.schema.nodes.htmlComment),Z.addText(X.literal),Z.closeNode();else{var Q=K.match(z3),Y=Q[1],q=Q[3],G=(Y||q).toLowerCase(),U=Z.schema.nodes[G],V=O0(K);if(U===null||U===void 0?void 0:U.spec.attrs.htmlBlock){var W=C6(V),A=uQ(X,G);Z.addNode(U,{htmlAttrs:W,childrenHTML:A})}else z.innerHTML=V,KY(z),Z.convertByDOMParser(z)}},customInline:function(Z,X,K){var{entering:z,skipChildren:J}=K,Q=X,Y=Q.info,q=Q.firstChild,G=Z.schema;if(Y.indexOf("widget")!==-1&&z){var U=CJ(X);J(),Z.addNode(G.nodes.widget,{info:Y},[G.text(DJ(Y,U))])}else{var V="$$";if(z)V+=q?Y+" ":Y;Z.addText(V)}}};function F18(Z){var X=Object.keys(Z),K=P({},Dz),z=new J4({gfm:!0,nodeId:!0,convertors:Z}),J=z.getConvertors();return X.forEach(function(Q){var Y=Dz[Q];if(Y&&!F8(["htmlBlock","htmlInline"],Q))K[Q]=function(q,G,U){U.origin=function(){return J[Q](G,U,J)};var V=Z[Q](G,U),W;if(V){var A=Array.isArray(V)?V[0]:V,j=A.attributes,H=A.classNames;W={htmlAttrs:j,classNames:H}}Y(q,G,U,W)}}),K}function B18(Z,X){if(Z.isText&&X.isText&&f.sameSet(Z.marks,X.marks))return Z.withText(Z.text+X.text);return!1}var E18=function(){function Z(X,K){this.schema=X,this.convertors=K,this.stack=[{type:this.schema.topNodeType,attrs:null,content:[]}],this.marks=f.none}return Z.prototype.top=function(){return C8(this.stack)},Z.prototype.push=function(X){if(this.stack.length)this.top().content.push(X)},Z.prototype.addText=function(X){if(X){var K=this.top().content,z=C8(K),J=this.schema.text(X,this.marks),Q=z&&B18(z,J);if(Q)K[K.length-1]=Q;else K.push(J)}},Z.prototype.openMark=function(X){this.marks=X.addToSet(this.marks)},Z.prototype.closeMark=function(X){this.marks=X.removeFromSet(this.marks)},Z.prototype.addNode=function(X,K,z){var J=X.createAndFill(K,z,this.marks);if(J)return this.push(J),J;return null},Z.prototype.openNode=function(X,K){this.stack.push({type:X,attrs:K,content:[]})},Z.prototype.closeNode=function(){if(this.marks.length)this.marks=f.none;var X=this.stack.pop(),K=X.type,z=X.attrs,J=X.content;return this.addNode(K,z,J)},Z.prototype.convertByDOMParser=function(X){var K=this,z=Z5.fromSchema(this.schema).parse(X);z.content.forEach(function(J){return K.push(J)})},Z.prototype.closeUnmatchedHTMLInline=function(X,K){var z;if(!K&&X.type!=="htmlInline"){var J=this.stack.length-1;for(var Q=J;Q>=0;Q-=1){var Y=this.stack[Q];if((z=Y.attrs)===null||z===void 0?void 0:z.rawHTML)if(Y.content.length)this.closeNode();else this.stack.pop();else break}}},Z.prototype.convert=function(X,K){var z=X.walker(),J=z.next(),Q=function(){var{node:q,entering:G}=J,U=Y.convertors[q.type],V=!1;if(U){var W={entering:G,leaf:!NU(q),getChildrenText:TU,options:{gfm:!0,nodeId:!1,tagFilter:!1,softbreak:`
`},skipChildren:function(){V=!0}};if(Y.closeUnmatchedHTMLInline(q,G),U(Y,q,W),(K===null||K===void 0?void 0:K.node)===q){var A=Y.stack.reduce(function(j,H){return j+H.content.reduce(function(R,F){return R+F.nodeSize},0)},0)+1;K.setMappedPos(A)}}if(V)z.resumeAt(q,!1),z.next();J=z.next()},Y=this;while(J)Q()},Z.prototype.convertNode=function(X,K){if(this.convert(X,K),this.stack.length)return this.closeNode();return null},Z}();function P18(Z,X,K){var z=K[0],J=K[1];Z.write(z),Z.convertInline(X),Z.write(J)}function O18(Z,X,K){var{node:z,parent:J}=X,Q=K[0],Y=K[1];if(Z.stopNewline=!0,Z.write(Q),Z.convertNode(z),Z.write(Y),(J===null||J===void 0?void 0:J.type.name)==="doc")Z.closeBlock(z),Z.stopNewline=!1}function L18(Z,X){var K=Z.length,z="",J="";if(X==="left")z=":",K-=1;else if(X==="right")J=":",K-=1;else if(X==="center")z=":",J=":",K-=2;return""+z+i7("-",Math.max(K,3))+J}var T6={text:function(Z,X){var K,z=X.node,J=(K=z.text)!==null&&K!==void 0?K:"";if((z.marks||[]).some(function(Q){return Q.type.name==="link"}))Z.text(d7(J),!1);else Z.text(J)},paragraph:function(Z,X){var{node:K,parent:z,index:J}=X,Q=J===void 0?0:J;if(Z.stopNewline)Z.convertInline(K);else{var Y=Q===0,q=!Y&&z.child(Q-1),G=q&&q.childCount===0,U=Q<z.childCount-1&&z.child(Q+1),V=U&&U.type.name==="paragraph",W=K.childCount===0;if(W&&G)Z.write(`<br>
`);else if(W&&!G&&!Y){if((z===null||z===void 0?void 0:z.type.name)==="listItem"){var A=Z.getDelim();Z.setDelim(""),Z.write("<br>"),Z.setDelim(A)}Z.write(`
`)}else if(Z.convertInline(K),V)Z.write(`
`);else Z.closeBlock(K)}},heading:function(Z,X,K){var z=X.node,J=K.delim,Q=z.attrs.headingType;if(Q==="atx")Z.write(J+" "),Z.convertInline(z),Z.closeBlock(z);else Z.convertInline(z),Z.ensureNewLine(),Z.write(J),Z.closeBlock(z)},codeBlock:function(Z,X,K){var z=X.node,J=K.delim,Q=K.text,Y=J,q=Y[0],G=Y[1];Z.write(q),Z.ensureNewLine(),Z.text(Q,!1),Z.ensureNewLine(),Z.write(G),Z.closeBlock(z)},blockQuote:function(Z,X,K){var{node:z,parent:J}=X,Q=K.delim;if((J===null||J===void 0?void 0:J.type.name)===z.type.name)Z.flushClose(1);Z.wrapBlock(Q,null,z,function(){return Z.convertNode(z)})},bulletList:function(Z,X,K){var z=X.node,J=K.delim;Z.convertList(z,i7(" ",4),function(){return J+" "})},orderedList:function(Z,X){var K=X.node,z=K.attrs.order||1;Z.convertList(K,i7(" ",4),function(J){var Q=String(z+J);return Q+". "})},listItem:function(Z,X){var K=X.node,z=K.attrs,J=z.task,Q=z.checked;if(J)Z.write("["+(Q?"x":" ")+"] ");Z.convertNode(K)},image:function(Z,X,K){var z=K.attrs;Z.write("!["+(z===null||z===void 0?void 0:z.altText)+"]("+(z===null||z===void 0?void 0:z.imageUrl)+")")},thematicBreak:function(Z,X,K){var z=X.node,J=K.delim;Z.write(J),Z.closeBlock(z)},table:function(Z,X){var K=X.node;Z.convertNode(K),Z.closeBlock(K)},tableHead:function(Z,X,K){var z=X.node,J=K.delim,Q=z.firstChild;Z.convertNode(z);var Y=J!==null&&J!==void 0?J:"";if(!J&&Q)Q.forEach(function(q){var{textContent:G,attrs:U}=q,V=L18(G,U.align);Y+="| "+V+" "});Z.write(Y+"|"),Z.ensureNewLine()},tableBody:function(Z,X){var K=X.node;Z.convertNode(K)},tableRow:function(Z,X){var K=X.node;Z.convertNode(K),Z.write("|"),Z.ensureNewLine()},tableHeadCell:function(Z,X,K){var z=X.node,J=K.delim,Q=J===void 0?"| ":J;Z.write(Q),Z.convertTableCell(z),Z.write(" ")},tableBodyCell:function(Z,X,K){var z=X.node,J=K.delim,Q=J===void 0?"| ":J;Z.write(Q),Z.convertTableCell(z),Z.write(" ")},customBlock:function(Z,X,K){var z=X.node,J=K.delim,Q=K.text,Y=J,q=Y[0],G=Y[1];Z.write(q),Z.ensureNewLine(),Z.text(Q,!1),Z.ensureNewLine(),Z.write(G),Z.closeBlock(z)},frontMatter:function(Z,X,K){var z=X.node,J=K.text;Z.text(J,!1),Z.closeBlock(z)},widget:function(Z,X,K){var z=K.text;Z.write(z)},html:function(Z,X,K){var z=X.node,J=K.text;if(Z.write(J),z.attrs.htmlBlock)Z.closeBlock(z)},htmlComment:function(Z,X,K){var z=X.node,J=K.text;Z.write(J),Z.closeBlock(z)}};function M18(Z,X){var{state:K,nodeInfo:z,params:J}=X,Q=J.rawHTML;if(Q)if(R0(Z,["heading","codeBlock"])>-1)P18(K,z.node,Q);else if(R0(Z,["image","thematicBreak"])>-1)K.write(Q);else O18(K,z,Q);else T6[Z](K,z,J)}function Iz(Z,X){var K=Z.text,z=/`+/g,J=0;if(Z.isText&&K){var Q=z.exec(K);while(Q)J=Math.max(J,Q[0].length),Q=z.exec(K)}var Y=J>0&&X>0?" `":"`";for(var q=0;q<J;q+=1)Y+="`";if(J>0&&X<0)Y+=" ";return Y}function s8(Z){return Z?["<"+Z+">","</"+Z+">"]:null}function v3(Z){return Z?"<"+Z+">":null}function $3(Z){return Z?"</"+Z+">":null}var h3={heading:function(Z){var X=Z.node,K=X.attrs,z=K.level,J=i7("#",z);if(K.headingType==="setext")J=z===1?"===":"---";return{delim:J,rawHTML:s8(K.rawHTML)}},codeBlock:function(Z){var X=Z.node,K=X,z=K.attrs,J=K.textContent;return{delim:["```"+(z.language||""),"```"],rawHTML:s8(z.rawHTML),text:J}},blockQuote:function(Z){var X=Z.node;return{delim:"> ",rawHTML:s8(X.attrs.rawHTML)}},bulletList:function(Z,X){var K=Z.node,z=X.inTable,J=K.attrs.rawHTML;if(z)J=J||"ul";return{delim:"*",rawHTML:s8(J)}},orderedList:function(Z,X){var K=Z.node,z=X.inTable,J=K.attrs.rawHTML;if(z)J=J||"ol";return{rawHTML:s8(J)}},listItem:function(Z,X){var K=Z.node,z=X.inTable,J=K.attrs,Q=J.task,Y=J.checked,q=K.attrs.rawHTML;if(z)q=q||"li";var G=Q?' class="task-list-item'+(Y?" checked":"")+'"':"",U=Q?" data-task"+(Y?" data-task-checked":""):"";return{rawHTML:q?["<"+q+G+U+">","</"+q+">"]:null}},table:function(Z){var X=Z.node;return{rawHTML:s8(X.attrs.rawHTML)}},tableHead:function(Z){var X=Z.node;return{rawHTML:s8(X.attrs.rawHTML)}},tableBody:function(Z){var X=Z.node;return{rawHTML:s8(X.attrs.rawHTML)}},tableRow:function(Z){var X=Z.node;return{rawHTML:s8(X.attrs.rawHTML)}},tableHeadCell:function(Z){var X=Z.node;return{rawHTML:s8(X.attrs.rawHTML)}},tableBodyCell:function(Z){var X=Z.node;return{rawHTML:s8(X.attrs.rawHTML)}},image:function(Z){var X=Z.node,K=X.attrs,z=K.rawHTML,J=K.altText,Q=K.imageUrl.replace(/&amp;/g,"&"),Y=J?' alt="'+t0(J)+'"':"";return{rawHTML:z?"<"+z+' src="'+t0(Q)+'"'+Y+">":null,attrs:{altText:d7(J||""),imageUrl:Q}}},thematicBreak:function(Z){var X=Z.node;return{delim:"***",rawHTML:v3(X.attrs.rawHTML)}},customBlock:function(Z){var X=Z.node,K=X,z=K.attrs,J=K.textContent;return{delim:["$$"+z.info,"$$"],text:J}},frontMatter:function(Z){var X=Z.node;return{text:X.textContent}},widget:function(Z){var X=Z.node;return{text:X.textContent}},strong:function(Z,X){var K=Z.node,z=X.entering,J=K.attrs.rawHTML;return{delim:"**",rawHTML:z?v3(J):$3(J)}},emph:function(Z,X){var K=Z.node,z=X.entering,J=K.attrs.rawHTML;return{delim:"*",rawHTML:z?v3(J):$3(J)}},strike:function(Z,X){var K=Z.node,z=X.entering,J=K.attrs.rawHTML;return{delim:"~~",rawHTML:z?v3(J):$3(J)}},link:function(Z,X){var K=Z.node,z=X.entering,J=K.attrs,Q=J.title,Y=J.rawHTML,q=J.linkUrl.replace(/&amp;/g,"&"),G=Q?' title="'+t0(Q)+'"':"";if(z)return{delim:"[",rawHTML:Y?"<"+Y+' href="'+t0(q)+'"'+G+">":null};return{delim:"]("+q+(Q?" "+PU(d7(Q)):"")+")",rawHTML:$3(Y)}},code:function(Z,X){var{node:K,parent:z,index:J}=Z,Q=J===void 0?0:J,Y=X.entering,q=Y?Iz(z.child(Q),-1):Iz(z.child(Q-1),1),G=Y?v3(K.attrs.rawHTML):$3(K.attrs.rawHTML);return{delim:q,rawHTML:G}},htmlComment:function(Z){var X=Z.node;return{text:X.textContent}},html:function(Z,X){var K=Z.node,z=X.entering,J=K.type.name,Q=K.attrs.htmlAttrs,Y="<"+J,q="</"+J+">";if(Object.keys(Q).forEach(function(G){Y+=" "+G+'="'+Q[G].replace(/"/g,"'")+'"'}),Y+=">",K.attrs.htmlInline)return{rawHTML:z?Y:q};return{text:""+Y+K.attrs.childrenHTML+q}}},Cz={strong:{mixable:!0,removedEnclosingWhitespace:!0},emph:{mixable:!0,removedEnclosingWhitespace:!0},strike:{mixable:!0,removedEnclosingWhitespace:!0},code:{escape:!1},link:null,html:null};function D18(Z){var X={},K=Object.keys(T6);return K.forEach(function(z){X[z]=function(J,Q){var Y=T6[z];if(Y){var q=Z[z],G=q?q(Q,{inTable:J.inTable}):{};M18(z,{state:J,nodeInfo:Q,params:G})}}}),X}function I18(Z){var X={},K=Object.keys(Cz);return K.forEach(function(z){X[z]=function(J,Q){var Y=Cz[z],q=Z[z],G=q&&J&&!o8(Q),U=G?q(J,{entering:Q}):{};return P(P({},U),Y)}}),X}function C18(Z){var X=Object.keys(Z);X.forEach(function(J){var Q=h3[J],Y=Z[J];if(Q)h3[J]=function(q,G){return G.origin=function(){return Q(q,G)},Y(q,G)};else h3[J]=Y;delete Z[J]});var K=D18(h3),z=I18(h3);return{nodeTypeConvertors:K,markTypeConvertors:z}}var S18=function(){function Z(X){var{nodeTypeConvertors:K,markTypeConvertors:z}=X;this.nodeTypeConvertors=K,this.markTypeConvertors=z,this.delim="",this.result="",this.closed=!1,this.tightList=!1,this.stopNewline=!1,this.inTable=!1}return Z.prototype.getMarkConvertor=function(X){var K=X.attrs.htmlInline?"html":X.type.name;return this.markTypeConvertors[K]},Z.prototype.isInBlank=function(){return/(^|\n)$/.test(this.result)},Z.prototype.markText=function(X,K,z,J){var Q=this.getMarkConvertor(X);if(Q){var Y=Q({node:X,parent:z,index:J},K),q=Y.delim,G=Y.rawHTML;return G||q}return""},Z.prototype.setDelim=function(X){this.delim=X},Z.prototype.getDelim=function(){return this.delim},Z.prototype.flushClose=function(X){if(!this.stopNewline&&this.closed){if(!this.isInBlank())this.result+=`
`;if(!X)X=2;if(X>1){var K=this.delim,z=/\s+$/.exec(K);if(z)K=K.slice(0,K.length-z[0].length);for(var J=1;J<X;J+=1)this.result+=K+`
`}this.closed=!1}},Z.prototype.wrapBlock=function(X,K,z,J){var Q=this.getDelim();this.write(K||X),this.setDelim(this.getDelim()+X),J(),this.setDelim(Q),this.closeBlock(z)},Z.prototype.ensureNewLine=function(){if(!this.isInBlank())this.result+=`
`},Z.prototype.write=function(X){if(X===void 0)X="";if(this.flushClose(),this.delim&&this.isInBlank())this.result+=this.delim;if(X)this.result+=X},Z.prototype.closeBlock=function(X){this.closed=X},Z.prototype.text=function(X,K){if(K===void 0)K=!0;var z=X.split(`
`);for(var J=0;J<z.length;J+=1)if(this.write(),this.result+=K?EU(z[J]):z[J],J!==z.length-1)this.result+=`
`},Z.prototype.convertBlock=function(X,K,z){var J=X.type.name,Q=this.nodeTypeConvertors[J],Y={node:X,parent:K,index:z};if(X.attrs.htmlBlock)this.nodeTypeConvertors.html(this,Y);else if(Q)Q(this,Y)},Z.prototype.convertInline=function(X){var K=this,z=[],J="",Q=function(Y,q,G){var U=Y?Y.marks:[],V=J;J="";var W=Y&&Y.isText&&U.some(function(c){var r=K.getMarkConvertor(c),g8=r&&r();return g8&&g8.removedEnclosingWhitespace});if(W&&Y&&Y.text){var A=/^(\s*)(.*?)(\s*)$/m.exec(Y.text),j=A[1],H=A[2],R=A[3];if(V+=j,J=R,j||R){if(Y=H?Y.withText(H):null,!Y)U=z}}var F=U.length&&C8(U),B=F&&K.getMarkConvertor(F),O=B&&B(),L=O&&O.escape===!1,D=U.length-(L?1:0);for(var I=0;I<D;I+=1){var H=U[I];if(O&&!O.mixable)break;for(var k=0;k<z.length;k+=1){var x=z[k];if(O&&!O.mixable)break;if(H.eq(x)){if(I>k)U=U.slice(0,k).concat(H).concat(U.slice(k,I)).concat(U.slice(I+1,D));else if(k>I)U=U.slice(0,I).concat(U.slice(I+1,k)).concat(H).concat(U.slice(k,D));break}}}var w=0;while(w<Math.min(z.length,D)&&U[w].eq(z[w]))w+=1;while(w<z.length){var N=z.pop();if(N)K.text(K.markText(N,!1,X,G),!1)}if(V)K.text(V);if(Y){while(z.length<D){var H=U[z.length];z.push(H),K.text(K.markText(H,!0,X,G),!1)}if(L&&Y.isText)K.text(K.markText(F,!0,X,G)+Y.text+K.markText(F,!1,X,G+1),!1);else K.convertBlock(Y,X,G)}};X.forEach(Q),Q(null,null,X.childCount)},Z.prototype.convertList=function(X,K,z){var J=this,Q;if(this.closed&&this.closed.type===X.type)this.flushClose(3);else if(this.tightList)this.flushClose(1);var Y=(Q=X.attrs.tight)!==null&&Q!==void 0?Q:!0,q=this.tightList;this.tightList=Y,X.forEach(function(G,U,V){if(V&&Y)J.flushClose(1);J.wrapBlock(K,z(V),X,function(){return J.convertBlock(G,X,V)})}),this.tightList=q},Z.prototype.convertTableCell=function(X){var K=this;this.stopNewline=!0,this.inTable=!0,X.forEach(function(z,J,Q){if(F8(["bulletList","orderedList"],z.type.name))K.convertBlock(z,X,Q),K.closed=!1;else if(K.convertInline(z),Q<X.childCount-1){var Y=X.child(Q+1);if(Y.type.name==="paragraph")K.write("<br>")}}),this.stopNewline=!1,this.inTable=!1},Z.prototype.convertNode=function(X,K){var z=this;return X.forEach(function(J,Q,Y){if(z.convertBlock(J,X,Y),(K===null||K===void 0?void 0:K.node)===J){var q=z.result.split(`
`);K.setMappedPos([q.length,C8(q).length+1])}}),this.result},Z}(),k18=function(){function Z(X,K,z,J){var Q=this;this.setMappedPos=function(Y){Q.mappedPosWhenConverting=Y},this.schema=X,this.eventEmitter=J,this.focusedNode=null,this.mappedPosWhenConverting=null,this.toWwConvertors=F18(z),this.toMdConvertors=C18(K||{}),this.eventEmitter.listen("setFocusedNode",function(Y){return Q.focusedNode=Y})}return Z.prototype.getMappedPos=function(){return this.mappedPosWhenConverting},Z.prototype.getInfoForPosSync=function(){return{node:this.focusedNode,setMappedPos:this.setMappedPos}},Z.prototype.toWysiwygModel=function(X){var K=new E18(this.schema,this.toWwConvertors);return K.convertNode(X,this.getInfoForPosSync())},Z.prototype.toMarkdownText=function(X){var K=new S18(this.toMdConvertors),z=K.convertNode(X,this.getInfoForPosSync());return z=this.eventEmitter.emitReduce("beforeConvertWysiwygToMarkdown",z),z},Z}();function b18(Z){var{plugin:X,eventEmitter:K,usageStatistics:z,instance:J}=Z,Q={Plugin:K8,PluginKey:v5,Selection:$,TextSelection:_},Y={Decoration:b8,DecorationSet:o},q={Fragment:M},G={InputRule:J5,inputRules:g9,undoInputRule:XK},U={keymap:p0},V={eventEmitter:K,usageStatistics:z,instance:J,pmState:Q,pmView:Y,pmModel:q,pmRules:G,pmKeymap:U,i18n:v};if(V3(X)){var W=X[0],A=X[1],j=A===void 0?{}:A;return W(V,j)}return X(V)}function zY(Z){var{plugins:X,eventEmitter:K,usageStatistics:z,instance:J}=Z;return K.listen("mixinTableOffsetMapPrototype",Y38),(X!==null&&X!==void 0?X:[]).reduce(function(Q,Y){var q=b18({plugin:Y,eventEmitter:K,usageStatistics:z,instance:J});if(!q)throw new Error("The return value of the executed plugin is empty.");var{markdownParsers:G,toHTMLRenderers:U,toMarkdownRenderers:V,markdownPlugins:W,wysiwygPlugins:A,wysiwygNodeViews:j,markdownCommands:H,wysiwygCommands:R,toolbarItems:F}=q;if(U)Q.toHTMLRenderers=s7(Q.toHTMLRenderers,U);if(V)Q.toMarkdownRenderers=s7(Q.toMarkdownRenderers,V);if(W)Q.mdPlugins=Q.mdPlugins.concat(W);if(A)Q.wwPlugins=Q.wwPlugins.concat(A);if(j)Q.wwNodeViews=P(P({},Q.wwNodeViews),j);if(H)Q.mdCommands=P(P({},Q.mdCommands),H);if(R)Q.wwCommands=P(P({},Q.wwCommands),R);if(F)Q.toolbarItems=Q.toolbarItems.concat(F);if(G)Q.markdownParsers=P(P({},Q.markdownParsers),G);return Q},{toHTMLRenderers:{},toMarkdownRenderers:{},mdPlugins:[],wwPlugins:[],wwNodeViews:{},mdCommands:{},wwCommands:{},toolbarItems:[],markdownParsers:{}})}var y18="data-task",N18="data-task-disabled",T18="checked";function x18(Z){["htmlBlock","htmlInline"].forEach(function(X){if(Z[X])Object.keys(Z[X]).forEach(function(K){return gQ(K)})})}var JY=function(){function Z(X){var K=this;this.options=u6({linkAttributes:null,extendedAutolinks:!1,customHTMLRenderer:null,referenceDefinition:!1,customHTMLSanitizer:null,frontMatter:!1,usageStatistics:!0,theme:"light"},X),this.eventEmitter=new XY;var z=OJ(this.options.linkAttributes),J=zY({plugins:this.options.plugins,eventEmitter:this.eventEmitter,usageStatistics:this.options.usageStatistics,instance:this})||{},Q=J.toHTMLRenderers,Y=J.markdownParsers,q=this.options,G=q.customHTMLRenderer,U=q.extendedAutolinks,V=q.referenceDefinition,W=q.frontMatter,A=q.customHTMLSanitizer,j={linkAttributes:z,customHTMLRenderer:P(P({},Q),G),extendedAutolinks:U,referenceDefinition:V,frontMatter:W,sanitizer:A||O0};if(x18(j.customHTMLRenderer),this.options.events)Z3(this.options.events,function(L,D){K.on(D,L)});var H=this.options,R=H.el,F=H.initialValue,B=H.theme,O=R.innerHTML;if(B!=="light")R.classList.add(y(B));if(R.innerHTML="",this.toastMark=new yQ("",{disallowedHtmlBlockTags:["br","img"],extendedAutolinks:U,referenceDefinition:V,disallowDeepHeading:!0,frontMatter:W,customParser:Y}),this.preview=new vQ(this.eventEmitter,P(P({},j),{isViewer:!0})),oJ(this.preview.previewContent,"mousedown",this.toggleTask.bind(this)),F)this.setMarkdown(F);else if(O)this.preview.setHTML(O);R.appendChild(this.preview.previewContent),this.eventEmitter.emit("load",this)}return Z.prototype.toggleTask=function(X){var K=X.target,z=getComputedStyle(K,":before");if(!K.hasAttribute(N18)&&K.hasAttribute(y18)&&c6(z,X.offsetX,X.offsetY))p6(K,T18),this.eventEmitter.emit("change",{source:"viewer",date:X})},Z.prototype.setMarkdown=function(X){var K=this.toastMark.getLineTexts(),z=K.length,J=C8(K),Q=[z,J.length+1],Y=this.toastMark.editMarkdown([1,1],Q,X||"");this.eventEmitter.emit("updatePreview",Y)},Z.prototype.on=function(X,K){this.eventEmitter.listen(X,K)},Z.prototype.off=function(X){this.eventEmitter.removeEventHandler(X)},Z.prototype.addHook=function(X,K){this.eventEmitter.removeEventHandler(X),this.eventEmitter.listen(X,K)},Z.prototype.destroy=function(){rJ(this.preview.el,"mousedown",this.toggleTask.bind(this)),this.preview.destroy(),this.eventEmitter.emit("destroy")},Z.prototype.isViewer=function(){return!0},Z.prototype.isMarkdownMode=function(){return!1},Z.prototype.isWysiwygMode=function(){return!1},Z}();function c7(Z){return Z instanceof v8}function QY(Z){var X=["document","blockQuote","bulletList","orderedList","listItem","paragraph","heading","emph","strong","strike","link","image","table","tableHead","tableBody","tableRow","tableHeadCell","tableBodyCell"];return F8(X,Z)}function g18(Z){var{attrs:X,type:K}=Z,z=K.name,J={type:z,wysiwygNode:!0,literal:!QY(z)&&c7(Z)?Z.textContent:null},Q={heading:{level:X.level},link:{destination:X.linkUrl,title:X.title},image:{destination:X.imageUrl},codeBlock:{info:X.language},bulletList:{type:"list",listData:{type:"bullet"}},orderedList:{type:"list",listData:{type:"ordered",start:X.order}},listItem:{type:"item",listData:{task:X.task,checked:X.checked}},tableHeadCell:{type:"tableCell",cellType:"head",align:X.align},tableBodyCell:{type:"tableCell",cellType:"body",align:X.align},customBlock:{info:X.info}},Y=Q[z],q=P(P({},J),Y),G=Z.attrs,U=G.htmlAttrs,V=G.childrenHTML;if(U)return P(P({},q),{attrs:U,childrenHTML:V});return q}var u18={openTag:function(Z,X){var K=Z,z=K.tagName,J=K.classNames,Q=K.attributes,Y=document.createElement(z),q={};if(J)Y.className=J.join(" ");if(Q)q=P(P({},q),Q);d6(q,Y),X.push(Y)},closeTag:function(Z,X){if(X.length>1){var K=X.pop();C8(X).appendChild(K)}},html:function(Z,X){C8(X).insertAdjacentHTML("beforeend",Z.content)},text:function(Z,X){var K=document.createTextNode(Z.content);C8(X).appendChild(K)}},w18=function(){function Z(X,K){var z=Q4(X,K),J=P(P({},K.htmlBlock),K.htmlInline);this.customConvertorKeys=Object.keys(K).concat(Object.keys(J)),this.renderer=new J4({gfm:!0,convertors:P(P({},z),J)}),this.convertors=this.renderer.getConvertors()}return Z.prototype.generateTokens=function(X){var K=g18(X),z={entering:!0,leaf:c7(X)?X.isLeaf:!1,options:this.renderer.getOptions(),getChildrenText:function(){return c7(X)?X.textContent:""},skipChildren:function(){return!1}},J=this.convertors[X.type.name],Q=J(K,z,this.convertors),Y=V3(Q)?Q:[Q];if(QY(X.type.name)||X.attrs.htmlInline)z.entering=!1,Y.push({type:"text",content:c7(X)?X.textContent:""}),Y=Y.concat(J(K,z,this.convertors));return Y},Z.prototype.toDOMNode=function(X){var K=this.generateTokens(X),z=[];return K.forEach(function(J){return u18[J.type](J,z)}),z[0]},Z.prototype.getToDOMNode=function(X){if(F8(this.customConvertorKeys,X))return this.toDOMNode.bind(this);return null},Z}(),v18=100,$18=15,v7=null,Q6=null;function Sz(Z,X){var{syncScrollTop:K,releaseEventBlock:z}=X;if(Q6)clearTimeout(Q6);K(Z),Q6=setTimeout(function(){z()},$18)}function h18(Z,X,K){var z=X-Z,J=Date.now(),Q=function(){var Y=Date.now(),q=(Y-J)/v18,G;if(v7)clearTimeout(v7);if(q<1)G=Z+z*Math.cos((1-q)*Math.PI/2),Sz(Math.ceil(G),K),v7=setTimeout(Q,1);else Sz(X,K),v7=null};Q()}var f18=18,_18=function(){function Z(X,K,z){this.latestEditorScrollTop=null,this.latestPreviewScrollTop=null,this.blockedScroll=null,this.active=!0,this.timer=null;var{previewContent:J,el:Q}=K;this.previewRoot=J,this.previewEl=Q,this.mdEditor=X,this.editorView=X.view,this.toastMark=X.getToastMark(),this.eventEmitter=z,this.addScrollSyncEvent()}return Z.prototype.addScrollSyncEvent=function(){var X=this;this.eventEmitter.listen("afterPreviewRender",function(){X.clearTimer(),X.timer=setTimeout(function(){X.syncPreviewScrollTop(!0)},200)}),this.eventEmitter.listen("scroll",function(K,z){if(X.active){if(K==="editor"&&X.blockedScroll!=="editor")X.syncPreviewScrollTop();else if(K==="preview"&&X.blockedScroll!=="preview")X.syncEditorScrollTop(z)}}),this.eventEmitter.listen("toggleScrollSync",function(K){X.active=K})},Z.prototype.getMdNodeAtPos=function(X,K){var z=X.content.findIndex(K.pos),J=z.index;return this.toastMark.findFirstNodeAtLine(J+1)},Z.prototype.getScrollTopByCaretPos=function(){var X=this.mdEditor.getSelection(),K=this.toastMark.findFirstNodeAtLine(X[0][0]),z=this.previewEl.clientHeight,J=X6(this.previewRoot,K).el,Q=z1(J,this.previewRoot)||J.offsetTop,Y=J.clientHeight,q=Q+Y-z*0.5;this.latestEditorScrollTop=null;var G=J.getBoundingClientRect().top-this.previewEl.getBoundingClientRect().top;return G<z?null:q},Z.prototype.syncPreviewScrollTop=function(X){if(X===void 0)X=!1;var K=this,z=K.editorView,J=K.previewEl,Q=K.previewRoot,Y=z.dom.getBoundingClientRect(),q=Y.left,G=Y.top,U=z.posAtCoords({left:q,top:G}),V=z.state.doc,W=this.getMdNodeAtPos(V,U);if(!W||DU(W))return;var A=J.scrollTop,j=z.dom,H=j.scrollTop,R=j.scrollHeight,F=j.clientHeight,B=j.children,O=R-H<=F+f18,L=O?J.scrollHeight:0;if(H&&!O){if(X){var D=this.getScrollTopByCaretPos();if(!D)return;L=D}else{var I=X6(this.previewRoot,W),k=I.el,x=I.mdNode,w=Wz(V,x,B),N=w.height,c=w.rect,r=z1(k,Q)||k.offsetTop,g8=k.clientHeight,d3=G>c.top?Math.min((G-c.top)/N,1):0;L=r+g8*d3}L=this.getResolvedScrollTop("editor",H,L,A),this.latestEditorScrollTop=H}if(L!==A)this.run("editor",L,A)},Z.prototype.syncEditorScrollTop=function(X){var K=this,z=K.toastMark,J=K.editorView,Q=K.previewRoot,Y=K.previewEl,q=J.dom,G=J.state,U=Y.scrollTop,V=Y.clientHeight,W=Y.scrollHeight,A=W-U<=V,j=q.scrollTop,H=A?q.scrollHeight:0;if(U&&X&&!A){if(X=v08(X,Q),!X.getAttribute("data-nodeid"))return;var R=q.children,F=Number(X.getAttribute("data-nodeid")),B=X6(this.previewRoot,z.findNodeById(F)),O=B.mdNode,L=B.el,D=p3(O);H=R[D-1].offsetTop;var I=Wz(G.doc,O,R).height,k=p08(L,Q,F),x=k.nodeHeight,w=k.offsetTop;H+=h08(U,w,x,I),H=this.getResolvedScrollTop("preview",U,H,j),this.latestPreviewScrollTop=U}if(H!==j)this.run("preview",H,j)},Z.prototype.getResolvedScrollTop=function(X,K,z,J){var Q=X==="editor"?this.latestEditorScrollTop:this.latestPreviewScrollTop;if(Q===null)return z;return Q<K?Math.max(z,J):Math.min(z,J)},Z.prototype.run=function(X,K,z){var J=this,Q;if(X==="editor")Q=this.previewEl,this.blockedScroll="preview";else Q=this.editorView.dom,this.blockedScroll="editor";var Y={syncScrollTop:function(q){return Q.scrollTop=q},releaseEventBlock:function(){return J.blockedScroll=null}};h18(z,K,Y)},Z.prototype.clearTimer=function(){if(this.timer)clearTimeout(this.timer),this.timer=null},Z.prototype.destroy=function(){this.clearTimer(),this.eventEmitter.removeEventHandler("scroll"),this.eventEmitter.removeEventHandler("afterPreviewRender")},Z}(),m18={getPopupInitialValues:function(Z,X){var K=X.popupName;return K==="link"?{linkText:Z.getSelectedText()}:{}}};function l18(Z){Z.eventEmitter.listen("query",function(X,K){return m18[X](Z,K)})}var YY=function(){function Z(X){var K=this;this.initialHTML=X.el.innerHTML,X.el.innerHTML="",this.options=u6({previewStyle:"tab",previewHighlight:!0,initialEditType:"markdown",height:"300px",minHeight:"200px",language:"en-US",useCommandShortcut:!0,usageStatistics:!0,toolbarItems:[["heading","bold","italic","strike"],["hr","quote"],["ul","ol","task","indent","outdent"],["table","image","link"],["code","codeblock"],["scrollSync"]],hideModeSwitch:!1,linkAttributes:null,extendedAutolinks:!1,customHTMLRenderer:null,customMarkdownRenderer:null,referenceDefinition:!1,customHTMLSanitizer:null,frontMatter:!1,widgetRules:[],theme:"light",autofocus:!0},X);var z=this.options,J=z.customHTMLRenderer,Q=z.extendedAutolinks,Y=z.referenceDefinition,q=z.frontMatter,G=z.customMarkdownRenderer,U=z.useCommandShortcut,V=z.initialEditType,W=z.widgetRules,A=z.customHTMLSanitizer;this.mode=V||"markdown",this.mdPreviewStyle=this.options.previewStyle,this.i18n=v,this.i18n.setCode(this.options.language),this.eventEmitter=new XY,gU(W);var j=OJ(this.options.linkAttributes);this.pluginInfo=zY({plugins:this.options.plugins,eventEmitter:this.eventEmitter,usageStatistics:this.options.usageStatistics,instance:this});var H=this.pluginInfo,R=H.toHTMLRenderers,F=H.toMarkdownRenderers,B=H.mdPlugins,O=H.wwPlugins,L=H.wwNodeViews,D=H.mdCommands,I=H.wwCommands,k=H.markdownParsers,x={linkAttributes:j,customHTMLRenderer:s7(R,J),extendedAutolinks:Q,referenceDefinition:Y,frontMatter:q,sanitizer:A||O0},w=new w18(j,x.customHTMLRenderer),N=y08(x.customHTMLRenderer,x.sanitizer,w);if(this.toastMark=new yQ("",{disallowedHtmlBlockTags:["br","img"],extendedAutolinks:Q,referenceDefinition:Y,disallowDeepHeading:!0,frontMatter:q,customParser:k}),this.mdEditor=new wW(this.eventEmitter,{toastMark:this.toastMark,useCommandShortcut:U,mdPlugins:B}),this.preview=new vQ(this.eventEmitter,P(P({},x),{isViewer:!1,highlight:this.options.previewHighlight})),this.wwEditor=new Z18(this.eventEmitter,{toDOMAdaptor:w,useCommandShortcut:U,htmlSchemaMap:N,linkAttributes:j,wwPlugins:O,wwNodeViews:L}),this.convertor=new k18(this.wwEditor.getSchema(),P(P({},F),G),Q4(j,x.customHTMLRenderer),this.eventEmitter),this.setMinHeight(this.options.minHeight),this.setHeight(this.options.height),this.setMarkdown(this.options.initialValue,!1),this.options.placeholder)this.setPlaceholder(this.options.placeholder);if(!this.options.initialValue)this.setHTML(this.initialHTML,!1);if(this.commandManager=new W18(this.eventEmitter,this.mdEditor.commands,this.wwEditor.commands,function(){return K.mode}),this.options.usageStatistics)jU();if(this.scrollSync=new _18(this.mdEditor,this.preview,this.eventEmitter),this.addInitEvent(),this.addInitCommand(D,I),l18(this),this.options.hooks)Z3(this.options.hooks,function(c,r){return K.addHook(r,c)});if(this.options.events)Z3(this.options.events,function(c,r){return K.on(r,c)});this.eventEmitter.emit("load",this),this.moveCursorToStart(this.options.autofocus)}return Z.prototype.addInitEvent=function(){var X=this;this.on("needChangeMode",this.changeMode.bind(this)),this.on("loadUI",function(){if(X.height!=="auto"){var K=Math.min(parseInt(X.minHeight,10),parseInt(X.height,10)-75)+"px";X.setMinHeight(K)}}),QV(this.eventEmitter)},Z.prototype.addInitCommand=function(X,K){var z=this,J=function(Q,Y){Object.keys(Y).forEach(function(q){z.addCommand(Q,q,Y[q])})};this.addCommand("markdown","toggleScrollSync",function(Q){return z.eventEmitter.emit("toggleScrollSync",Q.active),!0}),J("markdown",X),J("wysiwyg",K)},Z.prototype.getCurrentModeEditor=function(){return this.isMarkdownMode()?this.mdEditor:this.wwEditor},Z.factory=function(X){return X.viewer?new JY(X):new Z(X)},Z.setLanguage=function(X,K){v.setLanguage(X,K)},Z.prototype.changePreviewStyle=function(X){if(this.mdPreviewStyle!==X)this.mdPreviewStyle=X,this.eventEmitter.emit("changePreviewStyle",X)},Z.prototype.exec=function(X,K){this.commandManager.exec(X,K)},Z.prototype.addCommand=function(X,K,z){var J=this,Q=function(Y){if(Y===void 0)Y={};var q=(X==="markdown"?J.mdEditor:J.wwEditor).view;z(Y,q.state,q.dispatch,q)};this.commandManager.addCommand(X,K,Q)},Z.prototype.on=function(X,K){this.eventEmitter.listen(X,K)},Z.prototype.off=function(X){this.eventEmitter.removeEventHandler(X)},Z.prototype.addHook=function(X,K){this.eventEmitter.removeEventHandler(X),this.eventEmitter.listen(X,K)},Z.prototype.removeHook=function(X){this.eventEmitter.removeEventHandler(X)},Z.prototype.focus=function(){this.getCurrentModeEditor().focus()},Z.prototype.blur=function(){this.getCurrentModeEditor().blur()},Z.prototype.moveCursorToEnd=function(X){if(X===void 0)X=!0;this.getCurrentModeEditor().moveCursorToEnd(X)},Z.prototype.moveCursorToStart=function(X){if(X===void 0)X=!0;this.getCurrentModeEditor().moveCursorToStart(X)},Z.prototype.setMarkdown=function(X,K){if(X===void 0)X="";if(K===void 0)K=!0;if(this.mdEditor.setMarkdown(X,K),this.isWysiwygMode()){var z=this.toastMark.getRootNode(),J=this.convertor.toWysiwygModel(z);this.wwEditor.setModel(J,K)}},Z.prototype.setHTML=function(X,K){if(X===void 0)X="";if(K===void 0)K=!0;var z=document.createElement("div");z.innerHTML=KV(X);var J=Z5.fromSchema(this.wwEditor.schema).parse(z);if(this.isMarkdownMode())this.mdEditor.setMarkdown(this.convertor.toMarkdownText(J),K);else this.wwEditor.setModel(J,K)},Z.prototype.getMarkdown=function(){if(this.isMarkdownMode())return this.mdEditor.getMarkdown();return this.convertor.toMarkdownText(this.wwEditor.getModel())},Z.prototype.getHTML=function(){var X=this;this.eventEmitter.holdEventInvoke(function(){if(X.isMarkdownMode()){var J=X.toastMark.getRootNode(),Q=X.convertor.toWysiwygModel(J);X.wwEditor.setModel(Q)}});var K=s6(this.wwEditor.view.dom.innerHTML);if(this.placeholder){var z=new RegExp('<span class="placeholder[^>]+>'+this.placeholder+"</span>","i");return K.replace(z,"")}return K},Z.prototype.insertText=function(X){this.getCurrentModeEditor().replaceSelection(X)},Z.prototype.setSelection=function(X,K){this.getCurrentModeEditor().setSelection(X,K)},Z.prototype.replaceSelection=function(X,K,z){this.getCurrentModeEditor().replaceSelection(X,K,z)},Z.prototype.deleteSelection=function(X,K){this.getCurrentModeEditor().deleteSelection(X,K)},Z.prototype.getSelectedText=function(X,K){return this.getCurrentModeEditor().getSelectedText(X,K)},Z.prototype.getRangeInfoOfNode=function(X){return this.getCurrentModeEditor().getRangeInfoOfNode(X)},Z.prototype.addWidget=function(X,K,z){this.getCurrentModeEditor().addWidget(X,K,z)},Z.prototype.replaceWithWidget=function(X,K,z){this.getCurrentModeEditor().replaceWithWidget(X,K,z)},Z.prototype.setHeight=function(X){var K=this.options.el;if(b5(X)){if(X==="auto")G5(K,"auto-height");else n8(K,"auto-height");this.setMinHeight(this.getMinHeight())}V5(K,{height:X}),this.height=X},Z.prototype.getHeight=function(){return this.height},Z.prototype.setMinHeight=function(X){if(X!==this.minHeight){var K=this.height||this.options.height;if(K!=="auto"&&this.options.el.querySelector("."+y("main")))X=Math.min(parseInt(X,10),parseInt(K,10)-75)+"px";var z=parseInt(X,10);this.minHeight=X,this.wwEditor.setMinHeight(z),this.mdEditor.setMinHeight(z),this.preview.setMinHeight(z)}},Z.prototype.getMinHeight=function(){return this.minHeight},Z.prototype.isMarkdownMode=function(){return this.mode==="markdown"},Z.prototype.isWysiwygMode=function(){return this.mode==="wysiwyg"},Z.prototype.isViewer=function(){return!1},Z.prototype.getCurrentPreviewStyle=function(){return this.mdPreviewStyle},Z.prototype.changeMode=function(X,K){if(this.mode===X)return;if(this.mode=X,this.isWysiwygMode()){var z=this.toastMark.getRootNode(),J=this.convertor.toWysiwygModel(z);this.wwEditor.setModel(J)}else{var J=this.wwEditor.getModel();this.mdEditor.setMarkdown(this.convertor.toMarkdownText(J),!K)}if(this.eventEmitter.emit("removePopupWidget"),this.eventEmitter.emit("changeMode",X),!K){var Q=this.convertor.getMappedPos();if(this.focus(),this.isWysiwygMode()&&D5(Q))this.wwEditor.setSelection(Q);else if(Array.isArray(Q))this.mdEditor.setSelection(Q)}},Z.prototype.destroy=function(){var X=this;this.wwEditor.destroy(),this.mdEditor.destroy(),this.preview.destroy(),this.scrollSync.destroy(),this.eventEmitter.emit("destroy"),this.eventEmitter.getEvents().forEach(function(K,z){return X.off(z)})},Z.prototype.hide=function(){this.eventEmitter.emit("hide")},Z.prototype.show=function(){this.eventEmitter.emit("show")},Z.prototype.setScrollTop=function(X){this.getCurrentModeEditor().setScrollTop(X)},Z.prototype.getScrollTop=function(){return this.getCurrentModeEditor().getScrollTop()},Z.prototype.reset=function(){this.wwEditor.setModel([]),this.mdEditor.setMarkdown("")},Z.prototype.getSelection=function(){return this.getCurrentModeEditor().getSelection()},Z.prototype.setPlaceholder=function(X){this.placeholder=X,this.mdEditor.setPlaceholder(X),this.wwEditor.setPlaceholder(X)},Z.prototype.getEditorElements=function(){return{mdEditor:this.mdEditor.getElement(),mdPreview:this.preview.getElement(),wwEditor:this.wwEditor.getElement()}},Z.prototype.convertPosToMatchEditorMode=function(X,K,z){var J,Q;if(K===void 0)K=X;if(z===void 0)z=this.mode;var Y=this.mdEditor.view.state.doc,q=Array.isArray(X),G=Array.isArray(K),U=X,V=K;if(q!==G)throw new Error("Types of arguments must be same");if(z==="markdown"&&!q&&!G)J=$7(Y,X,K),U=J[0],V=J[1];else if(z==="wysiwyg"&&q&&G)Q=H0(Y,X,K),U=Q[0],V=Q[1];return[U,V]},Z}();function c18(Z){for(var X,K,z=arguments,J=1,Q="",Y="",q=[0],G=function(V){J===1&&(V||(Q=Q.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?q.push(V?z[V]:Q):J===3&&(V||Q)?(q[1]=V?z[V]:Q,J=2):J===2&&Q==="..."&&V?q[2]=_6(q[2]||{},z[V]):J===2&&Q&&!V?(q[2]=q[2]||{})[Q]=!0:J>=5&&(J===5?((q[2]=q[2]||{})[K]=V?Q?Q+z[V]:z[V]:Q,J=6):(V||Q)&&(q[2][K]+=V?Q+z[V]:Q)),Q=""},U=0;U<Z.length;U++){U&&(J===1&&G(),G(U));for(let V=0;V<Z[U].length;V++)X=Z[U][V],J===1?X==="<"?(G(),q=[q,"",null],J=3):Q+=X:J===4?Q==="--"&&X===">"?(J=1,Q=""):Q=X+Q[0]:Y?X===Y?Y="":Q+=X:X==='"'||X==="'"?Y=X:X===">"?(G(),J=1):J&&(X==="="?(J=5,K=Q,Q=""):X==="/"&&(J<5||Z[U][V+1]===">")?(G(),J===3&&(q=q[0]),J=q,(q=q[0]).push(this.apply(null,J.slice(1))),J=0):X===" "||X==="\t"||X===`
`||X==="\r"?(G(),J=2):Q+=X),J===3&&Q==="!--"&&(J=4,q=q[0])}return G(),q.length>2?q.slice(1):q[1]}function p18(Z){return typeof Z==="boolean"||Z instanceof Boolean}var i18=p18,d18=function(){function Z(X){this.current=X,this.root=X,this.entering=!0}return Z.prototype.walk=function(){var X=this,K=X.entering,z=X.current;if(!z)return null;if(K)if(z.firstChild)this.current=z.firstChild,this.entering=!0;else this.entering=!1;else if(z===this.root)this.current=null;else if(z.next)this.current=z.next,this.entering=!0;else this.current=z.parent,this.entering=!1;return{vnode:z,entering:K}},Z}(),r8=function(){function Z(X,K,z){if(this.parent=null,this.old=null,this.firstChild=null,this.next=null,this.skip=!1,this.type=X,this.props=K,this.children=z,this.props.children=z,K.ref)this.ref=K.ref,delete K.ref;if(K.key)this.key=K.key,delete K.key}return Z.prototype.walker=function(){return new d18(this)},Z.removalNodes=[],Z}();function s18(Z){return new r8("TEXT_NODE",{nodeValue:Z},[])}function kz(Z,X){var K=Z;if(i18(Z)||Z==null)K=null;else if(b5(Z)||D5(Z))K=s18(String(Z));if(K)X.push(K)}function n18(Z,X){var K=[];for(var z=2;z<arguments.length;z++)K[z-2]=arguments[z];var J=[];return K.forEach(function(Q){if(Array.isArray(Q))Q.forEach(function(Y){kz(Y,J)});else kz(Q,J)}),new r8(Z,X||{},J)}var l=c18.bind(n18);function a18(Z){return Z===Object(Z)}var r18=a18;function o18(Z){var X;if(Z.type==="TEXT_NODE")X=document.createTextNode(Z.props.nodeValue);else X=document.createElement(Z.type),GY(X,{},Z.props);return X}function qY(Z,X){if(Z.node)X.removeChild(Z.node);else qY(Z.firstChild,X)}function t18(Z,X,K){Object.keys(X).forEach(function(z){if(/^on/.test(z)){if(!K[z]||X[z]!==K[z]){var J=z.slice(2).toLowerCase();Z.removeEventListener(J,X[z])}}else if(z!=="children"&&!K[z]&&!oU(Z))Z.removeAttribute(z)}),GY(Z,X,K,function(z){return!v6(X[z],K[z])})}var e18=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function GY(Z,X,K,z){Object.keys(K).forEach(function(J){if(!z||z(J)){if(/^on/.test(J)){var Q=J.slice(2).toLowerCase();Z.addEventListener(Q,K[J])}else if(J==="nodeValue")Z[J]=K[J];else if(J==="style"&&r18(K[J]))Z98(Z,X[J],K[J]);else if(J!=="children")if(K[J]===!1)Z.removeAttribute(J);else Z.setAttribute(J,K[J])}})}function Z98(Z,X,K){if(X)Object.keys(X).forEach(function(z){Z.style[z]=""});Object.keys(K).forEach(function(z){var J=K[z];Z.style[z]=D5(J)&&!e18.test(z)?J+"px":J})}function G4(Z){if(r8.removalNodes.forEach(function(Q){return yz(Q)}),Z){var X=void 0,K=Z.walker();while(X=K.walk())if(Z=X.vnode,X.entering)yz(Z);else if(c8(Z.type)){var z=Z.component;if(!Z.old&&z.mounted)z.mounted();if(Z.old&&z.updated){var J=z.prevProps||{};z.updated(J)}}}}function bz(Z){var X=Z.parent;while(!X.node)X=X.parent;return X.node}function yz(Z){if(!Z||!Z.parent)return;if(Z.node){var X=bz(Z);if(Z.effect==="A")X.appendChild(Z.node);else if(Z.effect==="U")t18(Z.node,Z.old.props,Z.props)}if(Z.effect==="D"){var K=void 0,z=Z.walker();while(K=z.walk())if(Z=K.vnode,!K.entering)if(c8(Z.type)){var J=Z.component;if(J.beforeDestroy)J.beforeDestroy()}else{var X=bz(Z);qY(Z,X)}}if(Z.ref){if(Z.component)Z.ref(Z.component);else if(Z.node)Z.ref(Z.node)}}function X98(Z,X){var{props:K,component:z}=X;if(z)return z.prevProps=z.props,z.props=X.props,z;return new Z(K)}function UY(Z){var X=Z;while(Z&&!Z.skip){if(c8(Z.type)){var K=X98(Z.type,Z);K.vnode=Z,Z.component=K,Z.props.children=Z.children=[K.render()],Nz(Z)}else{if(!Z.node)Z.node=o18(Z);Nz(Z)}if(Z.firstChild)Z=Z.firstChild;else{while(Z&&Z.parent&&!Z.next)if(Z=Z.parent,Z===X)break;Z=Z.next}}}function K98(Z,X){return Z&&X&&X.type===Z.type&&(!X.key||X.key===Z.key)}function Nz(Z){var X=Z.children,K=Z.old?Z.old.firstChild:null,z=null;X.forEach(function(Q,Y){var q=K98(K,Q);if(q)Q.old=K,Q.parent=Z,Q.node=K.node,Q.component=K.component,Q.effect="U";if(Q&&!q)Q.old=null,Q.parent=Z,Q.node=null,Q.effect="A";if(K&&!q)r8.removalNodes.push(K),K.effect="D";if(K)K=K.next;if(Y===0)Z.firstChild=Q;else if(Q)z.next=Q;z=Q});var J=C8(X);if(!X.length)while(K)r8.removalNodes.push(K),K.effect="D",K=K.next;while(K&&J)if(K&&J.old!==K)r8.removalNodes.push(K),K.effect="D",K=K.next}function z98(Z){Z.effect="D",r8.removalNodes=[Z],G4(),r8.removalNodes=[]}function J98(Z){var X=Z.vnode;if(X.effect="U",X.old=X,X.next)X.next.skip=!0;if(r8.removalNodes=[],UY(X),G4(X),X.next)X.next.skip=!1}function Q98(Z,X){var K=new r8(Z.tagName.toLowerCase(),{},[X]);return K.node=Z,r8.removalNodes=[],UY(K),G4(K),function(){return z98(K.firstChild)}}var S8=function(){function Z(X){this.props=X,this.state={},this.refs={}}return Z.prototype.setState=function(X){var K=P(P({},this.state),X);if(!v6(this.state,K))this.state=K,J98(this)},Z}(),Y98=function(Z){b(X,Z);function X(K){var z=Z.call(this,K)||this;return z.state={hide:!1},z}return X.prototype.show=function(){this.setState({hide:!1})},X.prototype.hide=function(){this.setState({hide:!0})},X.prototype.render=function(){var K=this.props,z=K.editorType,J=K.eventEmitter;return l(Tz||(Tz=m([`
      <div class="`,'" style="display: ',`">
        <div
          class="tab-item`,`"
          onClick=`,`
        >
          `,`
        </div>
        <div
          class="tab-item`,`"
          onClick=`,`
        >
          `,`
        </div>
      </div>
    `],[`
      <div class="`,'" style="display: ',`">
        <div
          class="tab-item`,`"
          onClick=`,`
        >
          `,`
        </div>
        <div
          class="tab-item`,`"
          onClick=`,`
        >
          `,`
        </div>
      </div>
    `])),y("mode-switch"),this.state.hide?"none":"block",z==="markdown"?" active":"",function(){J.emit("needChangeMode","markdown")},v.get("Markdown"),z==="wysiwyg"?" active":"",function(){J.emit("needChangeMode","wysiwyg")},v.get("WYSIWYG"))},X}(S8),Tz;function q98(Z,X){var K,z;X=X||0;function J(){z=Array.prototype.slice.call(arguments),window.clearTimeout(K),K=window.setTimeout(function(){Z.apply(null,z)},X)}return J}var G98=q98,U98=G98;function V98(Z,X){var K,z=!0,J=function(V){Z.apply(null,V),K=null},Q,Y,q;X=X||0,Q=U98(J,X);function G(){if(q=Array.prototype.slice.call(arguments),z){J(q),z=!1;return}if(Y=Number(new Date),K=K||Y,Q(q),Y-K>=X)J(q)}function U(){z=!0,K=null}return G.reset=U,G}var W98=V98,VY=function(){if(typeof Map!=="undefined")return Map;function Z(X,K){var z=-1;return X.some(function(J,Q){if(J[0]===K)return z=Q,!0;return!1}),z}return function(){function X(){this.__entries__=[]}return Object.defineProperty(X.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),X.prototype.get=function(K){var z=Z(this.__entries__,K),J=this.__entries__[z];return J&&J[1]},X.prototype.set=function(K,z){var J=Z(this.__entries__,K);if(~J)this.__entries__[J][1]=z;else this.__entries__.push([K,z])},X.prototype.delete=function(K){var z=this.__entries__,J=Z(z,K);if(~J)z.splice(J,1)},X.prototype.has=function(K){return!!~Z(this.__entries__,K)},X.prototype.clear=function(){this.__entries__.splice(0)},X.prototype.forEach=function(K,z){if(z===void 0)z=null;for(var J=0,Q=this.__entries__;J<Q.length;J++){var Y=Q[J];K.call(z,Y[1],Y[0])}},X}()}(),x6=typeof window!=="undefined"&&typeof document!=="undefined"&&window.document===document,Q1=function(){if(typeof global!=="undefined"&&global.Math===Math)return global;if(typeof self!=="undefined"&&self.Math===Math)return self;if(typeof window!=="undefined"&&window.Math===Math)return window;return Function("return this")()}(),A98=function(){if(typeof requestAnimationFrame==="function")return requestAnimationFrame.bind(Q1);return function(Z){return setTimeout(function(){return Z(Date.now())},16.666666666666668)}}(),H98=2;function j98(Z,X){var K=!1,z=!1,J=0;function Q(){if(K)K=!1,Z();if(z)q()}function Y(){A98(Q)}function q(){var G=Date.now();if(K){if(G-J<H98)return;z=!0}else K=!0,z=!1,setTimeout(Y,X);J=G}return q}var R98=20,F98=["top","right","bottom","left","width","height","size","weight"],B98=typeof MutationObserver!=="undefined",E98=function(){function Z(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=j98(this.refresh.bind(this),R98)}return Z.prototype.addObserver=function(X){if(!~this.observers_.indexOf(X))this.observers_.push(X);if(!this.connected_)this.connect_()},Z.prototype.removeObserver=function(X){var K=this.observers_,z=K.indexOf(X);if(~z)K.splice(z,1);if(!K.length&&this.connected_)this.disconnect_()},Z.prototype.refresh=function(){var X=this.updateObservers_();if(X)this.refresh()},Z.prototype.updateObservers_=function(){var X=this.observers_.filter(function(K){return K.gatherActive(),K.hasActive()});return X.forEach(function(K){return K.broadcastActive()}),X.length>0},Z.prototype.connect_=function(){if(!x6||this.connected_)return;if(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),B98)this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0});else document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0;this.connected_=!0},Z.prototype.disconnect_=function(){if(!x6||!this.connected_)return;if(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_)this.mutationsObserver_.disconnect();if(this.mutationEventsAdded_)document.removeEventListener("DOMSubtreeModified",this.refresh);this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1},Z.prototype.onTransitionEnd_=function(X){var K=X.propertyName,z=K===void 0?"":K,J=F98.some(function(Q){return!!~z.indexOf(Q)});if(J)this.refresh()},Z.getInstance=function(){if(!this.instance_)this.instance_=new Z;return this.instance_},Z.instance_=null,Z}(),WY=function(Z,X){for(var K=0,z=Object.keys(X);K<z.length;K++){var J=z[K];Object.defineProperty(Z,J,{value:X[J],enumerable:!1,writable:!1,configurable:!0})}return Z},U3=function(Z){var X=Z&&Z.ownerDocument&&Z.ownerDocument.defaultView;return X||Q1},AY=O1(0,0,0,0);function Y1(Z){return parseFloat(Z)||0}function xz(Z){var X=[];for(var K=1;K<arguments.length;K++)X[K-1]=arguments[K];return X.reduce(function(z,J){var Q=Z["border-"+J+"-width"];return z+Y1(Q)},0)}function P98(Z){var X=["top","right","bottom","left"],K={};for(var z=0,J=X;z<J.length;z++){var Q=J[z],Y=Z["padding-"+Q];K[Q]=Y1(Y)}return K}function O98(Z){var X=Z.getBBox();return O1(0,0,X.width,X.height)}function L98(Z){var{clientWidth:X,clientHeight:K}=Z;if(!X&&!K)return AY;var z=U3(Z).getComputedStyle(Z),J=P98(z),Q=J.left+J.right,Y=J.top+J.bottom,q=Y1(z.width),G=Y1(z.height);if(z.boxSizing==="border-box"){if(Math.round(q+Q)!==X)q-=xz(z,"left","right")+Q;if(Math.round(G+Y)!==K)G-=xz(z,"top","bottom")+Y}if(!D98(Z)){var U=Math.round(q+Q)-X,V=Math.round(G+Y)-K;if(Math.abs(U)!==1)q-=U;if(Math.abs(V)!==1)G-=V}return O1(J.left,J.top,q,G)}var M98=function(){if(typeof SVGGraphicsElement!=="undefined")return function(Z){return Z instanceof U3(Z).SVGGraphicsElement};return function(Z){return Z instanceof U3(Z).SVGElement&&typeof Z.getBBox==="function"}}();function D98(Z){return Z===U3(Z).document.documentElement}function I98(Z){if(!x6)return AY;if(M98(Z))return O98(Z);return L98(Z)}function C98(Z){var{x:X,y:K,width:z,height:J}=Z,Q=typeof DOMRectReadOnly!=="undefined"?DOMRectReadOnly:Object,Y=Object.create(Q.prototype);return WY(Y,{x:X,y:K,width:z,height:J,top:K,right:X+z,bottom:J+K,left:X}),Y}function O1(Z,X,K,z){return{x:Z,y:X,width:K,height:z}}var S98=function(){function Z(X){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=O1(0,0,0,0),this.target=X}return Z.prototype.isActive=function(){var X=I98(this.target);return this.contentRect_=X,X.width!==this.broadcastWidth||X.height!==this.broadcastHeight},Z.prototype.broadcastRect=function(){var X=this.contentRect_;return this.broadcastWidth=X.width,this.broadcastHeight=X.height,X},Z}(),k98=function(){function Z(X,K){var z=C98(K);WY(this,{target:X,contentRect:z})}return Z}(),b98=function(){function Z(X,K,z){if(this.activeObservations_=[],this.observations_=new VY,typeof X!=="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=X,this.controller_=K,this.callbackCtx_=z}return Z.prototype.observe=function(X){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element==="undefined"||!(Element instanceof Object))return;if(!(X instanceof U3(X).Element))throw new TypeError('parameter 1 is not of type "Element".');var K=this.observations_;if(K.has(X))return;K.set(X,new S98(X)),this.controller_.addObserver(this),this.controller_.refresh()},Z.prototype.unobserve=function(X){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element==="undefined"||!(Element instanceof Object))return;if(!(X instanceof U3(X).Element))throw new TypeError('parameter 1 is not of type "Element".');var K=this.observations_;if(!K.has(X))return;if(K.delete(X),!K.size)this.controller_.removeObserver(this)},Z.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},Z.prototype.gatherActive=function(){var X=this;this.clearActive(),this.observations_.forEach(function(K){if(K.isActive())X.activeObservations_.push(K)})},Z.prototype.broadcastActive=function(){if(!this.hasActive())return;var X=this.callbackCtx_,K=this.activeObservations_.map(function(z){return new k98(z.target,z.broadcastRect())});this.callback_.call(X,K,X),this.clearActive()},Z.prototype.clearActive=function(){this.activeObservations_.splice(0)},Z.prototype.hasActive=function(){return this.activeObservations_.length>0},Z}(),HY=typeof WeakMap!=="undefined"?new WeakMap:new VY,jY=function(){function Z(X){if(!(this instanceof Z))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var K=E98.getInstance(),z=new b98(X,K,this);HY.set(this,z)}return Z}();["observe","unobserve","disconnect"].forEach(function(Z){jY.prototype[Z]=function(){var X;return(X=HY.get(this))[Z].apply(X,arguments)}});var y98=function(){if(typeof Q1.ResizeObserver!=="undefined")return Q1.ResizeObserver;return jY}(),N98=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return X.prototype.execCommand=function(K){var z=U5(K.target,"li");this.props.execCommand("heading",{level:Number(z.getAttribute("data-level"))})},X.prototype.render=function(){var K=this;return l(uz||(uz=m([`
      <ul
        onClick=`,`
        aria-role="menu"
        aria-label="`,`"
      >
        `,`
        <li data-type="Paragraph" aria-role="menuitem">
          <div>`,`</div>
        </li>
      </ul>
    `],[`
      <ul
        onClick=`,`
        aria-role="menu"
        aria-label="`,`"
      >
        `,`
        <li data-type="Paragraph" aria-role="menuitem">
          <div>`,`</div>
        </li>
      </ul>
    `])),function(z){return K.execCommand(z)},v.get("Headings"),[1,2,3,4,5,6].map(function(z){return l(gz||(gz=m([`
              <li data-level="`,`" data-type="Heading" aria-role="menuitem">
                <`,">"," ",`</$>
              </li>
            `],[`
              <li data-level="`,`" data-type="Heading" aria-role="menuitem">
                <`,">"," ",`</$>
              </li>
            `])),z,"h"+z,v.get("Heading"),z)}),v.get("Paragraph"))},X}(S8),gz,uz,RY=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return X.prototype.toggleTab=function(K,z){this.props.onClick(K,z)},X.prototype.render=function(){var K=this;return l(vz||(vz=m([`
      <div class="`,`" aria-role="tabpanel">
        `,`
      </div>
    `],[`
      <div class="`,`" aria-role="tabpanel">
        `,`
      </div>
    `])),y("tabs"),this.props.tabs.map(function(z){var{name:J,text:Q}=z,Y=K.props.activeTab===J;return l(wz||(wz=m([`
            <div
              class="tab-item`,`"
              onClick=`,`
              aria-role="tab"
              aria-label="`,`"
              aria-selected="`,`"
              tabindex="`,`"
            >
              `,`
            </div>
          `],[`
            <div
              class="tab-item`,`"
              onClick=`,`
              aria-role="tab"
              aria-label="`,`"
              aria-selected="`,`"
              tabindex="`,`"
            >
              `,`
            </div>
          `])),Y?" active":"",function(q){return K.toggleTab(q,J)},v.get(Q),Y?"true":"false",Y?"0":"-1",v.get(Q))}))},X}(S8),wz,vz,T98="ui",x98=function(Z){b(X,Z);function X(K){var z=Z.call(this,K)||this;return z.initialize=function(J){if(J===void 0)J="file";var Q=z.refs.url;Q.value="",z.refs.altText.value="",z.refs.file.value="",n8(Q,"wrong"),z.setState({activeTab:J,file:null,fileNameElClassName:""})},z.execCommand=function(){if(z.state.activeTab==="file")z.emitAddImageBlob();else z.emitAddImage()},z.toggleTab=function(J,Q){if(Q!==z.state.activeTab)z.initialize(Q)},z.showFileSelectBox=function(){z.refs.file.click()},z.changeFile=function(J){var Q=J.target.files;if(Q===null||Q===void 0?void 0:Q.length)z.setState({file:Q[0]})},z.state={activeTab:"file",file:null,fileNameElClassName:""},z.tabs=[{name:"file",text:"File"},{name:"url",text:"URL"}],z}return X.prototype.emitAddImageBlob=function(){var K=this,z=this.refs.file.files,J=this.refs.altText,Q=" wrong";if(z===null||z===void 0?void 0:z.length){Q="";var Y=z.item(0),q=function(G,U){return K.props.execCommand("addImage",{imageUrl:G,altText:U||J.value})};this.props.eventEmitter.emit("addImageBlobHook",Y,q,T98)}this.setState({fileNameElClassName:Q})},X.prototype.emitAddImage=function(){var K=this.refs.url,z=this.refs.altText,J=K.value,Q=z.value||"image";if(n8(K,"wrong"),!J.length){G5(K,"wrong");return}if(J)this.props.execCommand("addImage",{imageUrl:J,altText:Q})},X.prototype.preventSelectStart=function(K){K.preventDefault()},X.prototype.updated=function(){if(!this.props.show)this.initialize()},X.prototype.render=function(){var K=this,z=this.state,J=z.activeTab,Q=z.file,Y=z.fileNameElClassName;return l($z||($z=m([`
      <div aria-label="`,`">
        <`," tabs="," activeTab="," onClick=",` />
        <div style="display:`,`">
          <label for="toastuiImageUrlInput">`,`</label>
          <input
            id="toastuiImageUrlInput"
            type="text"
            ref=`,`
          />
        </div>
        <div style="display:`,`;position: relative;">
          <label for="toastuiImageFileInput">`,`</label>
          <span
            class="`,"",`"
            onClick=`,`
            onSelectstart=`,`
          >
            `,`
          </span>
          <button
            type="button"
            class="`,`"
            onClick=`,`
          >
            `,`
          </button>
          <input
            id="toastuiImageFileInput"
            type="file"
            accept="image/*"
            onChange=`,`
            ref=`,`
          />
        </div>
        <label for="toastuiAltTextInput">`,`</label>
        <input
          id="toastuiAltTextInput"
          type="text"
          ref=`,`
        />
        <div class="`,`">
          <button type="button" class="`,'" onClick=',`>
            `,`
          </button>
          <button type="button" class="`,'" onClick=',`>
            `,`
          </button>
        </div>
      </div>
    `],[`
      <div aria-label="`,`">
        <`," tabs="," activeTab="," onClick=",` />
        <div style="display:`,`">
          <label for="toastuiImageUrlInput">`,`</label>
          <input
            id="toastuiImageUrlInput"
            type="text"
            ref=`,`
          />
        </div>
        <div style="display:`,`;position: relative;">
          <label for="toastuiImageFileInput">`,`</label>
          <span
            class="`,"",`"
            onClick=`,`
            onSelectstart=`,`
          >
            `,`
          </span>
          <button
            type="button"
            class="`,`"
            onClick=`,`
          >
            `,`
          </button>
          <input
            id="toastuiImageFileInput"
            type="file"
            accept="image/*"
            onChange=`,`
            ref=`,`
          />
        </div>
        <label for="toastuiAltTextInput">`,`</label>
        <input
          id="toastuiAltTextInput"
          type="text"
          ref=`,`
        />
        <div class="`,`">
          <button type="button" class="`,'" onClick=',`>
            `,`
          </button>
          <button type="button" class="`,'" onClick=',`>
            `,`
          </button>
        </div>
      </div>
    `])),v.get("Insert image"),RY,this.tabs,J,this.toggleTab,J==="url"?"block":"none",v.get("Image URL"),function(q){return K.refs.url=q},J==="file"?"block":"none",v.get("Select image file"),y("file-name"),Q?" has-file":Y,this.showFileSelectBox,this.preventSelectStart,Q?Q.name:v.get("No file"),y("file-select-button"),this.showFileSelectBox,v.get("Choose a file"),this.changeFile,function(q){return K.refs.file=q},v.get("Description"),function(q){return K.refs.altText=q},y("button-container"),y("close-button"),this.props.hidePopup,v.get("Cancel"),y("ok-button"),this.execCommand,v.get("OK"))},X}(S8),$z,g98=function(Z){b(X,Z);function X(){var K=Z!==null&&Z.apply(this,arguments)||this;return K.execCommand=function(){var z=K.refs.url,J=K.refs.text;if(n8(z,"wrong"),n8(J,"wrong"),z.value.length<1){G5(z,"wrong");return}var Q=o8(K.props.initialValues.linkUrl);if(Q&&J.value.length<1){G5(J,"wrong");return}K.props.execCommand("addLink",{linkUrl:z.value,linkText:J.value})},K}return X.prototype.initialize=function(){var K=this.props.initialValues,z=K.linkUrl,J=K.linkText,Q=this.refs.url,Y=this.refs.text;if(n8(Q,"wrong"),n8(Y,"wrong","disabled"),Y.removeAttribute("disabled"),z)G5(Y,"disabled"),Y.setAttribute("disabled","disabled");Q.value=z||"",Y.value=J||""},X.prototype.mounted=function(){this.initialize()},X.prototype.updated=function(K){if(!K.show&&this.props.show)this.initialize()},X.prototype.render=function(){var K=this;return l(hz||(hz=m([`
      <div aria-label="`,`">
        <label for="toastuiLinkUrlInput">`,`</label>
        <input
          id="toastuiLinkUrlInput"
          type="text"
          ref=`,`
        />
        <label for="toastuiLinkTextInput">`,`</label>
        <input
          id="toastuiLinkTextInput"
          type="text"
          ref=`,`
        />
        <div class="`,`">
          <button type="button" class="`,'" onClick=',`>
            `,`
          </button>
          <button type="button" class="`,'" onClick=',`>
            `,`
          </button>
        </div>
      </div>
    `],[`
      <div aria-label="`,`">
        <label for="toastuiLinkUrlInput">`,`</label>
        <input
          id="toastuiLinkUrlInput"
          type="text"
          ref=`,`
        />
        <label for="toastuiLinkTextInput">`,`</label>
        <input
          id="toastuiLinkTextInput"
          type="text"
          ref=`,`
        />
        <div class="`,`">
          <button type="button" class="`,'" onClick=',`>
            `,`
          </button>
          <button type="button" class="`,'" onClick=',`>
            `,`
          </button>
        </div>
      </div>
    `])),v.get("Insert link"),v.get("URL"),function(z){return K.refs.url=z},v.get("Link text"),function(z){return K.refs.text=z},y("button-container"),y("close-button"),this.props.hidePopup,v.get("Cancel"),y("ok-button"),this.execCommand,v.get("OK"))},X}(S8),hz,fz=20,_z=20,mz=5,lz=14,cz=5,pz=9,u98=1,w98=1,iz=1,v98=function(Z){b(X,Z);function X(K){var z=Z.call(this,K)||this;return z.extendSelectionRange=function(J){var{pageX:Q,pageY:Y}=J,q=Q-z.offsetRect.left,G=Y-z.offsetRect.top,U=z.getSelectionRangeByOffset(q,G);z.setState(P({},U))},z.execCommand=function(){z.props.execCommand("addTable",{rowCount:z.state.rowIdx+1,columnCount:z.state.colIdx+1})},z.state={rowIdx:-1,colIdx:-1},z}return X.prototype.getDescription=function(){return this.state.colIdx===-1?"":this.state.colIdx+1+" x "+(this.state.rowIdx+1)},X.prototype.getBoundByRange=function(K,z){return{width:(K+1)*fz,height:(z+1)*_z}},X.prototype.getRangeByOffset=function(K,z){return{colIdx:Math.floor(K/fz),rowIdx:Math.floor(z/_z)}},X.prototype.getTableRange=function(){var K=this.state,z=K.colIdx,J=K.rowIdx,Q=Math.max(z,cz),Y=Math.max(J,mz);if(z>=cz&&Q<pz)Q+=1;if(J>=mz&&Y<lz)Y+=1;return{colIdx:Q+1,rowIdx:Y+1}},X.prototype.getSelectionAreaBound=function(){var K=this.getBoundByRange(this.state.colIdx,this.state.rowIdx),z=K.width,J=K.height;if(!z&&!J)return{display:"none"};return{width:z-iz,height:J-iz,display:"block"}},X.prototype.getSelectionRangeByOffset=function(K,z){var J=this.getRangeByOffset(K,z);return J.rowIdx=Math.min(Math.max(J.rowIdx,u98),lz),J.colIdx=Math.min(Math.max(J.colIdx,w98),pz),J},X.prototype.updated=function(){if(!this.props.show)this.setState({colIdx:-1,rowIdx:-1});else if(this.state.colIdx===-1&&this.state.rowIdx===-1){var K=this.refs.tableEl.getBoundingClientRect(),z=K.left,J=K.top;this.offsetRect={left:window.pageXOffset+z,top:window.pageYOffset+J}}},X.prototype.createTableArea=function(K){var{colIdx:z,rowIdx:J}=K,Q=[];for(var Y=0;Y<J;Y+=1){var q=[];for(var G=0;G<z;G+=1){var U=""+y("table-cell")+(Y>0?"":" header");q.push(l(dz||(dz=m(['<div class="','"></div>'],['<div class="','"></div>'])),U))}Q.push(l(sz||(sz=m(['<div class="','">',"</div>"],['<div class="','">',"</div>"])),y("table-row"),q))}return l(nz||(nz=m(['<div class="','">',"</div>"],['<div class="','">',"</div>"])),y("table"),Q)},X.prototype.render=function(){var K=this,z=this.getTableRange(),J=this.getSelectionAreaBound();return l(az||(az=m([`
      <div aria-label="`,`">
        <div
          class="`,`"
          ref=`,`
          onMousemove=`,`
          onClick=`,`
        >
          `,`
          <div class="`,'" style=',`></div>
        </div>
        <p class="`,'">',`</p>
      </div>
    `],[`
      <div aria-label="`,`">
        <div
          class="`,`"
          ref=`,`
          onMousemove=`,`
          onClick=`,`
        >
          `,`
          <div class="`,'" style=',`></div>
        </div>
        <p class="`,'">',`</p>
      </div>
    `])),v.get("Insert table"),y("table-selection"),function(Q){return K.refs.tableEl=Q},this.extendSelectionRange,this.execCommand,this.createTableArea(z),y("table-selection-layer"),J,y("table-description"),this.getDescription())},X}(S8),dz,sz,nz,az,$98=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return X.prototype.mounted=function(){this.refs.el.appendChild(this.props.body)},X.prototype.updated=function(K){this.refs.el.replaceChild(this.props.body,K.body)},X.prototype.render=function(){var K=this;return l(rz||(rz=m(["<div ref=","></div>"],["<div ref=","></div>"])),function(z){return K.refs.el=z})},X}(S8),rz;function g6(Z){return b5(Z)?f98(Z):Z}function h98(){var Z=document.createElement("label"),X=document.createElement("input"),K=document.createElement("span");Z.className="scroll-sync active",X.type="checkbox",X.checked=!0,K.className="switch";var z=function(J){return X.addEventListener("change",function(Q){var Y=Q.target.checked;if(Y)G5(Z,"active");else n8(Z,"active");J("toggleScrollSync",{active:Y})})};return Z.appendChild(X),Z.appendChild(K),{name:"scrollSync",el:Z,onMounted:z}}function f98(Z){var X;switch(Z){case"heading":X={name:"heading",className:"heading",tooltip:v.get("Headings"),state:"heading"};break;case"bold":X={name:"bold",className:"bold",command:"bold",tooltip:v.get("Bold"),state:"strong"};break;case"italic":X={name:"italic",className:"italic",command:"italic",tooltip:v.get("Italic"),state:"emph"};break;case"strike":X={name:"strike",className:"strike",command:"strike",tooltip:v.get("Strike"),state:"strike"};break;case"hr":X={name:"hr",className:"hrline",command:"hr",tooltip:v.get("Line"),state:"thematicBreak"};break;case"quote":X={name:"quote",className:"quote",command:"blockQuote",tooltip:v.get("Blockquote"),state:"blockQuote"};break;case"ul":X={name:"ul",className:"bullet-list",command:"bulletList",tooltip:v.get("Unordered list"),state:"bulletList"};break;case"ol":X={name:"ol",className:"ordered-list",command:"orderedList",tooltip:v.get("Ordered list"),state:"orderedList"};break;case"task":X={name:"task",className:"task-list",command:"taskList",tooltip:v.get("Task"),state:"taskList"};break;case"table":X={name:"table",className:"table",tooltip:v.get("Insert table"),state:"table"};break;case"image":X={name:"image",className:"image",tooltip:v.get("Insert image")};break;case"link":X={name:"link",className:"link",tooltip:v.get("Insert link")};break;case"code":X={name:"code",className:"code",command:"code",tooltip:v.get("Code"),state:"code"};break;case"codeblock":X={name:"codeblock",className:"codeblock",command:"codeBlock",tooltip:v.get("Insert CodeBlock"),state:"codeBlock"};break;case"indent":X={name:"indent",className:"indent",command:"indent",tooltip:v.get("Indent"),state:"indent"};break;case"outdent":X={name:"outdent",className:"outdent",command:"outdent",tooltip:v.get("Outdent"),state:"outdent"};break;case"scrollSync":X=h98();break;case"more":X={name:"more",className:"more",tooltip:v.get("More")};break}if(X.name!=="scrollSync")X.className+=" "+y("toolbar-icons");return X}function U4(Z,X){var{el:K,pos:z,popup:J,initialValues:Q}=X;switch(Z){case"heading":return{render:function(Y){return l(oz||(oz=m(["<"," ..."," />"],["<"," ..."," />"])),N98,Y)},className:y("popup-add-heading"),fromEl:K,pos:z};case"link":return{render:function(Y){return l(tz||(tz=m(["<"," ..."," />"],["<"," ..."," />"])),g98,Y)},className:y("popup-add-link"),fromEl:K,pos:z,initialValues:Q};case"image":return{render:function(Y){return l(ez||(ez=m(["<"," ..."," />"],["<"," ..."," />"])),x98,Y)},className:y("popup-add-image"),fromEl:K,pos:z};case"table":return{render:function(Y){return l(ZJ||(ZJ=m(["<"," ..."," />"],["<"," ..."," />"])),v98,Y)},className:y("popup-add-table"),fromEl:K,pos:z};case"customPopupBody":if(!J)return null;return P({render:function(Y){return l(XJ||(XJ=m(["<"," ..."," body="," />"],["<"," ..."," body="," />"])),$98,Y,J.body)},fromEl:K,pos:z},J);default:return null}}function q1(Z){Z.hidden=Z.length===Z.filter(function(X){return X.hidden}).length}function _98(Z,X){var K=function(z){return z.hidden=z.name==="scrollSync"&&X,z};return Z.reduce(function(z,J){z.push(J.map(function(Y){return K(g6(Y))}));var Q=z[(z.length||1)-1];if(Q)q1(Q);return z},[])}function m98(Z,X){Z.forEach(function(K){K.forEach(function(z){return z.hidden=z.name==="scrollSync"&&X}),q1(K)})}var oz,tz,ez,ZJ,XJ,l98=20,c98=function(Z){b(X,Z);function X(){var K=Z!==null&&Z.apply(this,arguments)||this;return K.handleMousedown=function(z){if(!U5(z.target,"."+y("popup"))&&!U5(z.target,K.props.info.fromEl))K.props.hidePopup()},K}return X.prototype.mounted=function(){document.addEventListener("mousedown",this.handleMousedown),this.props.eventEmitter.listen("closePopup",this.props.hidePopup)},X.prototype.beforeDestroy=function(){document.removeEventListener("mousedown",this.handleMousedown)},X.prototype.updated=function(K){var z=this.props,J=z.show,Q=z.info;if(J&&Q.pos&&K.show!==J){var Y=P({},Q.pos),q=this.refs.el.offsetWidth,G=U5(this.refs.el,"."+y("toolbar")),U=G.offsetWidth;if(Y.left+q>=U)Y.left=U-q-l98;if(!v6(this.state.popupPos,Y))this.setState({popupPos:Y})}},X.prototype.render=function(){var K=this,z=this.props,J=z.info,Q=z.show,Y=z.hidePopup,q=z.eventEmitter,G=z.execCommand,U=J||{},V=U.className,W=V===void 0?"":V,A=U.style,j=U.render,H=U.initialValues,R=H===void 0?{}:H,F=P(P({display:Q?"block":"none"},A),this.state.popupPos);return l(KJ||(KJ=m([`
      <div
        class="`," ",`"
        style=`,`
        ref=`,`
        aria-role="dialog"
      >
        <div class="`,`">
          `,`
        </div>
      </div>
    `],[`
      <div
        class="`," ",`"
        style=`,`
        ref=`,`
        aria-role="dialog"
      >
        <div class="`,`">
          `,`
        </div>
      </div>
    `])),y("popup"),W,F,function(B){return K.refs.el=B},y("popup-body"),j&&j({eventEmitter:q,show:Q,hidePopup:Y,execCommand:G,initialValues:R}))},X}(S8),KJ,zJ=6;function V4(Z){return function(X){b(K,X);function K(z){var J=X.call(this,z)||this;return J.showTooltip=function(Q){var Y=J.props.item.tooltip;if(!J.props.disabled&&Y){var q=J.getBound(Q),G=q.left+zJ+"px",U=q.top+zJ+"px";V5(J.props.tooltipRef.current,{display:"block",left:G,top:U}),J.props.tooltipRef.current.querySelector(".text").textContent=Y}},J.hideTooltip=function(){V5(J.props.tooltipRef.current,"display","none")},J.state={active:!1,disabled:z.disabled},J.addEvent(),J}return K.prototype.addEvent=function(){var z=this,J=this.props,Q=J.item,Y=J.eventEmitter;if(Q.state)Y.listen("changeToolbarState",function(q){var G,U=q.toolbarState,V=(G=U[Q.state])!==null&&G!==void 0?G:{},W=V.active,A=V.disabled;z.setState({active:!!W,disabled:A!==null&&A!==void 0?A:z.props.disabled})})},K.prototype.getBound=function(z){var J=wJ(z,U5(z,"."+y("toolbar"))),Q=J.offsetLeft,Y=J.offsetTop;return{left:Q,top:z.offsetHeight+Y}},K.prototype.render=function(){return l(JJ||(JJ=m([`
        <`,`
          ...`,`
          active=`,`
          showTooltip=`,`
          hideTooltip=`,`
          getBound=`,`
          disabled=`,`
        />
      `],[`
        <`,`
          ...`,`
          active=`,`
          showTooltip=`,`
          hideTooltip=`,`
          getBound=`,`
          disabled=`,`
        />
      `])),Z,this.props,this.state.active,this.showTooltip,this.hideTooltip,this.getBound,this.state.disabled||this.props.disabled)},K}(S8)}var JJ,p98=80,i98=function(Z){b(X,Z);function X(){var K=Z!==null&&Z.apply(this,arguments)||this;return K.showTooltip=function(){K.props.showTooltip(K.refs.el)},K.execCommand=function(){var z=K.props,J=z.item,Q=z.execCommand,Y=z.setPopupInfo,q=z.getBound,G=z.eventEmitter,U=J.command,V=J.name,W=J.popup;if(U)Q(U);else{var A=W?"customPopupBody":V,j=G.emit("query","getPopupInitialValues",{popupName:A})[0],H=U4(A,{el:K.refs.el,pos:q(K.refs.el),popup:W,initialValues:j});if(H)Y(H)}},K}return X.prototype.mounted=function(){this.setItemWidth()},X.prototype.updated=function(K){if(K.item.name!==this.props.item.name)this.setItemWidth()},X.prototype.setItemWidth=function(){var K=this.props,z=K.setItemWidth,J=K.item;if(z)z(J.name,i6(this.refs.el)+(J.hidden?p98:0))},X.prototype.render=function(){var K=this,z=this.props,J=z.hideTooltip,Q=z.disabled,Y=z.item,q=z.active,G=P({display:Y.hidden?"none":null},Y.style),U=""+(Y.className||"")+(q?" active":"");return l(QJ||(QJ=m([`
      <button
        ref=`,`
        type="button"
        style=`,`
        class=`,`
        onClick=`,`
        onMouseover=`,`
        onMouseout=`,`
        disabled=`,`
        aria-label=`,`
      >
        `,`
      </button>
    `],[`
      <button
        ref=`,`
        type="button"
        style=`,`
        class=`,`
        onClick=`,`
        onMouseover=`,`
        onMouseout=`,`
        disabled=`,`
        aria-label=`,`
      >
        `,`
      </button>
    `])),function(V){return K.refs.el=V},G,U,this.execCommand,this.showTooltip,J,!!Q,Y.text||Y.tooltip||"",Y.text||"")},X}(S8),d98=V4(i98),QJ,s98=function(Z){b(X,Z);function X(){var K=Z!==null&&Z.apply(this,arguments)||this;return K.showTooltip=function(){K.props.showTooltip(K.refs.el)},K.showPopup=function(){var z=U4("customPopupBody",{el:K.refs.el,pos:K.props.getBound(K.refs.el),popup:K.props.item.popup});if(z)K.props.setPopupInfo(z)},K}return X.prototype.mounted=function(){var K=this.props,z=K.setItemWidth,J=K.item;if(this.refs.el.appendChild(J.el),z)z(J.name,i6(this.refs.el));if(J.onMounted)J.onMounted(this.props.execCommand)},X.prototype.updated=function(K){var z,J=this.props,Q=J.item,Y=J.active,q=J.disabled;if(K.active!==Y||K.disabled!==q)(z=Q.onUpdated)===null||z===void 0||z.call(Q,{active:Y,disabled:q})},X.prototype.render=function(){var K=this,z=this.props,J=z.disabled,Q=z.item,Y={display:Q.hidden?"none":"inline-block"},q=function(G){return J?null:G};return l(YJ||(YJ=m([`
      <div
        ref=`,`
        style=`,`
        class=`,`
        onClick=`,`
        onMouseover=`,`
        onMouseout=`,`
      ></div>
    `],[`
      <div
        ref=`,`
        style=`,`
        class=`,`
        onClick=`,`
        onMouseover=`,`
        onMouseout=`,`
      ></div>
    `])),function(G){return K.refs.el=G},Y,y("toolbar-item-wrapper"),q(this.showPopup),q(this.showTooltip),q(this.props.hideTooltip))},X}(S8),n98=V4(s98),YJ,FY=function(Z){b(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return X.prototype.render=function(){var K=this,z=this.props,J=z.group,Q=z.hiddenDivider,Y=J.hidden?{display:"none"}:null,q=Q?{display:"none"}:null;return l(GJ||(GJ=m([`
      <div class="`,'" style=',`>
        `,`
        <div class="`,'" style=',`></div>
      </div>
    `],[`
      <div class="`,'" style=',`>
        `,`
        <div class="`,'" style=',`></div>
      </div>
    `])),y("toolbar-group"),Y,J.map(function(G){var U=G.el?n98:d98;return l(qJ||(qJ=m(["<"," key="," ..."," item="," />"],["<"," key="," ..."," item="," />"])),U,G.name,K.props,G)}),y("toolbar-divider"),q)},X}(S8),qJ,GJ,a98=4,r98=function(Z){b(X,Z);function X(K){var z=Z.call(this,K)||this;return z.handleClickDocument=function(J){var Q=J.target;if(!U5(Q,"."+y("dropdown-toolbar"))&&!U5(Q,".more"))z.setState({showDropdown:!1,dropdownPos:null})},z.showTooltip=function(){z.props.showTooltip(z.refs.el)},z.state={showDropdown:!1,dropdownPos:null},z}return X.prototype.getBound=function(){var K=this.props.getBound(this.refs.el);return K.top+=a98,P(P({},K),{left:null,right:10})},X.prototype.mounted=function(){document.addEventListener("click",this.handleClickDocument)},X.prototype.updated=function(){if(this.state.showDropdown&&!this.state.dropdownPos)this.setState({dropdownPos:this.getBound()})},X.prototype.beforeDestroy=function(){document.removeEventListener("click",this.handleClickDocument)},X.prototype.render=function(){var K=this,z=this.state,J=z.showDropdown,Q=z.dropdownPos,Y=this.props,q=Y.disabled,G=Y.item,U=Y.items,V=Y.hideTooltip,W=U.filter(function(H){return!H.hidden}),A=W.length?null:{display:"none"},j=J?null:{display:"none"};return l(VJ||(VJ=m([`
      <div class="`,'" style=',`>
        <button
          ref=`,`
          type="button"
          class=`,`
          onClick=`,`
          onMouseover=`,`
          onMouseout=`,`
          disabled=`,`
        ></button>
        <div
          class="`,`"
          style=`,`
          ref=`,`
        >
          `,`
        </div>
      </div>
    `],[`
      <div class="`,'" style=',`>
        <button
          ref=`,`
          type="button"
          class=`,`
          onClick=`,`
          onMouseover=`,`
          onMouseout=`,`
          disabled=`,`
        ></button>
        <div
          class="`,`"
          style=`,`
          ref=`,`
        >
          `,`
        </div>
      </div>
    `])),y("toolbar-group"),A,function(H){return K.refs.el=H},G.className,function(){return K.setState({showDropdown:!0})},this.showTooltip,V,q,y("dropdown-toolbar"),P(P({},j),Q),function(H){return K.refs.dropdownEl=H},W.length?W.map(function(H,R){var F;return l(UJ||(UJ=m([`
                  <`,`
                    group=`,`
                    hiddenDivider=`,`
                    ...`,`
                  />
                `],[`
                  <`,`
                    group=`,`
                    hiddenDivider=`,`
                    ...`,`
                  />
                `])),FY,H,R===W.length-1||((F=W[R+1])===null||F===void 0?void 0:F.hidden),K.props)}):null)},X}(S8),o98=V4(r98),UJ,VJ,t98=50,e98=function(Z){b(X,Z);function X(K){var z=Z.call(this,K)||this;return z.toggleTab=function(J,Q){var Y=z.props.eventEmitter;if(z.state.activeTab!==Q){var q=Q==="write"?"changePreviewTabWrite":"changePreviewTabPreview";Y.emit(q),z.setState({activeTab:Q})}},z.setItemWidth=function(J,Q){z.itemWidthMap[J]=Q},z.setPopupInfo=function(J){z.setState({showPopup:!0,popupInfo:J})},z.openPopup=function(J,Q){if(Q===void 0)Q={};var Y=z.refs.el.querySelector("."+y("toolbar-group")+" ."+J);if(Y){var q=wJ(Y,U5(Y,"."+y("toolbar"))),G=q.offsetLeft,U=q.offsetTop,V=U4(J,{el:Y,pos:{left:G,top:Y.offsetHeight+U},initialValues:Q});if(V)z.setPopupInfo(V)}},z.hidePopup=function(){if(z.state.showPopup)z.setState({showPopup:!1})},z.execCommand=function(J,Q){var Y=z.props.eventEmitter;Y.emit("command",J,Q),z.hidePopup()},z.tabs=[{name:"write",text:"Write"},{name:"preview",text:"Preview"}],z.itemWidthMap={},z.initialItems=_98(K.toolbarItems||[],z.hiddenScrollSync()),z.state={items:z.initialItems,dropdownItems:[],showPopup:!1,popupInfo:{},activeTab:"write"},z.tooltipRef={current:null},z.resizeObserver=new y98(function(){return z.handleResize()}),z.addEvent(),z}return X.prototype.insertToolbarItem=function(K,z){var{groupIndex:J,itemIndex:Q}=K,Y=this.initialItems[J];if(z=g6(z),Y)Y.splice(Q,0,z);else this.initialItems.push([z]);this.setState(this.classifyToolbarItems())},X.prototype.removeToolbarItem=function(K){var z=this;X3(this.initialItems,function(J){var Q=!1;return X3(J,function(Y,q){if(Y.name===K)return Q=!0,J.splice(q,1),z.setState(z.classifyToolbarItems()),!1;return!0}),!Q})},X.prototype.addEvent=function(){var K=this,z=this.props.eventEmitter;this.handleResize=W98(function(){K.setState({items:K.initialItems,dropdownItems:[]}),K.setState(K.classifyToolbarItems())},200),z.listen("openPopup",this.openPopup)},X.prototype.appendTooltipToRoot=function(){var K='<div class="'+y("tooltip")+`" style="display:none">
        <div class="arrow"></div>
        <span class="text"></span>
      </div>`;this.tooltipRef.current=uJ(K,this.refs.el)},X.prototype.hiddenScrollSync=function(){return this.props.editorType==="wysiwyg"||this.props.previewStyle==="tab"},X.prototype.movePrevItemToDropdownToolbar=function(K,z,J,Q){var Y=function(G){var U=G.pop();if(U)Q.push(U)};if(K>1)Y(J);else{var q=C8(z);if(q)Y(q)}},X.prototype.classifyToolbarItems=function(){var K=this,z=0,J=this.refs.el.clientWidth,Q=this.refs.el.querySelector("."+y("toolbar-divider")),Y=Q?i6(Q):0,q=[],G=[],U=!1;return this.initialItems.forEach(function(V,W){var A=[],j=[];if(V.forEach(function(H,R){if(!H.hidden)if(z+=K.itemWidthMap[H.name],z>J-t98){if(!U)K.movePrevItemToDropdownToolbar(R,q,A,j),U=!0;j.push(H)}else A.push(H)}),A.length)q1(A),q.push(A);if(j.length)q1(j),G.push(j);if(W<K.state.items.length-1)z+=Y}),{items:q,dropdownItems:G}},X.prototype.mounted=function(){if(this.props.previewStyle==="tab")this.props.eventEmitter.emit("changePreviewTabWrite",!0);this.setState(this.classifyToolbarItems()),this.appendTooltipToRoot(),this.resizeObserver.observe(this.refs.el)},X.prototype.updated=function(K){var z=this.props,J=z.editorType,Q=z.previewStyle,Y=z.eventEmitter,q=Q!==K.previewStyle,G=J!==K.editorType;if(q||G){m98(this.initialItems,this.hiddenScrollSync());var U=this.classifyToolbarItems();if(q||Q==="tab"&&J==="markdown")Y.emit("changePreviewTabWrite"),U.activeTab="write";this.setState(U)}},X.prototype.beforeDestroy=function(){window.removeEventListener("resize",this.handleResize),this.resizeObserver.disconnect(),B0(this.tooltipRef.current)},X.prototype.render=function(){var K=this,z=this.props,J=z.previewStyle,Q=z.eventEmitter,Y=z.editorType,q=this.state,G=q.popupInfo,U=q.showPopup,V=q.activeTab,W=q.items,A=q.dropdownItems,j={eventEmitter:Q,tooltipRef:this.tooltipRef,disabled:Y==="markdown"&&J==="tab"&&V==="preview",execCommand:this.execCommand,setPopupInfo:this.setPopupInfo},H=J==="tab"?{borderTopLeftRadius:0}:null;return l(AJ||(AJ=m([`
      <div class="`,`">
        <div
          class="`,`"
          style="display: `,`"
        >
          <`," tabs="," activeTab="," onClick=",` />
        </div>
        <div
          class="`,`"
          ref=`,`
          style=`,`
        >
          `,`
          <`,`
            item=`,`
            items=`,`
            ...`,`
          />
        </div>
        <`,`
          info=`,`
          show=`,`
          eventEmitter=`,`
          hidePopup=`,`
          execCommand=`,`
        />
      </div>
    `],[`
      <div class="`,`">
        <div
          class="`,`"
          style="display: `,`"
        >
          <`," tabs="," activeTab="," onClick=",` />
        </div>
        <div
          class="`,`"
          ref=`,`
          style=`,`
        >
          `,`
          <`,`
            item=`,`
            items=`,`
            ...`,`
          />
        </div>
        <`,`
          info=`,`
          show=`,`
          eventEmitter=`,`
          hidePopup=`,`
          execCommand=`,`
        />
      </div>
    `])),y("toolbar"),y("md-tab-container"),Y==="wysiwyg"||J==="vertical"?"none":"block",RY,this.tabs,V,this.toggleTab,y("defaultUI-toolbar"),function(R){return K.refs.el=R},H,W.map(function(R,F){var B;return l(WJ||(WJ=m([`
              <`,`
                group=`,`
                hiddenDivider=`,`
                setItemWidth=`,`
                ...`,`
              />
            `],[`
              <`,`
                group=`,`
                hiddenDivider=`,`
                setItemWidth=`,`
                ...`,`
              />
            `])),FY,R,F===W.length-1||((B=W[F+1])===null||B===void 0?void 0:B.hidden),K.setItemWidth,j)}),o98,g6("more"),A,j,c98,G,U,Q,this.hidePopup,this.execCommand)},X}(S8),WJ,AJ,Z68=function(Z){b(X,Z);function X(K){var z=Z.call(this,K)||this;return z.handleClickDocument=function(J){if(!U5(J.target,"."+y("context-menu")))z.setState({pos:null})},z.state={pos:null,menuGroups:[]},z.addEvent(),z}return X.prototype.addEvent=function(){var K=this;this.props.eventEmitter.listen("contextmenu",function(z){var{pos:J,menuGroups:Q}=z;K.setState({pos:J,menuGroups:Q})})},X.prototype.mounted=function(){document.addEventListener("click",this.handleClickDocument)},X.prototype.beforeDestroy=function(){document.removeEventListener("click",this.handleClickDocument)},X.prototype.getMenuGroupElements=function(){var K=this,z=this.state,J=z.pos,Q=z.menuGroups;return J?Q.reduce(function(Y,q){var G=[];return q.forEach(function(U){var{label:V,className:W}=U,A=W===void 0?!1:W,j=U.disabled,H=U.onClick,R=function(){if(!j)H(),K.setState({pos:null})};G.push(l(HJ||(HJ=m([`
                <li
                  onClick=`,`
                  class="menu-item`,`"
                  aria-role="menuitem"
                >
                  <span class="`,'">',`</span>
                </li>
              `],[`
                <li
                  onClick=`,`
                  class="menu-item`,`"
                  aria-role="menuitem"
                >
                  <span class="`,'">',`</span>
                </li>
              `])),R,j?" disabled":"",A,V))}),Y.push(l(jJ||(jJ=m([`<ul class="menu-group">
              `,`
            </ul>`],[`<ul class="menu-group">
              `,`
            </ul>`])),G)),Y},[]):[]},X.prototype.render=function(){var K=P({display:this.state.pos?"block":"none"},this.state.pos);return l(RJ||(RJ=m(['<div class="','" style=',` aria-role="menu">
      `,`
    </div>`],['<div class="','" style=',` aria-role="menu">
      `,`
    </div>`])),y("context-menu"),K,this.getMenuGroupElements())},X}(S8),HJ,jJ,RJ,X68=function(Z){b(X,Z);function X(K){var z=Z.call(this,K)||this;z.changeMode=function(Y){if(Y!==z.state.editorType)z.setState({editorType:Y})},z.changePreviewStyle=function(Y){if(Y!==z.state.previewStyle)z.setState({previewStyle:Y})},z.hide=function(){z.setState({hide:!0})},z.show=function(){z.setState({hide:!1})};var{editorType:J,previewStyle:Q}=K;return z.state={editorType:J,previewStyle:Q,hide:!1},z.addEvent(),z}return X.prototype.mounted=function(){var K=this.props.slots,z=K.wwEditor,J=K.mdEditor,Q=K.mdPreview;this.refs.wwContainer.appendChild(z),this.refs.mdContainer.insertAdjacentElement("afterbegin",J),this.refs.mdContainer.appendChild(Q)},X.prototype.insertToolbarItem=function(K,z){this.toolbar.insertToolbarItem(K,z)},X.prototype.removeToolbarItem=function(K){this.toolbar.removeToolbarItem(K)},X.prototype.render=function(){var K=this,z=this.props,J=z.eventEmitter,Q=z.hideModeSwitch,Y=z.toolbarItems,q=z.theme,G=this.state,U=G.hide,V=G.previewStyle,W=G.editorType,A=U?" hidden":"",j=y(W==="markdown"?"md-mode":"ww-mode"),H=y("md")+"-"+V+"-style",R=y([q!=="light",q+" "]);return l(BJ||(BJ=m([`
      <div
        class="`,"","",`"
        ref=`,`
      >
        <`,`
          ref=`,`
          eventEmitter=`,`
          previewStyle=`,`
          toolbarItems=`,`
          editorType=`,`
        />
        <div
          class="`," ",`"
          ref=`,`
        >
          <div class="`,`">
            <div
              class="`," ",`"
              ref=`,`
            >
              <div class="`,`"></div>
            </div>
            <div
              class="`,`"
              ref=`,`
            />
          </div>
        </div>
        `,`
        <`," eventEmitter=",` />
      </div>
    `],[`
      <div
        class="`,"","",`"
        ref=`,`
      >
        <`,`
          ref=`,`
          eventEmitter=`,`
          previewStyle=`,`
          toolbarItems=`,`
          editorType=`,`
        />
        <div
          class="`," ",`"
          ref=`,`
        >
          <div class="`,`">
            <div
              class="`," ",`"
              ref=`,`
            >
              <div class="`,`"></div>
            </div>
            <div
              class="`,`"
              ref=`,`
            />
          </div>
        </div>
        `,`
        <`," eventEmitter=",` />
      </div>
    `])),R,y("defaultUI"),A,function(F){return K.refs.el=F},e98,function(F){return K.toolbar=F},J,V,Y,W,y("main"),j,function(F){return K.refs.editorSection=F},y("main-container"),y("md-container"),H,function(F){return K.refs.mdContainer=F},y("md-splitter"),y("ww-container"),function(F){return K.refs.wwContainer=F},!Q&&l(FJ||(FJ=m(["<"," eventEmitter="," editorType="," />"],["<"," eventEmitter="," editorType="," />"])),Y98,J,W),Z68,J)},X.prototype.addEvent=function(){var K=this.props.eventEmitter;K.listen("hide",this.hide),K.listen("show",this.show),K.listen("changeMode",this.changeMode),K.listen("changePreviewStyle",this.changePreviewStyle)},X}(S8),FJ,BJ,BY=function(Z){b(X,Z);function X(K){var z,J=Z.call(this,K)||this,Q,Y=Q98(J.options.el,l(EJ||(EJ=m([`
        <`,`
          ref=`,`
          eventEmitter=`,`
          slots=`,`
          hideModeSwitch=`,`
          toolbarItems=`,`
          previewStyle=`,`
          editorType=`,`
          theme=`,`
        />
      `],[`
        <`,`
          ref=`,`
          eventEmitter=`,`
          slots=`,`
          hideModeSwitch=`,`
          toolbarItems=`,`
          previewStyle=`,`
          editorType=`,`
          theme=`,`
        />
      `])),X68,function(q){return Q=q},J.eventEmitter,J.getEditorElements(),J.options.hideModeSwitch,J.options.toolbarItems,J.options.previewStyle,J.options.initialEditType,J.options.theme));return J.setMinHeight(J.options.minHeight),J.setHeight(J.options.height),J.defaultUI={insertToolbarItem:Q.insertToolbarItem.bind(Q),removeToolbarItem:Q.removeToolbarItem.bind(Q),destroy:Y},(z=J.pluginInfo.toolbarItems)===null||z===void 0||z.forEach(function(q){var{groupIndex:G,itemIndex:U,item:V}=q;J.defaultUI.insertToolbarItem({groupIndex:G,itemIndex:U},V)}),J.eventEmitter.emit("loadUI",J),J}return X.factory=function(K){return K.viewer?new JY(K):new X(K)},X.prototype.insertToolbarItem=function(K,z){this.defaultUI.insertToolbarItem(K,z)},X.prototype.removeToolbarItem=function(K){this.defaultUI.removeToolbarItem(K)},X.prototype.destroy=function(){Z.prototype.destroy.call(this),this.defaultUI.destroy()},X}(YY),EJ;YY.setLanguage(["en","en-US"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Write",Preview:"Preview",Headings:"Headings",Paragraph:"Paragraph",Bold:"Bold",Italic:"Italic",Strike:"Strike",Code:"Inline code",Line:"Line",Blockquote:"Blockquote","Unordered list":"Unordered list","Ordered list":"Ordered list",Task:"Task",Indent:"Indent",Outdent:"Outdent","Insert link":"Insert link","Insert CodeBlock":"Insert codeBlock","Insert table":"Insert table","Insert image":"Insert image",Heading:"Heading","Image URL":"Image URL","Select image file":"Select image file","Choose a file":"Choose a file","No file":"No file",Description:"Description",OK:"OK",More:"More",Cancel:"Cancel",File:"File",URL:"URL","Link text":"Link text","Add row to up":"Add row to up","Add row to down":"Add row to down","Add column to left":"Add column to left","Add column to right":"Add column to right","Remove row":"Remove row","Remove column":"Remove column","Align column to left":"Align column to left","Align column to center":"Align column to center","Align column to right":"Align column to right","Remove table":"Remove table","Would you like to paste as table?":"Would you like to paste as table?","Text color":"Text color","Auto scroll enabled":"Auto scroll enabled","Auto scroll disabled":"Auto scroll disabled","Choose language":"Choose language"});var q48=new BY({el:document.querySelector("#editor"),initialEditType:"markdown",hideModeSwitch:!0,height:"auto",theme:"zapis",initialValue:document.querySelector("textarea")?.value}),EY=document.querySelector("dialog"),K68=document.querySelector("dialog + button"),z68=document.querySelector("dialog button");K68.addEventListener("click",()=>{EY.showModal()});z68.addEventListener("click",()=>{EY.close()});
