function L0(Z){this.content=Z}L0.prototype={constructor:L0,find:function(Z){for(var z=0;z<this.content.length;z+=2)if(this.content[z]===Z)return z;return-1},get:function(Z){var z=this.find(Z);return z==-1?void 0:this.content[z+1]},update:function(Z,z,X){var K=X&&X!=Z?this.remove(X):this,J=K.find(Z),Q=K.content.slice();if(J==-1)Q.push(X||Z,z);else if(Q[J+1]=z,X)Q[J]=X;return new L0(Q)},remove:function(Z){var z=this.find(Z);if(z==-1)return this;var X=this.content.slice();return X.splice(z,2),new L0(X)},addToStart:function(Z,z){return new L0([Z,z].concat(this.remove(Z).content))},addToEnd:function(Z,z){var X=this.remove(Z).content.slice();return X.push(Z,z),new L0(X)},addBefore:function(Z,z,X){var K=this.remove(z),J=K.content.slice(),Q=K.find(Z);return J.splice(Q==-1?J.length:Q,0,z,X),new L0(J)},forEach:function(Z){for(var z=0;z<this.content.length;z+=2)Z(this.content[z],this.content[z+1])},prepend:function(Z){if(Z=L0.from(Z),!Z.size)return this;return new L0(Z.content.concat(this.subtract(Z).content))},append:function(Z){if(Z=L0.from(Z),!Z.size)return this;return new L0(this.subtract(Z).content.concat(Z.content))},subtract:function(Z){var z=this;Z=L0.from(Z);for(var X=0;X<Z.content.length;X+=2)z=z.remove(Z.content[X]);return z},toObject:function(){var Z={};return this.forEach(function(z,X){Z[z]=X}),Z},get size(){return this.content.length>>1}};L0.from=function(Z){if(Z instanceof L0)return Z;var z=[];if(Z)for(var X in Z)z.push(X,Z[X]);return new L0(z)};var v1=L0;function _7(Z,z,X){for(let K=0;;K++){if(K==Z.childCount||K==z.childCount)return Z.childCount==z.childCount?null:X;let J=Z.child(K),Q=z.child(K);if(J==Q){X+=J.nodeSize;continue}if(!J.sameMarkup(Q))return X;if(J.isText&&J.text!=Q.text){for(let Y=0;J.text[Y]==Q.text[Y];Y++)X++;return X}if(J.content.size||Q.content.size){let Y=_7(J.content,Q.content,X+1);if(Y!=null)return Y}X+=J.nodeSize}}function m7(Z,z,X,K){for(let J=Z.childCount,Q=z.childCount;;){if(J==0||Q==0)return J==Q?null:{a:X,b:K};let Y=Z.child(--J),G=z.child(--Q),U=Y.nodeSize;if(Y==G){X-=U,K-=U;continue}if(!Y.sameMarkup(G))return{a:X,b:K};if(Y.isText&&Y.text!=G.text){let q=0,A=Math.min(Y.text.length,G.text.length);while(q<A&&Y.text[Y.text.length-q-1]==G.text[G.text.length-q-1])q++,X--,K--;return{a:X,b:K}}if(Y.content.size||G.content.size){let q=m7(Y.content,G.content,X-1,K-1);if(q)return q}X-=U,K-=U}}class L{constructor(Z,z){if(this.content=Z,this.size=z||0,z==null)for(let X=0;X<Z.length;X++)this.size+=Z[X].nodeSize}nodesBetween(Z,z,X,K=0,J){for(let Q=0,Y=0;Y<z;Q++){let G=this.content[Q],U=Y+G.nodeSize;if(U>Z&&X(G,K+Y,J||null,Q)!==!1&&G.content.size){let q=Y+1;G.nodesBetween(Math.max(0,Z-q),Math.min(G.content.size,z-q),X,K+q)}Y=U}}descendants(Z){this.nodesBetween(0,this.size,Z)}textBetween(Z,z,X,K){let J="",Q=!0;return this.nodesBetween(Z,z,(Y,G)=>{let U=Y.isText?Y.text.slice(Math.max(Z,G)-G,z-G):!Y.isLeaf?"":K?typeof K==="function"?K(Y):K:Y.type.spec.leafText?Y.type.spec.leafText(Y):"";if(Y.isBlock&&(Y.isLeaf&&U||Y.isTextblock)&&X)if(Q)Q=!1;else J+=X;J+=U},0),J}append(Z){if(!Z.size)return this;if(!this.size)return Z;let z=this.lastChild,X=Z.firstChild,K=this.content.slice(),J=0;if(z.isText&&z.sameMarkup(X))K[K.length-1]=z.withText(z.text+X.text),J=1;for(;J<Z.content.length;J++)K.push(Z.content[J]);return new L(K,this.size+Z.size)}cut(Z,z=this.size){if(Z==0&&z==this.size)return this;let X=[],K=0;if(z>Z)for(let J=0,Q=0;Q<z;J++){let Y=this.content[J],G=Q+Y.nodeSize;if(G>Z){if(Q<Z||G>z)if(Y.isText)Y=Y.cut(Math.max(0,Z-Q),Math.min(Y.text.length,z-Q));else Y=Y.cut(Math.max(0,Z-Q-1),Math.min(Y.content.size,z-Q-1));X.push(Y),K+=Y.nodeSize}Q=G}return new L(X,K)}cutByIndex(Z,z){if(Z==z)return L.empty;if(Z==0&&z==this.content.length)return this;return new L(this.content.slice(Z,z))}replaceChild(Z,z){let X=this.content[Z];if(X==z)return this;let K=this.content.slice(),J=this.size+z.nodeSize-X.nodeSize;return K[Z]=z,new L(K,J)}addToStart(Z){return new L([Z].concat(this.content),this.size+Z.nodeSize)}addToEnd(Z){return new L(this.content.concat(Z),this.size+Z.nodeSize)}eq(Z){if(this.content.length!=Z.content.length)return!1;for(let z=0;z<this.content.length;z++)if(!this.content[z].eq(Z.content[z]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(Z){let z=this.content[Z];if(!z)throw new RangeError("Index "+Z+" out of range for "+this);return z}maybeChild(Z){return this.content[Z]||null}forEach(Z){for(let z=0,X=0;z<this.content.length;z++){let K=this.content[z];Z(K,X,z),X+=K.nodeSize}}findDiffStart(Z,z=0){return _7(this,Z,z)}findDiffEnd(Z,z=this.size,X=Z.size){return m7(this,Z,z,X)}findIndex(Z,z=-1){if(Z==0)return o3(0,Z);if(Z==this.size)return o3(this.content.length,Z);if(Z>this.size||Z<0)throw new RangeError(`Position ${Z} outside of fragment (${this})`);for(let X=0,K=0;;X++){let J=this.child(X),Q=K+J.nodeSize;if(Q>=Z){if(Q==Z||z>0)return o3(X+1,Q);return o3(X,K)}K=Q}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((Z)=>Z.toJSON()):null}static fromJSON(Z,z){if(!z)return L.empty;if(!Array.isArray(z))throw new RangeError("Invalid input for Fragment.fromJSON");return new L(z.map(Z.nodeFromJSON))}static fromArray(Z){if(!Z.length)return L.empty;let z,X=0;for(let K=0;K<Z.length;K++){let J=Z[K];if(X+=J.nodeSize,K&&J.isText&&Z[K-1].sameMarkup(J)){if(!z)z=Z.slice(0,K);z[z.length-1]=J.withText(z[z.length-1].text+J.text)}else if(z)z.push(J)}return new L(z||Z,X)}static from(Z){if(!Z)return L.empty;if(Z instanceof L)return Z;if(Array.isArray(Z))return this.fromArray(Z);if(Z.attrs)return new L([Z],Z.nodeSize);throw new RangeError("Can not convert "+Z+" to a Fragment"+(Z.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}L.empty=new L([],0);var $1={index:0,offset:0};function o3(Z,z){return $1.index=Z,$1.offset=z,$1}function e3(Z,z){if(Z===z)return!0;if(!(Z&&typeof Z=="object")||!(z&&typeof z=="object"))return!1;let X=Array.isArray(Z);if(Array.isArray(z)!=X)return!1;if(X){if(Z.length!=z.length)return!1;for(let K=0;K<Z.length;K++)if(!e3(Z[K],z[K]))return!1}else{for(let K in Z)if(!(K in z)||!e3(Z[K],z[K]))return!1;for(let K in z)if(!(K in Z))return!1}return!0}class h{constructor(Z,z){this.type=Z,this.attrs=z}addToSet(Z){let z,X=!1;for(let K=0;K<Z.length;K++){let J=Z[K];if(this.eq(J))return Z;if(this.type.excludes(J.type)){if(!z)z=Z.slice(0,K)}else if(J.type.excludes(this.type))return Z;else{if(!X&&J.type.rank>this.type.rank){if(!z)z=Z.slice(0,K);z.push(this),X=!0}if(z)z.push(J)}}if(!z)z=Z.slice();if(!X)z.push(this);return z}removeFromSet(Z){for(let z=0;z<Z.length;z++)if(this.eq(Z[z]))return Z.slice(0,z).concat(Z.slice(z+1));return Z}isInSet(Z){for(let z=0;z<Z.length;z++)if(this.eq(Z[z]))return!0;return!1}eq(Z){return this==Z||this.type==Z.type&&e3(this.attrs,Z.attrs)}toJSON(){let Z={type:this.type.name};for(let z in this.attrs){Z.attrs=this.attrs;break}return Z}static fromJSON(Z,z){if(!z)throw new RangeError("Invalid input for Mark.fromJSON");let X=Z.marks[z.type];if(!X)throw new RangeError(`There is no mark type ${z.type} in this schema`);let K=X.create(z.attrs);return X.checkAttrs(K.attrs),K}static sameSet(Z,z){if(Z==z)return!0;if(Z.length!=z.length)return!1;for(let X=0;X<Z.length;X++)if(!Z[X].eq(z[X]))return!1;return!0}static setFrom(Z){if(!Z||Array.isArray(Z)&&Z.length==0)return h.none;if(Z instanceof h)return[Z];let z=Z.slice();return z.sort((X,K)=>X.type.rank-K.type.rank),z}}h.none=[];class N8 extends Error{}class S{constructor(Z,z,X){this.content=Z,this.openStart=z,this.openEnd=X}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(Z,z){let X=c7(this.content,Z+this.openStart,z);return X&&new S(X,this.openStart,this.openEnd)}removeBetween(Z,z){return new S(l7(this.content,Z+this.openStart,z+this.openStart),this.openStart,this.openEnd)}eq(Z){return this.content.eq(Z.content)&&this.openStart==Z.openStart&&this.openEnd==Z.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let Z={content:this.content.toJSON()};if(this.openStart>0)Z.openStart=this.openStart;if(this.openEnd>0)Z.openEnd=this.openEnd;return Z}static fromJSON(Z,z){if(!z)return S.empty;let X=z.openStart||0,K=z.openEnd||0;if(typeof X!="number"||typeof K!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new S(L.fromJSON(Z,z.content),X,K)}static maxOpen(Z,z=!0){let X=0,K=0;for(let J=Z.firstChild;J&&!J.isLeaf&&(z||!J.type.spec.isolating);J=J.firstChild)X++;for(let J=Z.lastChild;J&&!J.isLeaf&&(z||!J.type.spec.isolating);J=J.lastChild)K++;return new S(Z,X,K)}}S.empty=new S(L.empty,0,0);function l7(Z,z,X){let{index:K,offset:J}=Z.findIndex(z),Q=Z.maybeChild(K),{index:Y,offset:G}=Z.findIndex(X);if(J==z||Q.isText){if(G!=X&&!Z.child(Y).isText)throw new RangeError("Removing non-flat range");return Z.cut(0,z).append(Z.cut(X))}if(K!=Y)throw new RangeError("Removing non-flat range");return Z.replaceChild(K,Q.copy(l7(Q.content,z-J-1,X-J-1)))}function c7(Z,z,X,K){let{index:J,offset:Q}=Z.findIndex(z),Y=Z.maybeChild(J);if(Q==z||Y.isText){if(K&&!K.canReplace(J,J,X))return null;return Z.cut(0,z).append(X).append(Z.cut(z))}let G=c7(Y.content,z-Q-1,X);return G&&Z.replaceChild(J,Y.copy(G))}function kY(Z,z,X){if(X.openStart>Z.depth)throw new N8("Inserted content deeper than insertion position");if(Z.depth-X.openStart!=z.depth-X.openEnd)throw new N8("Inconsistent open depths");return p7(Z,z,X,0)}function p7(Z,z,X,K){let J=Z.index(K),Q=Z.node(K);if(J==z.index(K)&&K<Z.depth-X.openStart){let Y=p7(Z,z,X,K+1);return Q.copy(Q.content.replaceChild(J,Y))}else if(!X.content.size)return t5(Q,ZZ(Z,z,K));else if(!X.openStart&&!X.openEnd&&Z.depth==K&&z.depth==K){let Y=Z.parent,G=Y.content;return t5(Y,G.cut(0,Z.parentOffset).append(X.content).append(G.cut(z.parentOffset)))}else{let{start:Y,end:G}=NY(X,Z);return t5(Q,d7(Z,Y,G,z,K))}}function i7(Z,z){if(!z.type.compatibleContent(Z.type))throw new N8("Cannot join "+z.type.name+" onto "+Z.type.name)}function h1(Z,z,X){let K=Z.node(X);return i7(K,z.node(X)),K}function o5(Z,z){let X=z.length-1;if(X>=0&&Z.isText&&Z.sameMarkup(z[X]))z[X]=Z.withText(z[X].text+Z.text);else z.push(Z)}function R3(Z,z,X,K){let J=(z||Z).node(X),Q=0,Y=z?z.index(X):J.childCount;if(Z){if(Q=Z.index(X),Z.depth>X)Q++;else if(Z.textOffset)o5(Z.nodeAfter,K),Q++}for(let G=Q;G<Y;G++)o5(J.child(G),K);if(z&&z.depth==X&&z.textOffset)o5(z.nodeBefore,K)}function t5(Z,z){return Z.type.checkContent(z),Z.copy(z)}function d7(Z,z,X,K,J){let Q=Z.depth>J&&h1(Z,z,J+1),Y=K.depth>J&&h1(X,K,J+1),G=[];if(R3(null,Z,J,G),Q&&Y&&z.index(J)==X.index(J))i7(Q,Y),o5(t5(Q,d7(Z,z,X,K,J+1)),G);else{if(Q)o5(t5(Q,ZZ(Z,z,J+1)),G);if(R3(z,X,J,G),Y)o5(t5(Y,ZZ(X,K,J+1)),G)}return R3(K,null,J,G),new L(G)}function ZZ(Z,z,X){let K=[];if(R3(null,Z,X,K),Z.depth>X){let J=h1(Z,z,X+1);o5(t5(J,ZZ(Z,z,X+1)),K)}return R3(z,null,X,K),new L(K)}function NY(Z,z){let X=z.depth-Z.openStart,J=z.node(X).copy(Z.content);for(let Q=X-1;Q>=0;Q--)J=z.node(Q).copy(L.from(J));return{start:J.resolveNoCache(Z.openStart+X),end:J.resolveNoCache(J.content.size-Z.openEnd-X)}}class B3{constructor(Z,z,X){this.pos=Z,this.path=z,this.parentOffset=X,this.depth=z.length/3-1}resolveDepth(Z){if(Z==null)return this.depth;if(Z<0)return this.depth+Z;return Z}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(Z){return this.path[this.resolveDepth(Z)*3]}index(Z){return this.path[this.resolveDepth(Z)*3+1]}indexAfter(Z){return Z=this.resolveDepth(Z),this.index(Z)+(Z==this.depth&&!this.textOffset?0:1)}start(Z){return Z=this.resolveDepth(Z),Z==0?0:this.path[Z*3-1]+1}end(Z){return Z=this.resolveDepth(Z),this.start(Z)+this.node(Z).content.size}before(Z){if(Z=this.resolveDepth(Z),!Z)throw new RangeError("There is no position before the top-level node");return Z==this.depth+1?this.pos:this.path[Z*3-1]}after(Z){if(Z=this.resolveDepth(Z),!Z)throw new RangeError("There is no position after the top-level node");return Z==this.depth+1?this.pos:this.path[Z*3-1]+this.path[Z*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let Z=this.parent,z=this.index(this.depth);if(z==Z.childCount)return null;let X=this.pos-this.path[this.path.length-1],K=Z.child(z);return X?Z.child(z).cut(X):K}get nodeBefore(){let Z=this.index(this.depth),z=this.pos-this.path[this.path.length-1];if(z)return this.parent.child(Z).cut(0,z);return Z==0?null:this.parent.child(Z-1)}posAtIndex(Z,z){z=this.resolveDepth(z);let X=this.path[z*3],K=z==0?0:this.path[z*3-1]+1;for(let J=0;J<Z;J++)K+=X.child(J).nodeSize;return K}marks(){let Z=this.parent,z=this.index();if(Z.content.size==0)return h.none;if(this.textOffset)return Z.child(z).marks;let X=Z.maybeChild(z-1),K=Z.maybeChild(z);if(!X){let Y=X;X=K,K=Y}let J=X.marks;for(var Q=0;Q<J.length;Q++)if(J[Q].type.spec.inclusive===!1&&(!K||!J[Q].isInSet(K.marks)))J=J[Q--].removeFromSet(J);return J}marksAcross(Z){let z=this.parent.maybeChild(this.index());if(!z||!z.isInline)return null;let X=z.marks,K=Z.parent.maybeChild(Z.index());for(var J=0;J<X.length;J++)if(X[J].type.spec.inclusive===!1&&(!K||!X[J].isInSet(K.marks)))X=X[J--].removeFromSet(X);return X}sharedDepth(Z){for(let z=this.depth;z>0;z--)if(this.start(z)<=Z&&this.end(z)>=Z)return z;return 0}blockRange(Z=this,z){if(Z.pos<this.pos)return Z.blockRange(this);for(let X=this.depth-(this.parent.inlineContent||this.pos==Z.pos?1:0);X>=0;X--)if(Z.pos<=this.end(X)&&(!z||z(this.node(X))))return new T8(this,Z,X);return null}sameParent(Z){return this.pos-this.parentOffset==Z.pos-Z.parentOffset}max(Z){return Z.pos>this.pos?Z:this}min(Z){return Z.pos<this.pos?Z:this}toString(){let Z="";for(let z=1;z<=this.depth;z++)Z+=(Z?"/":"")+this.node(z).type.name+"_"+this.index(z-1);return Z+":"+this.parentOffset}static resolve(Z,z){if(!(z>=0&&z<=Z.content.size))throw new RangeError("Position "+z+" out of range");let X=[],K=0,J=z;for(let Q=Z;;){let{index:Y,offset:G}=Q.content.findIndex(J),U=J-G;if(X.push(Q,Y,K+G),!U)break;if(Q=Q.child(Y),Q.isText)break;J=U-1,K+=G+1}return new B3(z,X,J)}static resolveCached(Z,z){let X=y7.get(Z);if(X)for(let J=0;J<X.elts.length;J++){let Q=X.elts[J];if(Q.pos==z)return Q}else y7.set(Z,X=new s7);let K=X.elts[X.i]=B3.resolve(Z,z);return X.i=(X.i+1)%TY,K}}class s7{constructor(){this.elts=[],this.i=0}}var TY=12,y7=new WeakMap;class T8{constructor(Z,z,X){this.$from=Z,this.$to=z,this.depth=X}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}var yY=Object.create(null);class v0{constructor(Z,z,X,K=h.none){this.type=Z,this.attrs=z,this.marks=K,this.content=X||L.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(Z){return this.content.child(Z)}maybeChild(Z){return this.content.maybeChild(Z)}forEach(Z){this.content.forEach(Z)}nodesBetween(Z,z,X,K=0){this.content.nodesBetween(Z,z,X,K,this)}descendants(Z){this.nodesBetween(0,this.content.size,Z)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(Z,z,X,K){return this.content.textBetween(Z,z,X,K)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(Z){return this==Z||this.sameMarkup(Z)&&this.content.eq(Z.content)}sameMarkup(Z){return this.hasMarkup(Z.type,Z.attrs,Z.marks)}hasMarkup(Z,z,X){return this.type==Z&&e3(this.attrs,z||Z.defaultAttrs||yY)&&h.sameSet(this.marks,X||h.none)}copy(Z=null){if(Z==this.content)return this;return new v0(this.type,this.attrs,Z,this.marks)}mark(Z){return Z==this.marks?this:new v0(this.type,this.attrs,this.content,Z)}cut(Z,z=this.content.size){if(Z==0&&z==this.content.size)return this;return this.copy(this.content.cut(Z,z))}slice(Z,z=this.content.size,X=!1){if(Z==z)return S.empty;let K=this.resolve(Z),J=this.resolve(z),Q=X?0:K.sharedDepth(z),Y=K.start(Q),U=K.node(Q).content.cut(K.pos-Y,J.pos-Y);return new S(U,K.depth-Q,J.depth-Q)}replace(Z,z,X){return kY(this.resolve(Z),this.resolve(z),X)}nodeAt(Z){for(let z=this;;){let{index:X,offset:K}=z.content.findIndex(Z);if(z=z.maybeChild(X),!z)return null;if(K==Z||z.isText)return z;Z-=K+1}}childAfter(Z){let{index:z,offset:X}=this.content.findIndex(Z);return{node:this.content.maybeChild(z),index:z,offset:X}}childBefore(Z){if(Z==0)return{node:null,index:0,offset:0};let{index:z,offset:X}=this.content.findIndex(Z);if(X<Z)return{node:this.content.child(z),index:z,offset:X};let K=this.content.child(z-1);return{node:K,index:z-1,offset:X-K.nodeSize}}resolve(Z){return B3.resolveCached(this,Z)}resolveNoCache(Z){return B3.resolve(this,Z)}rangeHasMark(Z,z,X){let K=!1;if(z>Z)this.nodesBetween(Z,z,(J)=>{if(X.isInSet(J.marks))K=!0;return!K});return K}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let Z=this.type.name;if(this.content.size)Z+="("+this.content.toStringInner()+")";return n7(this.marks,Z)}contentMatchAt(Z){let z=this.type.contentMatch.matchFragment(this.content,0,Z);if(!z)throw new Error("Called contentMatchAt on a node with invalid content");return z}canReplace(Z,z,X=L.empty,K=0,J=X.childCount){let Q=this.contentMatchAt(Z).matchFragment(X,K,J),Y=Q&&Q.matchFragment(this.content,z);if(!Y||!Y.validEnd)return!1;for(let G=K;G<J;G++)if(!this.type.allowsMarks(X.child(G).marks))return!1;return!0}canReplaceWith(Z,z,X,K){if(K&&!this.type.allowsMarks(K))return!1;let J=this.contentMatchAt(Z).matchType(X),Q=J&&J.matchFragment(this.content,z);return Q?Q.validEnd:!1}canAppend(Z){if(Z.content.size)return this.canReplace(this.childCount,this.childCount,Z.content);else return this.type.compatibleContent(Z.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let Z=h.none;for(let z=0;z<this.marks.length;z++){let X=this.marks[z];X.type.checkAttrs(X.attrs),Z=X.addToSet(Z)}if(!h.sameSet(Z,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map((z)=>z.type.name)}`);this.content.forEach((z)=>z.check())}toJSON(){let Z={type:this.type.name};for(let z in this.attrs){Z.attrs=this.attrs;break}if(this.content.size)Z.content=this.content.toJSON();if(this.marks.length)Z.marks=this.marks.map((z)=>z.toJSON());return Z}static fromJSON(Z,z){if(!z)throw new RangeError("Invalid input for Node.fromJSON");let X=void 0;if(z.marks){if(!Array.isArray(z.marks))throw new RangeError("Invalid mark data for Node.fromJSON");X=z.marks.map(Z.markFromJSON)}if(z.type=="text"){if(typeof z.text!="string")throw new RangeError("Invalid text node in JSON");return Z.text(z.text,X)}let K=L.fromJSON(Z,z.content),J=Z.nodeType(z.type).create(z.attrs,K,X);return J.type.checkAttrs(J.attrs),J}}v0.prototype.text=void 0;class zZ extends v0{constructor(Z,z,X,K){super(Z,z,null,K);if(!X)throw new RangeError("Empty text nodes are not allowed");this.text=X}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);return n7(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(Z,z){return this.text.slice(Z,z)}get nodeSize(){return this.text.length}mark(Z){return Z==this.marks?this:new zZ(this.type,this.attrs,this.text,Z)}withText(Z){if(Z==this.text)return this;return new zZ(this.type,this.attrs,Z,this.marks)}cut(Z=0,z=this.text.length){if(Z==0&&z==this.text.length)return this;return this.withText(this.text.slice(Z,z))}eq(Z){return this.sameMarkup(Z)&&this.text==Z.text}toJSON(){let Z=super.toJSON();return Z.text=this.text,Z}}function n7(Z,z){for(let X=Z.length-1;X>=0;X--)z=Z[X].type.name+"("+z+")";return z}class e5{constructor(Z){this.validEnd=Z,this.next=[],this.wrapCache=[]}static parse(Z,z){let X=new a7(Z,z);if(X.next==null)return e5.empty;let K=r7(X);if(X.next)X.err("Unexpected trailing text");let J=fY($Y(K));return hY(J,X),J}matchType(Z){for(let z=0;z<this.next.length;z++)if(this.next[z].type==Z)return this.next[z].next;return null}matchFragment(Z,z=0,X=Z.childCount){let K=this;for(let J=z;K&&J<X;J++)K=K.matchType(Z.child(J).type);return K}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let Z=0;Z<this.next.length;Z++){let{type:z}=this.next[Z];if(!(z.isText||z.hasRequiredAttrs()))return z}return null}compatible(Z){for(let z=0;z<this.next.length;z++)for(let X=0;X<Z.next.length;X++)if(this.next[z].type==Z.next[X].type)return!0;return!1}fillBefore(Z,z=!1,X=0){let K=[this];function J(Q,Y){let G=Q.matchFragment(Z,X);if(G&&(!z||G.validEnd))return L.from(Y.map((U)=>U.createAndFill()));for(let U=0;U<Q.next.length;U++){let{type:q,next:A}=Q.next[U];if(!(q.isText||q.hasRequiredAttrs())&&K.indexOf(A)==-1){K.push(A);let V=J(A,Y.concat(q));if(V)return V}}return null}return J(this,[])}findWrapping(Z){for(let X=0;X<this.wrapCache.length;X+=2)if(this.wrapCache[X]==Z)return this.wrapCache[X+1];let z=this.computeWrapping(Z);return this.wrapCache.push(Z,z),z}computeWrapping(Z){let z=Object.create(null),X=[{match:this,type:null,via:null}];while(X.length){let K=X.shift(),J=K.match;if(J.matchType(Z)){let Q=[];for(let Y=K;Y.type;Y=Y.via)Q.push(Y.type);return Q.reverse()}for(let Q=0;Q<J.next.length;Q++){let{type:Y,next:G}=J.next[Q];if(!Y.isLeaf&&!Y.hasRequiredAttrs()&&!(Y.name in z)&&(!K.type||G.validEnd))X.push({match:Y.contentMatch,type:Y,via:K}),z[Y.name]=!0}}return null}get edgeCount(){return this.next.length}edge(Z){if(Z>=this.next.length)throw new RangeError(`There's no ${Z}th edge in this content match`);return this.next[Z]}toString(){let Z=[];function z(X){Z.push(X);for(let K=0;K<X.next.length;K++)if(Z.indexOf(X.next[K].next)==-1)z(X.next[K].next)}return z(this),Z.map((X,K)=>{let J=K+(X.validEnd?"*":" ")+" ";for(let Q=0;Q<X.next.length;Q++)J+=(Q?", ":"")+X.next[Q].type.name+"->"+Z.indexOf(X.next[Q].next);return J}).join(`
`)}}e5.empty=new e5(!0);class a7{constructor(Z,z){if(this.string=Z,this.nodeTypes=z,this.inline=null,this.pos=0,this.tokens=Z.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]=="")this.tokens.pop();if(this.tokens[0]=="")this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(Z){return this.next==Z&&(this.pos++||!0)}err(Z){throw new SyntaxError(Z+" (in content expression '"+this.string+"')")}}function r7(Z){let z=[];do z.push(xY(Z));while(Z.eat("|"));return z.length==1?z[0]:{type:"choice",exprs:z}}function xY(Z){let z=[];do z.push(gY(Z));while(Z.next&&Z.next!=")"&&Z.next!="|");return z.length==1?z[0]:{type:"seq",exprs:z}}function gY(Z){let z=vY(Z);for(;;)if(Z.eat("+"))z={type:"plus",expr:z};else if(Z.eat("*"))z={type:"star",expr:z};else if(Z.eat("?"))z={type:"opt",expr:z};else if(Z.eat("{"))z=wY(Z,z);else break;return z}function x7(Z){if(/\D/.test(Z.next))Z.err("Expected number, got '"+Z.next+"'");let z=Number(Z.next);return Z.pos++,z}function wY(Z,z){let X=x7(Z),K=X;if(Z.eat(","))if(Z.next!="}")K=x7(Z);else K=-1;if(!Z.eat("}"))Z.err("Unclosed braced range");return{type:"range",min:X,max:K,expr:z}}function uY(Z,z){let X=Z.nodeTypes,K=X[z];if(K)return[K];let J=[];for(let Q in X){let Y=X[Q];if(Y.isInGroup(z))J.push(Y)}if(J.length==0)Z.err("No node type or group '"+z+"' found");return J}function vY(Z){if(Z.eat("(")){let z=r7(Z);if(!Z.eat(")"))Z.err("Missing closing paren");return z}else if(!/\W/.test(Z.next)){let z=uY(Z,Z.next).map((X)=>{if(Z.inline==null)Z.inline=X.isInline;else if(Z.inline!=X.isInline)Z.err("Mixing inline and block content");return{type:"name",value:X}});return Z.pos++,z.length==1?z[0]:{type:"choice",exprs:z}}else Z.err("Unexpected token '"+Z.next+"'")}function $Y(Z){let z=[[]];return J(Q(Z,0),X()),z;function X(){return z.push([])-1}function K(Y,G,U){let q={term:U,to:G};return z[Y].push(q),q}function J(Y,G){Y.forEach((U)=>U.to=G)}function Q(Y,G){if(Y.type=="choice")return Y.exprs.reduce((U,q)=>U.concat(Q(q,G)),[]);else if(Y.type=="seq")for(let U=0;;U++){let q=Q(Y.exprs[U],G);if(U==Y.exprs.length-1)return q;J(q,G=X())}else if(Y.type=="star"){let U=X();return K(G,U),J(Q(Y.expr,U),U),[K(U)]}else if(Y.type=="plus"){let U=X();return J(Q(Y.expr,G),U),J(Q(Y.expr,U),U),[K(U)]}else if(Y.type=="opt")return[K(G)].concat(Q(Y.expr,G));else if(Y.type=="range"){let U=G;for(let q=0;q<Y.min;q++){let A=X();J(Q(Y.expr,U),A),U=A}if(Y.max==-1)J(Q(Y.expr,U),U);else for(let q=Y.min;q<Y.max;q++){let A=X();K(U,A),J(Q(Y.expr,U),A),U=A}return[K(U)]}else if(Y.type=="name")return[K(G,void 0,Y.value)];else throw new Error("Unknown expr type")}}function o7(Z,z){return z-Z}function g7(Z,z){let X=[];return K(z),X.sort(o7);function K(J){let Q=Z[J];if(Q.length==1&&!Q[0].term)return K(Q[0].to);X.push(J);for(let Y=0;Y<Q.length;Y++){let{term:G,to:U}=Q[Y];if(!G&&X.indexOf(U)==-1)K(U)}}}function fY(Z){let z=Object.create(null);return X(g7(Z,0));function X(K){let J=[];K.forEach((Y)=>{Z[Y].forEach(({term:G,to:U})=>{if(!G)return;let q;for(let A=0;A<J.length;A++)if(J[A][0]==G)q=J[A][1];g7(Z,U).forEach((A)=>{if(!q)J.push([G,q=[]]);if(q.indexOf(A)==-1)q.push(A)})})});let Q=z[K.join(",")]=new e5(K.indexOf(Z.length-1)>-1);for(let Y=0;Y<J.length;Y++){let G=J[Y][1].sort(o7);Q.next.push({type:J[Y][0],next:z[G.join(",")]||X(G)})}return Q}}function hY(Z,z){for(let X=0,K=[Z];X<K.length;X++){let J=K[X],Q=!J.validEnd,Y=[];for(let G=0;G<J.next.length;G++){let{type:U,next:q}=J.next[G];if(Y.push(U.name),Q&&!(U.isText||U.hasRequiredAttrs()))Q=!1;if(K.indexOf(q)==-1)K.push(q)}if(Q)z.err("Only non-generatable nodes ("+Y.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function t7(Z){let z=Object.create(null);for(let X in Z){let K=Z[X];if(!K.hasDefault)return null;z[X]=K.default}return z}function e7(Z,z){let X=Object.create(null);for(let K in Z){let J=z&&z[K];if(J===void 0){let Q=Z[K];if(Q.hasDefault)J=Q.default;else throw new RangeError("No value supplied for attribute "+K)}X[K]=J}return X}function Z6(Z,z,X,K){for(let J in z)if(!(J in Z))throw new RangeError(`Unsupported attribute ${J} for ${X} of type ${J}`);for(let J in Z){let Q=Z[J];if(Q.validate)Q.validate(z[J])}}function z6(Z,z){let X=Object.create(null);if(z)for(let K in z)X[K]=new X6(Z,K,z[K]);return X}class XZ{constructor(Z,z,X){this.name=Z,this.schema=z,this.spec=X,this.markSet=null,this.groups=X.group?X.group.split(" "):[],this.attrs=z6(Z,X.attrs),this.defaultAttrs=t7(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(X.inline||Z=="text"),this.isText=Z=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==e5.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(Z){return this.groups.indexOf(Z)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let Z in this.attrs)if(this.attrs[Z].isRequired)return!0;return!1}compatibleContent(Z){return this==Z||this.contentMatch.compatible(Z.contentMatch)}computeAttrs(Z){if(!Z&&this.defaultAttrs)return this.defaultAttrs;else return e7(this.attrs,Z)}create(Z=null,z,X){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new v0(this,this.computeAttrs(Z),L.from(z),h.setFrom(X))}createChecked(Z=null,z,X){return z=L.from(z),this.checkContent(z),new v0(this,this.computeAttrs(Z),z,h.setFrom(X))}createAndFill(Z=null,z,X){if(Z=this.computeAttrs(Z),z=L.from(z),z.size){let Q=this.contentMatch.fillBefore(z);if(!Q)return null;z=Q.append(z)}let K=this.contentMatch.matchFragment(z),J=K&&K.fillBefore(L.empty,!0);if(!J)return null;return new v0(this,Z,z.append(J),h.setFrom(X))}validContent(Z){let z=this.contentMatch.matchFragment(Z);if(!z||!z.validEnd)return!1;for(let X=0;X<Z.childCount;X++)if(!this.allowsMarks(Z.child(X).marks))return!1;return!0}checkContent(Z){if(!this.validContent(Z))throw new RangeError(`Invalid content for node ${this.name}: ${Z.toString().slice(0,50)}`)}checkAttrs(Z){Z6(this.attrs,Z,"node",this.name)}allowsMarkType(Z){return this.markSet==null||this.markSet.indexOf(Z)>-1}allowsMarks(Z){if(this.markSet==null)return!0;for(let z=0;z<Z.length;z++)if(!this.allowsMarkType(Z[z].type))return!1;return!0}allowedMarks(Z){if(this.markSet==null)return Z;let z;for(let X=0;X<Z.length;X++)if(!this.allowsMarkType(Z[X].type)){if(!z)z=Z.slice(0,X)}else if(z)z.push(Z[X]);return!z?Z:z.length?z:h.none}static compile(Z,z){let X=Object.create(null);Z.forEach((J,Q)=>X[J]=new XZ(J,z,Q));let K=z.spec.topNode||"doc";if(!X[K])throw new RangeError("Schema is missing its top node type ('"+K+"')");if(!X.text)throw new RangeError("Every schema needs a 'text' type");for(let J in X.text.attrs)throw new RangeError("The text node type should not have attributes");return X}}function _Y(Z,z,X){let K=X.split("|");return(J)=>{let Q=J===null?"null":typeof J;if(K.indexOf(Q)<0)throw new RangeError(`Expected value of type ${K} for attribute ${z} on type ${Z}, got ${Q}`)}}class X6{constructor(Z,z,X){this.hasDefault=Object.prototype.hasOwnProperty.call(X,"default"),this.default=X.default,this.validate=typeof X.validate=="string"?_Y(Z,z,X.validate):X.validate}get isRequired(){return!this.hasDefault}}class P3{constructor(Z,z,X,K){this.name=Z,this.rank=z,this.schema=X,this.spec=K,this.attrs=z6(Z,K.attrs),this.excluded=null;let J=t7(this.attrs);this.instance=J?new h(this,J):null}create(Z=null){if(!Z&&this.instance)return this.instance;return new h(this,e7(this.attrs,Z))}static compile(Z,z){let X=Object.create(null),K=0;return Z.forEach((J,Q)=>X[J]=new P3(J,K++,z,Q)),X}removeFromSet(Z){for(var z=0;z<Z.length;z++)if(Z[z].type==this)Z=Z.slice(0,z).concat(Z.slice(z+1)),z--;return Z}isInSet(Z){for(let z=0;z<Z.length;z++)if(Z[z].type==this)return Z[z]}checkAttrs(Z){Z6(this.attrs,Z,"mark",this.name)}excludes(Z){return this.excluded.indexOf(Z)>-1}}class KZ{constructor(Z){this.linebreakReplacement=null,this.cached=Object.create(null);let z=this.spec={};for(let K in Z)z[K]=Z[K];z.nodes=v1.from(Z.nodes),z.marks=v1.from(Z.marks||{}),this.nodes=XZ.compile(this.spec.nodes,this),this.marks=P3.compile(this.spec.marks,this);let X=Object.create(null);for(let K in this.nodes){if(K in this.marks)throw new RangeError(K+" can not be both a node and a mark");let J=this.nodes[K],Q=J.spec.content||"",Y=J.spec.marks;if(J.contentMatch=X[Q]||(X[Q]=e5.parse(Q,this.nodes)),J.inlineContent=J.contentMatch.inlineContent,J.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!J.isInline||!J.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=J}J.markSet=Y=="_"?null:Y?w7(this,Y.split(" ")):Y==""||!J.inlineContent?[]:null}for(let K in this.marks){let J=this.marks[K],Q=J.spec.excludes;J.excluded=Q==null?[J]:Q==""?[]:w7(this,Q.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(Z,z=null,X,K){if(typeof Z=="string")Z=this.nodeType(Z);else if(!(Z instanceof XZ))throw new RangeError("Invalid node type: "+Z);else if(Z.schema!=this)throw new RangeError("Node type from different schema used ("+Z.name+")");return Z.createChecked(z,X,K)}text(Z,z){let X=this.nodes.text;return new zZ(X,X.defaultAttrs,Z,h.setFrom(z))}mark(Z,z){if(typeof Z=="string")Z=this.marks[Z];return Z.create(z)}nodeFromJSON(Z){return v0.fromJSON(this,Z)}markFromJSON(Z){return h.fromJSON(this,Z)}nodeType(Z){let z=this.nodes[Z];if(!z)throw new RangeError("Unknown node type: "+Z);return z}}function w7(Z,z){let X=[];for(let K=0;K<z.length;K++){let J=z[K],Q=Z.marks[J],Y=Q;if(Q)X.push(Q);else for(let G in Z.marks){let U=Z.marks[G];if(J=="_"||U.spec.group&&U.spec.group.split(" ").indexOf(J)>-1)X.push(Y=U)}if(!Y)throw new SyntaxError("Unknown mark type: '"+z[K]+"'")}return X}function mY(Z){return Z.tag!=null}function lY(Z){return Z.style!=null}class Z5{constructor(Z,z){this.schema=Z,this.rules=z,this.tags=[],this.styles=[];let X=this.matchedStyles=[];z.forEach((K)=>{if(mY(K))this.tags.push(K);else if(lY(K)){let J=/[^=]*/.exec(K.style)[0];if(X.indexOf(J)<0)X.push(J);this.styles.push(K)}}),this.normalizeLists=!this.tags.some((K)=>{if(!/^(ul|ol)\b/.test(K.tag)||!K.node)return!1;let J=Z.nodes[K.node];return J.contentMatch.matchType(J)})}parse(Z,z={}){let X=new m1(this,z,!1);return X.addAll(Z,h.none,z.from,z.to),X.finish()}parseSlice(Z,z={}){let X=new m1(this,z,!0);return X.addAll(Z,h.none,z.from,z.to),S.maxOpen(X.finish())}matchTag(Z,z,X){for(let K=X?this.tags.indexOf(X)+1:0;K<this.tags.length;K++){let J=this.tags[K];if(iY(Z,J.tag)&&(J.namespace===void 0||Z.namespaceURI==J.namespace)&&(!J.context||z.matchesContext(J.context))){if(J.getAttrs){let Q=J.getAttrs(Z);if(Q===!1)continue;J.attrs=Q||void 0}return J}}}matchStyle(Z,z,X,K){for(let J=K?this.styles.indexOf(K)+1:0;J<this.styles.length;J++){let Q=this.styles[J],Y=Q.style;if(Y.indexOf(Z)!=0||Q.context&&!X.matchesContext(Q.context)||Y.length>Z.length&&(Y.charCodeAt(Z.length)!=61||Y.slice(Z.length+1)!=z))continue;if(Q.getAttrs){let G=Q.getAttrs(z);if(G===!1)continue;Q.attrs=G||void 0}return Q}}static schemaRules(Z){let z=[];function X(K){let J=K.priority==null?50:K.priority,Q=0;for(;Q<z.length;Q++){let Y=z[Q];if((Y.priority==null?50:Y.priority)<J)break}z.splice(Q,0,K)}for(let K in Z.marks){let J=Z.marks[K].spec.parseDOM;if(J)J.forEach((Q)=>{if(X(Q=v7(Q)),!(Q.mark||Q.ignore||Q.clearMark))Q.mark=K})}for(let K in Z.nodes){let J=Z.nodes[K].spec.parseDOM;if(J)J.forEach((Q)=>{if(X(Q=v7(Q)),!(Q.node||Q.ignore||Q.mark))Q.node=K})}return z}static fromSchema(Z){return Z.cached.domParser||(Z.cached.domParser=new Z5(Z,Z5.schemaRules(Z)))}}var K6={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},cY={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},J6={ol:!0,ul:!0},E3=1,_1=2,F3=4;function u7(Z,z,X){if(z!=null)return(z?E3:0)|(z==="full"?_1:0);return Z&&Z.whitespace=="pre"?E3|_1:X&~F3}class j3{constructor(Z,z,X,K,J,Q){this.type=Z,this.attrs=z,this.marks=X,this.solid=K,this.options=Q,this.content=[],this.activeMarks=h.none,this.match=J||(Q&F3?null:Z.contentMatch)}findWrapping(Z){if(!this.match){if(!this.type)return[];let z=this.type.contentMatch.fillBefore(L.from(Z));if(z)this.match=this.type.contentMatch.matchFragment(z);else{let X=this.type.contentMatch,K;if(K=X.findWrapping(Z.type))return this.match=X,K;else return null}}return this.match.findWrapping(Z.type)}finish(Z){if(!(this.options&E3)){let X=this.content[this.content.length-1],K;if(X&&X.isText&&(K=/[ \t\r\n\u000c]+$/.exec(X.text))){let J=X;if(X.text.length==K[0].length)this.content.pop();else this.content[this.content.length-1]=J.withText(J.text.slice(0,J.text.length-K[0].length))}}let z=L.from(this.content);if(!Z&&this.match)z=z.append(this.match.fillBefore(L.empty,!0));return this.type?this.type.create(this.attrs,z,this.marks):z}inlineContext(Z){if(this.type)return this.type.inlineContent;if(this.content.length)return this.content[0].isInline;return Z.parentNode&&!K6.hasOwnProperty(Z.parentNode.nodeName.toLowerCase())}}class m1{constructor(Z,z,X){this.parser=Z,this.options=z,this.isOpen=X,this.open=0,this.localPreserveWS=!1;let K=z.topNode,J,Q=u7(null,z.preserveWhitespace,0)|(X?F3:0);if(K)J=new j3(K.type,K.attrs,h.none,!0,z.topMatch||K.type.contentMatch,Q);else if(X)J=new j3(null,null,h.none,!0,null,Q);else J=new j3(Z.schema.topNodeType,null,h.none,!0,null,Q);this.nodes=[J],this.find=z.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(Z,z){if(Z.nodeType==3)this.addTextNode(Z,z);else if(Z.nodeType==1)this.addElement(Z,z)}addTextNode(Z,z){let X=Z.nodeValue,K=this.top,J=K.options&_1?"full":this.localPreserveWS||(K.options&E3)>0;if(J==="full"||K.inlineContext(Z)||/[^ \t\r\n\u000c]/.test(X)){if(!J){if(X=X.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(X)&&this.open==this.nodes.length-1){let Q=K.content[K.content.length-1],Y=Z.previousSibling;if(!Q||Y&&Y.nodeName=="BR"||Q.isText&&/[ \t\r\n\u000c]$/.test(Q.text))X=X.slice(1)}}else if(J!=="full")X=X.replace(/\r?\n|\r/g," ");else X=X.replace(/\r\n?/g,`
`);if(X)this.insertNode(this.parser.schema.text(X),z,!/\S/.test(X));this.findInText(Z)}else this.findInside(Z)}addElement(Z,z,X){let K=this.localPreserveWS,J=this.top;if(Z.tagName=="PRE"||/pre/.test(Z.style&&Z.style.whiteSpace))this.localPreserveWS=!0;let Q=Z.nodeName.toLowerCase(),Y;if(J6.hasOwnProperty(Q)&&this.parser.normalizeLists)pY(Z);let G=this.options.ruleFromNode&&this.options.ruleFromNode(Z)||(Y=this.parser.matchTag(Z,this,X));Z:if(G?G.ignore:cY.hasOwnProperty(Q))this.findInside(Z),this.ignoreFallback(Z,z);else if(!G||G.skip||G.closeParent){if(G&&G.closeParent)this.open=Math.max(0,this.open-1);else if(G&&G.skip.nodeType)Z=G.skip;let U,q=this.needsBlock;if(K6.hasOwnProperty(Q)){if(J.content.length&&J.content[0].isInline&&this.open)this.open--,J=this.top;if(U=!0,!J.type)this.needsBlock=!0}else if(!Z.firstChild){this.leafFallback(Z,z);break Z}let A=G&&G.skip?z:this.readStyles(Z,z);if(A)this.addAll(Z,A);if(U)this.sync(J);this.needsBlock=q}else{let U=this.readStyles(Z,z);if(U)this.addElementByRule(Z,G,U,G.consuming===!1?Y:void 0)}this.localPreserveWS=K}leafFallback(Z,z){if(Z.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent)this.addTextNode(Z.ownerDocument.createTextNode(`
`),z)}ignoreFallback(Z,z){if(Z.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent))this.findPlace(this.parser.schema.text("-"),z,!0)}readStyles(Z,z){let X=Z.style;if(X&&X.length)for(let K=0;K<this.parser.matchedStyles.length;K++){let J=this.parser.matchedStyles[K],Q=X.getPropertyValue(J);if(Q)for(let Y=void 0;;){let G=this.parser.matchStyle(J,Q,this,Y);if(!G)break;if(G.ignore)return null;if(G.clearMark)z=z.filter((U)=>!G.clearMark(U));else z=z.concat(this.parser.schema.marks[G.mark].create(G.attrs));if(G.consuming===!1)Y=G;else break}}return z}addElementByRule(Z,z,X,K){let J,Q;if(z.node){if(Q=this.parser.schema.nodes[z.node],!Q.isLeaf){let G=this.enter(Q,z.attrs||null,X,z.preserveWhitespace);if(G)J=!0,X=G}else if(!this.insertNode(Q.create(z.attrs),X,Z.nodeName=="BR"))this.leafFallback(Z,X)}else{let G=this.parser.schema.marks[z.mark];X=X.concat(G.create(z.attrs))}let Y=this.top;if(Q&&Q.isLeaf)this.findInside(Z);else if(K)this.addElement(Z,X,K);else if(z.getContent)this.findInside(Z),z.getContent(Z,this.parser.schema).forEach((G)=>this.insertNode(G,X,!1));else{let G=Z;if(typeof z.contentElement=="string")G=Z.querySelector(z.contentElement);else if(typeof z.contentElement=="function")G=z.contentElement(Z);else if(z.contentElement)G=z.contentElement;this.findAround(Z,G,!0),this.addAll(G,X),this.findAround(Z,G,!1)}if(J&&this.sync(Y))this.open--}addAll(Z,z,X,K){let J=X||0;for(let Q=X?Z.childNodes[X]:Z.firstChild,Y=K==null?null:Z.childNodes[K];Q!=Y;Q=Q.nextSibling,++J)this.findAtPoint(Z,J),this.addDOM(Q,z);this.findAtPoint(Z,J)}findPlace(Z,z,X){let K,J;for(let Q=this.open,Y=0;Q>=0;Q--){let G=this.nodes[Q],U=G.findWrapping(Z);if(U&&(!K||K.length>U.length+Y)){if(K=U,J=G,!U.length)break}if(G.solid){if(X)break;Y+=2}}if(!K)return null;this.sync(J);for(let Q=0;Q<K.length;Q++)z=this.enterInner(K[Q],null,z,!1);return z}insertNode(Z,z,X){if(Z.isInline&&this.needsBlock&&!this.top.type){let J=this.textblockFromContext();if(J)z=this.enterInner(J,null,z)}let K=this.findPlace(Z,z,X);if(K){this.closeExtra();let J=this.top;if(J.match)J.match=J.match.matchType(Z.type);let Q=h.none;for(let Y of K.concat(Z.marks))if(J.type?J.type.allowsMarkType(Y.type):$7(Y.type,Z.type))Q=Y.addToSet(Q);return J.content.push(Z.mark(Q)),!0}return!1}enter(Z,z,X,K){let J=this.findPlace(Z.create(z),X,!1);if(J)J=this.enterInner(Z,z,X,!0,K);return J}enterInner(Z,z,X,K=!1,J){this.closeExtra();let Q=this.top;Q.match=Q.match&&Q.match.matchType(Z);let Y=u7(Z,J,Q.options);if(Q.options&F3&&Q.content.length==0)Y|=F3;let G=h.none;return X=X.filter((U)=>{if(Q.type?Q.type.allowsMarkType(U.type):$7(U.type,Z))return G=U.addToSet(G),!1;return!0}),this.nodes.push(new j3(Z,z,G,K,null,Y)),this.open++,X}closeExtra(Z=!1){let z=this.nodes.length-1;if(z>this.open){for(;z>this.open;z--)this.nodes[z-1].content.push(this.nodes[z].finish(Z));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(Z){for(let z=this.open;z>=0;z--)if(this.nodes[z]==Z)return this.open=z,!0;else if(this.localPreserveWS)this.nodes[z].options|=E3;return!1}get currentPos(){this.closeExtra();let Z=0;for(let z=this.open;z>=0;z--){let X=this.nodes[z].content;for(let K=X.length-1;K>=0;K--)Z+=X[K].nodeSize;if(z)Z++}return Z}findAtPoint(Z,z){if(this.find){for(let X=0;X<this.find.length;X++)if(this.find[X].node==Z&&this.find[X].offset==z)this.find[X].pos=this.currentPos}}findInside(Z){if(this.find){for(let z=0;z<this.find.length;z++)if(this.find[z].pos==null&&Z.nodeType==1&&Z.contains(this.find[z].node))this.find[z].pos=this.currentPos}}findAround(Z,z,X){if(Z!=z&&this.find){for(let K=0;K<this.find.length;K++)if(this.find[K].pos==null&&Z.nodeType==1&&Z.contains(this.find[K].node)){if(z.compareDocumentPosition(this.find[K].node)&(X?2:4))this.find[K].pos=this.currentPos}}}findInText(Z){if(this.find){for(let z=0;z<this.find.length;z++)if(this.find[z].node==Z)this.find[z].pos=this.currentPos-(Z.nodeValue.length-this.find[z].offset)}}matchesContext(Z){if(Z.indexOf("|")>-1)return Z.split(/\s*\|\s*/).some(this.matchesContext,this);let z=Z.split("/"),X=this.options.context,K=!this.isOpen&&(!X||X.parent.type==this.nodes[0].type),J=-(X?X.depth+1:0)+(K?0:1),Q=(Y,G)=>{for(;Y>=0;Y--){let U=z[Y];if(U==""){if(Y==z.length-1||Y==0)continue;for(;G>=J;G--)if(Q(Y-1,G))return!0;return!1}else{let q=G>0||G==0&&K?this.nodes[G].type:X&&G>=J?X.node(G-J).type:null;if(!q||q.name!=U&&!q.isInGroup(U))return!1;G--}}return!0};return Q(z.length-1,this.open)}textblockFromContext(){let Z=this.options.context;if(Z)for(let z=Z.depth;z>=0;z--){let X=Z.node(z).contentMatchAt(Z.indexAfter(z)).defaultType;if(X&&X.isTextblock&&X.defaultAttrs)return X}for(let z in this.parser.schema.nodes){let X=this.parser.schema.nodes[z];if(X.isTextblock&&X.defaultAttrs)return X}}}function pY(Z){for(let z=Z.firstChild,X=null;z;z=z.nextSibling){let K=z.nodeType==1?z.nodeName.toLowerCase():null;if(K&&J6.hasOwnProperty(K)&&X)X.appendChild(z),z=X;else if(K=="li")X=z;else if(K)X=null}}function iY(Z,z){return(Z.matches||Z.msMatchesSelector||Z.webkitMatchesSelector||Z.mozMatchesSelector).call(Z,z)}function v7(Z){let z={};for(let X in Z)z[X]=Z[X];return z}function $7(Z,z){let X=z.schema.nodes;for(let K in X){let J=X[K];if(!J.allowsMarkType(Z))continue;let Q=[],Y=(G)=>{Q.push(G);for(let U=0;U<G.edgeCount;U++){let{type:q,next:A}=G.edge(U);if(q==z)return!0;if(Q.indexOf(A)<0&&Y(A))return!0}};if(Y(J.contentMatch))return!0}}class y5{constructor(Z,z){this.nodes=Z,this.marks=z}serializeFragment(Z,z={},X){if(!X)X=f1(z).createDocumentFragment();let K=X,J=[];return Z.forEach((Q)=>{if(J.length||Q.marks.length){let Y=0,G=0;while(Y<J.length&&G<Q.marks.length){let U=Q.marks[G];if(!this.marks[U.type.name]){G++;continue}if(!U.eq(J[Y][0])||U.type.spec.spanning===!1)break;Y++,G++}while(Y<J.length)K=J.pop()[1];while(G<Q.marks.length){let U=Q.marks[G++],q=this.serializeMark(U,Q.isInline,z);if(q)J.push([U,K]),K.appendChild(q.dom),K=q.contentDOM||q.dom}}K.appendChild(this.serializeNodeInner(Q,z))}),X}serializeNodeInner(Z,z){let{dom:X,contentDOM:K}=t3(f1(z),this.nodes[Z.type.name](Z),null,Z.attrs);if(K){if(Z.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(Z.content,z,K)}return X}serializeNode(Z,z={}){let X=this.serializeNodeInner(Z,z);for(let K=Z.marks.length-1;K>=0;K--){let J=this.serializeMark(Z.marks[K],Z.isInline,z);if(J)(J.contentDOM||J.dom).appendChild(X),X=J.dom}return X}serializeMark(Z,z,X={}){let K=this.marks[Z.type.name];return K&&t3(f1(X),K(Z,z),null,Z.attrs)}static renderSpec(Z,z,X=null,K){return t3(Z,z,X,K)}static fromSchema(Z){return Z.cached.domSerializer||(Z.cached.domSerializer=new y5(this.nodesFromSchema(Z),this.marksFromSchema(Z)))}static nodesFromSchema(Z){let z=f7(Z.nodes);if(!z.text)z.text=(X)=>X.text;return z}static marksFromSchema(Z){return f7(Z.marks)}}function f7(Z){let z={};for(let X in Z){let K=Z[X].spec.toDOM;if(K)z[X]=K}return z}function f1(Z){return Z.document||window.document}var h7=new WeakMap;function dY(Z){let z=h7.get(Z);if(z===void 0)h7.set(Z,z=sY(Z));return z}function sY(Z){let z=null;function X(K){if(K&&typeof K=="object")if(Array.isArray(K))if(typeof K[0]=="string"){if(!z)z=[];z.push(K)}else for(let J=0;J<K.length;J++)X(K[J]);else for(let J in K)X(K[J])}return X(Z),z}function t3(Z,z,X,K){if(typeof z=="string")return{dom:Z.createTextNode(z)};if(z.nodeType!=null)return{dom:z};if(z.dom&&z.dom.nodeType!=null)return z;let J=z[0],Q;if(typeof J!="string")throw new RangeError("Invalid array passed to renderSpec");if(K&&(Q=dY(K))&&Q.indexOf(z)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let Y=J.indexOf(" ");if(Y>0)X=J.slice(0,Y),J=J.slice(Y+1);let G,U=X?Z.createElementNS(X,J):Z.createElement(J),q=z[1],A=1;if(q&&typeof q=="object"&&q.nodeType==null&&!Array.isArray(q)){A=2;for(let V in q)if(q[V]!=null){let W=V.indexOf(" ");if(W>0)U.setAttributeNS(V.slice(0,W),V.slice(W+1),q[V]);else U.setAttribute(V,q[V])}}for(let V=A;V<z.length;V++){let W=z[V];if(W===0){if(V<z.length-1||V>A)throw new RangeError("Content hole must be the only child of its parent node");return{dom:U,contentDOM:U}}else{let{dom:j,contentDOM:H}=t3(Z,W,X,K);if(U.appendChild(j),H){if(G)throw new RangeError("Multiple content holes");G=H}}}return{dom:U,contentDOM:G}}var G6=65535,U6=Math.pow(2,16);function nY(Z,z){return Z+z*U6}function Q6(Z){return Z&G6}function aY(Z){return(Z-(Z&G6))/U6}var q6=1,A6=2,JZ=4,V6=8;class QZ{constructor(Z,z,X){this.pos=Z,this.delInfo=z,this.recover=X}get deleted(){return(this.delInfo&V6)>0}get deletedBefore(){return(this.delInfo&(q6|JZ))>0}get deletedAfter(){return(this.delInfo&(A6|JZ))>0}get deletedAcross(){return(this.delInfo&JZ)>0}}class b0{constructor(Z,z=!1){if(this.ranges=Z,this.inverted=z,!Z.length&&b0.empty)return b0.empty}recover(Z){let z=0,X=Q6(Z);if(!this.inverted)for(let K=0;K<X;K++)z+=this.ranges[K*3+2]-this.ranges[K*3+1];return this.ranges[X*3]+z+aY(Z)}mapResult(Z,z=1){return this._map(Z,z,!1)}map(Z,z=1){return this._map(Z,z,!0)}_map(Z,z,X){let K=0,J=this.inverted?2:1,Q=this.inverted?1:2;for(let Y=0;Y<this.ranges.length;Y+=3){let G=this.ranges[Y]-(this.inverted?K:0);if(G>Z)break;let U=this.ranges[Y+J],q=this.ranges[Y+Q],A=G+U;if(Z<=A){let V=!U?z:Z==G?-1:Z==A?1:z,W=G+K+(V<0?0:q);if(X)return W;let j=Z==(z<0?G:A)?null:nY(Y/3,Z-G),H=Z==G?A6:Z==A?q6:JZ;if(z<0?Z!=G:Z!=A)H|=V6;return new QZ(W,H,j)}K+=q-U}return X?Z+K:new QZ(Z+K,0,null)}touches(Z,z){let X=0,K=Q6(z),J=this.inverted?2:1,Q=this.inverted?1:2;for(let Y=0;Y<this.ranges.length;Y+=3){let G=this.ranges[Y]-(this.inverted?X:0);if(G>Z)break;let U=this.ranges[Y+J],q=G+U;if(Z<=q&&Y==K*3)return!0;X+=this.ranges[Y+Q]-U}return!1}forEach(Z){let z=this.inverted?2:1,X=this.inverted?1:2;for(let K=0,J=0;K<this.ranges.length;K+=3){let Q=this.ranges[K],Y=Q-(this.inverted?J:0),G=Q+(this.inverted?0:J),U=this.ranges[K+z],q=this.ranges[K+X];Z(Y,Y+U,G,G+q),J+=q-U}}invert(){return new b0(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(Z){return Z==0?b0.empty:new b0(Z<0?[0,-Z,0]:[0,0,Z])}}b0.empty=new b0([]);class x8{constructor(Z,z,X=0,K=Z?Z.length:0){this.mirror=z,this.from=X,this.to=K,this._maps=Z||[],this.ownData=!(Z||z)}get maps(){return this._maps}slice(Z=0,z=this.maps.length){return new x8(this._maps,this.mirror,Z,z)}appendMap(Z,z){if(!this.ownData)this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0;if(this.to=this._maps.push(Z),z!=null)this.setMirror(this._maps.length-1,z)}appendMapping(Z){for(let z=0,X=this._maps.length;z<Z._maps.length;z++){let K=Z.getMirror(z);this.appendMap(Z._maps[z],K!=null&&K<z?X+K:void 0)}}getMirror(Z){if(this.mirror){for(let z=0;z<this.mirror.length;z++)if(this.mirror[z]==Z)return this.mirror[z+(z%2?-1:1)]}}setMirror(Z,z){if(!this.mirror)this.mirror=[];this.mirror.push(Z,z)}appendMappingInverted(Z){for(let z=Z.maps.length-1,X=this._maps.length+Z._maps.length;z>=0;z--){let K=Z.getMirror(z);this.appendMap(Z._maps[z].invert(),K!=null&&K>z?X-K-1:void 0)}}invert(){let Z=new x8;return Z.appendMappingInverted(this),Z}map(Z,z=1){if(this.mirror)return this._map(Z,z,!0);for(let X=this.from;X<this.to;X++)Z=this._maps[X].map(Z,z);return Z}mapResult(Z,z=1){return this._map(Z,z,!1)}_map(Z,z,X){let K=0;for(let J=this.from;J<this.to;J++){let Q=this._maps[J],Y=Q.mapResult(Z,z);if(Y.recover!=null){let G=this.getMirror(J);if(G!=null&&G>J&&G<this.to){J=G,Z=this._maps[G].recover(Y.recover);continue}}K|=Y.delInfo,Z=Y.pos}return X?Z:new QZ(Z,K,null)}}var l1=Object.create(null);class A0{getMap(){return b0.empty}merge(Z){return null}static fromJSON(Z,z){if(!z||!z.stepType)throw new RangeError("Invalid input for Step.fromJSON");let X=l1[z.stepType];if(!X)throw new RangeError(`No step type ${z.stepType} defined`);return X.fromJSON(Z,z)}static jsonID(Z,z){if(Z in l1)throw new RangeError("Duplicate use of step JSON ID "+Z);return l1[Z]=z,z.prototype.jsonID=Z,z}}class Z0{constructor(Z,z){this.doc=Z,this.failed=z}static ok(Z){return new Z0(Z,null)}static fail(Z){return new Z0(null,Z)}static fromReplace(Z,z,X,K){try{return Z0.ok(Z.replace(z,X,K))}catch(J){if(J instanceof N8)return Z0.fail(J.message);throw J}}}function d1(Z,z,X){let K=[];for(let J=0;J<Z.childCount;J++){let Q=Z.child(J);if(Q.content.size)Q=Q.copy(d1(Q.content,z,Q));if(Q.isInline)Q=z(Q,X,J);K.push(Q)}return L.fromArray(K)}class x5 extends A0{constructor(Z,z,X){super();this.from=Z,this.to=z,this.mark=X}apply(Z){let z=Z.slice(this.from,this.to),X=Z.resolve(this.from),K=X.node(X.sharedDepth(this.to)),J=new S(d1(z.content,(Q,Y)=>{if(!Q.isAtom||!Y.type.allowsMarkType(this.mark.type))return Q;return Q.mark(this.mark.addToSet(Q.marks))},K),z.openStart,z.openEnd);return Z0.fromReplace(Z,this.from,this.to,J)}invert(){return new z5(this.from,this.to,this.mark)}map(Z){let z=Z.mapResult(this.from,1),X=Z.mapResult(this.to,-1);if(z.deleted&&X.deleted||z.pos>=X.pos)return null;return new x5(z.pos,X.pos,this.mark)}merge(Z){if(Z instanceof x5&&Z.mark.eq(this.mark)&&this.from<=Z.to&&this.to>=Z.from)return new x5(Math.min(this.from,Z.from),Math.max(this.to,Z.to),this.mark);return null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(Z,z){if(typeof z.from!="number"||typeof z.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new x5(z.from,z.to,Z.markFromJSON(z.mark))}}A0.jsonID("addMark",x5);class z5 extends A0{constructor(Z,z,X){super();this.from=Z,this.to=z,this.mark=X}apply(Z){let z=Z.slice(this.from,this.to),X=new S(d1(z.content,(K)=>{return K.mark(this.mark.removeFromSet(K.marks))},Z),z.openStart,z.openEnd);return Z0.fromReplace(Z,this.from,this.to,X)}invert(){return new x5(this.from,this.to,this.mark)}map(Z){let z=Z.mapResult(this.from,1),X=Z.mapResult(this.to,-1);if(z.deleted&&X.deleted||z.pos>=X.pos)return null;return new z5(z.pos,X.pos,this.mark)}merge(Z){if(Z instanceof z5&&Z.mark.eq(this.mark)&&this.from<=Z.to&&this.to>=Z.from)return new z5(Math.min(this.from,Z.from),Math.max(this.to,Z.to),this.mark);return null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(Z,z){if(typeof z.from!="number"||typeof z.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new z5(z.from,z.to,Z.markFromJSON(z.mark))}}A0.jsonID("removeMark",z5);class g5 extends A0{constructor(Z,z){super();this.pos=Z,this.mark=z}apply(Z){let z=Z.nodeAt(this.pos);if(!z)return Z0.fail("No node at mark step's position");let X=z.type.create(z.attrs,null,this.mark.addToSet(z.marks));return Z0.fromReplace(Z,this.pos,this.pos+1,new S(L.from(X),0,z.isLeaf?0:1))}invert(Z){let z=Z.nodeAt(this.pos);if(z){let X=this.mark.addToSet(z.marks);if(X.length==z.marks.length){for(let K=0;K<z.marks.length;K++)if(!z.marks[K].isInSet(X))return new g5(this.pos,z.marks[K]);return new g5(this.pos,this.mark)}}return new Z8(this.pos,this.mark)}map(Z){let z=Z.mapResult(this.pos,1);return z.deletedAfter?null:new g5(z.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(Z,z){if(typeof z.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new g5(z.pos,Z.markFromJSON(z.mark))}}A0.jsonID("addNodeMark",g5);class Z8 extends A0{constructor(Z,z){super();this.pos=Z,this.mark=z}apply(Z){let z=Z.nodeAt(this.pos);if(!z)return Z0.fail("No node at mark step's position");let X=z.type.create(z.attrs,null,this.mark.removeFromSet(z.marks));return Z0.fromReplace(Z,this.pos,this.pos+1,new S(L.from(X),0,z.isLeaf?0:1))}invert(Z){let z=Z.nodeAt(this.pos);if(!z||!this.mark.isInSet(z.marks))return this;return new g5(this.pos,this.mark)}map(Z){let z=Z.mapResult(this.pos,1);return z.deletedAfter?null:new Z8(z.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(Z,z){if(typeof z.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Z8(z.pos,Z.markFromJSON(z.mark))}}A0.jsonID("removeNodeMark",Z8);class Y0 extends A0{constructor(Z,z,X,K=!1){super();this.from=Z,this.to=z,this.slice=X,this.structure=K}apply(Z){if(this.structure&&i1(Z,this.from,this.to))return Z0.fail("Structure replace would overwrite content");return Z0.fromReplace(Z,this.from,this.to,this.slice)}getMap(){return new b0([this.from,this.to-this.from,this.slice.size])}invert(Z){return new Y0(this.from,this.from+this.slice.size,Z.slice(this.from,this.to))}map(Z){let z=Z.mapResult(this.from,1),X=Z.mapResult(this.to,-1);if(z.deletedAcross&&X.deletedAcross)return null;return new Y0(z.pos,Math.max(z.pos,X.pos),this.slice,this.structure)}merge(Z){if(!(Z instanceof Y0)||Z.structure||this.structure)return null;if(this.from+this.slice.size==Z.from&&!this.slice.openEnd&&!Z.slice.openStart){let z=this.slice.size+Z.slice.size==0?S.empty:new S(this.slice.content.append(Z.slice.content),this.slice.openStart,Z.slice.openEnd);return new Y0(this.from,this.to+(Z.to-Z.from),z,this.structure)}else if(Z.to==this.from&&!this.slice.openStart&&!Z.slice.openEnd){let z=this.slice.size+Z.slice.size==0?S.empty:new S(Z.slice.content.append(this.slice.content),Z.slice.openStart,this.slice.openEnd);return new Y0(Z.from,this.to,z,this.structure)}else return null}toJSON(){let Z={stepType:"replace",from:this.from,to:this.to};if(this.slice.size)Z.slice=this.slice.toJSON();if(this.structure)Z.structure=!0;return Z}static fromJSON(Z,z){if(typeof z.from!="number"||typeof z.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Y0(z.from,z.to,S.fromJSON(Z,z.slice),!!z.structure)}}A0.jsonID("replace",Y0);class t extends A0{constructor(Z,z,X,K,J,Q,Y=!1){super();this.from=Z,this.to=z,this.gapFrom=X,this.gapTo=K,this.slice=J,this.insert=Q,this.structure=Y}apply(Z){if(this.structure&&(i1(Z,this.from,this.gapFrom)||i1(Z,this.gapTo,this.to)))return Z0.fail("Structure gap-replace would overwrite content");let z=Z.slice(this.gapFrom,this.gapTo);if(z.openStart||z.openEnd)return Z0.fail("Gap is not a flat range");let X=this.slice.insertAt(this.insert,z.content);if(!X)return Z0.fail("Content does not fit in gap");return Z0.fromReplace(Z,this.from,this.to,X)}getMap(){return new b0([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(Z){let z=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+z,this.from+this.insert,this.from+this.insert+z,Z.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(Z){let z=Z.mapResult(this.from,1),X=Z.mapResult(this.to,-1),K=this.from==this.gapFrom?z.pos:Z.map(this.gapFrom,-1),J=this.to==this.gapTo?X.pos:Z.map(this.gapTo,1);if(z.deletedAcross&&X.deletedAcross||K<z.pos||J>X.pos)return null;return new t(z.pos,X.pos,K,J,this.slice,this.insert,this.structure)}toJSON(){let Z={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};if(this.slice.size)Z.slice=this.slice.toJSON();if(this.structure)Z.structure=!0;return Z}static fromJSON(Z,z){if(typeof z.from!="number"||typeof z.to!="number"||typeof z.gapFrom!="number"||typeof z.gapTo!="number"||typeof z.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(z.from,z.to,z.gapFrom,z.gapTo,S.fromJSON(Z,z.slice),z.insert,!!z.structure)}}A0.jsonID("replaceAround",t);function i1(Z,z,X){let K=Z.resolve(z),J=X-z,Q=K.depth;while(J>0&&Q>0&&K.indexAfter(Q)==K.node(Q).childCount)Q--,J--;if(J>0){let Y=K.node(Q).maybeChild(K.indexAfter(Q));while(J>0){if(!Y||Y.isLeaf)return!0;Y=Y.firstChild,J--}}return!1}function rY(Z,z,X,K){let J=[],Q=[],Y,G;Z.doc.nodesBetween(z,X,(U,q,A)=>{if(!U.isInline)return;let V=U.marks;if(!K.isInSet(V)&&A.type.allowsMarkType(K.type)){let W=Math.max(q,z),j=Math.min(q+U.nodeSize,X),H=K.addToSet(V);for(let R=0;R<V.length;R++)if(!V[R].isInSet(H))if(Y&&Y.to==W&&Y.mark.eq(V[R]))Y.to=j;else J.push(Y=new z5(W,j,V[R]));if(G&&G.to==W)G.to=j;else Q.push(G=new x5(W,j,K))}}),J.forEach((U)=>Z.step(U)),Q.forEach((U)=>Z.step(U))}function oY(Z,z,X,K){let J=[],Q=0;Z.doc.nodesBetween(z,X,(Y,G)=>{if(!Y.isInline)return;Q++;let U=null;if(K instanceof P3){let q=Y.marks,A;while(A=K.isInSet(q))(U||(U=[])).push(A),q=A.removeFromSet(q)}else if(K){if(K.isInSet(Y.marks))U=[K]}else U=Y.marks;if(U&&U.length){let q=Math.min(G+Y.nodeSize,X);for(let A=0;A<U.length;A++){let V=U[A],W;for(let j=0;j<J.length;j++){let H=J[j];if(H.step==Q-1&&V.eq(J[j].style))W=H}if(W)W.to=q,W.step=Q;else J.push({style:V,from:Math.max(G,z),to:q,step:Q})}}}),J.forEach((Y)=>Z.step(new z5(Y.from,Y.to,Y.style)))}function s1(Z,z,X,K=X.contentMatch,J=!0){let Q=Z.doc.nodeAt(z),Y=[],G=z+1;for(let U=0;U<Q.childCount;U++){let q=Q.child(U),A=G+q.nodeSize,V=K.matchType(q.type);if(!V)Y.push(new Y0(G,A,S.empty));else{K=V;for(let W=0;W<q.marks.length;W++)if(!X.allowsMarkType(q.marks[W].type))Z.step(new z5(G,A,q.marks[W]));if(J&&q.isText&&X.whitespace!="pre"){let W,j=/\r?\n|\r/g,H;while(W=j.exec(q.text)){if(!H)H=new S(L.from(X.schema.text(" ",X.allowedMarks(q.marks))),0,0);Y.push(new Y0(G+W.index,G+W.index+W[0].length,H))}}}G=A}if(!K.validEnd){let U=K.fillBefore(L.empty,!0);Z.replace(G,G,new S(U,0,0))}for(let U=Y.length-1;U>=0;U--)Z.step(Y[U])}function tY(Z,z,X){return(z==0||Z.canReplace(z,Z.childCount))&&(X==Z.childCount||Z.canReplace(0,X))}function w8(Z){let X=Z.parent.content.cutByIndex(Z.startIndex,Z.endIndex);for(let K=Z.depth;;--K){let J=Z.$from.node(K),Q=Z.$from.index(K),Y=Z.$to.indexAfter(K);if(K<Z.depth&&J.canReplace(Q,Y,X))return K;if(K==0||J.type.spec.isolating||!tY(J,Q,Y))break}return null}function eY(Z,z,X){let{$from:K,$to:J,depth:Q}=z,Y=K.before(Q+1),G=J.after(Q+1),U=Y,q=G,A=L.empty,V=0;for(let H=Q,R=!1;H>X;H--)if(R||K.index(H)>0)R=!0,A=L.from(K.node(H).copy(A)),V++;else U--;let W=L.empty,j=0;for(let H=Q,R=!1;H>X;H--)if(R||J.after(H+1)<J.end(H))R=!0,W=L.from(J.node(H).copy(W)),j++;else q++;Z.step(new t(U,q,Y,G,new S(A.append(W),V,j),A.size-V,!0))}function W6(Z,z,X=null,K=Z){let J=ZG(Z,z),Q=J&&zG(K,z);if(!Q)return null;return J.map(Y6).concat({type:z,attrs:X}).concat(Q.map(Y6))}function Y6(Z){return{type:Z,attrs:null}}function ZG(Z,z){let{parent:X,startIndex:K,endIndex:J}=Z,Q=X.contentMatchAt(K).findWrapping(z);if(!Q)return null;let Y=Q.length?Q[0]:z;return X.canReplaceWith(K,J,Y)?Q:null}function zG(Z,z){let{parent:X,startIndex:K,endIndex:J}=Z,Q=X.child(K),Y=z.contentMatch.findWrapping(Q.type);if(!Y)return null;let U=(Y.length?Y[Y.length-1]:z).contentMatch;for(let q=K;U&&q<J;q++)U=U.matchType(X.child(q).type);if(!U||!U.validEnd)return null;return Y}function XG(Z,z,X){let K=L.empty;for(let Y=X.length-1;Y>=0;Y--){if(K.size){let G=X[Y].type.contentMatch.matchFragment(K);if(!G||!G.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}K=L.from(X[Y].type.create(X[Y].attrs,K))}let{start:J,end:Q}=z;Z.step(new t(J,Q,J,Q,new S(K,0,0),X.length,!0))}function KG(Z,z,X,K,J){if(!K.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let Q=Z.steps.length;Z.doc.nodesBetween(z,X,(Y,G)=>{let U=typeof J=="function"?J(Y):J;if(Y.isTextblock&&!Y.hasMarkup(K,U)&&JG(Z.doc,Z.mapping.slice(Q).map(G),K)){let q=null;if(K.schema.linebreakReplacement){let j=K.whitespace=="pre",H=!!K.contentMatch.matchType(K.schema.linebreakReplacement);if(j&&!H)q=!1;else if(!j&&H)q=!0}if(q===!1)j6(Z,Y,G,Q);s1(Z,Z.mapping.slice(Q).map(G,1),K,void 0,q===null);let A=Z.mapping.slice(Q),V=A.map(G,1),W=A.map(G+Y.nodeSize,1);if(Z.step(new t(V,W,V+1,W-1,new S(L.from(K.create(U,null,Y.marks)),0,0),1,!0)),q===!0)H6(Z,Y,G,Q);return!1}})}function H6(Z,z,X,K){z.forEach((J,Q)=>{if(J.isText){let Y,G=/\r?\n|\r/g;while(Y=G.exec(J.text)){let U=Z.mapping.slice(K).map(X+1+Q+Y.index);Z.replaceWith(U,U+1,z.type.schema.linebreakReplacement.create())}}})}function j6(Z,z,X,K){z.forEach((J,Q)=>{if(J.type==J.type.schema.linebreakReplacement){let Y=Z.mapping.slice(K).map(X+1+Q);Z.replaceWith(Y,Y+1,z.type.schema.text(`
`))}})}function JG(Z,z,X){let K=Z.resolve(z),J=K.index();return K.parent.canReplaceWith(J,J+1,X)}function QG(Z,z,X,K,J){let Q=Z.doc.nodeAt(z);if(!Q)throw new RangeError("No node at given position");if(!X)X=Q.type;let Y=X.create(K,null,J||Q.marks);if(Q.isLeaf)return Z.replaceWith(z,z+Q.nodeSize,Y);if(!X.validContent(Q.content))throw new RangeError("Invalid content for node type "+X.name);Z.step(new t(z,z+Q.nodeSize,z+1,z+Q.nodeSize-1,new S(L.from(Y),0,0),1,!0))}function w5(Z,z,X=1,K){let J=Z.resolve(z),Q=J.depth-X,Y=K&&K[K.length-1]||J.parent;if(Q<0||J.parent.type.spec.isolating||!J.parent.canReplace(J.index(),J.parent.childCount)||!Y.type.validContent(J.parent.content.cutByIndex(J.index(),J.parent.childCount)))return!1;for(let q=J.depth-1,A=X-2;q>Q;q--,A--){let V=J.node(q),W=J.index(q);if(V.type.spec.isolating)return!1;let j=V.content.cutByIndex(W,V.childCount),H=K&&K[A+1];if(H)j=j.replaceChild(0,H.type.create(H.attrs));let R=K&&K[A]||V;if(!V.canReplace(W+1,V.childCount)||!R.type.validContent(j))return!1}let G=J.indexAfter(Q),U=K&&K[0];return J.node(Q).canReplaceWith(G,G,U?U.type:J.node(Q+1).type)}function YG(Z,z,X=1,K){let J=Z.doc.resolve(z),Q=L.empty,Y=L.empty;for(let G=J.depth,U=J.depth-X,q=X-1;G>U;G--,q--){Q=L.from(J.node(G).copy(Q));let A=K&&K[q];Y=L.from(A?A.type.create(A.attrs,Y):J.node(G).copy(Y))}Z.step(new Y0(z,z,new S(Q.append(Y),X,X),!0))}function n1(Z,z){let X=Z.resolve(z),K=X.index();return UG(X.nodeBefore,X.nodeAfter)&&X.parent.canReplace(K,K+1)}function GG(Z,z){if(!z.content.size)Z.type.compatibleContent(z.type);let X=Z.contentMatchAt(Z.childCount),{linebreakReplacement:K}=Z.type.schema;for(let J=0;J<z.childCount;J++){let Q=z.child(J),Y=Q.type==K?Z.type.schema.nodes.text:Q.type;if(X=X.matchType(Y),!X)return!1;if(!Z.type.allowsMarks(Q.marks))return!1}return X.validEnd}function UG(Z,z){return!!(Z&&z&&!Z.isLeaf&&GG(Z,z))}function qG(Z,z,X){let K=null,{linebreakReplacement:J}=Z.doc.type.schema,Q=Z.doc.resolve(z-X),Y=Q.node().type;if(J&&Y.inlineContent){let A=Y.whitespace=="pre",V=!!Y.contentMatch.matchType(J);if(A&&!V)K=!1;else if(!A&&V)K=!0}let G=Z.steps.length;if(K===!1){let A=Z.doc.resolve(z+X);j6(Z,A.node(),A.before(),G)}if(Y.inlineContent)s1(Z,z+X-1,Y,Q.node().contentMatchAt(Q.index()),K==null);let U=Z.mapping.slice(G),q=U.map(z-X);if(Z.step(new Y0(q,U.map(z+X,-1),S.empty,!0)),K===!0){let A=Z.doc.resolve(q);H6(Z,A.node(),A.before(),Z.steps.length)}return Z}function AG(Z,z,X){let K=Z.resolve(z);if(K.parent.canReplaceWith(K.index(),K.index(),X))return z;if(K.parentOffset==0)for(let J=K.depth-1;J>=0;J--){let Q=K.index(J);if(K.node(J).canReplaceWith(Q,Q,X))return K.before(J+1);if(Q>0)return null}if(K.parentOffset==K.parent.content.size)for(let J=K.depth-1;J>=0;J--){let Q=K.indexAfter(J);if(K.node(J).canReplaceWith(Q,Q,X))return K.after(J+1);if(Q<K.node(J).childCount)return null}return null}function R6(Z,z,X){let K=Z.resolve(z);if(!X.content.size)return z;let J=X.content;for(let Q=0;Q<X.openStart;Q++)J=J.firstChild.content;for(let Q=1;Q<=(X.openStart==0&&X.size?2:1);Q++)for(let Y=K.depth;Y>=0;Y--){let G=Y==K.depth?0:K.pos<=(K.start(Y+1)+K.end(Y+1))/2?-1:1,U=K.index(Y)+(G>0?1:0),q=K.node(Y),A=!1;if(Q==1)A=q.canReplace(U,U,J);else{let V=q.contentMatchAt(U).findWrapping(J.firstChild.type);A=V&&q.canReplaceWith(U,U,V[0])}if(A)return G==0?K.pos:G<0?K.before(Y+1):K.after(Y+1)}return null}function YZ(Z,z,X=z,K=S.empty){if(z==X&&!K.size)return null;let J=Z.resolve(z),Q=Z.resolve(X);if(F6(J,Q,K))return new Y0(z,X,K);return new B6(J,Q,K).fit()}function F6(Z,z,X){return!X.openStart&&!X.openEnd&&Z.start()==z.start()&&Z.parent.canReplace(Z.index(),z.index(),X.content)}class B6{constructor(Z,z,X){this.$from=Z,this.$to=z,this.unplaced=X,this.frontier=[],this.placed=L.empty;for(let K=0;K<=Z.depth;K++){let J=Z.node(K);this.frontier.push({type:J.type,match:J.contentMatchAt(Z.indexAfter(K))})}for(let K=Z.depth;K>0;K--)this.placed=L.from(Z.node(K).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){while(this.unplaced.size){let U=this.findFittable();if(U)this.placeNodes(U);else this.openMore()||this.dropNode()}let Z=this.mustMoveInline(),z=this.placed.size-this.depth-this.$from.depth,X=this.$from,K=this.close(Z<0?this.$to:X.doc.resolve(Z));if(!K)return null;let J=this.placed,Q=X.depth,Y=K.depth;while(Q&&Y&&J.childCount==1)J=J.firstChild.content,Q--,Y--;let G=new S(J,Q,Y);if(Z>-1)return new t(X.pos,Z,this.$to.pos,this.$to.end(),G,z);if(G.size||X.pos!=this.$to.pos)return new Y0(X.pos,K.pos,G);return null}findFittable(){let Z=this.unplaced.openStart;for(let z=this.unplaced.content,X=0,K=this.unplaced.openEnd;X<Z;X++){let J=z.firstChild;if(z.childCount>1)K=0;if(J.type.spec.isolating&&K<=X){Z=X;break}z=J.content}for(let z=1;z<=2;z++)for(let X=z==1?Z:this.unplaced.openStart;X>=0;X--){let K,J=null;if(X)J=c1(this.unplaced.content,X-1).firstChild,K=J.content;else K=this.unplaced.content;let Q=K.firstChild;for(let Y=this.depth;Y>=0;Y--){let{type:G,match:U}=this.frontier[Y],q,A=null;if(z==1&&(Q?U.matchType(Q.type)||(A=U.fillBefore(L.from(Q),!1)):J&&G.compatibleContent(J.type)))return{sliceDepth:X,frontierDepth:Y,parent:J,inject:A};else if(z==2&&Q&&(q=U.findWrapping(Q.type)))return{sliceDepth:X,frontierDepth:Y,parent:J,wrap:q};if(J&&U.matchType(J.type))break}}}openMore(){let{content:Z,openStart:z,openEnd:X}=this.unplaced,K=c1(Z,z);if(!K.childCount||K.firstChild.isLeaf)return!1;return this.unplaced=new S(Z,z+1,Math.max(X,K.size+z>=Z.size-X?z+1:0)),!0}dropNode(){let{content:Z,openStart:z,openEnd:X}=this.unplaced,K=c1(Z,z);if(K.childCount<=1&&z>0){let J=Z.size-z<=z+K.size;this.unplaced=new S(O3(Z,z-1,1),z-1,J?z-1:X)}else this.unplaced=new S(O3(Z,z,1),z,X)}placeNodes({sliceDepth:Z,frontierDepth:z,parent:X,inject:K,wrap:J}){while(this.depth>z)this.closeFrontierNode();if(J)for(let H=0;H<J.length;H++)this.openFrontierNode(J[H]);let Q=this.unplaced,Y=X?X.content:Q.content,G=Q.openStart-Z,U=0,q=[],{match:A,type:V}=this.frontier[z];if(K){for(let H=0;H<K.childCount;H++)q.push(K.child(H));A=A.matchFragment(K)}let W=Y.size+Z-(Q.content.size-Q.openEnd);while(U<Y.childCount){let H=Y.child(U),R=A.matchType(H.type);if(!R)break;if(U++,U>1||G==0||H.content.size)A=R,q.push(E6(H.mark(V.allowedMarks(H.marks)),U==1?G:0,U==Y.childCount?W:-1))}let j=U==Y.childCount;if(!j)W=-1;if(this.placed=M3(this.placed,z,L.from(q)),this.frontier[z].match=A,j&&W<0&&X&&X.type==this.frontier[this.depth].type&&this.frontier.length>1)this.closeFrontierNode();for(let H=0,R=Y;H<W;H++){let F=R.lastChild;this.frontier.push({type:F.type,match:F.contentMatchAt(F.childCount)}),R=F.content}this.unplaced=!j?new S(O3(Q.content,Z,U),Q.openStart,Q.openEnd):Z==0?S.empty:new S(O3(Q.content,Z-1,1),Z-1,W<0?Q.openEnd:Z-1)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let Z=this.frontier[this.depth],z;if(!Z.type.isTextblock||!p1(this.$to,this.$to.depth,Z.type,Z.match,!1)||this.$to.depth==this.depth&&(z=this.findCloseLevel(this.$to))&&z.depth==this.depth)return-1;let{depth:X}=this.$to,K=this.$to.after(X);while(X>1&&K==this.$to.end(--X))++K;return K}findCloseLevel(Z){Z:for(let z=Math.min(this.depth,Z.depth);z>=0;z--){let{match:X,type:K}=this.frontier[z],J=z<Z.depth&&Z.end(z+1)==Z.pos+(Z.depth-(z+1)),Q=p1(Z,z,K,X,J);if(!Q)continue;for(let Y=z-1;Y>=0;Y--){let{match:G,type:U}=this.frontier[Y],q=p1(Z,Y,U,G,!0);if(!q||q.childCount)continue Z}return{depth:z,fit:Q,move:J?Z.doc.resolve(Z.after(z+1)):Z}}}close(Z){let z=this.findCloseLevel(Z);if(!z)return null;while(this.depth>z.depth)this.closeFrontierNode();if(z.fit.childCount)this.placed=M3(this.placed,z.depth,z.fit);Z=z.move;for(let X=z.depth+1;X<=Z.depth;X++){let K=Z.node(X),J=K.type.contentMatch.fillBefore(K.content,!0,Z.index(X));this.openFrontierNode(K.type,K.attrs,J)}return Z}openFrontierNode(Z,z=null,X){let K=this.frontier[this.depth];K.match=K.match.matchType(Z),this.placed=M3(this.placed,this.depth,L.from(Z.create(z,X))),this.frontier.push({type:Z,match:Z.contentMatch})}closeFrontierNode(){let z=this.frontier.pop().match.fillBefore(L.empty,!0);if(z.childCount)this.placed=M3(this.placed,this.frontier.length,z)}}function O3(Z,z,X){if(z==0)return Z.cutByIndex(X,Z.childCount);return Z.replaceChild(0,Z.firstChild.copy(O3(Z.firstChild.content,z-1,X)))}function M3(Z,z,X){if(z==0)return Z.append(X);return Z.replaceChild(Z.childCount-1,Z.lastChild.copy(M3(Z.lastChild.content,z-1,X)))}function c1(Z,z){for(let X=0;X<z;X++)Z=Z.firstChild.content;return Z}function E6(Z,z,X){if(z<=0)return Z;let K=Z.content;if(z>1)K=K.replaceChild(0,E6(K.firstChild,z-1,K.childCount==1?X-1:0));if(z>0){if(K=Z.type.contentMatch.fillBefore(K).append(K),X<=0)K=K.append(Z.type.contentMatch.matchFragment(K).fillBefore(L.empty,!0))}return Z.copy(K)}function p1(Z,z,X,K,J){let Q=Z.node(z),Y=J?Z.indexAfter(z):Z.index(z);if(Y==Q.childCount&&!X.compatibleContent(Q.type))return null;let G=K.fillBefore(Q.content,!0,Y);return G&&!VG(X,Q.content,Y)?G:null}function VG(Z,z,X){for(let K=X;K<z.childCount;K++)if(!Z.allowsMarks(z.child(K).marks))return!0;return!1}function WG(Z){return Z.spec.defining||Z.spec.definingForContent}function HG(Z,z,X,K){if(!K.size)return Z.deleteRange(z,X);let J=Z.doc.resolve(z),Q=Z.doc.resolve(X);if(F6(J,Q,K))return Z.step(new Y0(z,X,K));let Y=O6(J,Z.doc.resolve(X));if(Y[Y.length-1]==0)Y.pop();let G=-(J.depth+1);Y.unshift(G);for(let W=J.depth,j=J.pos-1;W>0;W--,j--){let H=J.node(W).type.spec;if(H.defining||H.definingAsContext||H.isolating)break;if(Y.indexOf(W)>-1)G=W;else if(J.before(W)==j)Y.splice(1,0,-W)}let U=Y.indexOf(G),q=[],A=K.openStart;for(let W=K.content,j=0;;j++){let H=W.firstChild;if(q.push(H),j==K.openStart)break;W=H.content}for(let W=A-1;W>=0;W--){let j=q[W],H=WG(j.type);if(H&&!j.sameMarkup(J.node(Math.abs(G)-1)))A=W;else if(H||!j.type.isTextblock)break}for(let W=K.openStart;W>=0;W--){let j=(W+A+1)%(K.openStart+1),H=q[j];if(!H)continue;for(let R=0;R<Y.length;R++){let F=Y[(R+U)%Y.length],B=!0;if(F<0)B=!1,F=-F;let O=J.node(F-1),M=J.index(F-1);if(O.canReplaceWith(M,M,H.type,H.marks))return Z.replace(J.before(F),B?Q.after(F):X,new S(P6(K.content,0,K.openStart,j),j,K.openEnd))}}let V=Z.steps.length;for(let W=Y.length-1;W>=0;W--){if(Z.replace(z,X,K),Z.steps.length>V)break;let j=Y[W];if(j<0)continue;z=J.before(j),X=Q.after(j)}}function P6(Z,z,X,K,J){if(z<X){let Q=Z.firstChild;Z=Z.replaceChild(0,Q.copy(P6(Q.content,z+1,X,K,Q)))}if(z>K){let Q=J.contentMatchAt(0),Y=Q.fillBefore(Z).append(Z);Z=Y.append(Q.matchFragment(Y).fillBefore(L.empty,!0))}return Z}function jG(Z,z,X,K){if(!K.isInline&&z==X&&Z.doc.resolve(z).parent.content.size){let J=AG(Z.doc,z,K.type);if(J!=null)z=X=J}Z.replaceRange(z,X,new S(L.from(K),0,0))}function RG(Z,z,X){let K=Z.doc.resolve(z),J=Z.doc.resolve(X),Q=O6(K,J);for(let Y=0;Y<Q.length;Y++){let G=Q[Y],U=Y==Q.length-1;if(U&&G==0||K.node(G).type.contentMatch.validEnd)return Z.delete(K.start(G),J.end(G));if(G>0&&(U||K.node(G-1).canReplace(K.index(G-1),J.indexAfter(G-1))))return Z.delete(K.before(G),J.after(G))}for(let Y=1;Y<=K.depth&&Y<=J.depth;Y++)if(z-K.start(Y)==K.depth-Y&&X>K.end(Y)&&J.end(Y)-X!=J.depth-Y&&K.start(Y-1)==J.start(Y-1)&&K.node(Y-1).canReplace(K.index(Y-1),J.index(Y-1)))return Z.delete(K.before(Y),X);Z.delete(z,X)}function O6(Z,z){let X=[],K=Math.min(Z.depth,z.depth);for(let J=K;J>=0;J--){let Q=Z.start(J);if(Q<Z.pos-(Z.depth-J)||z.end(J)>z.pos+(z.depth-J)||Z.node(J).type.spec.isolating||z.node(J).type.spec.isolating)break;if(Q==z.start(J)||J==Z.depth&&J==z.depth&&Z.parent.inlineContent&&z.parent.inlineContent&&J&&z.start(J-1)==Q-1)X.push(J)}return X}class y8 extends A0{constructor(Z,z,X){super();this.pos=Z,this.attr=z,this.value=X}apply(Z){let z=Z.nodeAt(this.pos);if(!z)return Z0.fail("No node at attribute step's position");let X=Object.create(null);for(let J in z.attrs)X[J]=z.attrs[J];X[this.attr]=this.value;let K=z.type.create(X,null,z.marks);return Z0.fromReplace(Z,this.pos,this.pos+1,new S(L.from(K),0,z.isLeaf?0:1))}getMap(){return b0.empty}invert(Z){return new y8(this.pos,this.attr,Z.nodeAt(this.pos).attrs[this.attr])}map(Z){let z=Z.mapResult(this.pos,1);return z.deletedAfter?null:new y8(z.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(Z,z){if(typeof z.pos!="number"||typeof z.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new y8(z.pos,z.attr,z.value)}}A0.jsonID("attr",y8);class L3 extends A0{constructor(Z,z){super();this.attr=Z,this.value=z}apply(Z){let z=Object.create(null);for(let K in Z.attrs)z[K]=Z.attrs[K];z[this.attr]=this.value;let X=Z.type.create(z,Z.content,Z.marks);return Z0.ok(X)}getMap(){return b0.empty}invert(Z){return new L3(this.attr,Z.attrs[this.attr])}map(Z){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(Z,z){if(typeof z.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new L3(z.attr,z.value)}}A0.jsonID("docAttr",L3);var g8=class extends Error{};g8=function Z(z){let X=Error.call(this,z);return X.__proto__=Z.prototype,X};g8.prototype=Object.create(Error.prototype);g8.prototype.constructor=g8;g8.prototype.name="TransformError";class a1{constructor(Z){this.doc=Z,this.steps=[],this.docs=[],this.mapping=new x8}get before(){return this.docs.length?this.docs[0]:this.doc}step(Z){let z=this.maybeStep(Z);if(z.failed)throw new g8(z.failed);return this}maybeStep(Z){let z=Z.apply(this.doc);if(!z.failed)this.addStep(Z,z.doc);return z}get docChanged(){return this.steps.length>0}addStep(Z,z){this.docs.push(this.doc),this.steps.push(Z),this.mapping.appendMap(Z.getMap()),this.doc=z}replace(Z,z=Z,X=S.empty){let K=YZ(this.doc,Z,z,X);if(K)this.step(K);return this}replaceWith(Z,z,X){return this.replace(Z,z,new S(L.from(X),0,0))}delete(Z,z){return this.replace(Z,z,S.empty)}insert(Z,z){return this.replaceWith(Z,Z,z)}replaceRange(Z,z,X){return HG(this,Z,z,X),this}replaceRangeWith(Z,z,X){return jG(this,Z,z,X),this}deleteRange(Z,z){return RG(this,Z,z),this}lift(Z,z){return eY(this,Z,z),this}join(Z,z=1){return qG(this,Z,z),this}wrap(Z,z){return XG(this,Z,z),this}setBlockType(Z,z=Z,X,K=null){return KG(this,Z,z,X,K),this}setNodeMarkup(Z,z,X=null,K){return QG(this,Z,z,X,K),this}setNodeAttribute(Z,z,X){return this.step(new y8(Z,z,X)),this}setDocAttribute(Z,z){return this.step(new L3(Z,z)),this}addNodeMark(Z,z){return this.step(new g5(Z,z)),this}removeNodeMark(Z,z){let X=this.doc.nodeAt(Z);if(!X)throw new RangeError("No node at position "+Z);if(z instanceof h){if(z.isInSet(X.marks))this.step(new Z8(Z,z))}else{let K=X.marks,J,Q=[];while(J=z.isInSet(K))Q.push(new Z8(Z,J)),K=J.removeFromSet(K);for(let Y=Q.length-1;Y>=0;Y--)this.step(Q[Y])}return this}split(Z,z=1,X){return YG(this,Z,z,X),this}addMark(Z,z,X){return rY(this,Z,z,X),this}removeMark(Z,z,X){return oY(this,Z,z,X),this}clearIncompatible(Z,z,X){return s1(this,Z,z,X),this}}var r1=Object.create(null);class ${constructor(Z,z,X){this.$anchor=Z,this.$head=z,this.ranges=X||[new z8(Z.min(z),Z.max(z))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let Z=this.ranges;for(let z=0;z<Z.length;z++)if(Z[z].$from.pos!=Z[z].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(Z,z=S.empty){let X=z.content.lastChild,K=null;for(let Y=0;Y<z.openEnd;Y++)K=X,X=X.lastChild;let J=Z.steps.length,Q=this.ranges;for(let Y=0;Y<Q.length;Y++){let{$from:G,$to:U}=Q[Y],q=Z.mapping.slice(J);if(Z.replaceRange(q.map(G.pos),q.map(U.pos),Y?S.empty:z),Y==0)I6(Z,J,(X?X.isInline:K&&K.isTextblock)?-1:1)}}replaceWith(Z,z){let X=Z.steps.length,K=this.ranges;for(let J=0;J<K.length;J++){let{$from:Q,$to:Y}=K[J],G=Z.mapping.slice(X),U=G.map(Q.pos),q=G.map(Y.pos);if(J)Z.deleteRange(U,q);else Z.replaceRangeWith(U,q,z),I6(Z,X,z.isInline?-1:1)}}static findFrom(Z,z,X=!1){let K=Z.parent.inlineContent?new _(Z):u8(Z.node(0),Z.parent,Z.pos,Z.index(),z,X);if(K)return K;for(let J=Z.depth-1;J>=0;J--){let Q=z<0?u8(Z.node(0),Z.node(J),Z.before(J+1),Z.index(J),z,X):u8(Z.node(0),Z.node(J),Z.after(J+1),Z.index(J)+1,z,X);if(Q)return Q}return null}static near(Z,z=1){return this.findFrom(Z,z)||this.findFrom(Z,-z)||new G0(Z.node(0))}static atStart(Z){return u8(Z,Z,0,0,1)||new G0(Z)}static atEnd(Z){return u8(Z,Z,Z.content.size,Z.childCount,-1)||new G0(Z)}static fromJSON(Z,z){if(!z||!z.type)throw new RangeError("Invalid input for Selection.fromJSON");let X=r1[z.type];if(!X)throw new RangeError(`No selection type ${z.type} defined`);return X.fromJSON(Z,z)}static jsonID(Z,z){if(Z in r1)throw new RangeError("Duplicate use of selection JSON ID "+Z);return r1[Z]=z,z.prototype.jsonID=Z,z}getBookmark(){return _.between(this.$anchor,this.$head).getBookmark()}}$.prototype.visible=!0;class z8{constructor(Z,z){this.$from=Z,this.$to=z}}var M6=!1;function L6(Z){if(!M6&&!Z.parent.inlineContent)M6=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+Z.parent.type.name+")")}class _ extends ${constructor(Z,z=Z){L6(Z),L6(z);super(Z,z)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(Z,z){let X=Z.resolve(z.map(this.head));if(!X.parent.inlineContent)return $.near(X);let K=Z.resolve(z.map(this.anchor));return new _(K.parent.inlineContent?K:X,X)}replace(Z,z=S.empty){if(super.replace(Z,z),z==S.empty){let X=this.$from.marksAcross(this.$to);if(X)Z.ensureMarks(X)}}eq(Z){return Z instanceof _&&Z.anchor==this.anchor&&Z.head==this.head}getBookmark(){return new qZ(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(Z,z){if(typeof z.anchor!="number"||typeof z.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new _(Z.resolve(z.anchor),Z.resolve(z.head))}static create(Z,z,X=z){let K=Z.resolve(z);return new this(K,X==z?K:Z.resolve(X))}static between(Z,z,X){let K=Z.pos-z.pos;if(!X||K)X=K>=0?1:-1;if(!z.parent.inlineContent){let J=$.findFrom(z,X,!0)||$.findFrom(z,-X,!0);if(J)z=J.$head;else return $.near(z,X)}if(!Z.parent.inlineContent){if(K==0)Z=z;else if(Z=($.findFrom(Z,-X,!0)||$.findFrom(Z,X,!0)).$anchor,Z.pos<z.pos!=K<0)Z=z}return new _(Z,z)}}$.jsonID("text",_);class qZ{constructor(Z,z){this.anchor=Z,this.head=z}map(Z){return new qZ(Z.map(this.anchor),Z.map(this.head))}resolve(Z){return _.between(Z.resolve(this.anchor),Z.resolve(this.head))}}class w extends ${constructor(Z){let z=Z.nodeAfter,X=Z.node(0).resolve(Z.pos+z.nodeSize);super(Z,X);this.node=z}map(Z,z){let{deleted:X,pos:K}=z.mapResult(this.anchor),J=Z.resolve(K);if(X)return $.near(J);return new w(J)}content(){return new S(L.from(this.node),0,0)}eq(Z){return Z instanceof w&&Z.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new t1(this.anchor)}static fromJSON(Z,z){if(typeof z.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new w(Z.resolve(z.anchor))}static create(Z,z){return new w(Z.resolve(z))}static isSelectable(Z){return!Z.isText&&Z.type.spec.selectable!==!1}}w.prototype.visible=!1;$.jsonID("node",w);class t1{constructor(Z){this.anchor=Z}map(Z){let{deleted:z,pos:X}=Z.mapResult(this.anchor);return z?new qZ(X,X):new t1(X)}resolve(Z){let z=Z.resolve(this.anchor),X=z.nodeAfter;if(X&&w.isSelectable(X))return new w(z);return $.near(z)}}class G0 extends ${constructor(Z){super(Z.resolve(0),Z.resolve(Z.content.size))}replace(Z,z=S.empty){if(z==S.empty){Z.delete(0,Z.doc.content.size);let X=$.atStart(Z.doc);if(!X.eq(Z.selection))Z.setSelection(X)}else super.replace(Z,z)}toJSON(){return{type:"all"}}static fromJSON(Z){return new G0(Z)}map(Z){return new G0(Z)}eq(Z){return Z instanceof G0}getBookmark(){return FG}}$.jsonID("all",G0);var FG={map(){return this},resolve(Z){return new G0(Z)}};function u8(Z,z,X,K,J,Q=!1){if(z.inlineContent)return _.create(Z,X);for(let Y=K-(J>0?0:1);J>0?Y<z.childCount:Y>=0;Y+=J){let G=z.child(Y);if(!G.isAtom){let U=u8(Z,G,X+J,J<0?G.childCount:0,J,Q);if(U)return U}else if(!Q&&w.isSelectable(G))return w.create(Z,X-(J<0?G.nodeSize:0));X+=G.nodeSize*J}return null}function I6(Z,z,X){let K=Z.steps.length-1;if(K<z)return;let J=Z.steps[K];if(!(J instanceof Y0||J instanceof t))return;let Q=Z.mapping.maps[K],Y;Q.forEach((G,U,q,A)=>{if(Y==null)Y=A}),Z.setSelection($.near(Z.doc.resolve(Y),X))}var D6=1,GZ=2,C6=4;class b6 extends a1{constructor(Z){super(Z.doc);this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=Z.selection,this.storedMarks=Z.storedMarks}get selection(){if(this.curSelectionFor<this.steps.length)this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length;return this.curSelection}setSelection(Z){if(Z.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=Z,this.curSelectionFor=this.steps.length,this.updated=(this.updated|D6)&~GZ,this.storedMarks=null,this}get selectionSet(){return(this.updated&D6)>0}setStoredMarks(Z){return this.storedMarks=Z,this.updated|=GZ,this}ensureMarks(Z){if(!h.sameSet(this.storedMarks||this.selection.$from.marks(),Z))this.setStoredMarks(Z);return this}addStoredMark(Z){return this.ensureMarks(Z.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(Z){return this.ensureMarks(Z.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&GZ)>0}addStep(Z,z){super.addStep(Z,z),this.updated=this.updated&~GZ,this.storedMarks=null}setTime(Z){return this.time=Z,this}replaceSelection(Z){return this.selection.replace(this,Z),this}replaceSelectionWith(Z,z=!0){let X=this.selection;if(z)Z=Z.mark(this.storedMarks||(X.empty?X.$from.marks():X.$from.marksAcross(X.$to)||h.none));return X.replaceWith(this,Z),this}deleteSelection(){return this.selection.replace(this),this}insertText(Z,z,X){let K=this.doc.type.schema;if(z==null){if(!Z)return this.deleteSelection();return this.replaceSelectionWith(K.text(Z),!0)}else{if(X==null)X=z;if(X=X==null?z:X,!Z)return this.deleteRange(z,X);let J=this.storedMarks;if(!J){let Q=this.doc.resolve(z);J=X==z?Q.marks():Q.marksAcross(this.doc.resolve(X))}if(this.replaceRangeWith(z,X,K.text(Z,J)),!this.selection.empty)this.setSelection($.near(this.selection.$to));return this}}setMeta(Z,z){return this.meta[typeof Z=="string"?Z:Z.key]=z,this}getMeta(Z){return this.meta[typeof Z=="string"?Z:Z.key]}get isGeneric(){for(let Z in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=C6,this}get scrolledIntoView(){return(this.updated&C6)>0}}function S6(Z,z){return!z||!Z?Z:Z.bind(z)}class v8{constructor(Z,z,X){this.name=Z,this.init=S6(z.init,X),this.apply=S6(z.apply,X)}}var BG=[new v8("doc",{init(Z){return Z.doc||Z.schema.topNodeType.createAndFill()},apply(Z){return Z.doc}}),new v8("selection",{init(Z,z){return Z.selection||$.atStart(z.doc)},apply(Z){return Z.selection}}),new v8("storedMarks",{init(Z){return Z.storedMarks||null},apply(Z,z,X,K){return K.selection.$cursor?Z.storedMarks:null}}),new v8("scrollToSelection",{init(){return 0},apply(Z,z){return Z.scrolledIntoView?z+1:z}})];class UZ{constructor(Z,z){if(this.schema=Z,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=BG.slice(),z)z.forEach((X)=>{if(this.pluginsByKey[X.key])throw new RangeError("Adding different instances of a keyed plugin ("+X.key+")");if(this.plugins.push(X),this.pluginsByKey[X.key]=X,X.spec.state)this.fields.push(new v8(X.key,X.spec.state,X))})}}class u5{constructor(Z){this.config=Z}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(Z){return this.applyTransaction(Z).state}filterTransaction(Z,z=-1){for(let X=0;X<this.config.plugins.length;X++)if(X!=z){let K=this.config.plugins[X];if(K.spec.filterTransaction&&!K.spec.filterTransaction.call(K,Z,this))return!1}return!0}applyTransaction(Z){if(!this.filterTransaction(Z))return{state:this,transactions:[]};let z=[Z],X=this.applyInner(Z),K=null;for(;;){let J=!1;for(let Q=0;Q<this.config.plugins.length;Q++){let Y=this.config.plugins[Q];if(Y.spec.appendTransaction){let G=K?K[Q].n:0,U=K?K[Q].state:this,q=G<z.length&&Y.spec.appendTransaction.call(Y,G?z.slice(G):z,U,X);if(q&&X.filterTransaction(q,Q)){if(q.setMeta("appendedTransaction",Z),!K){K=[];for(let A=0;A<this.config.plugins.length;A++)K.push(A<Q?{state:X,n:z.length}:{state:this,n:0})}z.push(q),X=X.applyInner(q),J=!0}if(K)K[Q]={state:X,n:z.length}}}if(!J)return{state:X,transactions:z}}}applyInner(Z){if(!Z.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let z=new u5(this.config),X=this.config.fields;for(let K=0;K<X.length;K++){let J=X[K];z[J.name]=J.apply(Z,this[J.name],this,z)}return z}get tr(){return new b6(this)}static create(Z){let z=new UZ(Z.doc?Z.doc.type.schema:Z.schema,Z.plugins),X=new u5(z);for(let K=0;K<z.fields.length;K++)X[z.fields[K].name]=z.fields[K].init(Z,X);return X}reconfigure(Z){let z=new UZ(this.schema,Z.plugins),X=z.fields,K=new u5(z);for(let J=0;J<X.length;J++){let Q=X[J].name;K[Q]=this.hasOwnProperty(Q)?this[Q]:X[J].init(Z,K)}return K}toJSON(Z){let z={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks)z.storedMarks=this.storedMarks.map((X)=>X.toJSON());if(Z&&typeof Z=="object")for(let X in Z){if(X=="doc"||X=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let K=Z[X],J=K.spec.state;if(J&&J.toJSON)z[X]=J.toJSON.call(K,this[K.key])}return z}static fromJSON(Z,z,X){if(!z)throw new RangeError("Invalid input for EditorState.fromJSON");if(!Z.schema)throw new RangeError("Required config field 'schema' missing");let K=new UZ(Z.schema,Z.plugins),J=new u5(K);return K.fields.forEach((Q)=>{if(Q.name=="doc")J.doc=v0.fromJSON(Z.schema,z.doc);else if(Q.name=="selection")J.selection=$.fromJSON(J.doc,z.selection);else if(Q.name=="storedMarks"){if(z.storedMarks)J.storedMarks=z.storedMarks.map(Z.schema.markFromJSON)}else{if(X)for(let Y in X){let G=X[Y],U=G.spec.state;if(G.key==Q.name&&U&&U.fromJSON&&Object.prototype.hasOwnProperty.call(z,Y)){J[Q.name]=U.fromJSON.call(G,Z,z[Y],J);return}}J[Q.name]=Q.init(Z,J)}}),J}}function k6(Z,z,X){for(let K in Z){let J=Z[K];if(J instanceof Function)J=J.bind(z);else if(K=="handleDOMEvents")J=k6(J,z,{});X[K]=J}return X}class X0{constructor(Z){if(this.spec=Z,this.props={},Z.props)k6(Z.props,this,this.props);this.key=Z.key?Z.key.key:N6("plugin")}getState(Z){return Z[this.key]}}var o1=Object.create(null);function N6(Z){if(Z in o1)return Z+"$"+ ++o1[Z];return o1[Z]=0,Z+"$"}class v5{constructor(Z="key"){this.key=N6(Z)}get(Z){return Z.config.pluginsByKey[this.key]}getState(Z){return Z[this.key]}}var V0=function(Z){for(var z=0;;z++)if(Z=Z.previousSibling,!Z)return z},m8=function(Z){let z=Z.assignedSlot||Z.parentNode;return z&&z.nodeType==11?z.host:z},J9=null,F5=function(Z,z,X){let K=J9||(J9=document.createRange());return K.setEnd(Z,X==null?Z.nodeValue.length:X),K.setStart(Z,z||0),K},EG=function(){J9=null},G8=function(Z,z,X,K){return X&&(T6(Z,z,X,K,-1)||T6(Z,z,X,K,1))},PG=/^(img|br|input|textarea|hr)$/i;function T6(Z,z,X,K,J){for(;;){if(Z==X&&z==K)return!0;if(z==(J<0?0:m0(Z))){let Q=Z.parentNode;if(!Q||Q.nodeType!=1||N3(Z)||PG.test(Z.nodeName)||Z.contentEditable=="false")return!1;z=V0(Z)+(J<0?0:1),Z=Q}else if(Z.nodeType==1){if(Z=Z.childNodes[z+(J<0?-1:0)],Z.contentEditable=="false")return!1;z=J<0?m0(Z):0}else return!1}}function m0(Z){return Z.nodeType==3?Z.nodeValue.length:Z.childNodes.length}function OG(Z,z){for(;;){if(Z.nodeType==3&&z)return Z;if(Z.nodeType==1&&z>0){if(Z.contentEditable=="false")return null;Z=Z.childNodes[z-1],z=m0(Z)}else if(Z.parentNode&&!N3(Z))z=V0(Z),Z=Z.parentNode;else return null}}function MG(Z,z){for(;;){if(Z.nodeType==3&&z<Z.nodeValue.length)return Z;if(Z.nodeType==1&&z<Z.childNodes.length){if(Z.contentEditable=="false")return null;Z=Z.childNodes[z],z=0}else if(Z.parentNode&&!N3(Z))z=V0(Z)+1,Z=Z.parentNode;else return null}}function LG(Z,z,X){for(let K=z==0,J=z==m0(Z);K||J;){if(Z==X)return!0;let Q=V0(Z);if(Z=Z.parentNode,!Z)return!1;K=K&&Q==0,J=J&&Q==m0(Z)}}function N3(Z){let z;for(let X=Z;X;X=X.parentNode)if(z=X.pmViewDesc)break;return z&&z.node&&z.node.isBlock&&(z.dom==Z||z.contentDOM==Z)}var RZ=function(Z){return Z.focusNode&&G8(Z.focusNode,Z.focusOffset,Z.anchorNode,Z.anchorOffset)};function X8(Z,z){let X=document.createEvent("Event");return X.initEvent("keydown",!0,!0),X.keyCode=Z,X.key=X.code=z,X}function IG(Z){let z=Z.activeElement;while(z&&z.shadowRoot)z=z.shadowRoot.activeElement;return z}function DG(Z,z,X){if(Z.caretPositionFromPoint)try{let K=Z.caretPositionFromPoint(z,X);if(K)return{node:K.offsetNode,offset:Math.min(m0(K.offsetNode),K.offset)}}catch(K){}if(Z.caretRangeFromPoint){let K=Z.caretRangeFromPoint(z,X);if(K)return{node:K.startContainer,offset:Math.min(m0(K.startContainer),K.startOffset)}}}var X5=typeof navigator!="undefined"?navigator:null,y6=typeof document!="undefined"?document:null,p5=X5&&X5.userAgent||"",Q9=/Edge\/(\d+)/.exec(p5),qz=/MSIE \d/.exec(p5),Y9=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(p5),w0=!!(qz||Y9||Q9),m5=qz?document.documentMode:Y9?+Y9[1]:Q9?+Q9[1]:0,i0=!w0&&/gecko\/(\d+)/i.test(p5);i0&&+(/Firefox\/(\d+)/.exec(p5)||[0,0])[1];var G9=!w0&&/Chrome\/(\d+)/.exec(p5),D0=!!G9,Az=G9?+G9[1]:0,N0=!w0&&!!X5&&/Apple Computer/.test(X5.vendor),l8=N0&&(/Mobile\/\w+/.test(p5)||!!X5&&X5.maxTouchPoints>2),_0=l8||(X5?/Mac/.test(X5.platform):!1),CG=X5?/Win/.test(X5.platform):!1,B5=/Android \d/.test(p5),T3=!!y6&&"webkitFontSmoothing"in y6.documentElement.style,SG=T3?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function bG(Z){let z=Z.defaultView&&Z.defaultView.visualViewport;if(z)return{left:0,right:z.width,top:0,bottom:z.height};return{left:0,right:Z.documentElement.clientWidth,top:0,bottom:Z.documentElement.clientHeight}}function R5(Z,z){return typeof Z=="number"?Z:Z[z]}function kG(Z){let z=Z.getBoundingClientRect(),X=z.width/Z.offsetWidth||1,K=z.height/Z.offsetHeight||1;return{left:z.left,right:z.left+Z.clientWidth*X,top:z.top,bottom:z.top+Z.clientHeight*K}}function x6(Z,z,X){let K=Z.someProp("scrollThreshold")||0,J=Z.someProp("scrollMargin")||5,Q=Z.dom.ownerDocument;for(let Y=X||Z.dom;;){if(!Y)break;if(Y.nodeType!=1){Y=m8(Y);continue}let G=Y,U=G==Q.body,q=U?bG(Q):kG(G),A=0,V=0;if(z.top<q.top+R5(K,"top"))V=-(q.top-z.top+R5(J,"top"));else if(z.bottom>q.bottom-R5(K,"bottom"))V=z.bottom-z.top>q.bottom-q.top?z.top+R5(J,"top")-q.top:z.bottom-q.bottom+R5(J,"bottom");if(z.left<q.left+R5(K,"left"))A=-(q.left-z.left+R5(J,"left"));else if(z.right>q.right-R5(K,"right"))A=z.right-q.right+R5(J,"right");if(A||V)if(U)Q.defaultView.scrollBy(A,V);else{let{scrollLeft:j,scrollTop:H}=G;if(V)G.scrollTop+=V;if(A)G.scrollLeft+=A;let R=G.scrollLeft-j,F=G.scrollTop-H;z={left:z.left-R,top:z.top-F,right:z.right-R,bottom:z.bottom-F}}let W=U?"fixed":getComputedStyle(Y).position;if(/^(fixed|sticky)$/.test(W))break;Y=W=="absolute"?Y.offsetParent:m8(Y)}}function NG(Z){let z=Z.dom.getBoundingClientRect(),X=Math.max(0,z.top),K,J;for(let Q=(z.left+z.right)/2,Y=X+1;Y<Math.min(innerHeight,z.bottom);Y+=5){let G=Z.root.elementFromPoint(Q,Y);if(!G||G==Z.dom||!Z.dom.contains(G))continue;let U=G.getBoundingClientRect();if(U.top>=X-20){K=G,J=U.top;break}}return{refDOM:K,refTop:J,stack:Vz(Z.dom)}}function Vz(Z){let z=[],X=Z.ownerDocument;for(let K=Z;K;K=m8(K))if(z.push({dom:K,top:K.scrollTop,left:K.scrollLeft}),Z==X)break;return z}function TG({refDOM:Z,refTop:z,stack:X}){let K=Z?Z.getBoundingClientRect().top:0;Wz(X,K==0?0:K-z)}function Wz(Z,z){for(let X=0;X<Z.length;X++){let{dom:K,top:J,left:Q}=Z[X];if(K.scrollTop!=J+z)K.scrollTop=J+z;if(K.scrollLeft!=Q)K.scrollLeft=Q}}var $8=null;function yG(Z){if(Z.setActive)return Z.setActive();if($8)return Z.focus($8);let z=Vz(Z);if(Z.focus($8==null?{get preventScroll(){return $8={preventScroll:!0},!0}}:void 0),!$8)$8=!1,Wz(z,0)}function Hz(Z,z){let X,K=200000000,J,Q=0,Y=z.top,G=z.top,U,q;for(let A=Z.firstChild,V=0;A;A=A.nextSibling,V++){let W;if(A.nodeType==1)W=A.getClientRects();else if(A.nodeType==3)W=F5(A).getClientRects();else continue;for(let j=0;j<W.length;j++){let H=W[j];if(H.top<=Y&&H.bottom>=G){Y=Math.max(H.bottom,Y),G=Math.min(H.top,G);let R=H.left>z.left?H.left-z.left:H.right<z.left?z.left-H.right:0;if(R<K){if(X=A,K=R,J=R&&X.nodeType==3?{left:H.right<z.left?H.right:H.left,top:z.top}:z,A.nodeType==1&&R)Q=V+(z.left>=(H.left+H.right)/2?1:0);continue}}else if(H.top>z.top&&!U&&H.left<=z.left&&H.right>=z.left)U=A,q={left:Math.max(H.left,Math.min(H.right,z.left)),top:H.top};if(!X&&(z.left>=H.right&&z.top>=H.top||z.left>=H.left&&z.top>=H.bottom))Q=V+1}}if(!X&&U)X=U,J=q,K=0;if(X&&X.nodeType==3)return xG(X,J);if(!X||K&&X.nodeType==1)return{node:Z,offset:Q};return Hz(X,J)}function xG(Z,z){let X=Z.nodeValue.length,K=document.createRange();for(let J=0;J<X;J++){K.setEnd(Z,J+1),K.setStart(Z,J);let Q=$5(K,1);if(Q.top==Q.bottom)continue;if(j9(z,Q))return{node:Z,offset:J+(z.left>=(Q.left+Q.right)/2?1:0)}}return{node:Z,offset:0}}function j9(Z,z){return Z.left>=z.left-1&&Z.left<=z.right+1&&Z.top>=z.top-1&&Z.top<=z.bottom+1}function gG(Z,z){let X=Z.parentNode;if(X&&/^li$/i.test(X.nodeName)&&z.left<Z.getBoundingClientRect().left)return X;return Z}function wG(Z,z,X){let{node:K,offset:J}=Hz(z,X),Q=-1;if(K.nodeType==1&&!K.firstChild){let Y=K.getBoundingClientRect();Q=Y.left!=Y.right&&X.left>(Y.left+Y.right)/2?1:-1}return Z.docView.posFromDOM(K,J,Q)}function uG(Z,z,X,K){let J=-1;for(let Q=z,Y=!1;;){if(Q==Z.dom)break;let G=Z.docView.nearestDesc(Q,!0),U;if(!G)return null;if(G.dom.nodeType==1&&(G.node.isBlock&&G.parent||!G.contentDOM)&&((U=G.dom.getBoundingClientRect()).width||U.height)){if(G.node.isBlock&&G.parent){if(!Y&&U.left>K.left||U.top>K.top)J=G.posBefore;else if(!Y&&U.right<K.left||U.bottom<K.top)J=G.posAfter;Y=!0}if(!G.contentDOM&&J<0&&!G.node.isText)return(G.node.isBlock?K.top<(U.top+U.bottom)/2:K.left<(U.left+U.right)/2)?G.posBefore:G.posAfter}Q=G.dom.parentNode}return J>-1?J:Z.docView.posFromDOM(z,X,-1)}function jz(Z,z,X){let K=Z.childNodes.length;if(K&&X.top<X.bottom)for(let J=Math.max(0,Math.min(K-1,Math.floor(K*(z.top-X.top)/(X.bottom-X.top))-2)),Q=J;;){let Y=Z.childNodes[Q];if(Y.nodeType==1){let G=Y.getClientRects();for(let U=0;U<G.length;U++){let q=G[U];if(j9(z,q))return jz(Y,z,q)}}if((Q=(Q+1)%K)==J)break}return Z}function vG(Z,z){let X=Z.dom.ownerDocument,K,J=0,Q=DG(X,z.left,z.top);if(Q)({node:K,offset:J}=Q);let Y=(Z.root.elementFromPoint?Z.root:X).elementFromPoint(z.left,z.top),G;if(!Y||!Z.dom.contains(Y.nodeType!=1?Y.parentNode:Y)){let q=Z.dom.getBoundingClientRect();if(!j9(z,q))return null;if(Y=jz(Z.dom,z,q),!Y)return null}if(N0){for(let q=Y;K&&q;q=m8(q))if(q.draggable)K=void 0}if(Y=gG(Y,z),K){if(i0&&K.nodeType==1){if(J=Math.min(J,K.childNodes.length),J<K.childNodes.length){let A=K.childNodes[J],V;if(A.nodeName=="IMG"&&(V=A.getBoundingClientRect()).right<=z.left&&V.bottom>z.top)J++}}let q;if(T3&&J&&K.nodeType==1&&(q=K.childNodes[J-1]).nodeType==1&&q.contentEditable=="false"&&q.getBoundingClientRect().top>=z.top)J--;if(K==Z.dom&&J==K.childNodes.length-1&&K.lastChild.nodeType==1&&z.top>K.lastChild.getBoundingClientRect().bottom)G=Z.state.doc.content.size;else if(J==0||K.nodeType!=1||K.childNodes[J-1].nodeName!="BR")G=uG(Z,K,J,z)}if(G==null)G=wG(Z,Y,z);let U=Z.docView.nearestDesc(Y,!0);return{pos:G,inside:U?U.posAtStart-U.border:-1}}function g6(Z){return Z.top<Z.bottom||Z.left<Z.right}function $5(Z,z){let X=Z.getClientRects();if(X.length){let K=X[z<0?0:X.length-1];if(g6(K))return K}return Array.prototype.find.call(X,g6)||Z.getBoundingClientRect()}var $G=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Rz(Z,z,X){let{node:K,offset:J,atom:Q}=Z.docView.domFromPos(z,X<0?-1:1),Y=T3||i0;if(K.nodeType==3)if(Y&&($G.test(K.nodeValue)||(X<0?!J:J==K.nodeValue.length))){let U=$5(F5(K,J,J),X);if(i0&&J&&/\s/.test(K.nodeValue[J-1])&&J<K.nodeValue.length){let q=$5(F5(K,J-1,J-1),-1);if(q.top==U.top){let A=$5(F5(K,J,J+1),-1);if(A.top!=U.top)return I3(A,A.left<q.left)}}return U}else{let U=J,q=J,A=X<0?1:-1;if(X<0&&!J)q++,A=-1;else if(X>=0&&J==K.nodeValue.length)U--,A=1;else if(X<0)U--;else q++;return I3($5(F5(K,U,q),A),A<0)}if(!Z.state.doc.resolve(z-(Q||0)).parent.inlineContent){if(Q==null&&J&&(X<0||J==m0(K))){let U=K.childNodes[J-1];if(U.nodeType==1)return e1(U.getBoundingClientRect(),!1)}if(Q==null&&J<m0(K)){let U=K.childNodes[J];if(U.nodeType==1)return e1(U.getBoundingClientRect(),!0)}return e1(K.getBoundingClientRect(),X>=0)}if(Q==null&&J&&(X<0||J==m0(K))){let U=K.childNodes[J-1],q=U.nodeType==3?F5(U,m0(U)-(Y?0:1)):U.nodeType==1&&(U.nodeName!="BR"||!U.nextSibling)?U:null;if(q)return I3($5(q,1),!1)}if(Q==null&&J<m0(K)){let U=K.childNodes[J];while(U.pmViewDesc&&U.pmViewDesc.ignoreForCoords)U=U.nextSibling;let q=!U?null:U.nodeType==3?F5(U,0,Y?0:1):U.nodeType==1?U:null;if(q)return I3($5(q,-1),!0)}return I3($5(K.nodeType==3?F5(K):K,-X),X>=0)}function I3(Z,z){if(Z.width==0)return Z;let X=z?Z.left:Z.right;return{top:Z.top,bottom:Z.bottom,left:X,right:X}}function e1(Z,z){if(Z.height==0)return Z;let X=z?Z.top:Z.bottom;return{top:X,bottom:X,left:Z.left,right:Z.right}}function Fz(Z,z,X){let K=Z.state,J=Z.root.activeElement;if(K!=z)Z.updateState(z);if(J!=Z.dom)Z.focus();try{return X()}finally{if(K!=z)Z.updateState(K);if(J!=Z.dom&&J)J.focus()}}function fG(Z,z,X){let K=z.selection,J=X=="up"?K.$from:K.$to;return Fz(Z,z,()=>{let{node:Q}=Z.docView.domFromPos(J.pos,X=="up"?-1:1);for(;;){let G=Z.docView.nearestDesc(Q,!0);if(!G)break;if(G.node.isBlock){Q=G.contentDOM||G.dom;break}Q=G.dom.parentNode}let Y=Rz(Z,J.pos,1);for(let G=Q.firstChild;G;G=G.nextSibling){let U;if(G.nodeType==1)U=G.getClientRects();else if(G.nodeType==3)U=F5(G,0,G.nodeValue.length).getClientRects();else continue;for(let q=0;q<U.length;q++){let A=U[q];if(A.bottom>A.top+1&&(X=="up"?Y.top-A.top>(A.bottom-Y.top)*2:A.bottom-Y.bottom>(Y.bottom-A.top)*2))return!1}}return!0})}var hG=/[\u0590-\u08ac]/;function _G(Z,z,X){let{$head:K}=z.selection;if(!K.parent.isTextblock)return!1;let J=K.parentOffset,Q=!J,Y=J==K.parent.content.size,G=Z.domSelection();if(!G)return K.pos==K.start()||K.pos==K.end();if(!hG.test(K.parent.textContent)||!G.modify)return X=="left"||X=="backward"?Q:Y;return Fz(Z,z,()=>{let{focusNode:U,focusOffset:q,anchorNode:A,anchorOffset:V}=Z.domSelectionRange(),W=G.caretBidiLevel;G.modify("move",X,"character");let j=K.depth?Z.docView.domAfterPos(K.before()):Z.dom,{focusNode:H,focusOffset:R}=Z.domSelectionRange(),F=H&&!j.contains(H.nodeType==1?H:H.parentNode)||U==H&&q==R;try{if(G.collapse(A,V),U&&(U!=A||q!=V)&&G.extend)G.extend(U,q)}catch(B){}if(W!=null)G.caretBidiLevel=W;return F})}var w6=null,u6=null,v6=!1;function mG(Z,z,X){if(w6==z&&u6==X)return v6;return w6=z,u6=X,v6=X=="up"||X=="down"?fG(Z,z,X):_G(Z,z,X)}var l0=0,$6=1,K8=2,K5=3;class c8{constructor(Z,z,X,K){this.parent=Z,this.children=z,this.dom=X,this.contentDOM=K,this.dirty=l0,X.pmViewDesc=this}matchesWidget(Z){return!1}matchesMark(Z){return!1}matchesNode(Z,z,X){return!1}matchesHack(Z){return!1}parseRule(){return null}stopEvent(Z){return!1}get size(){let Z=0;for(let z=0;z<this.children.length;z++)Z+=this.children[z].size;return Z}get border(){return 0}destroy(){if(this.parent=void 0,this.dom.pmViewDesc==this)this.dom.pmViewDesc=void 0;for(let Z=0;Z<this.children.length;Z++)this.children[Z].destroy()}posBeforeChild(Z){for(let z=0,X=this.posAtStart;;z++){let K=this.children[z];if(K==Z)return X;X+=K.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(Z,z,X){if(this.contentDOM&&this.contentDOM.contains(Z.nodeType==1?Z:Z.parentNode))if(X<0){let J,Q;if(Z==this.contentDOM)J=Z.childNodes[z-1];else{while(Z.parentNode!=this.contentDOM)Z=Z.parentNode;J=Z.previousSibling}while(J&&!((Q=J.pmViewDesc)&&Q.parent==this))J=J.previousSibling;return J?this.posBeforeChild(Q)+Q.size:this.posAtStart}else{let J,Q;if(Z==this.contentDOM)J=Z.childNodes[z];else{while(Z.parentNode!=this.contentDOM)Z=Z.parentNode;J=Z.nextSibling}while(J&&!((Q=J.pmViewDesc)&&Q.parent==this))J=J.nextSibling;return J?this.posBeforeChild(Q):this.posAtEnd}let K;if(Z==this.dom&&this.contentDOM)K=z>V0(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))K=Z.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(z==0)for(let J=Z;;J=J.parentNode){if(J==this.dom){K=!1;break}if(J.previousSibling)break}if(K==null&&z==Z.childNodes.length)for(let J=Z;;J=J.parentNode){if(J==this.dom){K=!0;break}if(J.nextSibling)break}}return(K==null?X>0:K)?this.posAtEnd:this.posAtStart}nearestDesc(Z,z=!1){for(let X=!0,K=Z;K;K=K.parentNode){let J=this.getDesc(K),Q;if(J&&(!z||J.node))if(X&&(Q=J.nodeDOM)&&!(Q.nodeType==1?Q.contains(Z.nodeType==1?Z:Z.parentNode):Q==Z))X=!1;else return J}}getDesc(Z){let z=Z.pmViewDesc;for(let X=z;X;X=X.parent)if(X==this)return z}posFromDOM(Z,z,X){for(let K=Z;K;K=K.parentNode){let J=this.getDesc(K);if(J)return J.localPosFromDOM(Z,z,X)}return-1}descAt(Z){for(let z=0,X=0;z<this.children.length;z++){let K=this.children[z],J=X+K.size;if(X==Z&&J!=X){while(!K.border&&K.children.length)for(let Q=0;Q<K.children.length;Q++){let Y=K.children[Q];if(Y.size){K=Y;break}}return K}if(Z<J)return K.descAt(Z-X-K.border);X=J}}domFromPos(Z,z){if(!this.contentDOM)return{node:this.dom,offset:0,atom:Z+1};let X=0,K=0;for(let J=0;X<this.children.length;X++){let Q=this.children[X],Y=J+Q.size;if(Y>Z||Q instanceof F9){K=Z-J;break}J=Y}if(K)return this.children[X].domFromPos(K-this.children[X].border,z);for(let J;X&&!(J=this.children[X-1]).size&&J instanceof R9&&J.side>=0;X--);if(z<=0){let J,Q=!0;for(;;X--,Q=!1)if(J=X?this.children[X-1]:null,!J||J.dom.parentNode==this.contentDOM)break;if(J&&z&&Q&&!J.border&&!J.domAtom)return J.domFromPos(J.size,z);return{node:this.contentDOM,offset:J?V0(J.dom)+1:0}}else{let J,Q=!0;for(;;X++,Q=!1)if(J=X<this.children.length?this.children[X]:null,!J||J.dom.parentNode==this.contentDOM)break;if(J&&Q&&!J.border&&!J.domAtom)return J.domFromPos(0,z);return{node:this.contentDOM,offset:J?V0(J.dom):this.contentDOM.childNodes.length}}}parseRange(Z,z,X=0){if(this.children.length==0)return{node:this.contentDOM,from:Z,to:z,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let K=-1,J=-1;for(let Q=X,Y=0;;Y++){let G=this.children[Y],U=Q+G.size;if(K==-1&&Z<=U){let q=Q+G.border;if(Z>=q&&z<=U-G.border&&G.node&&G.contentDOM&&this.contentDOM.contains(G.contentDOM))return G.parseRange(Z,z,q);Z=Q;for(let A=Y;A>0;A--){let V=this.children[A-1];if(V.size&&V.dom.parentNode==this.contentDOM&&!V.emptyChildAt(1)){K=V0(V.dom)+1;break}Z-=V.size}if(K==-1)K=0}if(K>-1&&(U>z||Y==this.children.length-1)){z=U;for(let q=Y+1;q<this.children.length;q++){let A=this.children[q];if(A.size&&A.dom.parentNode==this.contentDOM&&!A.emptyChildAt(-1)){J=V0(A.dom);break}z+=A.size}if(J==-1)J=this.contentDOM.childNodes.length;break}Q=U}return{node:this.contentDOM,from:Z,to:z,fromOffset:K,toOffset:J}}emptyChildAt(Z){if(this.border||!this.contentDOM||!this.children.length)return!1;let z=this.children[Z<0?0:this.children.length-1];return z.size==0||z.emptyChildAt(Z)}domAfterPos(Z){let{node:z,offset:X}=this.domFromPos(Z,0);if(z.nodeType!=1||X==z.childNodes.length)throw new RangeError("No node after pos "+Z);return z.childNodes[X]}setSelection(Z,z,X,K=!1){let J=Math.min(Z,z),Q=Math.max(Z,z);for(let W=0,j=0;W<this.children.length;W++){let H=this.children[W],R=j+H.size;if(J>j&&Q<R)return H.setSelection(Z-j-H.border,z-j-H.border,X,K);j=R}let Y=this.domFromPos(Z,Z?-1:1),G=z==Z?Y:this.domFromPos(z,z?-1:1),U=X.root.getSelection(),q=X.domSelectionRange(),A=!1;if((i0||N0)&&Z==z){let{node:W,offset:j}=Y;if(W.nodeType==3){if(A=!!(j&&W.nodeValue[j-1]==`
`),A&&j==W.nodeValue.length)for(let H=W,R;H;H=H.parentNode){if(R=H.nextSibling){if(R.nodeName=="BR")Y=G={node:R.parentNode,offset:V0(R)+1};break}let F=H.pmViewDesc;if(F&&F.node&&F.node.isBlock)break}}else{let H=W.childNodes[j-1];A=H&&(H.nodeName=="BR"||H.contentEditable=="false")}}if(i0&&q.focusNode&&q.focusNode!=G.node&&q.focusNode.nodeType==1){let W=q.focusNode.childNodes[q.focusOffset];if(W&&W.contentEditable=="false")K=!0}if(!(K||A&&N0)&&G8(Y.node,Y.offset,q.anchorNode,q.anchorOffset)&&G8(G.node,G.offset,q.focusNode,q.focusOffset))return;let V=!1;if((U.extend||Z==z)&&!A){U.collapse(Y.node,Y.offset);try{if(Z!=z)U.extend(G.node,G.offset);V=!0}catch(W){}}if(!V){if(Z>z){let j=Y;Y=G,G=j}let W=document.createRange();W.setEnd(G.node,G.offset),W.setStart(Y.node,Y.offset),U.removeAllRanges(),U.addRange(W)}}ignoreMutation(Z){return!this.contentDOM&&Z.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(Z,z){for(let X=0,K=0;K<this.children.length;K++){let J=this.children[K],Q=X+J.size;if(X==Q?Z<=Q&&z>=X:Z<Q&&z>X){let Y=X+J.border,G=Q-J.border;if(Z>=Y&&z<=G){if(this.dirty=Z==X||z==Q?K8:$6,Z==Y&&z==G&&(J.contentLost||J.dom.parentNode!=this.contentDOM))J.dirty=K5;else J.markDirty(Z-Y,z-Y);return}else J.dirty=J.dom==J.contentDOM&&J.dom.parentNode==this.contentDOM&&!J.children.length?K8:K5}X=Q}this.dirty=K8}markParentsDirty(){let Z=1;for(let z=this.parent;z;z=z.parent,Z++){let X=Z==1?K8:$6;if(z.dirty<X)z.dirty=X}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(Z){return!1}}class R9 extends c8{constructor(Z,z,X,K){let J,Q=z.type.toDOM;if(typeof Q=="function")Q=Q(X,()=>{if(!J)return K;if(J.parent)return J.parent.posBeforeChild(J)});if(!z.type.spec.raw){if(Q.nodeType!=1){let Y=document.createElement("span");Y.appendChild(Q),Q=Y}Q.contentEditable="false",Q.classList.add("ProseMirror-widget")}super(Z,[],Q,null);this.widget=z,this.widget=z,J=this}matchesWidget(Z){return this.dirty==l0&&Z.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(Z){let z=this.widget.spec.stopEvent;return z?z(Z):!1}ignoreMutation(Z){return Z.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Bz extends c8{constructor(Z,z,X,K){super(Z,[],z,null);this.textDOM=X,this.text=K}get size(){return this.text.length}localPosFromDOM(Z,z){if(Z!=this.textDOM)return this.posAtStart+(z?this.size:0);return this.posAtStart+z}domFromPos(Z){return{node:this.textDOM,offset:Z}}ignoreMutation(Z){return Z.type==="characterData"&&Z.target.nodeValue==Z.oldValue}}class U8 extends c8{constructor(Z,z,X,K,J){super(Z,[],X,K);this.mark=z,this.spec=J}static create(Z,z,X,K){let J=K.nodeViews[z.type.name],Q=J&&J(z,K,X);if(!Q||!Q.dom)Q=y5.renderSpec(document,z.type.spec.toDOM(z,X),null,z.attrs);return new U8(Z,z,Q.dom,Q.contentDOM||Q.dom,Q)}parseRule(){if(this.dirty&K5||this.mark.type.spec.reparseInView)return null;return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(Z){return this.dirty!=K5&&this.mark.eq(Z)}markDirty(Z,z){if(super.markDirty(Z,z),this.dirty!=l0){let X=this.parent;while(!X.node)X=X.parent;if(X.dirty<this.dirty)X.dirty=this.dirty;this.dirty=l0}}slice(Z,z,X){let K=U8.create(this.parent,this.mark,!0,X),J=this.children,Q=this.size;if(z<Q)J=q9(J,z,Q,X);if(Z>0)J=q9(J,0,Z,X);for(let Y=0;Y<J.length;Y++)J[Y].parent=K;return K.children=J,K}ignoreMutation(Z){return this.spec.ignoreMutation?this.spec.ignoreMutation(Z):super.ignoreMutation(Z)}destroy(){if(this.spec.destroy)this.spec.destroy();super.destroy()}}class l5 extends c8{constructor(Z,z,X,K,J,Q,Y,G,U){super(Z,[],J,Q);this.node=z,this.outerDeco=X,this.innerDeco=K,this.nodeDOM=Y}static create(Z,z,X,K,J,Q){let Y=J.nodeViews[z.type.name],G,U=Y&&Y(z,J,()=>{if(!G)return Q;if(G.parent)return G.parent.posBeforeChild(G)},X,K),q=U&&U.dom,A=U&&U.contentDOM;if(z.isText){if(!q)q=document.createTextNode(z.text);else if(q.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else if(!q)({dom:q,contentDOM:A}=y5.renderSpec(document,z.type.spec.toDOM(z),null,z.attrs));if(!A&&!z.isText&&q.nodeName!="BR"){if(!q.hasAttribute("contenteditable"))q.contentEditable="false";if(z.type.spec.draggable)q.draggable=!0}let V=q;if(q=Mz(q,X,z),U)return G=new Ez(Z,z,X,K,q,A||null,V,U,J,Q+1);else if(z.isText)return new FZ(Z,z,X,K,q,V,J);else return new l5(Z,z,X,K,q,A||null,V,J,Q+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let Z={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre")Z.preserveWhitespace="full";if(!this.contentDOM)Z.getContent=()=>this.node.content;else if(!this.contentLost)Z.contentElement=this.contentDOM;else{for(let z=this.children.length-1;z>=0;z--){let X=this.children[z];if(this.dom.contains(X.dom.parentNode)){Z.contentElement=X.dom.parentNode;break}}if(!Z.contentElement)Z.getContent=()=>L.empty}return Z}matchesNode(Z,z,X){return this.dirty==l0&&Z.eq(this.node)&&AZ(z,this.outerDeco)&&X.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(Z,z){let X=this.node.inlineContent,K=z,J=Z.composing?this.localCompositionInfo(Z,z):null,Q=J&&J.pos>-1?J:null,Y=J&&J.pos<0,G=new Lz(this,Q&&Q.node,Z);if(iG(this.node,this.innerDeco,(U,q,A)=>{if(U.spec.marks)G.syncToMarks(U.spec.marks,X,Z);else if(U.type.side>=0&&!A)G.syncToMarks(q==this.node.childCount?h.none:this.node.child(q).marks,X,Z);G.placeWidget(U,Z,K)},(U,q,A,V)=>{G.syncToMarks(U.marks,X,Z);let W;if(G.findNodeMatch(U,q,A,V));else if(Y&&Z.state.selection.from>K&&Z.state.selection.to<K+U.nodeSize&&(W=G.findIndexWithChild(J.node))>-1&&G.updateNodeAt(U,q,A,W,Z));else if(G.updateNextNode(U,q,A,Z,V,K));else G.addNode(U,q,A,Z,K);K+=U.nodeSize}),G.syncToMarks([],X,Z),this.node.isTextblock)G.addTextblockHacks();if(G.destroyRest(),G.changed||this.dirty==K8){if(Q)this.protectLocalComposition(Z,Q);if(Pz(this.contentDOM,this.children,Z),l8)dG(this.dom)}}localCompositionInfo(Z,z){let{from:X,to:K}=Z.state.selection;if(!(Z.state.selection instanceof _)||X<z||K>z+this.node.content.size)return null;let J=Z.input.compositionNode;if(!J||!this.dom.contains(J.parentNode))return null;if(this.node.inlineContent){let Q=J.nodeValue,Y=sG(this.node.content,Q,X-z,K-z);return Y<0?null:{node:J,pos:Y,text:Q}}else return{node:J,pos:-1,text:""}}protectLocalComposition(Z,{node:z,pos:X,text:K}){if(this.getDesc(z))return;let J=z;for(;;J=J.parentNode){if(J.parentNode==this.contentDOM)break;while(J.previousSibling)J.parentNode.removeChild(J.previousSibling);while(J.nextSibling)J.parentNode.removeChild(J.nextSibling);if(J.pmViewDesc)J.pmViewDesc=void 0}let Q=new Bz(this,J,z,K);Z.input.compositionNodes.push(Q),this.children=q9(this.children,X,X+K.length,Z,Q)}update(Z,z,X,K){if(this.dirty==K5||!Z.sameMarkup(this.node))return!1;return this.updateInner(Z,z,X,K),!0}updateInner(Z,z,X,K){if(this.updateOuterDeco(z),this.node=Z,this.innerDeco=X,this.contentDOM)this.updateChildren(K,this.posAtStart);this.dirty=l0}updateOuterDeco(Z){if(AZ(Z,this.outerDeco))return;let z=this.nodeDOM.nodeType!=1,X=this.dom;if(this.dom=Oz(this.dom,this.nodeDOM,U9(this.outerDeco,this.node,z),U9(Z,this.node,z)),this.dom!=X)X.pmViewDesc=void 0,this.dom.pmViewDesc=this;this.outerDeco=Z}selectNode(){if(this.nodeDOM.nodeType==1)this.nodeDOM.classList.add("ProseMirror-selectednode");if(this.contentDOM||!this.node.type.spec.draggable)this.dom.draggable=!0}deselectNode(){if(this.nodeDOM.nodeType==1){if(this.nodeDOM.classList.remove("ProseMirror-selectednode"),this.contentDOM||!this.node.type.spec.draggable)this.dom.removeAttribute("draggable")}}get domAtom(){return this.node.isAtom}}function f6(Z,z,X,K,J){Mz(K,z,Z);let Q=new l5(void 0,Z,z,X,K,K,K,J,0);if(Q.contentDOM)Q.updateChildren(J,0);return Q}class FZ extends l5{constructor(Z,z,X,K,J,Q,Y){super(Z,z,X,K,J,null,Q,Y,0)}parseRule(){let Z=this.nodeDOM.parentNode;while(Z&&Z!=this.dom&&!Z.pmIsDeco)Z=Z.parentNode;return{skip:Z||!0}}update(Z,z,X,K){if(this.dirty==K5||this.dirty!=l0&&!this.inParent()||!Z.sameMarkup(this.node))return!1;if(this.updateOuterDeco(z),(this.dirty!=l0||Z.text!=this.node.text)&&Z.text!=this.nodeDOM.nodeValue){if(this.nodeDOM.nodeValue=Z.text,K.trackWrites==this.nodeDOM)K.trackWrites=null}return this.node=Z,this.dirty=l0,!0}inParent(){let Z=this.parent.contentDOM;for(let z=this.nodeDOM;z;z=z.parentNode)if(z==Z)return!0;return!1}domFromPos(Z){return{node:this.nodeDOM,offset:Z}}localPosFromDOM(Z,z,X){if(Z==this.nodeDOM)return this.posAtStart+Math.min(z,this.node.text.length);return super.localPosFromDOM(Z,z,X)}ignoreMutation(Z){return Z.type!="characterData"&&Z.type!="selection"}slice(Z,z,X){let K=this.node.cut(Z,z),J=document.createTextNode(K.text);return new FZ(this.parent,K,this.outerDeco,this.innerDeco,J,J,X)}markDirty(Z,z){if(super.markDirty(Z,z),this.dom!=this.nodeDOM&&(Z==0||z==this.nodeDOM.nodeValue.length))this.dirty=K5}get domAtom(){return!1}isText(Z){return this.node.text==Z}}class F9 extends c8{parseRule(){return{ignore:!0}}matchesHack(Z){return this.dirty==l0&&this.dom.nodeName==Z}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Ez extends l5{constructor(Z,z,X,K,J,Q,Y,G,U,q){super(Z,z,X,K,J,Q,Y,U,q);this.spec=G}update(Z,z,X,K){if(this.dirty==K5)return!1;if(this.spec.update&&(this.node.type==Z.type||this.spec.multiType)){let J=this.spec.update(Z,z,X);if(J)this.updateInner(Z,z,X,K);return J}else if(!this.contentDOM&&!Z.isLeaf)return!1;else return super.update(Z,z,X,K)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(Z,z,X,K){this.spec.setSelection?this.spec.setSelection(Z,z,X.root):super.setSelection(Z,z,X,K)}destroy(){if(this.spec.destroy)this.spec.destroy();super.destroy()}stopEvent(Z){return this.spec.stopEvent?this.spec.stopEvent(Z):!1}ignoreMutation(Z){return this.spec.ignoreMutation?this.spec.ignoreMutation(Z):super.ignoreMutation(Z)}}function Pz(Z,z,X){let K=Z.firstChild,J=!1;for(let Q=0;Q<z.length;Q++){let Y=z[Q],G=Y.dom;if(G.parentNode==Z){while(G!=K)K=h6(K),J=!0;K=K.nextSibling}else J=!0,Z.insertBefore(G,K);if(Y instanceof U8){let U=K?K.previousSibling:Z.lastChild;Pz(Y.contentDOM,Y.children,X),K=U?U.nextSibling:Z.firstChild}}while(K)K=h6(K),J=!0;if(J&&X.trackWrites==Z)X.trackWrites=null}var D3=function(Z){if(Z)this.nodeName=Z};D3.prototype=Object.create(null);var J8=[new D3];function U9(Z,z,X){if(Z.length==0)return J8;let K=X?J8[0]:new D3,J=[K];for(let Q=0;Q<Z.length;Q++){let Y=Z[Q].type.attrs;if(!Y)continue;if(Y.nodeName)J.push(K=new D3(Y.nodeName));for(let G in Y){let U=Y[G];if(U==null)continue;if(X&&J.length==1)J.push(K=new D3(z.isInline?"span":"div"));if(G=="class")K.class=(K.class?K.class+" ":"")+U;else if(G=="style")K.style=(K.style?K.style+";":"")+U;else if(G!="nodeName")K[G]=U}}return J}function Oz(Z,z,X,K){if(X==J8&&K==J8)return z;let J=z;for(let Q=0;Q<K.length;Q++){let Y=K[Q],G=X[Q];if(Q){let U;if(G&&G.nodeName==Y.nodeName&&J!=Z&&(U=J.parentNode)&&U.nodeName.toLowerCase()==Y.nodeName)J=U;else U=document.createElement(Y.nodeName),U.pmIsDeco=!0,U.appendChild(J),G=J8[0],J=U}lG(J,G||J8[0],Y)}return J}function lG(Z,z,X){for(let K in z)if(K!="class"&&K!="style"&&K!="nodeName"&&!(K in X))Z.removeAttribute(K);for(let K in X)if(K!="class"&&K!="style"&&K!="nodeName"&&X[K]!=z[K])Z.setAttribute(K,X[K]);if(z.class!=X.class){let K=z.class?z.class.split(" ").filter(Boolean):[],J=X.class?X.class.split(" ").filter(Boolean):[];for(let Q=0;Q<K.length;Q++)if(J.indexOf(K[Q])==-1)Z.classList.remove(K[Q]);for(let Q=0;Q<J.length;Q++)if(K.indexOf(J[Q])==-1)Z.classList.add(J[Q]);if(Z.classList.length==0)Z.removeAttribute("class")}if(z.style!=X.style){if(z.style){let K=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,J;while(J=K.exec(z.style))Z.style.removeProperty(J[1])}if(X.style)Z.style.cssText+=X.style}}function Mz(Z,z,X){return Oz(Z,Z,J8,U9(z,X,Z.nodeType!=1))}function AZ(Z,z){if(Z.length!=z.length)return!1;for(let X=0;X<Z.length;X++)if(!Z[X].type.eq(z[X].type))return!1;return!0}function h6(Z){let z=Z.nextSibling;return Z.parentNode.removeChild(Z),z}class Lz{constructor(Z,z,X){this.lock=z,this.view=X,this.index=0,this.stack=[],this.changed=!1,this.top=Z,this.preMatch=cG(Z.node.content,Z)}destroyBetween(Z,z){if(Z==z)return;for(let X=Z;X<z;X++)this.top.children[X].destroy();this.top.children.splice(Z,z-Z),this.changed=!0}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(Z,z,X){let K=0,J=this.stack.length>>1,Q=Math.min(J,Z.length);while(K<Q&&(K==J-1?this.top:this.stack[K+1<<1]).matchesMark(Z[K])&&Z[K].type.spec.spanning!==!1)K++;while(K<J)this.destroyRest(),this.top.dirty=l0,this.index=this.stack.pop(),this.top=this.stack.pop(),J--;while(J<Z.length){this.stack.push(this.top,this.index+1);let Y=-1;for(let G=this.index;G<Math.min(this.index+3,this.top.children.length);G++){let U=this.top.children[G];if(U.matchesMark(Z[J])&&!this.isLocked(U.dom)){Y=G;break}}if(Y>-1){if(Y>this.index)this.changed=!0,this.destroyBetween(this.index,Y);this.top=this.top.children[this.index]}else{let G=U8.create(this.top,Z[J],z,X);this.top.children.splice(this.index,0,G),this.top=G,this.changed=!0}this.index=0,J++}}findNodeMatch(Z,z,X,K){let J=-1,Q;if(K>=this.preMatch.index&&(Q=this.preMatch.matches[K-this.preMatch.index]).parent==this.top&&Q.matchesNode(Z,z,X))J=this.top.children.indexOf(Q,this.index);else for(let Y=this.index,G=Math.min(this.top.children.length,Y+5);Y<G;Y++){let U=this.top.children[Y];if(U.matchesNode(Z,z,X)&&!this.preMatch.matched.has(U)){J=Y;break}}if(J<0)return!1;return this.destroyBetween(this.index,J),this.index++,!0}updateNodeAt(Z,z,X,K,J){let Q=this.top.children[K];if(Q.dirty==K5&&Q.dom==Q.contentDOM)Q.dirty=K8;if(!Q.update(Z,z,X,J))return!1;return this.destroyBetween(this.index,K),this.index++,!0}findIndexWithChild(Z){for(;;){let z=Z.parentNode;if(!z)return-1;if(z==this.top.contentDOM){let X=Z.pmViewDesc;if(X){for(let K=this.index;K<this.top.children.length;K++)if(this.top.children[K]==X)return K}return-1}Z=z}}updateNextNode(Z,z,X,K,J,Q){for(let Y=this.index;Y<this.top.children.length;Y++){let G=this.top.children[Y];if(G instanceof l5){let U=this.preMatch.matched.get(G);if(U!=null&&U!=J)return!1;let q=G.dom,A,V=this.isLocked(q)&&!(Z.isText&&G.node&&G.node.isText&&G.nodeDOM.nodeValue==Z.text&&G.dirty!=K5&&AZ(z,G.outerDeco));if(!V&&G.update(Z,z,X,K)){if(this.destroyBetween(this.index,Y),G.dom!=q)this.changed=!0;return this.index++,!0}else if(!V&&(A=this.recreateWrapper(G,Z,z,X,K,Q))){if(this.destroyBetween(this.index,Y),this.top.children[this.index]=A,A.contentDOM)A.dirty=K8,A.updateChildren(K,Q+1),A.dirty=l0;return this.changed=!0,this.index++,!0}break}}return!1}recreateWrapper(Z,z,X,K,J,Q){if(Z.dirty||z.isAtom||!Z.children.length||!Z.node.content.eq(z.content)||!AZ(X,Z.outerDeco)||!K.eq(Z.innerDeco))return null;let Y=l5.create(this.top,z,X,K,J,Q);if(Y.contentDOM){Y.children=Z.children,Z.children=[];for(let G of Y.children)G.parent=Y}return Z.destroy(),Y}addNode(Z,z,X,K,J){let Q=l5.create(this.top,Z,z,X,K,J);if(Q.contentDOM)Q.updateChildren(K,J+1);this.top.children.splice(this.index++,0,Q),this.changed=!0}placeWidget(Z,z,X){let K=this.index<this.top.children.length?this.top.children[this.index]:null;if(K&&K.matchesWidget(Z)&&(Z==K.widget||!K.widget.type.toDOM.parentNode))this.index++;else{let J=new R9(this.top,Z,z,X);this.top.children.splice(this.index++,0,J),this.changed=!0}}addTextblockHacks(){let Z=this.top.children[this.index-1],z=this.top;while(Z instanceof U8)z=Z,Z=z.children[z.children.length-1];if(!Z||!(Z instanceof FZ)||/\n$/.test(Z.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(Z.node.text)){if((N0||D0)&&Z&&Z.dom.contentEditable=="false")this.addHackNode("IMG",z);this.addHackNode("BR",this.top)}}addHackNode(Z,z){if(z==this.top&&this.index<z.children.length&&z.children[this.index].matchesHack(Z))this.index++;else{let X=document.createElement(Z);if(Z=="IMG")X.className="ProseMirror-separator",X.alt="";if(Z=="BR")X.className="ProseMirror-trailingBreak";let K=new F9(this.top,[],X,null);if(z!=this.top)z.children.push(K);else z.children.splice(this.index++,0,K);this.changed=!0}}isLocked(Z){return this.lock&&(Z==this.lock||Z.nodeType==1&&Z.contains(this.lock.parentNode))}}function cG(Z,z){let X=z,K=X.children.length,J=Z.childCount,Q=new Map,Y=[];Z:while(J>0){let G;for(;;)if(K){let q=X.children[K-1];if(q instanceof U8)X=q,K=q.children.length;else{G=q,K--;break}}else if(X==z)break Z;else K=X.parent.children.indexOf(X),X=X.parent;let U=G.node;if(!U)continue;if(U!=Z.child(J-1))break;--J,Q.set(G,J),Y.push(G)}return{index:J,matched:Q,matches:Y.reverse()}}function pG(Z,z){return Z.type.side-z.type.side}function iG(Z,z,X,K){let J=z.locals(Z),Q=0;if(J.length==0){for(let q=0;q<Z.childCount;q++){let A=Z.child(q);K(A,J,z.forChild(Q,A),q),Q+=A.nodeSize}return}let Y=0,G=[],U=null;for(let q=0;;){let A,V;while(Y<J.length&&J[Y].to==Q){let F=J[Y++];if(F.widget)if(!A)A=F;else(V||(V=[A])).push(F)}if(A)if(V){V.sort(pG);for(let F=0;F<V.length;F++)X(V[F],q,!!U)}else X(A,q,!!U);let W,j;if(U)j=-1,W=U,U=null;else if(q<Z.childCount)j=q,W=Z.child(q++);else break;for(let F=0;F<G.length;F++)if(G[F].to<=Q)G.splice(F--,1);while(Y<J.length&&J[Y].from<=Q&&J[Y].to>Q)G.push(J[Y++]);let H=Q+W.nodeSize;if(W.isText){let F=H;if(Y<J.length&&J[Y].from<F)F=J[Y].from;for(let B=0;B<G.length;B++)if(G[B].to<F)F=G[B].to;if(F<H)U=W.cut(F-Q),W=W.cut(0,F-Q),H=F,j=-1}else while(Y<J.length&&J[Y].to<H)Y++;let R=W.isInline&&!W.isLeaf?G.filter((F)=>!F.inline):G.slice();K(W,R,z.forChild(Q,W),j),Q=H}}function dG(Z){if(Z.nodeName=="UL"||Z.nodeName=="OL"){let z=Z.style.cssText;Z.style.cssText=z+"; list-style: square !important",window.getComputedStyle(Z).listStyle,Z.style.cssText=z}}function sG(Z,z,X,K){for(let J=0,Q=0;J<Z.childCount&&Q<=K;){let Y=Z.child(J++),G=Q;if(Q+=Y.nodeSize,!Y.isText)continue;let U=Y.text;while(J<Z.childCount){let q=Z.child(J++);if(Q+=q.nodeSize,!q.isText)break;U+=q.text}if(Q>=X){if(Q>=K&&U.slice(K-z.length-G,K-G)==z)return K-z.length;let q=G<K?U.lastIndexOf(z,K-G-1):-1;if(q>=0&&q+z.length+G>=X)return G+q;if(X==K&&U.length>=K+z.length-G&&U.slice(K-G,K-G+z.length)==z)return K}}return-1}function q9(Z,z,X,K,J){let Q=[];for(let Y=0,G=0;Y<Z.length;Y++){let U=Z[Y],q=G,A=G+=U.size;if(q>=X||A<=z)Q.push(U);else{if(q<z)Q.push(U.slice(0,z-q,K));if(J)Q.push(J),J=void 0;if(A>X)Q.push(U.slice(X-q,U.size,K))}}return Q}function B9(Z,z=null){let X=Z.domSelectionRange(),K=Z.state.doc;if(!X.focusNode)return null;let J=Z.docView.nearestDesc(X.focusNode),Q=J&&J.size==0,Y=Z.docView.posFromDOM(X.focusNode,X.focusOffset,1);if(Y<0)return null;let G=K.resolve(Y),U,q;if(RZ(X)){U=Y;while(J&&!J.node)J=J.parent;let V=J.node;if(J&&V.isAtom&&w.isSelectable(V)&&J.parent&&!(V.isInline&&LG(X.focusNode,X.focusOffset,J.dom))){let W=J.posBefore;q=new w(Y==W?G:K.resolve(W))}}else{if(X instanceof Z.dom.ownerDocument.defaultView.Selection&&X.rangeCount>1){let V=Y,W=Y;for(let j=0;j<X.rangeCount;j++){let H=X.getRangeAt(j);V=Math.min(V,Z.docView.posFromDOM(H.startContainer,H.startOffset,1)),W=Math.max(W,Z.docView.posFromDOM(H.endContainer,H.endOffset,-1))}if(V<0)return null;[U,Y]=W==Z.state.selection.anchor?[W,V]:[V,W],G=K.resolve(Y)}else U=Z.docView.posFromDOM(X.anchorNode,X.anchorOffset,1);if(U<0)return null}let A=K.resolve(U);if(!q){let V=z=="pointer"||Z.state.selection.head<G.pos&&!Q?1:-1;q=E9(Z,A,G,V)}return q}function Iz(Z){return Z.editable?Z.hasFocus():Cz(Z)&&document.activeElement&&document.activeElement.contains(Z.dom)}function E5(Z,z=!1){let X=Z.state.selection;if(Dz(Z,X),!Iz(Z))return;if(!z&&Z.input.mouseDown&&Z.input.mouseDown.allowDefault&&D0){let K=Z.domSelectionRange(),J=Z.domObserver.currentSelection;if(K.anchorNode&&J.anchorNode&&G8(K.anchorNode,K.anchorOffset,J.anchorNode,J.anchorOffset)){Z.input.mouseDown.delayedSelectionSync=!0,Z.domObserver.setCurSelection();return}}if(Z.domObserver.disconnectSelection(),Z.cursorWrapper)aG(Z);else{let{anchor:K,head:J}=X,Q,Y;if(_6&&!(X instanceof _)){if(!X.$from.parent.inlineContent)Q=m6(Z,X.from);if(!X.empty&&!X.$from.parent.inlineContent)Y=m6(Z,X.to)}if(Z.docView.setSelection(K,J,Z,z),_6){if(Q)l6(Q);if(Y)l6(Y)}if(X.visible)Z.dom.classList.remove("ProseMirror-hideselection");else if(Z.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document)nG(Z)}Z.domObserver.setCurSelection(),Z.domObserver.connectSelection()}var _6=N0||D0&&Az<63;function m6(Z,z){let{node:X,offset:K}=Z.docView.domFromPos(z,0),J=K<X.childNodes.length?X.childNodes[K]:null,Q=K?X.childNodes[K-1]:null;if(N0&&J&&J.contentEditable=="false")return Z9(J);if((!J||J.contentEditable=="false")&&(!Q||Q.contentEditable=="false")){if(J)return Z9(J);else if(Q)return Z9(Q)}}function Z9(Z){if(Z.contentEditable="true",N0&&Z.draggable)Z.draggable=!1,Z.wasDraggable=!0;return Z}function l6(Z){if(Z.contentEditable="false",Z.wasDraggable)Z.draggable=!0,Z.wasDraggable=null}function nG(Z){let z=Z.dom.ownerDocument;z.removeEventListener("selectionchange",Z.input.hideSelectionGuard);let X=Z.domSelectionRange(),K=X.anchorNode,J=X.anchorOffset;z.addEventListener("selectionchange",Z.input.hideSelectionGuard=()=>{if(X.anchorNode!=K||X.anchorOffset!=J)z.removeEventListener("selectionchange",Z.input.hideSelectionGuard),setTimeout(()=>{if(!Iz(Z)||Z.state.selection.visible)Z.dom.classList.remove("ProseMirror-hideselection")},20)})}function aG(Z){let z=Z.domSelection(),X=document.createRange();if(!z)return;let K=Z.cursorWrapper.dom,J=K.nodeName=="IMG";if(J)X.setStart(K.parentNode,V0(K)+1);else X.setStart(K,0);if(X.collapse(!0),z.removeAllRanges(),z.addRange(X),!J&&!Z.state.selection.visible&&w0&&m5<=11)K.disabled=!0,K.disabled=!1}function Dz(Z,z){if(z instanceof w){let X=Z.docView.descAt(z.from);if(X!=Z.lastSelectedViewDesc){if(c6(Z),X)X.selectNode();Z.lastSelectedViewDesc=X}}else c6(Z)}function c6(Z){if(Z.lastSelectedViewDesc){if(Z.lastSelectedViewDesc.parent)Z.lastSelectedViewDesc.deselectNode();Z.lastSelectedViewDesc=void 0}}function E9(Z,z,X,K){return Z.someProp("createSelectionBetween",(J)=>J(Z,z,X))||_.between(z,X,K)}function p6(Z){if(Z.editable&&!Z.hasFocus())return!1;return Cz(Z)}function Cz(Z){let z=Z.domSelectionRange();if(!z.anchorNode)return!1;try{return Z.dom.contains(z.anchorNode.nodeType==3?z.anchorNode.parentNode:z.anchorNode)&&(Z.editable||Z.dom.contains(z.focusNode.nodeType==3?z.focusNode.parentNode:z.focusNode))}catch(X){return!1}}function rG(Z){let z=Z.docView.domFromPos(Z.state.selection.anchor,0),X=Z.domSelectionRange();return G8(z.node,z.offset,X.anchorNode,X.anchorOffset)}function A9(Z,z){let{$anchor:X,$head:K}=Z.selection,J=z>0?X.max(K):X.min(K),Q=!J.parent.inlineContent?J:J.depth?Z.doc.resolve(z>0?J.after():J.before()):null;return Q&&$.findFrom(Q,z)}function f5(Z,z){return Z.dispatch(Z.state.tr.setSelection(z).scrollIntoView()),!0}function i6(Z,z,X){let K=Z.state.selection;if(K instanceof _){if(X.indexOf("s")>-1){let{$head:J}=K,Q=J.textOffset?null:z<0?J.nodeBefore:J.nodeAfter;if(!Q||Q.isText||!Q.isLeaf)return!1;let Y=Z.state.doc.resolve(J.pos+Q.nodeSize*(z<0?-1:1));return f5(Z,new _(K.$anchor,Y))}else if(!K.empty)return!1;else if(Z.endOfTextblock(z>0?"forward":"backward")){let J=A9(Z.state,z);if(J&&J instanceof w)return f5(Z,J);return!1}else if(!(_0&&X.indexOf("m")>-1)){let J=K.$head,Q=J.textOffset?null:z<0?J.nodeBefore:J.nodeAfter,Y;if(!Q||Q.isText)return!1;let G=z<0?J.pos-Q.nodeSize:J.pos;if(!(Q.isAtom||(Y=Z.docView.descAt(G))&&!Y.contentDOM))return!1;if(w.isSelectable(Q))return f5(Z,new w(z<0?Z.state.doc.resolve(J.pos-Q.nodeSize):J));else if(T3)return f5(Z,new _(Z.state.doc.resolve(z<0?G:G+Q.nodeSize)));else return!1}}else if(K instanceof w&&K.node.isInline)return f5(Z,new _(z>0?K.$to:K.$from));else{let J=A9(Z.state,z);if(J)return f5(Z,J);return!1}}function VZ(Z){return Z.nodeType==3?Z.nodeValue.length:Z.childNodes.length}function C3(Z,z){let X=Z.pmViewDesc;return X&&X.size==0&&(z<0||Z.nextSibling||Z.nodeName!="BR")}function f8(Z,z){return z<0?oG(Z):tG(Z)}function oG(Z){let z=Z.domSelectionRange(),X=z.focusNode,K=z.focusOffset;if(!X)return;let J,Q,Y=!1;if(i0&&X.nodeType==1&&K<VZ(X)&&C3(X.childNodes[K],-1))Y=!0;for(;;)if(K>0)if(X.nodeType!=1)break;else{let G=X.childNodes[K-1];if(C3(G,-1))J=X,Q=--K;else if(G.nodeType==3)X=G,K=X.nodeValue.length;else break}else if(Sz(X))break;else{let G=X.previousSibling;while(G&&C3(G,-1))J=X.parentNode,Q=V0(G),G=G.previousSibling;if(!G){if(X=X.parentNode,X==Z.dom)break;K=0}else X=G,K=VZ(X)}if(Y)V9(Z,X,K);else if(J)V9(Z,J,Q)}function tG(Z){let z=Z.domSelectionRange(),X=z.focusNode,K=z.focusOffset;if(!X)return;let J=VZ(X),Q,Y;for(;;)if(K<J){if(X.nodeType!=1)break;let G=X.childNodes[K];if(C3(G,1))Q=X,Y=++K;else break}else if(Sz(X))break;else{let G=X.nextSibling;while(G&&C3(G,1))Q=G.parentNode,Y=V0(G)+1,G=G.nextSibling;if(!G){if(X=X.parentNode,X==Z.dom)break;K=J=0}else X=G,K=0,J=VZ(X)}if(Q)V9(Z,Q,Y)}function Sz(Z){let z=Z.pmViewDesc;return z&&z.node&&z.node.isBlock}function eG(Z,z){while(Z&&z==Z.childNodes.length&&!N3(Z))z=V0(Z)+1,Z=Z.parentNode;while(Z&&z<Z.childNodes.length){let X=Z.childNodes[z];if(X.nodeType==3)return X;if(X.nodeType==1&&X.contentEditable=="false")break;Z=X,z=0}}function ZU(Z,z){while(Z&&!z&&!N3(Z))z=V0(Z),Z=Z.parentNode;while(Z&&z){let X=Z.childNodes[z-1];if(X.nodeType==3)return X;if(X.nodeType==1&&X.contentEditable=="false")break;Z=X,z=Z.childNodes.length}}function V9(Z,z,X){if(z.nodeType!=3){let Q,Y;if(Y=eG(z,X))z=Y,X=0;else if(Q=ZU(z,X))z=Q,X=Q.nodeValue.length}let K=Z.domSelection();if(!K)return;if(RZ(K)){let Q=document.createRange();Q.setEnd(z,X),Q.setStart(z,X),K.removeAllRanges(),K.addRange(Q)}else if(K.extend)K.extend(z,X);Z.domObserver.setCurSelection();let{state:J}=Z;setTimeout(()=>{if(Z.state==J)E5(Z)},50)}function d6(Z,z){let X=Z.state.doc.resolve(z);if(!(D0||CG)&&X.parent.inlineContent){let J=Z.coordsAtPos(z);if(z>X.start()){let Q=Z.coordsAtPos(z-1),Y=(Q.top+Q.bottom)/2;if(Y>J.top&&Y<J.bottom&&Math.abs(Q.left-J.left)>1)return Q.left<J.left?"ltr":"rtl"}if(z<X.end()){let Q=Z.coordsAtPos(z+1),Y=(Q.top+Q.bottom)/2;if(Y>J.top&&Y<J.bottom&&Math.abs(Q.left-J.left)>1)return Q.left>J.left?"ltr":"rtl"}}return getComputedStyle(Z.dom).direction=="rtl"?"rtl":"ltr"}function s6(Z,z,X){let K=Z.state.selection;if(K instanceof _&&!K.empty||X.indexOf("s")>-1)return!1;if(_0&&X.indexOf("m")>-1)return!1;let{$from:J,$to:Q}=K;if(!J.parent.inlineContent||Z.endOfTextblock(z<0?"up":"down")){let Y=A9(Z.state,z);if(Y&&Y instanceof w)return f5(Z,Y)}if(!J.parent.inlineContent){let Y=z<0?J:Q,G=K instanceof G0?$.near(Y,z):$.findFrom(Y,z);return G?f5(Z,G):!1}return!1}function n6(Z,z){if(!(Z.state.selection instanceof _))return!0;let{$head:X,$anchor:K,empty:J}=Z.state.selection;if(!X.sameParent(K))return!0;if(!J)return!1;if(Z.endOfTextblock(z>0?"forward":"backward"))return!0;let Q=!X.textOffset&&(z<0?X.nodeBefore:X.nodeAfter);if(Q&&!Q.isText){let Y=Z.state.tr;if(z<0)Y.delete(X.pos-Q.nodeSize,X.pos);else Y.delete(X.pos,X.pos+Q.nodeSize);return Z.dispatch(Y),!0}return!1}function a6(Z,z,X){Z.domObserver.stop(),z.contentEditable=X,Z.domObserver.start()}function zU(Z){if(!N0||Z.state.selection.$head.parentOffset>0)return!1;let{focusNode:z,focusOffset:X}=Z.domSelectionRange();if(z&&z.nodeType==1&&X==0&&z.firstChild&&z.firstChild.contentEditable=="false"){let K=z.firstChild;a6(Z,K,"true"),setTimeout(()=>a6(Z,K,"false"),20)}return!1}function XU(Z){let z="";if(Z.ctrlKey)z+="c";if(Z.metaKey)z+="m";if(Z.altKey)z+="a";if(Z.shiftKey)z+="s";return z}function KU(Z,z){let X=z.keyCode,K=XU(z);if(X==8||_0&&X==72&&K=="c")return n6(Z,-1)||f8(Z,-1);else if(X==46&&!z.shiftKey||_0&&X==68&&K=="c")return n6(Z,1)||f8(Z,1);else if(X==13||X==27)return!0;else if(X==37||_0&&X==66&&K=="c"){let J=X==37?d6(Z,Z.state.selection.from)=="ltr"?-1:1:-1;return i6(Z,J,K)||f8(Z,J)}else if(X==39||_0&&X==70&&K=="c"){let J=X==39?d6(Z,Z.state.selection.from)=="ltr"?1:-1:1;return i6(Z,J,K)||f8(Z,J)}else if(X==38||_0&&X==80&&K=="c")return s6(Z,-1,K)||f8(Z,-1);else if(X==40||_0&&X==78&&K=="c")return zU(Z)||s6(Z,1,K)||f8(Z,1);else if(K==(_0?"m":"c")&&(X==66||X==73||X==89||X==90))return!0;return!1}function P9(Z,z){Z.someProp("transformCopied",(j)=>{z=j(z,Z)});let X=[],{content:K,openStart:J,openEnd:Q}=z;while(J>1&&Q>1&&K.childCount==1&&K.firstChild.childCount==1){J--,Q--;let j=K.firstChild;X.push(j.type.name,j.attrs!=j.type.defaultAttrs?j.attrs:null),K=j.content}let Y=Z.someProp("clipboardSerializer")||y5.fromSchema(Z.state.schema),G=xz(),U=G.createElement("div");U.appendChild(Y.serializeFragment(K,{document:G}));let q=U.firstChild,A,V=0;while(q&&q.nodeType==1&&(A=yz[q.nodeName.toLowerCase()])){for(let j=A.length-1;j>=0;j--){let H=G.createElement(A[j]);while(U.firstChild)H.appendChild(U.firstChild);U.appendChild(H),V++}q=U.firstChild}if(q&&q.nodeType==1)q.setAttribute("data-pm-slice",`${J} ${Q}${V?` -${V}`:""} ${JSON.stringify(X)}`);let W=Z.someProp("clipboardTextSerializer",(j)=>j(z,Z))||z.content.textBetween(0,z.content.size,`

`);return{dom:U,text:W,slice:z}}function bz(Z,z,X,K,J){let Q=J.parent.type.spec.code,Y,G;if(!X&&!z)return null;let U=z&&(K||Q||!X);if(U){if(Z.someProp("transformPastedText",(W)=>{z=W(z,Q||K,Z)}),Q)return z?new S(L.from(Z.state.schema.text(z.replace(/\r\n?/g,`
`))),0,0):S.empty;let V=Z.someProp("clipboardTextParser",(W)=>W(z,J,K,Z));if(V)G=V;else{let W=J.marks(),{schema:j}=Z.state,H=y5.fromSchema(j);Y=document.createElement("div"),z.split(/(?:\r\n?|\n)+/).forEach((R)=>{let F=Y.appendChild(document.createElement("p"));if(R)F.appendChild(H.serializeNode(j.text(R,W)))})}}else if(Z.someProp("transformPastedHTML",(V)=>{X=V(X,Z)}),Y=GU(X),T3)UU(Y);let q=Y&&Y.querySelector("[data-pm-slice]"),A=q&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(q.getAttribute("data-pm-slice")||"");if(A&&A[3])for(let V=+A[3];V>0;V--){let W=Y.firstChild;while(W&&W.nodeType!=1)W=W.nextSibling;if(!W)break;Y=W}if(!G)G=(Z.someProp("clipboardParser")||Z.someProp("domParser")||Z5.fromSchema(Z.state.schema)).parseSlice(Y,{preserveWhitespace:!!(U||A),context:J,ruleFromNode(W){if(W.nodeName=="BR"&&!W.nextSibling&&W.parentNode&&!JU.test(W.parentNode.nodeName))return{ignore:!0};return null}});if(A)G=qU(r6(G,+A[1],+A[2]),A[4]);else if(G=S.maxOpen(QU(G.content,J),!0),G.openStart||G.openEnd){let V=0,W=0;for(let j=G.content.firstChild;V<G.openStart&&!j.type.spec.isolating;V++,j=j.firstChild);for(let j=G.content.lastChild;W<G.openEnd&&!j.type.spec.isolating;W++,j=j.lastChild);G=r6(G,V,W)}return Z.someProp("transformPasted",(V)=>{G=V(G,Z)}),G}var JU=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function QU(Z,z){if(Z.childCount<2)return Z;for(let X=z.depth;X>=0;X--){let J=z.node(X).contentMatchAt(z.index(X)),Q,Y=[];if(Z.forEach((G)=>{if(!Y)return;let U=J.findWrapping(G.type),q;if(!U)return Y=null;if(q=Y.length&&Q.length&&Nz(U,Q,G,Y[Y.length-1],0))Y[Y.length-1]=q;else{if(Y.length)Y[Y.length-1]=Tz(Y[Y.length-1],Q.length);let A=kz(G,U);Y.push(A),J=J.matchType(A.type),Q=U}}),Y)return L.from(Y)}return Z}function kz(Z,z,X=0){for(let K=z.length-1;K>=X;K--)Z=z[K].create(null,L.from(Z));return Z}function Nz(Z,z,X,K,J){if(J<Z.length&&J<z.length&&Z[J]==z[J]){let Q=Nz(Z,z,X,K.lastChild,J+1);if(Q)return K.copy(K.content.replaceChild(K.childCount-1,Q));if(K.contentMatchAt(K.childCount).matchType(J==Z.length-1?X.type:Z[J+1]))return K.copy(K.content.append(L.from(kz(X,Z,J+1))))}}function Tz(Z,z){if(z==0)return Z;let X=Z.content.replaceChild(Z.childCount-1,Tz(Z.lastChild,z-1)),K=Z.contentMatchAt(Z.childCount).fillBefore(L.empty,!0);return Z.copy(X.append(K))}function W9(Z,z,X,K,J,Q){let Y=z<0?Z.firstChild:Z.lastChild,G=Y.content;if(Z.childCount>1)Q=0;if(J<K-1)G=W9(G,z,X,K,J+1,Q);if(J>=X)G=z<0?Y.contentMatchAt(0).fillBefore(G,Q<=J).append(G):G.append(Y.contentMatchAt(Y.childCount).fillBefore(L.empty,!0));return Z.replaceChild(z<0?0:Z.childCount-1,Y.copy(G))}function r6(Z,z,X){if(z<Z.openStart)Z=new S(W9(Z.content,-1,z,Z.openStart,0,Z.openEnd),z,Z.openEnd);if(X<Z.openEnd)Z=new S(W9(Z.content,1,X,Z.openEnd,0,0),Z.openStart,X);return Z}var yz={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},o6=null;function xz(){return o6||(o6=document.implementation.createHTMLDocument("title"))}var z9=null;function YU(Z){let z=window.trustedTypes;if(!z)return Z;if(!z9)z9=z.defaultPolicy||z.createPolicy("ProseMirrorClipboard",{createHTML:(X)=>X});return z9.createHTML(Z)}function GU(Z){let z=/^(\s*<meta [^>]*>)*/.exec(Z);if(z)Z=Z.slice(z[0].length);let X=xz().createElement("div"),K=/<([a-z][^>\s]+)/i.exec(Z),J;if(J=K&&yz[K[1].toLowerCase()])Z=J.map((Q)=>"<"+Q+">").join("")+Z+J.map((Q)=>"</"+Q+">").reverse().join("");if(X.innerHTML=YU(Z),J)for(let Q=0;Q<J.length;Q++)X=X.querySelector(J[Q])||X;return X}function UU(Z){let z=Z.querySelectorAll(D0?"span:not([class]):not([style])":"span.Apple-converted-space");for(let X=0;X<z.length;X++){let K=z[X];if(K.childNodes.length==1&&K.textContent==" "&&K.parentNode)K.parentNode.replaceChild(Z.ownerDocument.createTextNode(" "),K)}}function qU(Z,z){if(!Z.size)return Z;let X=Z.content.firstChild.type.schema,K;try{K=JSON.parse(z)}catch(G){return Z}let{content:J,openStart:Q,openEnd:Y}=Z;for(let G=K.length-2;G>=0;G-=2){let U=X.nodes[K[G]];if(!U||U.hasRequiredAttrs())break;J=L.from(U.create(K[G+1],J)),Q++,Y++}return new S(J,Q,Y)}var T0={},y0={},AU={touchstart:!0,touchmove:!0};class gz{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-200000000,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function VU(Z){for(let z in T0){let X=T0[z];Z.dom.addEventListener(z,Z.input.eventHandlers[z]=(K)=>{if(HU(Z,K)&&!O9(Z,K)&&(Z.editable||!(K.type in y0)))X(Z,K)},AU[z]?{passive:!0}:void 0)}if(N0)Z.dom.addEventListener("input",()=>null);H9(Z)}function _5(Z,z){Z.input.lastSelectionOrigin=z,Z.input.lastSelectionTime=Date.now()}function WU(Z){Z.domObserver.stop();for(let z in Z.input.eventHandlers)Z.dom.removeEventListener(z,Z.input.eventHandlers[z]);clearTimeout(Z.input.composingTimeout),clearTimeout(Z.input.lastIOSEnterFallbackTimeout)}function H9(Z){Z.someProp("handleDOMEvents",(z)=>{for(let X in z)if(!Z.input.eventHandlers[X])Z.dom.addEventListener(X,Z.input.eventHandlers[X]=(K)=>O9(Z,K))})}function O9(Z,z){return Z.someProp("handleDOMEvents",(X)=>{let K=X[z.type];return K?K(Z,z)||z.defaultPrevented:!1})}function HU(Z,z){if(!z.bubbles)return!0;if(z.defaultPrevented)return!1;for(let X=z.target;X!=Z.dom;X=X.parentNode)if(!X||X.nodeType==11||X.pmViewDesc&&X.pmViewDesc.stopEvent(z))return!1;return!0}function jU(Z,z){if(!O9(Z,z)&&T0[z.type]&&(Z.editable||!(z.type in y0)))T0[z.type](Z,z)}y0.keydown=(Z,z)=>{let X=z;if(Z.input.shiftKey=X.keyCode==16||X.shiftKey,vz(Z,X))return;if(Z.input.lastKeyCode=X.keyCode,Z.input.lastKeyCodeTime=Date.now(),B5&&D0&&X.keyCode==13)return;if(X.keyCode!=229)Z.domObserver.forceFlush();if(l8&&X.keyCode==13&&!X.ctrlKey&&!X.altKey&&!X.metaKey){let K=Date.now();Z.input.lastIOSEnter=K,Z.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{if(Z.input.lastIOSEnter==K)Z.someProp("handleKeyDown",(J)=>J(Z,X8(13,"Enter"))),Z.input.lastIOSEnter=0},200)}else if(Z.someProp("handleKeyDown",(K)=>K(Z,X))||KU(Z,X))X.preventDefault();else _5(Z,"key")};y0.keyup=(Z,z)=>{if(z.keyCode==16)Z.input.shiftKey=!1};y0.keypress=(Z,z)=>{let X=z;if(vz(Z,X)||!X.charCode||X.ctrlKey&&!X.altKey||_0&&X.metaKey)return;if(Z.someProp("handleKeyPress",(J)=>J(Z,X))){X.preventDefault();return}let K=Z.state.selection;if(!(K instanceof _)||!K.$from.sameParent(K.$to)){let J=String.fromCharCode(X.charCode);if(!/[\r\n]/.test(J)&&!Z.someProp("handleTextInput",(Q)=>Q(Z,K.$from.pos,K.$to.pos,J)))Z.dispatch(Z.state.tr.insertText(J).scrollIntoView());X.preventDefault()}};function BZ(Z){return{left:Z.clientX,top:Z.clientY}}function RU(Z,z){let X=z.x-Z.clientX,K=z.y-Z.clientY;return X*X+K*K<100}function M9(Z,z,X,K,J){if(K==-1)return!1;let Q=Z.state.doc.resolve(K);for(let Y=Q.depth+1;Y>0;Y--)if(Z.someProp(z,(G)=>Y>Q.depth?G(Z,X,Q.nodeAfter,Q.before(Y),J,!0):G(Z,X,Q.node(Y),Q.before(Y),J,!1)))return!0;return!1}function _8(Z,z,X){if(!Z.focused)Z.focus();if(Z.state.selection.eq(z))return;let K=Z.state.tr.setSelection(z);if(X=="pointer")K.setMeta("pointer",!0);Z.dispatch(K)}function FU(Z,z){if(z==-1)return!1;let X=Z.state.doc.resolve(z),K=X.nodeAfter;if(K&&K.isAtom&&w.isSelectable(K))return _8(Z,new w(X),"pointer"),!0;return!1}function BU(Z,z){if(z==-1)return!1;let X=Z.state.selection,K,J;if(X instanceof w)K=X.node;let Q=Z.state.doc.resolve(z);for(let Y=Q.depth+1;Y>0;Y--){let G=Y>Q.depth?Q.nodeAfter:Q.node(Y);if(w.isSelectable(G)){if(K&&X.$from.depth>0&&Y>=X.$from.depth&&Q.before(X.$from.depth+1)==X.$from.pos)J=Q.before(X.$from.depth);else J=Q.before(Y);break}}if(J!=null)return _8(Z,w.create(Z.state.doc,J),"pointer"),!0;else return!1}function EU(Z,z,X,K,J){return M9(Z,"handleClickOn",z,X,K)||Z.someProp("handleClick",(Q)=>Q(Z,z,K))||(J?BU(Z,X):FU(Z,X))}function PU(Z,z,X,K){return M9(Z,"handleDoubleClickOn",z,X,K)||Z.someProp("handleDoubleClick",(J)=>J(Z,z,K))}function OU(Z,z,X,K){return M9(Z,"handleTripleClickOn",z,X,K)||Z.someProp("handleTripleClick",(J)=>J(Z,z,K))||MU(Z,X,K)}function MU(Z,z,X){if(X.button!=0)return!1;let K=Z.state.doc;if(z==-1){if(K.inlineContent)return _8(Z,_.create(K,0,K.content.size),"pointer"),!0;return!1}let J=K.resolve(z);for(let Q=J.depth+1;Q>0;Q--){let Y=Q>J.depth?J.nodeAfter:J.node(Q),G=J.before(Q);if(Y.inlineContent)_8(Z,_.create(K,G+1,G+1+Y.content.size),"pointer");else if(w.isSelectable(Y))_8(Z,w.create(K,G),"pointer");else continue;return!0}}function L9(Z){return WZ(Z)}var wz=_0?"metaKey":"ctrlKey";T0.mousedown=(Z,z)=>{let X=z;Z.input.shiftKey=X.shiftKey;let K=L9(Z),J=Date.now(),Q="singleClick";if(J-Z.input.lastClick.time<500&&RU(X,Z.input.lastClick)&&!X[wz]){if(Z.input.lastClick.type=="singleClick")Q="doubleClick";else if(Z.input.lastClick.type=="doubleClick")Q="tripleClick"}Z.input.lastClick={time:J,x:X.clientX,y:X.clientY,type:Q};let Y=Z.posAtCoords(BZ(X));if(!Y)return;if(Q=="singleClick"){if(Z.input.mouseDown)Z.input.mouseDown.done();Z.input.mouseDown=new uz(Z,Y,X,!!K)}else if((Q=="doubleClick"?PU:OU)(Z,Y.pos,Y.inside,X))X.preventDefault();else _5(Z,"pointer")};class uz{constructor(Z,z,X,K){this.view=Z,this.pos=z,this.event=X,this.flushed=K,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=Z.state.doc,this.selectNode=!!X[wz],this.allowDefault=X.shiftKey;let J,Q;if(z.inside>-1)J=Z.state.doc.nodeAt(z.inside),Q=z.inside;else{let q=Z.state.doc.resolve(z.pos);J=q.parent,Q=q.depth?q.before():0}let Y=K?null:X.target,G=Y?Z.docView.nearestDesc(Y,!0):null;this.target=G&&G.dom.nodeType==1?G.dom:null;let{selection:U}=Z.state;if(X.button==0&&J.type.spec.draggable&&J.type.spec.selectable!==!1||U instanceof w&&U.from<=Q&&U.to>Q)this.mightDrag={node:J,pos:Q,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&i0&&!this.target.hasAttribute("contentEditable"))};if(this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)){if(this.view.domObserver.stop(),this.mightDrag.addAttr)this.target.draggable=!0;if(this.mightDrag.setUneditable)setTimeout(()=>{if(this.view.input.mouseDown==this)this.target.setAttribute("contentEditable","false")},20);this.view.domObserver.start()}Z.root.addEventListener("mouseup",this.up=this.up.bind(this)),Z.root.addEventListener("mousemove",this.move=this.move.bind(this)),_5(Z,"pointer")}done(){if(this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target){if(this.view.domObserver.stop(),this.mightDrag.addAttr)this.target.removeAttribute("draggable");if(this.mightDrag.setUneditable)this.target.removeAttribute("contentEditable");this.view.domObserver.start()}if(this.delayedSelectionSync)setTimeout(()=>E5(this.view));this.view.input.mouseDown=null}up(Z){if(this.done(),!this.view.dom.contains(Z.target))return;let z=this.pos;if(this.view.state.doc!=this.startDoc)z=this.view.posAtCoords(BZ(Z));if(this.updateAllowDefault(Z),this.allowDefault||!z)_5(this.view,"pointer");else if(EU(this.view,z.pos,z.inside,Z,this.selectNode))Z.preventDefault();else if(Z.button==0&&(this.flushed||N0&&this.mightDrag&&!this.mightDrag.node.isAtom||D0&&!this.view.state.selection.visible&&Math.min(Math.abs(z.pos-this.view.state.selection.from),Math.abs(z.pos-this.view.state.selection.to))<=2))_8(this.view,$.near(this.view.state.doc.resolve(z.pos)),"pointer"),Z.preventDefault();else _5(this.view,"pointer")}move(Z){if(this.updateAllowDefault(Z),_5(this.view,"pointer"),Z.buttons==0)this.done()}updateAllowDefault(Z){if(!this.allowDefault&&(Math.abs(this.event.x-Z.clientX)>4||Math.abs(this.event.y-Z.clientY)>4))this.allowDefault=!0}}T0.touchstart=(Z)=>{Z.input.lastTouch=Date.now(),L9(Z),_5(Z,"pointer")};T0.touchmove=(Z)=>{Z.input.lastTouch=Date.now(),_5(Z,"pointer")};T0.contextmenu=(Z)=>L9(Z);function vz(Z,z){if(Z.composing)return!0;if(N0&&Math.abs(z.timeStamp-Z.input.compositionEndedAt)<500)return Z.input.compositionEndedAt=-200000000,!0;return!1}var LU=B5?5000:-1;y0.compositionstart=y0.compositionupdate=(Z)=>{if(!Z.composing){Z.domObserver.flush();let{state:z}=Z,X=z.selection.$to;if(z.selection instanceof _&&(z.storedMarks||!X.textOffset&&X.parentOffset&&X.nodeBefore.marks.some((K)=>K.type.spec.inclusive===!1)))Z.markCursor=Z.state.storedMarks||X.marks(),WZ(Z,!0),Z.markCursor=null;else if(WZ(Z,!z.selection.empty),i0&&z.selection.empty&&X.parentOffset&&!X.textOffset&&X.nodeBefore.marks.length){let K=Z.domSelectionRange();for(let{focusNode:J,focusOffset:Q}=K;J&&J.nodeType==1&&Q!=0;){let Y=Q<0?J.lastChild:J.childNodes[Q-1];if(!Y)break;if(Y.nodeType==3){let G=Z.domSelection();if(G)G.collapse(Y,Y.nodeValue.length);break}else J=Y,Q=-1}}Z.input.composing=!0}$z(Z,LU)};y0.compositionend=(Z,z)=>{if(Z.composing){if(Z.input.composing=!1,Z.input.compositionEndedAt=z.timeStamp,Z.input.compositionPendingChanges=Z.domObserver.pendingRecords().length?Z.input.compositionID:0,Z.input.compositionNode=null,Z.input.compositionPendingChanges)Promise.resolve().then(()=>Z.domObserver.flush());Z.input.compositionID++,$z(Z,20)}};function $z(Z,z){if(clearTimeout(Z.input.composingTimeout),z>-1)Z.input.composingTimeout=setTimeout(()=>WZ(Z),z)}function fz(Z){if(Z.composing)Z.input.composing=!1,Z.input.compositionEndedAt=DU();while(Z.input.compositionNodes.length>0)Z.input.compositionNodes.pop().markParentsDirty()}function IU(Z){let z=Z.domSelectionRange();if(!z.focusNode)return null;let X=OG(z.focusNode,z.focusOffset),K=MG(z.focusNode,z.focusOffset);if(X&&K&&X!=K){let J=K.pmViewDesc,Q=Z.domObserver.lastChangedTextNode;if(X==Q||K==Q)return Q;if(!J||!J.isText(K.nodeValue))return K;else if(Z.input.compositionNode==K){let Y=X.pmViewDesc;if(!(!Y||!Y.isText(X.nodeValue)))return K}}return X||K}function DU(){let Z=document.createEvent("Event");return Z.initEvent("event",!0,!0),Z.timeStamp}function WZ(Z,z=!1){if(B5&&Z.domObserver.flushingSoon>=0)return;if(Z.domObserver.forceFlush(),fz(Z),z||Z.docView&&Z.docView.dirty){let X=B9(Z);if(X&&!X.eq(Z.state.selection))Z.dispatch(Z.state.tr.setSelection(X));else if((Z.markCursor||z)&&!Z.state.selection.empty)Z.dispatch(Z.state.tr.deleteSelection());else Z.updateState(Z.state);return!0}return!1}function CU(Z,z){if(!Z.dom.parentNode)return;let X=Z.dom.parentNode.appendChild(document.createElement("div"));X.appendChild(z),X.style.cssText="position: fixed; left: -10000px; top: 10px";let K=getSelection(),J=document.createRange();J.selectNodeContents(z),Z.dom.blur(),K.removeAllRanges(),K.addRange(J),setTimeout(()=>{if(X.parentNode)X.parentNode.removeChild(X);Z.focus()},50)}var S3=w0&&m5<15||l8&&SG<604;T0.copy=y0.cut=(Z,z)=>{let X=z,K=Z.state.selection,J=X.type=="cut";if(K.empty)return;let Q=S3?null:X.clipboardData,Y=K.content(),{dom:G,text:U}=P9(Z,Y);if(Q)X.preventDefault(),Q.clearData(),Q.setData("text/html",G.innerHTML),Q.setData("text/plain",U);else CU(Z,G);if(J)Z.dispatch(Z.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function SU(Z){return Z.openStart==0&&Z.openEnd==0&&Z.content.childCount==1?Z.content.firstChild:null}function bU(Z,z){if(!Z.dom.parentNode)return;let X=Z.input.shiftKey||Z.state.selection.$from.parent.type.spec.code,K=Z.dom.parentNode.appendChild(document.createElement(X?"textarea":"div"));if(!X)K.contentEditable="true";K.style.cssText="position: fixed; left: -10000px; top: 10px",K.focus();let J=Z.input.shiftKey&&Z.input.lastKeyCode!=45;setTimeout(()=>{if(Z.focus(),K.parentNode)K.parentNode.removeChild(K);if(X)b3(Z,K.value,null,J,z);else b3(Z,K.textContent,K.innerHTML,J,z)},50)}function b3(Z,z,X,K,J){let Q=bz(Z,z,X,K,Z.state.selection.$from);if(Z.someProp("handlePaste",(U)=>U(Z,J,Q||S.empty)))return!0;if(!Q)return!1;let Y=SU(Q),G=Y?Z.state.tr.replaceSelectionWith(Y,K):Z.state.tr.replaceSelection(Q);return Z.dispatch(G.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function hz(Z){let z=Z.getData("text/plain")||Z.getData("Text");if(z)return z;let X=Z.getData("text/uri-list");return X?X.replace(/\r?\n/g," "):""}y0.paste=(Z,z)=>{let X=z;if(Z.composing&&!B5)return;let K=S3?null:X.clipboardData,J=Z.input.shiftKey&&Z.input.lastKeyCode!=45;if(K&&b3(Z,hz(K),K.getData("text/html"),J,X))X.preventDefault();else bU(Z,X)};class I9{constructor(Z,z,X){this.slice=Z,this.move=z,this.node=X}}var kU=_0?"altKey":"ctrlKey";function _z(Z,z){let X=Z.someProp("dragCopies",(K)=>!K(z));return X!=null?X:!z[kU]}T0.dragstart=(Z,z)=>{let X=z,K=Z.input.mouseDown;if(K)K.done();if(!X.dataTransfer)return;let J=Z.state.selection,Q=J.empty?null:Z.posAtCoords(BZ(X)),Y;if(Q&&Q.pos>=J.from&&Q.pos<=(J instanceof w?J.to-1:J.to));else if(K&&K.mightDrag)Y=w.create(Z.state.doc,K.mightDrag.pos);else if(X.target&&X.target.nodeType==1){let V=Z.docView.nearestDesc(X.target,!0);if(V&&V.node.type.spec.draggable&&V!=Z.docView)Y=w.create(Z.state.doc,V.posBefore)}let G=(Y||Z.state.selection).content(),{dom:U,text:q,slice:A}=P9(Z,G);if(!X.dataTransfer.files.length||!D0||Az>120)X.dataTransfer.clearData();if(X.dataTransfer.setData(S3?"Text":"text/html",U.innerHTML),X.dataTransfer.effectAllowed="copyMove",!S3)X.dataTransfer.setData("text/plain",q);Z.dragging=new I9(A,_z(Z,X),Y)};T0.dragend=(Z)=>{let z=Z.dragging;window.setTimeout(()=>{if(Z.dragging==z)Z.dragging=null},50)};y0.dragover=y0.dragenter=(Z,z)=>z.preventDefault();y0.drop=(Z,z)=>{let X=z,K=Z.dragging;if(Z.dragging=null,!X.dataTransfer)return;let J=Z.posAtCoords(BZ(X));if(!J)return;let Q=Z.state.doc.resolve(J.pos),Y=K&&K.slice;if(Y)Z.someProp("transformPasted",(H)=>{Y=H(Y,Z)});else Y=bz(Z,hz(X.dataTransfer),S3?null:X.dataTransfer.getData("text/html"),!1,Q);let G=!!(K&&_z(Z,X));if(Z.someProp("handleDrop",(H)=>H(Z,X,Y||S.empty,G))){X.preventDefault();return}if(!Y)return;X.preventDefault();let U=Y?R6(Z.state.doc,Q.pos,Y):Q.pos;if(U==null)U=Q.pos;let q=Z.state.tr;if(G){let{node:H}=K;if(H)H.replace(q);else q.deleteSelection()}let A=q.mapping.map(U),V=Y.openStart==0&&Y.openEnd==0&&Y.content.childCount==1,W=q.doc;if(V)q.replaceRangeWith(A,A,Y.content.firstChild);else q.replaceRange(A,A,Y);if(q.doc.eq(W))return;let j=q.doc.resolve(A);if(V&&w.isSelectable(Y.content.firstChild)&&j.nodeAfter&&j.nodeAfter.sameMarkup(Y.content.firstChild))q.setSelection(new w(j));else{let H=q.mapping.map(U);q.mapping.maps[q.mapping.maps.length-1].forEach((R,F,B,O)=>H=O),q.setSelection(E9(Z,j,q.doc.resolve(H)))}Z.focus(),Z.dispatch(q.setMeta("uiEvent","drop"))};T0.focus=(Z)=>{if(Z.input.lastFocus=Date.now(),!Z.focused)Z.domObserver.stop(),Z.dom.classList.add("ProseMirror-focused"),Z.domObserver.start(),Z.focused=!0,setTimeout(()=>{if(Z.docView&&Z.hasFocus()&&!Z.domObserver.currentSelection.eq(Z.domSelectionRange()))E5(Z)},20)};T0.blur=(Z,z)=>{let X=z;if(Z.focused){if(Z.domObserver.stop(),Z.dom.classList.remove("ProseMirror-focused"),Z.domObserver.start(),X.relatedTarget&&Z.dom.contains(X.relatedTarget))Z.domObserver.currentSelection.clear();Z.focused=!1}};T0.beforeinput=(Z,z)=>{if(D0&&B5&&z.inputType=="deleteContentBackward"){Z.domObserver.flushSoon();let{domChangeCount:K}=Z.input;setTimeout(()=>{if(Z.input.domChangeCount!=K)return;if(Z.dom.blur(),Z.focus(),Z.someProp("handleKeyDown",(Q)=>Q(Z,X8(8,"Backspace"))))return;let{$cursor:J}=Z.state.selection;if(J&&J.pos>0)Z.dispatch(Z.state.tr.delete(J.pos-1,J.pos).scrollIntoView())},50)}};for(let Z in y0)T0[Z]=y0[Z];function k3(Z,z){if(Z==z)return!0;for(let X in Z)if(Z[X]!==z[X])return!1;for(let X in z)if(!(X in Z))return!1;return!0}class HZ{constructor(Z,z){this.toDOM=Z,this.spec=z||Q8,this.side=this.spec.side||0}map(Z,z,X,K){let{pos:J,deleted:Q}=Z.mapResult(z.from+K,this.side<0?-1:1);return Q?null:new k0(J-X,J-X,this)}valid(){return!0}eq(Z){return this==Z||Z instanceof HZ&&(this.spec.key&&this.spec.key==Z.spec.key||this.toDOM==Z.toDOM&&k3(this.spec,Z.spec))}destroy(Z){if(this.spec.destroy)this.spec.destroy(Z)}}class c5{constructor(Z,z){this.attrs=Z,this.spec=z||Q8}map(Z,z,X,K){let J=Z.map(z.from+K,this.spec.inclusiveStart?-1:1)-X,Q=Z.map(z.to+K,this.spec.inclusiveEnd?1:-1)-X;return J>=Q?null:new k0(J,Q,this)}valid(Z,z){return z.from<z.to}eq(Z){return this==Z||Z instanceof c5&&k3(this.attrs,Z.attrs)&&k3(this.spec,Z.spec)}static is(Z){return Z.type instanceof c5}destroy(){}}class D9{constructor(Z,z){this.attrs=Z,this.spec=z||Q8}map(Z,z,X,K){let J=Z.mapResult(z.from+K,1);if(J.deleted)return null;let Q=Z.mapResult(z.to+K,-1);if(Q.deleted||Q.pos<=J.pos)return null;return new k0(J.pos-X,Q.pos-X,this)}valid(Z,z){let{index:X,offset:K}=Z.content.findIndex(z.from),J;return K==z.from&&!(J=Z.child(X)).isText&&K+J.nodeSize==z.to}eq(Z){return this==Z||Z instanceof D9&&k3(this.attrs,Z.attrs)&&k3(this.spec,Z.spec)}destroy(){}}class k0{constructor(Z,z,X){this.from=Z,this.to=z,this.type=X}copy(Z,z){return new k0(Z,z,this.type)}eq(Z,z=0){return this.type.eq(Z.type)&&this.from+z==Z.from&&this.to+z==Z.to}map(Z,z,X){return this.type.map(Z,this,z,X)}static widget(Z,z,X){return new k0(Z,Z,new HZ(z,X))}static inline(Z,z,X,K){return new k0(Z,z,new c5(X,K))}static node(Z,z,X,K){return new k0(Z,z,new D9(X,K))}get spec(){return this.type.spec}get inline(){return this.type instanceof c5}get widget(){return this.type instanceof HZ}}var h8=[],Q8={};class o{constructor(Z,z){this.local=Z.length?Z:h8,this.children=z.length?z:h8}static create(Z,z){return z.length?jZ(z,Z,0,Q8):I0}find(Z,z,X){let K=[];return this.findInner(Z==null?0:Z,z==null?1e9:z,K,0,X),K}findInner(Z,z,X,K,J){for(let Q=0;Q<this.local.length;Q++){let Y=this.local[Q];if(Y.from<=z&&Y.to>=Z&&(!J||J(Y.spec)))X.push(Y.copy(Y.from+K,Y.to+K))}for(let Q=0;Q<this.children.length;Q+=3)if(this.children[Q]<z&&this.children[Q+1]>Z){let Y=this.children[Q]+1;this.children[Q+2].findInner(Z-Y,z-Y,X,K+Y,J)}}map(Z,z,X){if(this==I0||Z.maps.length==0)return this;return this.mapInner(Z,z,0,0,X||Q8)}mapInner(Z,z,X,K,J){let Q;for(let Y=0;Y<this.local.length;Y++){let G=this.local[Y].map(Z,X,K);if(G&&G.type.valid(z,G))(Q||(Q=[])).push(G);else if(J.onRemove)J.onRemove(this.local[Y].spec)}if(this.children.length)return NU(this.children,Q||[],Z,z,X,K,J);else return Q?new o(Q.sort(Y8),h8):I0}add(Z,z){if(!z.length)return this;if(this==I0)return o.create(Z,z);return this.addInner(Z,z,0)}addInner(Z,z,X){let K,J=0;Z.forEach((Y,G)=>{let U=G+X,q;if(!(q=lz(z,Y,U)))return;if(!K)K=this.children.slice();while(J<K.length&&K[J]<G)J+=3;if(K[J]==G)K[J+2]=K[J+2].addInner(Y,q,U+1);else K.splice(J,0,G,G+Y.nodeSize,jZ(q,Y,U+1,Q8));J+=3});let Q=mz(J?cz(z):z,-X);for(let Y=0;Y<Q.length;Y++)if(!Q[Y].type.valid(Z,Q[Y]))Q.splice(Y--,1);return new o(Q.length?this.local.concat(Q).sort(Y8):this.local,K||this.children)}remove(Z){if(Z.length==0||this==I0)return this;return this.removeInner(Z,0)}removeInner(Z,z){let X=this.children,K=this.local;for(let J=0;J<X.length;J+=3){let Q,Y=X[J]+z,G=X[J+1]+z;for(let q=0,A;q<Z.length;q++)if(A=Z[q]){if(A.from>Y&&A.to<G)Z[q]=null,(Q||(Q=[])).push(A)}if(!Q)continue;if(X==this.children)X=this.children.slice();let U=X[J+2].removeInner(Q,Y+1);if(U!=I0)X[J+2]=U;else X.splice(J,3),J-=3}if(K.length){for(let J=0,Q;J<Z.length;J++)if(Q=Z[J]){for(let Y=0;Y<K.length;Y++)if(K[Y].eq(Q,z)){if(K==this.local)K=this.local.slice();K.splice(Y--,1)}}}if(X==this.children&&K==this.local)return this;return K.length||X.length?new o(K,X):I0}forChild(Z,z){if(this==I0)return this;if(z.isLeaf)return o.empty;let X,K;for(let Y=0;Y<this.children.length;Y+=3)if(this.children[Y]>=Z){if(this.children[Y]==Z)X=this.children[Y+2];break}let J=Z+1,Q=J+z.content.size;for(let Y=0;Y<this.local.length;Y++){let G=this.local[Y];if(G.from<Q&&G.to>J&&G.type instanceof c5){let U=Math.max(J,G.from)-J,q=Math.min(Q,G.to)-J;if(U<q)(K||(K=[])).push(G.copy(U,q))}}if(K){let Y=new o(K.sort(Y8),h8);return X?new h5([Y,X]):Y}return X||I0}eq(Z){if(this==Z)return!0;if(!(Z instanceof o)||this.local.length!=Z.local.length||this.children.length!=Z.children.length)return!1;for(let z=0;z<this.local.length;z++)if(!this.local[z].eq(Z.local[z]))return!1;for(let z=0;z<this.children.length;z+=3)if(this.children[z]!=Z.children[z]||this.children[z+1]!=Z.children[z+1]||!this.children[z+2].eq(Z.children[z+2]))return!1;return!0}locals(Z){return C9(this.localsInner(Z))}localsInner(Z){if(this==I0)return h8;if(Z.inlineContent||!this.local.some(c5.is))return this.local;let z=[];for(let X=0;X<this.local.length;X++)if(!(this.local[X].type instanceof c5))z.push(this.local[X]);return z}forEachSet(Z){Z(this)}}o.empty=new o([],[]);o.removeOverlap=C9;var I0=o.empty;class h5{constructor(Z){this.members=Z}map(Z,z){let X=this.members.map((K)=>K.map(Z,z,Q8));return h5.from(X)}forChild(Z,z){if(z.isLeaf)return o.empty;let X=[];for(let K=0;K<this.members.length;K++){let J=this.members[K].forChild(Z,z);if(J==I0)continue;if(J instanceof h5)X=X.concat(J.members);else X.push(J)}return h5.from(X)}eq(Z){if(!(Z instanceof h5)||Z.members.length!=this.members.length)return!1;for(let z=0;z<this.members.length;z++)if(!this.members[z].eq(Z.members[z]))return!1;return!0}locals(Z){let z,X=!0;for(let K=0;K<this.members.length;K++){let J=this.members[K].localsInner(Z);if(!J.length)continue;if(!z)z=J;else{if(X)z=z.slice(),X=!1;for(let Q=0;Q<J.length;Q++)z.push(J[Q])}}return z?C9(X?z:z.sort(Y8)):h8}static from(Z){switch(Z.length){case 0:return I0;case 1:return Z[0];default:return new h5(Z.every((z)=>z instanceof o)?Z:Z.reduce((z,X)=>z.concat(X instanceof o?X:X.members),[]))}}forEachSet(Z){for(let z=0;z<this.members.length;z++)this.members[z].forEachSet(Z)}}function NU(Z,z,X,K,J,Q,Y){let G=Z.slice();for(let q=0,A=Q;q<X.maps.length;q++){let V=0;X.maps[q].forEach((W,j,H,R)=>{let F=R-H-(j-W);for(let B=0;B<G.length;B+=3){let O=G[B+1];if(O<0||W>O+A-V)continue;let M=G[B]+A-V;if(j>=M)G[B+1]=W<=M?-2:-1;else if(W>=A&&F)G[B]+=F,G[B+1]+=F}V+=F}),A=X.maps[q].map(A,-1)}let U=!1;for(let q=0;q<G.length;q+=3)if(G[q+1]<0){if(G[q+1]==-2){U=!0,G[q+1]=-1;continue}let A=X.map(Z[q]+Q),V=A-J;if(V<0||V>=K.content.size){U=!0;continue}let W=X.map(Z[q+1]+Q,-1),j=W-J,{index:H,offset:R}=K.content.findIndex(V),F=K.maybeChild(H);if(F&&R==V&&R+F.nodeSize==j){let B=G[q+2].mapInner(X,F,A+1,Z[q]+Q+1,Y);if(B!=I0)G[q]=V,G[q+1]=j,G[q+2]=B;else G[q+1]=-2,U=!0}else U=!0}if(U){let q=TU(G,Z,z,X,J,Q,Y),A=jZ(q,K,0,Y);z=A.local;for(let V=0;V<G.length;V+=3)if(G[V+1]<0)G.splice(V,3),V-=3;for(let V=0,W=0;V<A.children.length;V+=3){let j=A.children[V];while(W<G.length&&G[W]<j)W+=3;G.splice(W,0,A.children[V],A.children[V+1],A.children[V+2])}}return new o(z.sort(Y8),G)}function mz(Z,z){if(!z||!Z.length)return Z;let X=[];for(let K=0;K<Z.length;K++){let J=Z[K];X.push(new k0(J.from+z,J.to+z,J.type))}return X}function TU(Z,z,X,K,J,Q,Y){function G(U,q){for(let A=0;A<U.local.length;A++){let V=U.local[A].map(K,J,q);if(V)X.push(V);else if(Y.onRemove)Y.onRemove(U.local[A].spec)}for(let A=0;A<U.children.length;A+=3)G(U.children[A+2],U.children[A]+q+1)}for(let U=0;U<Z.length;U+=3)if(Z[U+1]==-1)G(Z[U+2],z[U]+Q+1);return X}function lz(Z,z,X){if(z.isLeaf)return null;let K=X+z.nodeSize,J=null;for(let Q=0,Y;Q<Z.length;Q++)if((Y=Z[Q])&&Y.from>X&&Y.to<K)(J||(J=[])).push(Y),Z[Q]=null;return J}function cz(Z){let z=[];for(let X=0;X<Z.length;X++)if(Z[X]!=null)z.push(Z[X]);return z}function jZ(Z,z,X,K){let J=[],Q=!1;z.forEach((G,U)=>{let q=lz(Z,G,U+X);if(q){Q=!0;let A=jZ(q,G,X+U+1,K);if(A!=I0)J.push(U,U+G.nodeSize,A)}});let Y=mz(Q?cz(Z):Z,-X).sort(Y8);for(let G=0;G<Y.length;G++)if(!Y[G].type.valid(z,Y[G])){if(K.onRemove)K.onRemove(Y[G].spec);Y.splice(G--,1)}return Y.length||J.length?new o(Y,J):I0}function Y8(Z,z){return Z.from-z.from||Z.to-z.to}function C9(Z){let z=Z;for(let X=0;X<z.length-1;X++){let K=z[X];if(K.from!=K.to)for(let J=X+1;J<z.length;J++){let Q=z[J];if(Q.from==K.from){if(Q.to!=K.to){if(z==Z)z=Z.slice();z[J]=Q.copy(Q.from,K.to),t6(z,J+1,Q.copy(K.to,Q.to))}continue}else{if(Q.from<K.to){if(z==Z)z=Z.slice();z[X]=K.copy(K.from,Q.from),t6(z,J,K.copy(Q.from,K.to))}break}}}return z}function t6(Z,z,X){while(z<Z.length&&Y8(X,Z[z])>0)z++;Z.splice(z,0,X)}function X9(Z){let z=[];if(Z.someProp("decorations",(X)=>{let K=X(Z.state);if(K&&K!=I0)z.push(K)}),Z.cursorWrapper)z.push(o.create(Z.state.doc,[Z.cursorWrapper.deco]));return h5.from(z)}var yU={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},xU=w0&&m5<=11;class pz{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(Z){this.anchorNode=Z.anchorNode,this.anchorOffset=Z.anchorOffset,this.focusNode=Z.focusNode,this.focusOffset=Z.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(Z){return Z.anchorNode==this.anchorNode&&Z.anchorOffset==this.anchorOffset&&Z.focusNode==this.focusNode&&Z.focusOffset==this.focusOffset}}class iz{constructor(Z,z){if(this.view=Z,this.handleDOMChange=z,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new pz,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver((X)=>{for(let K=0;K<X.length;K++)this.queue.push(X[K]);if(w0&&m5<=11&&X.some((K)=>K.type=="childList"&&K.removedNodes.length||K.type=="characterData"&&K.oldValue.length>K.target.nodeValue.length))this.flushSoon();else this.flush()}),xU)this.onCharData=(X)=>{this.queue.push({target:X.target,type:"characterData",oldValue:X.prevValue}),this.flushSoon()};this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){if(this.flushingSoon<0)this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20)}forceFlush(){if(this.flushingSoon>-1)window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush()}start(){if(this.observer)this.observer.takeRecords(),this.observer.observe(this.view.dom,yU);if(this.onCharData)this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData);this.connectSelection()}stop(){if(this.observer){let Z=this.observer.takeRecords();if(Z.length){for(let z=0;z<Z.length;z++)this.queue.push(Z[z]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}if(this.onCharData)this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData);this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(!p6(this.view))return;if(this.suppressingSelectionUpdates)return E5(this.view);if(w0&&m5<=11&&!this.view.state.selection.empty){let Z=this.view.domSelectionRange();if(Z.focusNode&&G8(Z.focusNode,Z.focusOffset,Z.anchorNode,Z.anchorOffset))return this.flushSoon()}this.flush()}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(Z){if(!Z.focusNode)return!0;let z=new Set,X;for(let J=Z.focusNode;J;J=m8(J))z.add(J);for(let J=Z.anchorNode;J;J=m8(J))if(z.has(J)){X=J;break}let K=X&&this.view.docView.nearestDesc(X);if(K&&K.ignoreMutation({type:"selection",target:X.nodeType==3?X.parentNode:X}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let Z of this.observer.takeRecords())this.queue.push(Z);return this.queue}flush(){let{view:Z}=this;if(!Z.docView||this.flushingSoon>-1)return;let z=this.pendingRecords();if(z.length)this.queue=[];let X=Z.domSelectionRange(),K=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(X)&&p6(Z)&&!this.ignoreSelectionChange(X),J=-1,Q=-1,Y=!1,G=[];if(Z.editable)for(let q=0;q<z.length;q++){let A=this.registerMutation(z[q],G);if(A){if(J=J<0?A.from:Math.min(A.from,J),Q=Q<0?A.to:Math.max(A.to,Q),A.typeOver)Y=!0}}if(i0&&G.length){let q=G.filter((A)=>A.nodeName=="BR");if(q.length==2){let[A,V]=q;if(A.parentNode&&A.parentNode.parentNode==V.parentNode)V.remove();else A.remove()}else{let{focusNode:A}=this.currentSelection;for(let V of q){let W=V.parentNode;if(W&&W.nodeName=="LI"&&(!A||uU(Z,A)!=W))V.remove()}}}let U=null;if(J<0&&K&&Z.input.lastFocus>Date.now()-200&&Math.max(Z.input.lastTouch,Z.input.lastClick.time)<Date.now()-300&&RZ(X)&&(U=B9(Z))&&U.eq($.near(Z.state.doc.resolve(0),1)))Z.input.lastFocus=0,E5(Z),this.currentSelection.set(X),Z.scrollToSelection();else if(J>-1||K){if(J>-1)Z.docView.markDirty(J,Q),gU(Z);if(this.handleDOMChange(J,Q,Y,G),Z.docView&&Z.docView.dirty)Z.updateState(Z.state);else if(!this.currentSelection.eq(X))E5(Z);this.currentSelection.set(X)}}registerMutation(Z,z){if(z.indexOf(Z.target)>-1)return null;let X=this.view.docView.nearestDesc(Z.target);if(Z.type=="attributes"&&(X==this.view.docView||Z.attributeName=="contenteditable"||Z.attributeName=="style"&&!Z.oldValue&&!Z.target.getAttribute("style")))return null;if(!X||X.ignoreMutation(Z))return null;if(Z.type=="childList"){for(let q=0;q<Z.addedNodes.length;q++){let A=Z.addedNodes[q];if(z.push(A),A.nodeType==3)this.lastChangedTextNode=A}if(X.contentDOM&&X.contentDOM!=X.dom&&!X.contentDOM.contains(Z.target))return{from:X.posBefore,to:X.posAfter};let{previousSibling:K,nextSibling:J}=Z;if(w0&&m5<=11&&Z.addedNodes.length)for(let q=0;q<Z.addedNodes.length;q++){let{previousSibling:A,nextSibling:V}=Z.addedNodes[q];if(!A||Array.prototype.indexOf.call(Z.addedNodes,A)<0)K=A;if(!V||Array.prototype.indexOf.call(Z.addedNodes,V)<0)J=V}let Q=K&&K.parentNode==Z.target?V0(K)+1:0,Y=X.localPosFromDOM(Z.target,Q,-1),G=J&&J.parentNode==Z.target?V0(J):Z.target.childNodes.length,U=X.localPosFromDOM(Z.target,G,1);return{from:Y,to:U}}else if(Z.type=="attributes")return{from:X.posAtStart-X.border,to:X.posAtEnd+X.border};else return this.lastChangedTextNode=Z.target,{from:X.posAtStart,to:X.posAtEnd,typeOver:Z.target.nodeValue==Z.oldValue}}}var e6=new WeakMap,Zz=!1;function gU(Z){if(e6.has(Z))return;if(e6.set(Z,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(Z.dom).whiteSpace)!==-1){if(Z.requiresGeckoHackNode=i0,Zz)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Zz=!0}}function zz(Z,z){let{startContainer:X,startOffset:K,endContainer:J,endOffset:Q}=z,Y=Z.domAtPos(Z.state.selection.anchor);if(G8(Y.node,Y.offset,J,Q))[X,K,J,Q]=[J,Q,X,K];return{anchorNode:X,anchorOffset:K,focusNode:J,focusOffset:Q}}function wU(Z,z){if(z.getComposedRanges){let J=z.getComposedRanges(Z.root)[0];if(J)return zz(Z,J)}let X;function K(J){J.preventDefault(),J.stopImmediatePropagation(),X=J.getTargetRanges()[0]}return Z.dom.addEventListener("beforeinput",K,!0),document.execCommand("indent"),Z.dom.removeEventListener("beforeinput",K,!0),X?zz(Z,X):null}function uU(Z,z){for(let X=z.parentNode;X&&X!=Z.dom;X=X.parentNode){let K=Z.docView.nearestDesc(X,!0);if(K&&K.node.isBlock)return X}return null}function vU(Z,z,X){let{node:K,fromOffset:J,toOffset:Q,from:Y,to:G}=Z.docView.parseRange(z,X),U=Z.domSelectionRange(),q,A=U.anchorNode;if(A&&Z.dom.contains(A.nodeType==1?A:A.parentNode)){if(q=[{node:A,offset:U.anchorOffset}],!RZ(U))q.push({node:U.focusNode,offset:U.focusOffset})}if(D0&&Z.input.lastKeyCode===8)for(let F=Q;F>J;F--){let B=K.childNodes[F-1],O=B.pmViewDesc;if(B.nodeName=="BR"&&!O){Q=F;break}if(!O||O.size)break}let V=Z.state.doc,W=Z.someProp("domParser")||Z5.fromSchema(Z.state.schema),j=V.resolve(Y),H=null,R=W.parse(K,{topNode:j.parent,topMatch:j.parent.contentMatchAt(j.index()),topOpen:!0,from:J,to:Q,preserveWhitespace:j.parent.type.whitespace=="pre"?"full":!0,findPositions:q,ruleFromNode:$U,context:j});if(q&&q[0].pos!=null){let F=q[0].pos,B=q[1]&&q[1].pos;if(B==null)B=F;H={anchor:F+Y,head:B+Y}}return{doc:R,sel:H,from:Y,to:G}}function $U(Z){let z=Z.pmViewDesc;if(z)return z.parseRule();else if(Z.nodeName=="BR"&&Z.parentNode){if(N0&&/^(ul|ol)$/i.test(Z.parentNode.nodeName)){let X=document.createElement("div");return X.appendChild(document.createElement("li")),{skip:X}}else if(Z.parentNode.lastChild==Z||N0&&/^(tr|table)$/i.test(Z.parentNode.nodeName))return{ignore:!0}}else if(Z.nodeName=="IMG"&&Z.getAttribute("mark-placeholder"))return{ignore:!0};return null}var fU=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function hU(Z,z,X,K,J){let Q=Z.input.compositionPendingChanges||(Z.composing?Z.input.compositionID:0);if(Z.input.compositionPendingChanges=0,z<0){let T=Z.input.lastSelectionTime>Date.now()-50?Z.input.lastSelectionOrigin:null,c=B9(Z,T);if(c&&!Z.state.selection.eq(c)){if(D0&&B5&&Z.input.lastKeyCode===13&&Date.now()-100<Z.input.lastKeyCodeTime&&Z.someProp("handleKeyDown",(g0)=>g0(Z,X8(13,"Enter"))))return;let r=Z.state.tr.setSelection(c);if(T=="pointer")r.setMeta("pointer",!0);else if(T=="key")r.scrollIntoView();if(Q)r.setMeta("composition",Q);Z.dispatch(r)}return}let Y=Z.state.doc.resolve(z),G=Y.sharedDepth(X);z=Y.before(G+1),X=Z.state.doc.resolve(X).after(G+1);let U=Z.state.selection,q=vU(Z,z,X),A=Z.state.doc,V=A.slice(q.from,q.to),W,j;if(Z.input.lastKeyCode===8&&Date.now()-100<Z.input.lastKeyCodeTime)W=Z.state.selection.to,j="end";else W=Z.state.selection.from,j="start";Z.input.lastKeyCode=null;let H=lU(V.content,q.doc.content,q.from,W,j);if(H)Z.input.domChangeCount++;if((l8&&Z.input.lastIOSEnter>Date.now()-225||B5)&&J.some((T)=>T.nodeType==1&&!fU.test(T.nodeName))&&(!H||H.endA>=H.endB)&&Z.someProp("handleKeyDown",(T)=>T(Z,X8(13,"Enter")))){Z.input.lastIOSEnter=0;return}if(!H)if(K&&U instanceof _&&!U.empty&&U.$head.sameParent(U.$anchor)&&!Z.composing&&!(q.sel&&q.sel.anchor!=q.sel.head))H={start:U.from,endA:U.to,endB:U.to};else{if(q.sel){let T=Xz(Z,Z.state.doc,q.sel);if(T&&!T.eq(Z.state.selection)){let c=Z.state.tr.setSelection(T);if(Q)c.setMeta("composition",Q);Z.dispatch(c)}}return}if(Z.state.selection.from<Z.state.selection.to&&H.start==H.endB&&Z.state.selection instanceof _){if(H.start>Z.state.selection.from&&H.start<=Z.state.selection.from+2&&Z.state.selection.from>=q.from)H.start=Z.state.selection.from;else if(H.endA<Z.state.selection.to&&H.endA>=Z.state.selection.to-2&&Z.state.selection.to<=q.to)H.endB+=Z.state.selection.to-H.endA,H.endA=Z.state.selection.to}if(w0&&m5<=11&&H.endB==H.start+1&&H.endA==H.start&&H.start>q.from&&q.doc.textBetween(H.start-q.from-1,H.start-q.from+1)=="  ")H.start--,H.endA--,H.endB--;let R=q.doc.resolveNoCache(H.start-q.from),F=q.doc.resolveNoCache(H.endB-q.from),B=A.resolve(H.start),O=R.sameParent(F)&&R.parent.inlineContent&&B.end()>=H.endA,M;if((l8&&Z.input.lastIOSEnter>Date.now()-225&&(!O||J.some((T)=>T.nodeName=="DIV"||T.nodeName=="P"))||!O&&R.pos<q.doc.content.size&&(!R.sameParent(F)||!R.parent.inlineContent)&&!/\S/.test(q.doc.textBetween(R.pos,F.pos,"",""))&&(M=$.findFrom(q.doc.resolve(R.pos+1),1,!0))&&M.head>R.pos)&&Z.someProp("handleKeyDown",(T)=>T(Z,X8(13,"Enter")))){Z.input.lastIOSEnter=0;return}if(Z.state.selection.anchor>H.start&&mU(A,H.start,H.endA,R,F)&&Z.someProp("handleKeyDown",(T)=>T(Z,X8(8,"Backspace")))){if(B5&&D0)Z.domObserver.suppressSelectionUpdates();return}if(D0&&H.endB==H.start)Z.input.lastChromeDelete=Date.now();if(B5&&!O&&R.start()!=F.start()&&F.parentOffset==0&&R.depth==F.depth&&q.sel&&q.sel.anchor==q.sel.head&&q.sel.head==H.endA)H.endB-=2,F=q.doc.resolveNoCache(H.endB-q.from),setTimeout(()=>{Z.someProp("handleKeyDown",function(T){return T(Z,X8(13,"Enter"))})},20);let{start:I,endA:D}=H,b,x,u;if(O){if(R.pos==F.pos){if(w0&&m5<=11&&R.parentOffset==0)Z.domObserver.suppressSelectionUpdates(),setTimeout(()=>E5(Z),20);b=Z.state.tr.delete(I,D),x=A.resolve(H.start).marksAcross(A.resolve(H.endA))}else if(H.endA==H.endB&&(u=_U(R.parent.content.cut(R.parentOffset,F.parentOffset),B.parent.content.cut(B.parentOffset,H.endA-B.start()))))if(b=Z.state.tr,u.type=="add")b.addMark(I,D,u.mark);else b.removeMark(I,D,u.mark);else if(R.parent.child(R.index()).isText&&R.index()==F.index()-(F.textOffset?0:1)){let T=R.parent.textBetween(R.parentOffset,F.parentOffset);if(Z.someProp("handleTextInput",(c)=>c(Z,I,D,T)))return;b=Z.state.tr.insertText(T,I,D)}}if(!b)b=Z.state.tr.replace(I,D,q.doc.slice(H.start-q.from,H.endB-q.from));if(q.sel){let T=Xz(Z,b.doc,q.sel);if(T&&!(D0&&Z.composing&&T.empty&&(H.start!=H.endB||Z.input.lastChromeDelete<Date.now()-100)&&(T.head==I||T.head==b.mapping.map(D)-1)||w0&&T.empty&&T.head==I))b.setSelection(T)}if(x)b.ensureMarks(x);if(Q)b.setMeta("composition",Q);Z.dispatch(b.scrollIntoView())}function Xz(Z,z,X){if(Math.max(X.anchor,X.head)>z.content.size)return null;return E9(Z,z.resolve(X.anchor),z.resolve(X.head))}function _U(Z,z){let X=Z.firstChild.marks,K=z.firstChild.marks,J=X,Q=K,Y,G,U;for(let A=0;A<K.length;A++)J=K[A].removeFromSet(J);for(let A=0;A<X.length;A++)Q=X[A].removeFromSet(Q);if(J.length==1&&Q.length==0)G=J[0],Y="add",U=(A)=>A.mark(G.addToSet(A.marks));else if(J.length==0&&Q.length==1)G=Q[0],Y="remove",U=(A)=>A.mark(G.removeFromSet(A.marks));else return null;let q=[];for(let A=0;A<z.childCount;A++)q.push(U(z.child(A)));if(L.from(q).eq(Z))return{mark:G,type:Y}}function mU(Z,z,X,K,J){if(X-z<=J.pos-K.pos||K9(K,!0,!1)<J.pos)return!1;let Q=Z.resolve(z);if(!K.parent.isTextblock){let G=Q.nodeAfter;return G!=null&&X==z+G.nodeSize}if(Q.parentOffset<Q.parent.content.size||!Q.parent.isTextblock)return!1;let Y=Z.resolve(K9(Q,!0,!0));if(!Y.parent.isTextblock||Y.pos>X||K9(Y,!0,!1)<X)return!1;return K.parent.content.cut(K.parentOffset).eq(Y.parent.content)}function K9(Z,z,X){let K=Z.depth,J=z?Z.end():Z.pos;while(K>0&&(z||Z.indexAfter(K)==Z.node(K).childCount))K--,J++,z=!1;if(X){let Q=Z.node(K).maybeChild(Z.indexAfter(K));while(Q&&!Q.isLeaf)Q=Q.firstChild,J++}return J}function lU(Z,z,X,K,J){let Q=Z.findDiffStart(z,X);if(Q==null)return null;let{a:Y,b:G}=Z.findDiffEnd(z,X+Z.size,X+z.size);if(J=="end"){let U=Math.max(0,Q-Math.min(Y,G));K-=Y+U-Q}if(Y<Q&&Z.size<z.size){let U=K<=Q&&K>=Y?Q-K:0;if(Q-=U,Q&&Q<z.size&&Kz(z.textBetween(Q-1,Q+1)))Q+=U?1:-1;G=Q+(G-Y),Y=Q}else if(G<Q){let U=K<=Q&&K>=G?Q-K:0;if(Q-=U,Q&&Q<Z.size&&Kz(Z.textBetween(Q-1,Q+1)))Q+=U?1:-1;Y=Q+(Y-G),G=Q}return{start:Q,endA:Y,endB:G}}function Kz(Z){if(Z.length!=2)return!1;let z=Z.charCodeAt(0),X=Z.charCodeAt(1);return z>=56320&&z<=57343&&X>=55296&&X<=56319}class y3{constructor(Z,z){if(this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new gz,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=z,this.state=z.state,this.directPlugins=z.plugins||[],this.directPlugins.forEach(Uz),this.dispatch=this.dispatch.bind(this),this.dom=Z&&Z.mount||document.createElement("div"),Z){if(Z.appendChild)Z.appendChild(this.dom);else if(typeof Z=="function")Z(this.dom);else if(Z.mount)this.mounted=!0}this.editable=Yz(this),Qz(this),this.nodeViews=Gz(this),this.docView=f6(this.state.doc,Jz(this),X9(this),this.dom,this),this.domObserver=new iz(this,(X,K,J,Q)=>hU(this,X,K,J,Q)),this.domObserver.start(),VU(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let Z=this._props;this._props={};for(let z in Z)this._props[z]=Z[z];this._props.state=this.state}return this._props}update(Z){if(Z.handleDOMEvents!=this._props.handleDOMEvents)H9(this);let z=this._props;if(this._props=Z,Z.plugins)Z.plugins.forEach(Uz),this.directPlugins=Z.plugins;this.updateStateInner(Z.state,z)}setProps(Z){let z={};for(let X in this._props)z[X]=this._props[X];z.state=this.state;for(let X in Z)z[X]=Z[X];this.update(z)}updateState(Z){this.updateStateInner(Z,this._props)}updateStateInner(Z,z){var X;let K=this.state,J=!1,Q=!1;if(Z.storedMarks&&this.composing)fz(this),Q=!0;this.state=Z;let Y=K.plugins!=Z.plugins||this._props.plugins!=z.plugins;if(Y||this._props.plugins!=z.plugins||this._props.nodeViews!=z.nodeViews){let W=Gz(this);if(pU(W,this.nodeViews))this.nodeViews=W,J=!0}if(Y||z.handleDOMEvents!=this._props.handleDOMEvents)H9(this);this.editable=Yz(this),Qz(this);let G=X9(this),U=Jz(this),q=K.plugins!=Z.plugins&&!K.doc.eq(Z.doc)?"reset":Z.scrollToSelection>K.scrollToSelection?"to selection":"preserve",A=J||!this.docView.matchesNode(Z.doc,U,G);if(A||!Z.selection.eq(K.selection))Q=!0;let V=q=="preserve"&&Q&&this.dom.style.overflowAnchor==null&&NG(this);if(Q){this.domObserver.stop();let W=A&&(w0||D0)&&!this.composing&&!K.selection.empty&&!Z.selection.empty&&cU(K.selection,Z.selection);if(A){let j=D0?this.trackWrites=this.domSelectionRange().focusNode:null;if(this.composing)this.input.compositionNode=IU(this);if(J||!this.docView.update(Z.doc,U,G,this))this.docView.updateOuterDeco(U),this.docView.destroy(),this.docView=f6(Z.doc,U,G,this.dom,this);if(j&&!this.trackWrites)W=!0}if(W||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&rG(this)))E5(this,W);else Dz(this,Z.selection),this.domObserver.setCurSelection();this.domObserver.start()}if(this.updatePluginViews(K),((X=this.dragging)===null||X===void 0?void 0:X.node)&&!K.doc.eq(Z.doc))this.updateDraggedNode(this.dragging,K);if(q=="reset")this.dom.scrollTop=0;else if(q=="to selection")this.scrollToSelection();else if(V)TG(V)}scrollToSelection(){let Z=this.domSelectionRange().focusNode;if(!Z||!this.dom.contains(Z.nodeType==1?Z:Z.parentNode));else if(this.someProp("handleScrollToSelection",(z)=>z(this)));else if(this.state.selection instanceof w){let z=this.docView.domAfterPos(this.state.selection.from);if(z.nodeType==1)x6(this,z.getBoundingClientRect(),Z)}else x6(this,this.coordsAtPos(this.state.selection.head,1),Z)}destroyPluginViews(){let Z;while(Z=this.pluginViews.pop())if(Z.destroy)Z.destroy()}updatePluginViews(Z){if(!Z||Z.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let z=0;z<this.directPlugins.length;z++){let X=this.directPlugins[z];if(X.spec.view)this.pluginViews.push(X.spec.view(this))}for(let z=0;z<this.state.plugins.length;z++){let X=this.state.plugins[z];if(X.spec.view)this.pluginViews.push(X.spec.view(this))}}else for(let z=0;z<this.pluginViews.length;z++){let X=this.pluginViews[z];if(X.update)X.update(this,Z)}}updateDraggedNode(Z,z){let X=Z.node,K=-1;if(this.state.doc.nodeAt(X.from)==X.node)K=X.from;else{let J=X.from+(this.state.doc.content.size-z.doc.content.size);if((J>0&&this.state.doc.nodeAt(J))==X.node)K=J}this.dragging=new I9(Z.slice,Z.move,K<0?void 0:w.create(this.state.doc,K))}someProp(Z,z){let X=this._props&&this._props[Z],K;if(X!=null&&(K=z?z(X):X))return K;for(let Q=0;Q<this.directPlugins.length;Q++){let Y=this.directPlugins[Q].props[Z];if(Y!=null&&(K=z?z(Y):Y))return K}let J=this.state.plugins;if(J)for(let Q=0;Q<J.length;Q++){let Y=J[Q].props[Z];if(Y!=null&&(K=z?z(Y):Y))return K}}hasFocus(){if(w0){let Z=this.root.activeElement;if(Z==this.dom)return!0;if(!Z||!this.dom.contains(Z))return!1;while(Z&&this.dom!=Z&&this.dom.contains(Z)){if(Z.contentEditable=="false")return!1;Z=Z.parentElement}return!0}return this.root.activeElement==this.dom}focus(){if(this.domObserver.stop(),this.editable)yG(this.dom);E5(this),this.domObserver.start()}get root(){let Z=this._root;if(Z==null){for(let z=this.dom.parentNode;z;z=z.parentNode)if(z.nodeType==9||z.nodeType==11&&z.host){if(!z.getSelection)Object.getPrototypeOf(z).getSelection=()=>z.ownerDocument.getSelection();return this._root=z}}return Z||document}updateRoot(){this._root=null}posAtCoords(Z){return vG(this,Z)}coordsAtPos(Z,z=1){return Rz(this,Z,z)}domAtPos(Z,z=0){return this.docView.domFromPos(Z,z)}nodeDOM(Z){let z=this.docView.descAt(Z);return z?z.nodeDOM:null}posAtDOM(Z,z,X=-1){let K=this.docView.posFromDOM(Z,z,X);if(K==null)throw new RangeError("DOM position not inside the editor");return K}endOfTextblock(Z,z){return mG(this,z||this.state,Z)}pasteHTML(Z,z){return b3(this,"",Z,!1,z||new ClipboardEvent("paste"))}pasteText(Z,z){return b3(this,Z,null,!0,z||new ClipboardEvent("paste"))}serializeForClipboard(Z){return P9(this,Z)}destroy(){if(!this.docView)return;if(WU(this),this.destroyPluginViews(),this.mounted)this.docView.update(this.state.doc,[],X9(this),this),this.dom.textContent="";else if(this.dom.parentNode)this.dom.parentNode.removeChild(this.dom);this.docView.destroy(),this.docView=null,EG()}get isDestroyed(){return this.docView==null}dispatchEvent(Z){return jU(this,Z)}dispatch(Z){let z=this._props.dispatchTransaction;if(z)z.call(this,Z);else this.updateState(this.state.apply(Z))}domSelectionRange(){let Z=this.domSelection();if(!Z)return{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0};return N0&&this.root.nodeType===11&&IG(this.dom.ownerDocument)==this.dom&&wU(this,Z)||Z}domSelection(){return this.root.getSelection()}}function Jz(Z){let z=Object.create(null);if(z.class="ProseMirror",z.contenteditable=String(Z.editable),Z.someProp("attributes",(X)=>{if(typeof X=="function")X=X(Z.state);if(X){for(let K in X)if(K=="class")z.class+=" "+X[K];else if(K=="style")z.style=(z.style?z.style+";":"")+X[K];else if(!z[K]&&K!="contenteditable"&&K!="nodeName")z[K]=String(X[K])}}),!z.translate)z.translate="no";return[k0.node(0,Z.state.doc.content.size,z)]}function Qz(Z){if(Z.markCursor){let z=document.createElement("img");z.className="ProseMirror-separator",z.setAttribute("mark-placeholder","true"),z.setAttribute("alt",""),Z.cursorWrapper={dom:z,deco:k0.widget(Z.state.selection.from,z,{raw:!0,marks:Z.markCursor})}}else Z.cursorWrapper=null}function Yz(Z){return!Z.someProp("editable",(z)=>z(Z.state)===!1)}function cU(Z,z){let X=Math.min(Z.$anchor.sharedDepth(Z.head),z.$anchor.sharedDepth(z.head));return Z.$anchor.start(X)!=z.$anchor.start(X)}function Gz(Z){let z=Object.create(null);function X(K){for(let J in K)if(!Object.prototype.hasOwnProperty.call(z,J))z[J]=K[J]}return Z.someProp("nodeViews",X),Z.someProp("markViews",X),z}function pU(Z,z){let X=0,K=0;for(let J in Z){if(Z[J]!=z[J])return!0;X++}for(let J in z)K++;return X!=K}function Uz(Z){if(Z.spec.state||Z.spec.filterTransaction||Z.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var P5={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},EZ={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},iU=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),dU=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(s=0;s<10;s++)P5[48+s]=P5[96+s]=String(s);var s;for(s=1;s<=24;s++)P5[s+111]="F"+s;var s;for(s=65;s<=90;s++)P5[s]=String.fromCharCode(s+32),EZ[s]=String.fromCharCode(s);var s;for(x3 in P5)if(!EZ.hasOwnProperty(x3))EZ[x3]=P5[x3];var x3;function dz(Z){var z=iU&&Z.metaKey&&Z.shiftKey&&!Z.ctrlKey&&!Z.altKey||dU&&Z.shiftKey&&Z.key&&Z.key.length==1||Z.key=="Unidentified",X=!z&&Z.key||(Z.shiftKey?EZ:P5)[Z.keyCode]||Z.key||"Unidentified";if(X=="Esc")X="Escape";if(X=="Del")X="Delete";if(X=="Left")X="ArrowLeft";if(X=="Up")X="ArrowUp";if(X=="Right")X="ArrowRight";if(X=="Down")X="ArrowDown";return X}var sU=typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function nU(Z){let z=Z.split(/-(?!$)/),X=z[z.length-1];if(X=="Space")X=" ";let K,J,Q,Y;for(let G=0;G<z.length-1;G++){let U=z[G];if(/^(cmd|meta|m)$/i.test(U))Y=!0;else if(/^a(lt)?$/i.test(U))K=!0;else if(/^(c|ctrl|control)$/i.test(U))J=!0;else if(/^s(hift)?$/i.test(U))Q=!0;else if(/^mod$/i.test(U))if(sU)Y=!0;else J=!0;else throw new Error("Unrecognized modifier name: "+U)}if(K)X="Alt-"+X;if(J)X="Ctrl-"+X;if(Y)X="Meta-"+X;if(Q)X="Shift-"+X;return X}function aU(Z){let z=Object.create(null);for(let X in Z)z[nU(X)]=Z[X];return z}function S9(Z,z,X=!0){if(z.altKey)Z="Alt-"+Z;if(z.ctrlKey)Z="Ctrl-"+Z;if(z.metaKey)Z="Meta-"+Z;if(X&&z.shiftKey)Z="Shift-"+Z;return Z}function p8(Z){return new X0({props:{handleKeyDown:rU(Z)}})}function rU(Z){let z=aU(Z);return function(X,K){let J=dz(K),Q,Y=z[S9(J,K)];if(Y&&Y(X.state,X.dispatch,X))return!0;if(J.length==1&&J!=" "){if(K.shiftKey){let G=z[S9(J,K,!1)];if(G&&G(X.state,X.dispatch,X))return!0}if((K.shiftKey||K.altKey||K.metaKey||J.charCodeAt(0)>127)&&(Q=P5[K.keyCode])&&Q!=J){let G=z[S9(Q,K)];if(G&&G(X.state,X.dispatch,X))return!0}}return!1}}var PZ=(Z,z)=>{if(Z.selection.empty)return!1;if(z)z(Z.tr.deleteSelection().scrollIntoView());return!0};function oU(Z,z){let{$cursor:X}=Z.selection;if(!X||(z?!z.endOfTextblock("backward",Z):X.parentOffset>0))return null;return X}var tU=(Z,z,X)=>{let K=oU(Z,X);if(!K)return!1;let J=nz(K);if(!J){let Y=K.blockRange(),G=Y&&w8(Y);if(G==null)return!1;if(z)z(Z.tr.lift(Y,G).scrollIntoView());return!0}let Q=J.nodeBefore;if(rz(Z,J,z,-1))return!0;if(K.parent.content.size==0&&(i8(Q,"end")||w.isSelectable(Q)))for(let Y=K.depth;;Y--){let G=YZ(Z.doc,K.before(Y),K.after(Y),S.empty);if(G&&G.slice.size<G.to-G.from){if(z){let U=Z.tr.step(G);U.setSelection(i8(Q,"end")?$.findFrom(U.doc.resolve(U.mapping.map(J.pos,-1)),-1):w.create(U.doc,J.pos-Q.nodeSize)),z(U.scrollIntoView())}return!0}if(Y==1||K.node(Y-1).childCount>1)break}if(Q.isAtom&&J.depth==K.depth-1){if(z)z(Z.tr.delete(J.pos-Q.nodeSize,J.pos).scrollIntoView());return!0}return!1};function i8(Z,z,X=!1){for(let K=Z;K;K=z=="start"?K.firstChild:K.lastChild){if(K.isTextblock)return!0;if(X&&K.childCount!=1)return!1}return!1}var eU=(Z,z,X)=>{let{$head:K,empty:J}=Z.selection,Q=K;if(!J)return!1;if(K.parent.isTextblock){if(X?!X.endOfTextblock("backward",Z):K.parentOffset>0)return!1;Q=nz(K)}let Y=Q&&Q.nodeBefore;if(!Y||!w.isSelectable(Y))return!1;if(z)z(Z.tr.setSelection(w.create(Z.doc,Q.pos-Y.nodeSize)).scrollIntoView());return!0};function nz(Z){if(!Z.parent.type.spec.isolating)for(let z=Z.depth-1;z>=0;z--){if(Z.index(z)>0)return Z.doc.resolve(Z.before(z+1));if(Z.node(z).type.spec.isolating)break}return null}function Zq(Z,z){let{$cursor:X}=Z.selection;if(!X||(z?!z.endOfTextblock("forward",Z):X.parentOffset<X.parent.content.size))return null;return X}var k9=(Z,z,X)=>{let K=Zq(Z,X);if(!K)return!1;let J=az(K);if(!J)return!1;let Q=J.nodeAfter;if(rz(Z,J,z,1))return!0;if(K.parent.content.size==0&&(i8(Q,"start")||w.isSelectable(Q))){let Y=YZ(Z.doc,K.before(),K.after(),S.empty);if(Y&&Y.slice.size<Y.to-Y.from){if(z){let G=Z.tr.step(Y);G.setSelection(i8(Q,"start")?$.findFrom(G.doc.resolve(G.mapping.map(J.pos)),1):w.create(G.doc,G.mapping.map(J.pos))),z(G.scrollIntoView())}return!0}}if(Q.isAtom&&J.depth==K.depth-1){if(z)z(Z.tr.delete(J.pos,J.pos+Q.nodeSize).scrollIntoView());return!0}return!1},zq=(Z,z,X)=>{let{$head:K,empty:J}=Z.selection,Q=K;if(!J)return!1;if(K.parent.isTextblock){if(X?!X.endOfTextblock("forward",Z):K.parentOffset<K.parent.content.size)return!1;Q=az(K)}let Y=Q&&Q.nodeAfter;if(!Y||!w.isSelectable(Y))return!1;if(z)z(Z.tr.setSelection(w.create(Z.doc,Q.pos)).scrollIntoView());return!0};function az(Z){if(!Z.parent.type.spec.isolating)for(let z=Z.depth-1;z>=0;z--){let X=Z.node(z);if(Z.index(z)+1<X.childCount)return Z.doc.resolve(Z.after(z+1));if(X.type.spec.isolating)break}return null}var N9=(Z,z)=>{let{$head:X,$anchor:K}=Z.selection;if(!X.parent.type.spec.code||!X.sameParent(K))return!1;if(z)z(Z.tr.insertText(`
`).scrollIntoView());return!0};function T9(Z){for(let z=0;z<Z.edgeCount;z++){let{type:X}=Z.edge(z);if(X.isTextblock&&!X.hasRequiredAttrs())return X}return null}var OZ=(Z,z)=>{let{$head:X,$anchor:K}=Z.selection;if(!X.parent.type.spec.code||!X.sameParent(K))return!1;let J=X.node(-1),Q=X.indexAfter(-1),Y=T9(J.contentMatchAt(Q));if(!Y||!J.canReplaceWith(Q,Q,Y))return!1;if(z){let G=X.after(),U=Z.tr.replaceWith(G,G,Y.createAndFill());U.setSelection($.near(U.doc.resolve(G),1)),z(U.scrollIntoView())}return!0},Xq=(Z,z)=>{let X=Z.selection,{$from:K,$to:J}=X;if(X instanceof G0||K.parent.inlineContent||J.parent.inlineContent)return!1;let Q=T9(J.parent.contentMatchAt(J.indexAfter()));if(!Q||!Q.isTextblock)return!1;if(z){let Y=(!K.parentOffset&&J.index()<J.parent.childCount?K:J).pos,G=Z.tr.insert(Y,Q.createAndFill());G.setSelection(_.create(G.doc,Y+1)),z(G.scrollIntoView())}return!0},Kq=(Z,z)=>{let{$cursor:X}=Z.selection;if(!X||X.parent.content.size)return!1;if(X.depth>1&&X.after()!=X.end(-1)){let Q=X.before();if(w5(Z.doc,Q)){if(z)z(Z.tr.split(Q).scrollIntoView());return!0}}let K=X.blockRange(),J=K&&w8(K);if(J==null)return!1;if(z)z(Z.tr.lift(K,J).scrollIntoView());return!0};function Jq(Z){return(z,X)=>{let{$from:K,$to:J}=z.selection;if(z.selection instanceof w&&z.selection.node.isBlock){if(!K.parentOffset||!w5(z.doc,K.pos))return!1;if(X)X(z.tr.split(K.pos).scrollIntoView());return!0}if(!K.depth)return!1;let Q=[],Y,G,U=!1,q=!1;for(let j=K.depth;;j--)if(K.node(j).isBlock){U=K.end(j)==K.pos+(K.depth-j),q=K.start(j)==K.pos-(K.depth-j),G=T9(K.node(j-1).contentMatchAt(K.indexAfter(j-1)));let R=Z&&Z(J.parent,U,K);Q.unshift(R||(U&&G?{type:G}:null)),Y=j;break}else{if(j==1)return!1;Q.unshift(null)}let A=z.tr;if(z.selection instanceof _||z.selection instanceof G0)A.deleteSelection();let V=A.mapping.map(K.pos),W=w5(A.doc,V,Q.length,Q);if(!W)Q[0]=G?{type:G}:null,W=w5(A.doc,V,Q.length,Q);if(!W)return!1;if(A.split(V,Q.length,Q),!U&&q&&K.node(Y).type!=G){let j=A.mapping.map(K.before(Y)),H=A.doc.resolve(j);if(G&&K.node(Y-1).canReplaceWith(H.index(),H.index()+1,G))A.setNodeMarkup(A.mapping.map(K.before(Y)),G)}if(X)X(A.scrollIntoView());return!0}}var Qq=Jq();var y9=(Z,z)=>{if(z)z(Z.tr.setSelection(new G0(Z.doc)));return!0};function Yq(Z,z,X){let{nodeBefore:K,nodeAfter:J}=z,Q=z.index();if(!K||!J||!K.type.compatibleContent(J.type))return!1;if(!K.content.size&&z.parent.canReplace(Q-1,Q)){if(X)X(Z.tr.delete(z.pos-K.nodeSize,z.pos).scrollIntoView());return!0}if(!z.parent.canReplace(Q,Q+1)||!(J.isTextblock||n1(Z.doc,z.pos)))return!1;if(X)X(Z.tr.join(z.pos).scrollIntoView());return!0}function rz(Z,z,X,K){let{nodeBefore:J,nodeAfter:Q}=z,Y,G,U=J.type.spec.isolating||Q.type.spec.isolating;if(!U&&Yq(Z,z,X))return!0;let q=!U&&z.parent.canReplace(z.index(),z.index()+1);if(q&&(Y=(G=J.contentMatchAt(J.childCount)).findWrapping(Q.type))&&G.matchType(Y[0]||Q.type).validEnd){if(X){let j=z.pos+Q.nodeSize,H=L.empty;for(let B=Y.length-1;B>=0;B--)H=L.from(Y[B].create(null,H));H=L.from(J.copy(H));let R=Z.tr.step(new t(z.pos-1,j,z.pos,j,new S(H,1,0),Y.length,!0)),F=R.doc.resolve(j+2*Y.length);if(F.nodeAfter&&F.nodeAfter.type==J.type&&n1(R.doc,F.pos))R.join(F.pos);X(R.scrollIntoView())}return!0}let A=Q.type.spec.isolating||K>0&&U?null:$.findFrom(z,1),V=A&&A.$from.blockRange(A.$to),W=V&&w8(V);if(W!=null&&W>=z.depth){if(X)X(Z.tr.lift(V,W).scrollIntoView());return!0}if(q&&i8(Q,"start",!0)&&i8(J,"end")){let j=J,H=[];for(;;){if(H.push(j),j.isTextblock)break;j=j.lastChild}let R=Q,F=1;for(;!R.isTextblock;R=R.firstChild)F++;if(j.canReplace(j.childCount,j.childCount,R.content)){if(X){let B=L.empty;for(let M=H.length-1;M>=0;M--)B=L.from(H[M].copy(B));let O=Z.tr.step(new t(z.pos-H.length,z.pos+Q.nodeSize,z.pos+F,z.pos+Q.nodeSize-F,new S(B,H.length,0),0,!0));X(O.scrollIntoView())}return!0}}return!1}function oz(Z){return function(z,X){let K=z.selection,J=Z<0?K.$from:K.$to,Q=J.depth;while(J.node(Q).isInline){if(!Q)return!1;Q--}if(!J.node(Q).isTextblock)return!1;if(X)X(z.tr.setSelection(_.create(z.doc,Z<0?J.start(Q):J.end(Q))));return!0}}var Gq=oz(-1),Uq=oz(1);function tz(Z,z=null){return function(X,K){let{$from:J,$to:Q}=X.selection,Y=J.blockRange(Q),G=Y&&W6(Y,Z,z);if(!G)return!1;if(K)K(X.tr.wrap(Y,G).scrollIntoView());return!0}}function MZ(Z,z=null){return function(X,K){let J=!1;for(let Q=0;Q<X.selection.ranges.length&&!J;Q++){let{$from:{pos:Y},$to:{pos:G}}=X.selection.ranges[Q];X.doc.nodesBetween(Y,G,(U,q)=>{if(J)return!1;if(!U.isTextblock||U.hasMarkup(Z,z))return;if(U.type==Z)J=!0;else{let A=X.doc.resolve(q),V=A.index();J=A.parent.canReplaceWith(V,V+1,Z)}})}if(!J)return!1;if(K){let Q=X.tr;for(let Y=0;Y<X.selection.ranges.length;Y++){let{$from:{pos:G},$to:{pos:U}}=X.selection.ranges[Y];Q.setBlockType(G,U,Z,z)}K(Q.scrollIntoView())}return!0}}function qq(Z,z,X,K){for(let J=0;J<z.length;J++){let{$from:Q,$to:Y}=z[J],G=Q.depth==0?Z.inlineContent&&Z.type.allowsMarkType(X):!1;if(Z.nodesBetween(Q.pos,Y.pos,(U,q)=>{if(G||!K&&U.isAtom&&U.isInline&&q>=Q.pos&&q+U.nodeSize<=Y.pos)return!1;G=U.inlineContent&&U.type.allowsMarkType(X)}),G)return!0}return!1}function Aq(Z){let z=[];for(let X=0;X<Z.length;X++){let{$from:K,$to:J}=Z[X];if(K.doc.nodesBetween(K.pos,J.pos,(Q,Y)=>{if(Q.isAtom&&Q.content.size&&Q.isInline&&Y>=K.pos&&Y+Q.nodeSize<=J.pos){if(Y+1>K.pos)z.push(new z8(K,K.doc.resolve(Y+1)));return K=K.doc.resolve(Y+1+Q.content.size),!1}}),K.pos<J.pos)z.push(new z8(K,J))}return z}function d8(Z,z=null,X){let K=(X&&X.removeWhenPresent)!==!1,J=(X&&X.enterInlineAtoms)!==!1,Q=!(X&&X.includeWhitespace);return function(Y,G){let{empty:U,$cursor:q,ranges:A}=Y.selection;if(U&&!q||!qq(Y.doc,A,Z,J))return!1;if(G)if(q)if(Z.isInSet(Y.storedMarks||q.marks()))G(Y.tr.removeStoredMark(Z));else G(Y.tr.addStoredMark(Z.create(z)));else{let V,W=Y.tr;if(!J)A=Aq(A);if(K)V=!A.some((j)=>Y.doc.rangeHasMark(j.$from.pos,j.$to.pos,Z));else V=!A.every((j)=>{let H=!1;return W.doc.nodesBetween(j.$from.pos,j.$to.pos,(R,F,B)=>{if(H)return!1;H=!Z.isInSet(R.marks)&&!!B&&B.type.allowsMarkType(Z)&&!(R.isText&&/^\s*$/.test(R.textBetween(Math.max(0,j.$from.pos-F),Math.min(R.nodeSize,j.$to.pos-F))))}),!H});for(let j=0;j<A.length;j++){let{$from:H,$to:R}=A[j];if(!V)W.removeMark(H.pos,R.pos,Z);else{let F=H.pos,B=R.pos,O=H.nodeAfter,M=R.nodeBefore,I=Q&&O&&O.isText?/^\s*/.exec(O.text)[0].length:0,D=Q&&M&&M.isText?/\s*$/.exec(M.text)[0].length:0;if(F+I<B)F+=I,B-=D;W.addMark(F,B,Z.create(z))}}G(W.scrollIntoView())}return!0}}function g3(...Z){return function(z,X,K){for(let J=0;J<Z.length;J++)if(Z[J](z,X,K))return!0;return!1}}var b9=g3(PZ,tU,eU),sz=g3(PZ,k9,zq),O5={Enter:g3(N9,Xq,Kq,Qq),"Mod-Enter":OZ,Backspace:b9,"Mod-Backspace":b9,"Shift-Backspace":b9,Delete:sz,"Mod-Delete":sz,"Mod-a":y9},ez={"Ctrl-h":O5.Backspace,"Alt-Backspace":O5["Mod-Backspace"],"Ctrl-d":O5.Delete,"Ctrl-Alt-Backspace":O5["Mod-Delete"],"Alt-Delete":O5["Mod-Delete"],"Alt-d":O5["Mod-Delete"],"Ctrl-a":Gq,"Ctrl-e":Uq};for(let Z in O5)ez[Z]=O5[Z];var Vq=typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os!="undefined"&&os.platform?os.platform()=="darwin":!1,x9=Vq?ez:O5;class J5{constructor(Z,z,X={}){this.match=Z,this.match=Z,this.handler=typeof z=="string"?Wq(z):z,this.undoable=X.undoable!==!1,this.inCode=X.inCode||!1,this.inCodeMark=X.inCodeMark!==!1}}function Wq(Z){return function(z,X,K,J){let Q=Z;if(X[1]){let Y=X[0].lastIndexOf(X[1]);Q+=X[0].slice(Y+X[1].length),K+=Y;let G=K-J;if(G>0)Q=X[0].slice(Y-G,Y)+Q,K=J}return z.tr.insertText(Q,K,J)}}var Hq=500;function g9({rules:Z}){let z=new X0({state:{init(){return null},apply(X,K){let J=X.getMeta(this);if(J)return J;return X.selectionSet||X.docChanged?null:K}},props:{handleTextInput(X,K,J,Q){return ZX(X,K,J,Q,Z,z)},handleDOMEvents:{compositionend:(X)=>{setTimeout(()=>{let{$cursor:K}=X.state.selection;if(K)ZX(X,K.pos,K.pos,"",Z,z)})}}},isInputRules:!0});return z}function ZX(Z,z,X,K,J,Q){if(Z.composing)return!1;let Y=Z.state,G=Y.doc.resolve(z),U=G.parent.textBetween(Math.max(0,G.parentOffset-Hq),G.parentOffset,null,"￼")+K;for(let q=0;q<J.length;q++){let A=J[q];if(!A.inCodeMark&&G.marks().some((j)=>j.type.spec.code))continue;if(G.parent.type.spec.code){if(!A.inCode)continue}else if(A.inCode==="only")continue;let V=A.match.exec(U),W=V&&V[0].length>=K.length&&A.handler(Y,V,z-(V[0].length-K.length),X);if(!W)continue;if(A.undoable)W.setMeta(Q,{transform:W,from:z,to:X,text:K});return Z.dispatch(W),!0}return!1}var zX=(Z,z)=>{let X=Z.plugins;for(let K=0;K<X.length;K++){let J=X[K],Q;if(J.spec.isInputRules&&(Q=J.getState(Z))){if(z){let Y=Z.tr,G=Q.transform;for(let U=G.steps.length-1;U>=0;U--)Y.step(G.steps[U].invert(G.docs[U]));if(Q.text){let U=Y.doc.resolve(Q.from).marks();Y.replaceWith(Q.from,Q.to,Z.schema.text(Q.text,U))}else Y.delete(Q.from,Q.to);z(Y)}return!0}}return!1},N40=new J5(/--$/,"—",{inCodeMark:!1}),T40=new J5(/\.\.\.$/,"…",{inCodeMark:!1}),y40=new J5(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“",{inCodeMark:!1}),x40=new J5(/"$/,"”",{inCodeMark:!1}),g40=new J5(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘",{inCodeMark:!1}),w40=new J5(/'$/,"’",{inCodeMark:!1});var LZ=200,W0=function Z(){};W0.prototype.append=function Z(z){if(!z.length)return this;return z=W0.from(z),!this.length&&z||z.length<LZ&&this.leafAppend(z)||this.length<LZ&&z.leafPrepend(this)||this.appendInner(z)};W0.prototype.prepend=function Z(z){if(!z.length)return this;return W0.from(z).append(this)};W0.prototype.appendInner=function Z(z){return new jq(this,z)};W0.prototype.slice=function Z(z,X){if(z===void 0)z=0;if(X===void 0)X=this.length;if(z>=X)return W0.empty;return this.sliceInner(Math.max(0,z),Math.min(this.length,X))};W0.prototype.get=function Z(z){if(z<0||z>=this.length)return;return this.getInner(z)};W0.prototype.forEach=function Z(z,X,K){if(X===void 0)X=0;if(K===void 0)K=this.length;if(X<=K)this.forEachInner(z,X,K,0);else this.forEachInvertedInner(z,X,K,0)};W0.prototype.map=function Z(z,X,K){if(X===void 0)X=0;if(K===void 0)K=this.length;var J=[];return this.forEach(function(Q,Y){return J.push(z(Q,Y))},X,K),J};W0.from=function Z(z){if(z instanceof W0)return z;return z&&z.length?new XX(z):W0.empty};var XX=function(Z){function z(K){Z.call(this),this.values=K}if(Z)z.__proto__=Z;z.prototype=Object.create(Z&&Z.prototype),z.prototype.constructor=z;var X={length:{configurable:!0},depth:{configurable:!0}};return z.prototype.flatten=function K(){return this.values},z.prototype.sliceInner=function K(J,Q){if(J==0&&Q==this.length)return this;return new z(this.values.slice(J,Q))},z.prototype.getInner=function K(J){return this.values[J]},z.prototype.forEachInner=function K(J,Q,Y,G){for(var U=Q;U<Y;U++)if(J(this.values[U],G+U)===!1)return!1},z.prototype.forEachInvertedInner=function K(J,Q,Y,G){for(var U=Q-1;U>=Y;U--)if(J(this.values[U],G+U)===!1)return!1},z.prototype.leafAppend=function K(J){if(this.length+J.length<=LZ)return new z(this.values.concat(J.flatten()))},z.prototype.leafPrepend=function K(J){if(this.length+J.length<=LZ)return new z(J.flatten().concat(this.values))},X.length.get=function(){return this.values.length},X.depth.get=function(){return 0},Object.defineProperties(z.prototype,X),z}(W0);W0.empty=new XX([]);var jq=function(Z){function z(X,K){Z.call(this),this.left=X,this.right=K,this.length=X.length+K.length,this.depth=Math.max(X.depth,K.depth)+1}if(Z)z.__proto__=Z;return z.prototype=Object.create(Z&&Z.prototype),z.prototype.constructor=z,z.prototype.flatten=function X(){return this.left.flatten().concat(this.right.flatten())},z.prototype.getInner=function X(K){return K<this.left.length?this.left.get(K):this.right.get(K-this.left.length)},z.prototype.forEachInner=function X(K,J,Q,Y){var G=this.left.length;if(J<G&&this.left.forEachInner(K,J,Math.min(Q,G),Y)===!1)return!1;if(Q>G&&this.right.forEachInner(K,Math.max(J-G,0),Math.min(this.length,Q)-G,Y+G)===!1)return!1},z.prototype.forEachInvertedInner=function X(K,J,Q,Y){var G=this.left.length;if(J>G&&this.right.forEachInvertedInner(K,J-G,Math.max(Q,G)-G,Y+G)===!1)return!1;if(Q<G&&this.left.forEachInvertedInner(K,Math.min(J,G),Q,Y)===!1)return!1},z.prototype.sliceInner=function X(K,J){if(K==0&&J==this.length)return this;var Q=this.left.length;if(J<=Q)return this.left.slice(K,J);if(K>=Q)return this.right.slice(K-Q,J-Q);return this.left.slice(K,Q).append(this.right.slice(0,J-Q))},z.prototype.leafAppend=function X(K){var J=this.right.leafAppend(K);if(J)return new z(this.left,J)},z.prototype.leafPrepend=function X(K){var J=this.left.leafPrepend(K);if(J)return new z(J,this.right)},z.prototype.appendInner=function X(K){if(this.left.depth>=Math.max(this.right.depth,K.depth)+1)return new z(this.left,new z(this.right,K));return new z(this,K)},z}(W0),w9=W0;var Rq=500;class d0{constructor(Z,z){this.items=Z,this.eventCount=z}popEvent(Z,z){if(this.eventCount==0)return null;let X=this.items.length;for(;;X--)if(this.items.get(X-1).selection){--X;break}let K,J;if(z)K=this.remapping(X,this.items.length),J=K.maps.length;let Q=Z.tr,Y,G,U=[],q=[];return this.items.forEach((A,V)=>{if(!A.step){if(!K)K=this.remapping(X,V+1),J=K.maps.length;J--,q.push(A);return}if(K){q.push(new Q5(A.map));let W=A.step.map(K.slice(J)),j;if(W&&Q.maybeStep(W).doc)j=Q.mapping.maps[Q.mapping.maps.length-1],U.push(new Q5(j,void 0,void 0,U.length+q.length));if(J--,j)K.appendMap(j,J)}else Q.maybeStep(A.step);if(A.selection)return Y=K?A.selection.map(K.slice(J)):A.selection,G=new d0(this.items.slice(0,X).append(q.reverse().concat(U)),this.eventCount-1),!1},this.items.length,0),{remaining:G,transform:Q,selection:Y}}addTransform(Z,z,X,K){let J=[],Q=this.eventCount,Y=this.items,G=!K&&Y.length?Y.get(Y.length-1):null;for(let q=0;q<Z.steps.length;q++){let A=Z.steps[q].invert(Z.docs[q]),V=new Q5(Z.mapping.maps[q],A,z),W;if(W=G&&G.merge(V))if(V=W,q)J.pop();else Y=Y.slice(0,Y.length-1);if(J.push(V),z)Q++,z=void 0;if(!K)G=V}let U=Q-X.depth;if(U>Bq)Y=Fq(Y,U),Q-=U;return new d0(Y.append(J),Q)}remapping(Z,z){let X=new x8;return this.items.forEach((K,J)=>{let Q=K.mirrorOffset!=null&&J-K.mirrorOffset>=Z?X.maps.length-K.mirrorOffset:void 0;X.appendMap(K.map,Q)},Z,z),X}addMaps(Z){if(this.eventCount==0)return this;return new d0(this.items.append(Z.map((z)=>new Q5(z))),this.eventCount)}rebased(Z,z){if(!this.eventCount)return this;let X=[],K=Math.max(0,this.items.length-z),J=Z.mapping,Q=Z.steps.length,Y=this.eventCount;this.items.forEach((V)=>{if(V.selection)Y--},K);let G=z;this.items.forEach((V)=>{let W=J.getMirror(--G);if(W==null)return;Q=Math.min(Q,W);let j=J.maps[W];if(V.step){let H=Z.steps[W].invert(Z.docs[W]),R=V.selection&&V.selection.map(J.slice(G+1,W));if(R)Y++;X.push(new Q5(j,H,R))}else X.push(new Q5(j))},K);let U=[];for(let V=z;V<Q;V++)U.push(new Q5(J.maps[V]));let q=this.items.slice(0,K).append(U).append(X),A=new d0(q,Y);if(A.emptyItemCount()>Rq)A=A.compress(this.items.length-X.length);return A}emptyItemCount(){let Z=0;return this.items.forEach((z)=>{if(!z.step)Z++}),Z}compress(Z=this.items.length){let z=this.remapping(0,Z),X=z.maps.length,K=[],J=0;return this.items.forEach((Q,Y)=>{if(Y>=Z){if(K.push(Q),Q.selection)J++}else if(Q.step){let G=Q.step.map(z.slice(X)),U=G&&G.getMap();if(X--,U)z.appendMap(U,X);if(G){let q=Q.selection&&Q.selection.map(z.slice(X));if(q)J++;let A=new Q5(U.invert(),G,q),V,W=K.length-1;if(V=K.length&&K[W].merge(A))K[W]=V;else K.push(A)}}else if(Q.map)X--},this.items.length,0),new d0(w9.from(K.reverse()),J)}}d0.empty=new d0(w9.empty,0);function Fq(Z,z){let X;return Z.forEach((K,J)=>{if(K.selection&&z--==0)return X=J,!1}),Z.slice(X)}class Q5{constructor(Z,z,X,K){this.map=Z,this.step=z,this.selection=X,this.mirrorOffset=K}merge(Z){if(this.step&&Z.step&&!Z.selection){let z=Z.step.merge(this.step);if(z)return new Q5(z.getMap().invert(),z,this.selection)}}}class M5{constructor(Z,z,X,K,J){this.done=Z,this.undone=z,this.prevRanges=X,this.prevTime=K,this.prevComposition=J}}var Bq=20;function Eq(Z,z,X,K){let J=X.getMeta(i5),Q;if(J)return J.historyState;if(X.getMeta(Mq))Z=new M5(Z.done,Z.undone,null,0,-1);let Y=X.getMeta("appendedTransaction");if(X.steps.length==0)return Z;else if(Y&&Y.getMeta(i5))if(Y.getMeta(i5).redo)return new M5(Z.done.addTransform(X,void 0,K,IZ(z)),Z.undone,KX(X.mapping.maps),Z.prevTime,Z.prevComposition);else return new M5(Z.done,Z.undone.addTransform(X,void 0,K,IZ(z)),null,Z.prevTime,Z.prevComposition);else if(X.getMeta("addToHistory")!==!1&&!(Y&&Y.getMeta("addToHistory")===!1)){let G=X.getMeta("composition"),U=Z.prevTime==0||!Y&&Z.prevComposition!=G&&(Z.prevTime<(X.time||0)-K.newGroupDelay||!Pq(X,Z.prevRanges)),q=Y?u9(Z.prevRanges,X.mapping):KX(X.mapping.maps);return new M5(Z.done.addTransform(X,U?z.selection.getBookmark():void 0,K,IZ(z)),d0.empty,q,X.time,G==null?Z.prevComposition:G)}else if(Q=X.getMeta("rebased"))return new M5(Z.done.rebased(X,Q),Z.undone.rebased(X,Q),u9(Z.prevRanges,X.mapping),Z.prevTime,Z.prevComposition);else return new M5(Z.done.addMaps(X.mapping.maps),Z.undone.addMaps(X.mapping.maps),u9(Z.prevRanges,X.mapping),Z.prevTime,Z.prevComposition)}function Pq(Z,z){if(!z)return!1;if(!Z.docChanged)return!0;let X=!1;return Z.mapping.maps[0].forEach((K,J)=>{for(let Q=0;Q<z.length;Q+=2)if(K<=z[Q+1]&&J>=z[Q])X=!0}),X}function KX(Z){let z=[];for(let X=Z.length-1;X>=0&&z.length==0;X--)Z[X].forEach((K,J,Q,Y)=>z.push(Q,Y));return z}function u9(Z,z){if(!Z)return null;let X=[];for(let K=0;K<Z.length;K+=2){let J=z.map(Z[K],1),Q=z.map(Z[K+1],-1);if(J<=Q)X.push(J,Q)}return X}function Oq(Z,z,X){let K=IZ(z),J=i5.get(z).spec.config,Q=(X?Z.undone:Z.done).popEvent(z,K);if(!Q)return null;let Y=Q.selection.resolve(Q.transform.doc),G=(X?Z.done:Z.undone).addTransform(Q.transform,z.selection.getBookmark(),J,K),U=new M5(X?G:Q.remaining,X?Q.remaining:G,null,0,-1);return Q.transform.setSelection(Y).setMeta(i5,{redo:X,historyState:U})}var v9=!1,JX=null;function IZ(Z){let z=Z.plugins;if(JX!=z){v9=!1,JX=z;for(let X=0;X<z.length;X++)if(z[X].spec.historyPreserveItems){v9=!0;break}}return v9}var i5=new v5("history"),Mq=new v5("closeHistory");function $9(Z={}){return Z={depth:Z.depth||100,newGroupDelay:Z.newGroupDelay||500},new X0({key:i5,state:{init(){return new M5(d0.empty,d0.empty,null,0,-1)},apply(z,X,K){return Eq(X,K,z,Z)}},config:Z,props:{handleDOMEvents:{beforeinput(z,X){let K=X.inputType,J=K=="historyUndo"?s8:K=="historyRedo"?CZ:null;if(!J)return!1;return X.preventDefault(),J(z.state,z.dispatch)}}}})}function DZ(Z,z){return(X,K)=>{let J=i5.getState(X);if(!J||(Z?J.undone:J.done).eventCount==0)return!1;if(K){let Q=Oq(J,X,Z);if(Q)K(z?Q.scrollIntoView():Q)}return!0}}var s8=DZ(!1,!0),CZ=DZ(!0,!0),_40=DZ(!1,!1),m40=DZ(!0,!1);function QX(Z){let z=i5.getState(Z);return z?z.done.eventCount:0}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Y4=function(Z,z){return Y4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,K){X.__proto__=K}||function(X,K){for(var J in K)if(Object.prototype.hasOwnProperty.call(K,J))X[J]=K[J]},Y4(Z,z)};function k(Z,z){if(typeof z!=="function"&&z!==null)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");Y4(Z,z);function X(){this.constructor=Z}Z.prototype=z===null?Object.create(z):(X.prototype=z.prototype,new X)}var P=function(){return P=Object.assign||function Z(z){for(var X,K=1,J=arguments.length;K<J;K++){X=arguments[K];for(var Q in X)if(Object.prototype.hasOwnProperty.call(X,Q))z[Q]=X[Q]}return z},P.apply(this,arguments)};function u0(Z,z,X){if(X||arguments.length===2){for(var K=0,J=z.length,Q;K<J;K++)if(Q||!(K in z)){if(!Q)Q=Array.prototype.slice.call(z,0,K);Q[K]=z[K]}}return Z.concat(Q||Array.prototype.slice.call(z))}function m(Z,z){if(Object.defineProperty)Object.defineProperty(Z,"raw",{value:z});else Z.raw=z;return Z}function Lq(Z,z,X){var K;X=X||null;for(K in Z)if(Z.hasOwnProperty(K)){if(z.call(X,Z[K],K,Z)===!1)break}}var Z3=Lq;function Iq(Z,z){var X=Object.prototype.hasOwnProperty,K,J,Q,Y;for(Q=1,Y=arguments.length;Q<Y;Q+=1){K=arguments[Q];for(J in K)if(X.call(K,J))Z[J]=K[J]}return Z}var w4=Iq;function Dq(Z){return typeof Z==="string"||Z instanceof String}var k5=Dq;function Cq(Z){return Z instanceof Array}var A3=Cq;function Sq(Z,z,X){var K=0,J=Z.length;X=X||null;for(;K<J;K+=1)if(z.call(X,Z[K],K,Z)===!1)break}var z3=Sq,bq=A3,kq=z3,Nq=Z3;function Tq(Z,z,X){if(bq(Z))kq(Z,z,X);else Nq(Z,z,X)}var U1=Tq,yq=k5,xq=U1;function gq(Z,z,X){var K=Z.style;if(yq(z)){K[z]=X;return}xq(z,function(J,Q){K[Q]=J})}var A5=gq,wq=A3;function uq(Z,z,X){var K,J;if(X=X||0,!wq(z))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(z,Z,X);J=z.length;for(K=X;X>=0&&K<J;K+=1)if(z[K]===Z)return K;return-1}var R8=uq;function vq(Z){return Z===void 0}var o0=vq,$q=o0;function fq(Z){if(!Z||!Z.className)return"";if($q(Z.className.baseVal))return Z.className;return Z.className.baseVal}var u4=fq,hq=A3,_q=o0;function mq(Z,z){if(z=hq(z)?z.join(" "):z,z=z.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),_q(Z.className.baseVal)){Z.className=z;return}Z.className.baseVal=z}var PJ=mq,YX=U1,lq=R8,cq=u4,pq=PJ;function iq(Z){var z=Array.prototype.slice.call(arguments,1),X=Z.classList,K=[],J;if(X){YX(z,function(Q){Z.classList.add(Q)});return}if(J=cq(Z),J)z=[].concat(J.split(/\s+/),z);YX(z,function(Q){if(lq(Q,K)<0)K.push(Q)}),pq(Z,K)}var U5=iq,GX=z3,dq=R8,sq=u4,nq=PJ;function aq(Z){var z=Array.prototype.slice.call(arguments,1),X=Z.classList,K,J;if(X){GX(z,function(Q){X.remove(Q)});return}K=sq(Z).split(/\s+/),J=[],GX(K,function(Q){if(dq(Q,z)<0)J.push(Q)}),nq(Z,J)}var n0=aq;function rq(Z){return typeof Z==="number"||Z instanceof Number}var I5=rq;function oq(Z){return Z===null}var pZ=oq,tq=Z3;function eq(Z,z){var X=document.createElement("img"),K="";return tq(z,function(J,Q){K+="&"+Q+"="+J}),K=K.substring(1),X.src=Z+"?"+K,X.style.display="none",document.body.appendChild(X),document.body.removeChild(X),X}var Z2=eq,z2=o0,X2=Z2,K2=604800000;function J2(Z){var z=new Date().getTime();return z-Z>K2}function Q2(Z,z){var X="https://www.google-analytics.com/collect",K=location.hostname,J="event",Q="use",Y="TOAST UI "+Z+" for "+K+": Statistics",G=window.localStorage.getItem(Y);if(!z2(window.tui)&&window.tui.usageStatistics===!1)return;if(G&&!J2(G))return;window.localStorage.setItem(Y,new Date().getTime()),setTimeout(function(){if(document.readyState==="interactive"||document.readyState==="complete")X2(X,{v:1,t:J,tid:z,cid:K,dp:K,dh:Z,el:Z,ec:Q})},1000)}var Y2=Q2;/Mac/.test(navigator.platform);var G2=/[\u0020]+/g,U2=/[>(){}[\]+-.!#|]/g,UX=/<([a-zA-Z_][a-zA-Z0-9\-._]*)(\s|[^\\>])*\/?>|<(\/)([a-zA-Z_][a-zA-Z0-9\-._]*)\s*\/?>|<!--[^-]+-->|<([a-zA-Z_][a-zA-Z0-9\-.:/]*)>/g,qX=/\\[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~\\]/g,q2=/[*_~`]/g,AX=/!\[.*\]\(.*\)/g,A2=/[[\]]/g,VX=/(?:^|[^\\])\\(?!\\)/g,V2='[&<>"]',WX=new RegExp(V2,"g");function W2(Z){switch(Z){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return Z}}function t8(Z){if(WX.test(Z))return Z.replace(WX,W2);return Z}function H2(){Y2("editor","UA-129966929-1")}function F0(Z,z){return Z.indexOf(z)!==-1}var j2=["rel","target","hreflang","type"],R2={codeblock:/(^ {4}[^\n]+\n*)+/,thematicBreak:/^ *((\* *){3,}|(- *){3,} *|(_ *){3,}) */,atxHeading:/^(#{1,6}) +[\s\S]+/,seTextheading:/^([^\n]+)\n *(=|-){2,} */,blockquote:/^( *>[^\n]+.*)+/,list:/^ *(\*+|-+|\d+\.) [\s\S]+/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? */,link:/!?\[.*\]\(.*\)/,reflink:/!?\[.*\]\s*\[([^\]]*)\]/,verticalBar:/\u007C/,fencedCodeblock:/^((`|~){3,})/};function OJ(Z){if(!Z)return null;var z={};return j2.forEach(function(X){if(!o0(Z[X]))z[X]=Z[X]}),z}function iZ(Z,z){var X="";for(var K=0;K<z;K+=1)X+=Z;return X}function F2(Z){var z=!1;return Z3(R2,function(X){if(X.test(Z))z=!0;return!z}),z}function dZ(Z){var z=[],X=AX.exec(Z);while(X)z.push([X.index,X.index+X[0].length]),X=AX.exec(Z);return Z.replace(A2,function(K,J){var Q=z.some(function(Y){return J>Y[0]&&J<Y[1]});return Q?K:"\\"+K})}function B2(Z){var z=function(J){return"\\"+J},X=function(J){return J+"\\"},K=Z.replace(G2," ");if(qX.test(K))K=K.replace(qX,z);if(VX.test(K))K=K.replace(VX,X);if(K=K.replace(q2,z),UX.test(K))K=K.replace(UX,z);if(F2(K))K=K.replace(U2,z);return K}function E2(Z){var z;if(Z.indexOf('"')===-1)z='""';else z=Z.indexOf("'")===-1?"''":"()";return z[0]+Z+z[1]}function G4(Z){return pZ(Z)||o0(Z)}function v4(Z,z){if(Z===null&&Z===z)return!0;if(typeof Z!=="object"||typeof z!=="object"||G4(Z)||G4(z))return Z===z;for(var X in Z)if(Z[X]!==z[X])return!1;for(var X in z)if(!(X in Z))return!1;return!0}function C0(Z){return Z[Z.length-1]}function P2(Z,z,X){return Z>=z&&Z<=X}function $4(Z){return typeof Z==="object"&&Z!==null}function sZ(Z,z){var X=P({},Z);if(Z&&z)Object.keys(z).forEach(function(K){if($4(X[K]))if(Array.isArray(z[K]))X[K]=f4(z[K]);else if(X.hasOwnProperty(K))X[K]=sZ(X[K],z[K]);else X[K]=h4(z[K]);else X[K]=z[K]});return X}function f4(Z){return Z.map(function(z){if($4(z))return Array.isArray(z)?f4(z):h4(z);return z})}function h4(Z){var z=Object.keys(Z);if(!z.length)return Z;return z.reduce(function(X,K){if($4(Z[K]))X[K]=Array.isArray(Z[K])?f4(Z[K]):h4(Z[K]);else X[K]=Z[K];return X},{})}function _4(Z,z){if(z===void 0)z={};return Object.keys(z).forEach(function(X){if(Z.hasOwnProperty(X)&&typeof Z[X]==="object")if(Array.isArray(z[X]))Z[X]=z[X];else _4(Z[X],z[X]);else Z[X]=z[X]}),Z}function HX(Z,z){return Z>z?[z,Z]:[Z,z]}var O2=z3;function M2(Z){var z;try{z=Array.prototype.slice.call(Z)}catch(X){z=[],O2(Z,function(K){z.push(K)})}return z}var V5=M2;function nZ(Z,z){var X=Z.nodes.paragraph;if(!z)return X.createAndFill();return X.create(null,k5(z)?Z.text(z):z)}function R0(Z,z,X){return Z.text(z,X)}function n(Z,z,X){if(X===void 0)X=z;var K=Z.doc.content.size,J=K>0?K-1:1;return _.create(Z.doc,Math.min(z,J),Math.min(X,J))}function m4(Z,z,X){var K=z.pos;return Z.replaceWith(K,K,nZ(X)),Z.setSelection(n(Z,K+1))}function aZ(Z){var{state:z,from:X,startIndex:K,endIndex:J,createText:Q}=Z,Y=z.tr,G=z.doc,U=z.schema;for(var q=K;q<=J;q+=1){var A=G.child(q),V=A.nodeSize,W=A.textContent,j=A.content,H=Q(W),R=H?R0(U,H):L.empty,F=Y.mapping.map(X),B=F+j.size;Y.replaceWith(F,B,R),X+=V}return Y}function l4(Z,z,X,K){var J=X.length;Z.split(z).delete(z-J,z).insert(Z.mapping.map(z),K).setSelection(n(Z,Z.mapping.map(z)-J))}function p3(Z){return Z.sourcepos[0][0]}function q1(Z){return Z.sourcepos[1][0]}function A1(Z){return Z.sourcepos[0][1]}function n5(Z){return Z.sourcepos[1][1]}function L2(Z){var z=Z.type;return z==="htmlBlock"||z==="htmlInline"}function I2(Z){var z=Z.type;return z==="strike"||z==="strong"||z==="emph"||z==="code"||z==="link"||z==="image"}function D2(Z){return Z&&Z.type==="codeBlock"}function F8(Z){return Z&&(Z.type==="item"||Z.type==="list")}function MJ(Z){return F8(Z)&&Z.listData.type==="ordered"}function C2(Z){return F8(Z)&&Z.listData.type!=="ordered"}function jX(Z){return Z&&(Z.type==="tableCell"||Z.type==="tableDelimCell")}function S2(Z){switch(Z.type){case"code":case"text":case"emph":case"strong":case"strike":case"link":case"image":case"htmlInline":case"linebreak":case"softbreak":case"customInline":return!0;default:return!1}}function X3(Z,z,X){if(X===void 0)X=!0;Z=X?Z:Z.parent;while(Z&&Z.type!=="document"){if(z(Z))return Z;Z=Z.parent}return null}function b2(Z,z,X){if(X===void 0)X=!0;Z=X?Z:Z.parent;while(Z&&Z.type!=="document")z(Z),Z=Z.parent}function U0(Z,z){return[Z[0],Z[1]+z]}function a5(Z,z){return[Z[0],z]}function k2(Z){var z=Z.firstChild.literal;switch(Z.type){case"emph":return"*"+z+"*";case"strong":return"**"+z+"**";case"strike":return"~~"+z+"~~";case"code":return"`"+z+"`";case"link":case"image":var X=Z,K=X.destination,J=X.title,Q=Z.type==="link"?"":"!";return Q+"["+z+"]("+K+(J?' "'+J+'"':"")+")";default:return null}}function N2(Z){switch(Z.type){case"document":case"blockQuote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"strike":case"link":case"image":case"table":case"tableHead":case"tableBody":case"tableRow":case"tableCell":case"tableDelimRow":case"customInline":return!0;default:return!1}}function T2(Z){var z=[],X=Z.walker(),K=null;while(K=X.next()){var J=K.node;if(J.type==="text")z.push(J.literal)}return z.join("")}var l3=[],LJ={},RX=/\$\$widget\d+\s/;function V1(Z){var z=Z.search(RX);if(z!==-1){var X=Z.substring(z),K=X.replace(RX,"").replace("$$","");Z=Z.substring(0,z),Z+=V1(K)}return Z}function IJ(Z,z){return"$$"+Z+" "+z+"$$"}function DJ(Z,z){var X=LJ[Z],K=X.rule,J=X.toDOM,Q=V1(z).match(K);if(Q)z=Q[0];return J(z)}function y2(){return l3}function x2(Z){l3=Z,l3.forEach(function(z,X){LJ["widget"+X]=z})}function f9(Z,z,X,K){return Z.concat(j8(z,X,K))}function j8(Z,z,X){if(X===void 0)X=0;var K=[],J=(l3[X]||{}).rule,Q=X+1;if(Z=V1(Z),J&&J.test(Z)){var Y=void 0;while((Y=Z.search(J))!==-1){var G=Z.substring(0,Y);if(G)K=f9(K,G,z,Q);Z=Z.substring(Y);var U=Z.match(J)[0],q="widget"+X;K.push(z.nodes.widget.create({info:q},z.text(IJ(q,U)))),Z=Z.substring(U.length)}if(Z)K=f9(K,Z,z,Q)}else if(Z)K=X<l3.length-1?f9(K,Z,z,Q):[z.text(Z)];return K}function CJ(Z){var z,X="",K=Z.walker();while(z=K.next()){var{node:J,entering:Q}=z;if(Q){if(J!==Z&&J.type!=="text")X+=k2(J),K.resumeAt(Z,!1),K.next();else if(J.type==="text")X+=J.literal}}return X}function SJ(){return{deleteSelection:function(){return PZ},selectAll:function(){return y9},undo:function(){return s8},redo:function(){return CZ}}}function g2(Z){return new X0({props:{decorations:function(z){var X=z.doc;if(Z.text&&X.childCount===1&&X.firstChild.isTextblock&&X.firstChild.content.size===0){var K=document.createElement("span");if(U5(K,"placeholder"),Z.className)U5(K,Z.className);return K.textContent=Z.text,o.create(X,[k0.widget(1,K)])}return null}}})}var w2=R8,u2=u4;function v2(Z,z){var X;if(Z.classList)return Z.classList.contains(z);return X=u2(Z).split(/\s+/),w2(z,X)>-1}var bJ=v2,$2=R8,f2=V5,SZ=Element.prototype,h2=SZ.matches||SZ.webkitMatchesSelector||SZ.mozMatchesSelector||SZ.msMatchesSelector||function(Z){var z=this.document||this.ownerDocument;return $2(this,f2(z.querySelectorAll(Z)))>-1};function _2(Z,z){return h2.call(Z,z)}var m2=_2,kJ="[A-Za-z][A-Za-z0-9-]*",l2="[a-zA-Z_:][a-zA-Z0-9:._-]*",c2="[^\"'=<>`\\x00-\\x20]+",p2="'[^']*'",i2='"[^"]*"',d2="(?:"+c2+"|"+p2+"|"+i2+")",s2="(?:\\s*=\\s*"+d2+")",NJ="(?:\\s+"+l2+s2+"?)",TJ="<("+kJ+")("+NJ+")*\\s*/?>",n2="</("+kJ+")\\s*[>]",yJ="(?:"+TJ+"|"+n2+")",K3=new RegExp("^"+yJ,"i"),U4=/<br\s*\/*>/i,a2=/<! ---->|<!--(?:-?[^>-])(?:-?[^-])*-->/,xJ="</p><p>";function c4(Z,z,X){var K=parseInt(Z.left,10),J=parseInt(Z.top,10),Q=parseInt(Z.width,10)+parseInt(Z.paddingLeft,10)+parseInt(Z.paddingRight,10),Y=parseInt(Z.height,10)+parseInt(Z.paddingTop,10)+parseInt(Z.paddingBottom,10);return z>=K&&z<=K+Q&&X>=J&&X<=J+Y}var gJ="toastui-editor-";function N(){var Z=[];for(var z=0;z<arguments.length;z++)Z[z]=arguments[z];var X=[];for(var K=0,J=Z;K<J.length;K++){var Q=J[K],Y=void 0;if(Array.isArray(Q))Y=Q[0]?Q[1]:null;else Y=Q;if(Y)X.push(""+gJ+Y)}return X.join(" ")}function Q0(){var Z=[];for(var z=0;z<arguments.length;z++)Z[z]=arguments[z];return Z.map(function(X){return gJ+"md-"+X}).join(" ")}function r2(Z){return(Z===null||Z===void 0?void 0:Z.nodeType)===Node.TEXT_NODE}function W1(Z){return Z&&Z.nodeType===Node.ELEMENT_NODE}function o2(Z,z){var X=V5(Z.querySelectorAll(z));if(X.length)return X;return[]}function t2(Z,z){z=A3(z)?V5(z):[z],z.forEach(function(X){Z.appendChild(X)})}function e2(Z,z){if(z.parentNode)z.parentNode.insertBefore(Z,z)}function B8(Z){if(Z.parentNode)Z.parentNode.removeChild(Z)}function ZA(Z){var z=[];while(Z.firstChild)if(z.push(Z.firstChild),Z.parentNode)Z.parentNode.insertBefore(Z.firstChild,Z);return B8(Z),z}function p4(Z,z,X){if(o0(X))X=!bJ(Z,z);var K=X?U5:n0;K(Z,z)}function wJ(Z,z){var X=document.createElement("div");if(k5(Z))X.innerHTML=Z;else X.appendChild(Z);var K=X.firstChild;if(z)z.appendChild(K);return K}function i4(Z){var z=window.getComputedStyle(Z);return["margin-left","margin-right"].reduce(function(X,K){return X+parseInt(z.getPropertyValue(K),10)},0)+Z.offsetWidth}function q5(Z,z){var X;if(k5(z))X=function(K){return m2(K,z)};else X=function(K){return K===z};while(Z&&Z!==document){if(W1(Z)&&X(Z))return Z;Z=Z.parentNode}return null}function uJ(Z,z){var X=0,K=0;while(Z&&Z!==z){var{offsetTop:J,offsetLeft:Q,offsetParent:Y}=Z;if(X+=J,K+=Q,Y===z.offsetParent)break;Z=Z.offsetParent}return{offsetTop:X,offsetLeft:K}}function d4(Z,z){Object.keys(Z).forEach(function(X){if(G4(Z[X]))z.removeAttribute(X);else z.setAttribute(X,Z[X])})}function zA(Z){var z=Z.replace(/<p><br\s*\/*><\/p>/gi,"<p></p>"),X=new RegExp(yJ,"ig"),K=z.match(X);return K===null||K===void 0||K.forEach(function(J,Q){if(U4.test(J)){var Y=xJ;if(Q){var G=K[Q-1],U=G.match(TJ);if(U&&!/br/i.test(U[1])){var q=U[1];Y="</"+q+"><"+q+">"}}z=z.replace(U4,Y)}}),z}function s4(Z){var z=/<img class="ProseMirror-separator" alt="">/g,X=/ class="ProseMirror-trailingBreak"/g,K=Z;return K=K.replace(z,""),K=K.replace(X,""),K}var vJ=new v5("widget"),FX=5,XA=function(){function Z(z,X){var K=this;this.popup=null,this.removeWidget=function(){if(K.popup)K.rootEl.removeChild(K.popup),K.popup=null},this.rootEl=z.dom.parentElement,this.eventEmitter=X,this.eventEmitter.listen("blur",this.removeWidget),this.eventEmitter.listen("loadUI",function(){K.rootEl=q5(z.dom.parentElement,"."+N("defaultUI"))}),this.eventEmitter.listen("removePopupWidget",this.removeWidget)}return Z.prototype.update=function(z){var X=vJ.getState(z.state);if(this.removeWidget(),X){var{node:K,style:J}=X,Q=z.coordsAtPos(X.pos),Y=Q.top,G=Q.left,U=Q.bottom,q=U-Y,A=this.rootEl.getBoundingClientRect(),V=Y-A.top;A5(K,{opacity:"0"}),this.rootEl.appendChild(K),A5(K,{position:"absolute",left:G-A.left+FX+"px",top:(J==="bottom"?V+q-FX:V-q)+"px",opacity:"1"}),this.popup=K,z.focus()}},Z.prototype.destroy=function(){this.eventEmitter.removeEventHandler("blur",this.removeWidget)},Z}();function KA(Z){return new X0({key:vJ,state:{init:function(){return null},apply:function(z){return z.getMeta("widget")}},view:function(z){return new XA(z,Z)}})}function JA(Z){Z.listen("addImageBlobHook",function(z,X){var K=new FileReader;K.onload=function(J){var Q=J.target;return X(Q.result)},K.readAsDataURL(z)})}function n4(Z,z,X){var K=function(J,Q){Z.emit("command","addImage",{imageUrl:J,altText:Q||z.name||"image"})};Z.emit("addImageBlobHook",z,K,X)}function $J(Z){var z=V5(Z).filter(function(K){var J=K.type;return J.indexOf("image")!==-1});if(z.length===1){var X=z[0];if(X)return X.getAsFile()}return null}function QA(Z){var z=Z.eventEmitter;return new X0({props:{handleDOMEvents:{drop:function(X,K){var J,Q=(J=K.dataTransfer)===null||J===void 0?void 0:J.files;if(Q)z3(Q,function(Y){if(Y.type.indexOf("image")!==-1)return K.preventDefault(),K.stopPropagation(),n4(z,Y,K.type),!1;return!0});return!0}}}})}var d=function(){function Z(){}return Object.defineProperty(Z.prototype,"type",{get:function(){return"node"},enumerable:!1,configurable:!0}),Z.prototype.setContext=function(z){this.context=z},Z}();function fJ(Z){var z=document.createElement("span"),X=DJ(Z.attrs.info,Z.textContent);return z.className="tui-widget",z.appendChild(X),{dom:z}}function q4(Z){return Z.type.name==="widget"}var hJ=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"widget"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{attrs:{info:{default:null}},group:"inline",inline:!0,content:"text*",selectable:!1,atom:!0,toDOM:function(){return["span",{class:"tui-widget"},0]},parseDOM:[{tag:"span.tui-widget",getAttrs:function(X){var K=X.textContent,J=K.match(/\$\$(widget\d+)/),Q=J[1];return{info:Q}}}]}},enumerable:!1,configurable:!0}),z}(d),_J=function(){function Z(z){this.timer=null,this.el=document.createElement("div"),this.el.className="toastui-editor",this.eventEmitter=z,this.placeholder={text:""}}return Z.prototype.createState=function(){return u5.create({schema:this.schema,plugins:this.createPlugins()})},Z.prototype.initEvent=function(){var z=this,X=z.eventEmitter,K=z.view,J=z.editorType;K.dom.addEventListener("focus",function(){return X.emit("focus",J)}),K.dom.addEventListener("blur",function(){return X.emit("blur",J)})},Z.prototype.emitChangeEvent=function(z){if(this.eventEmitter.emit("caretChange",this.editorType),z.docChanged)this.eventEmitter.emit("change",this.editorType)},Object.defineProperty(Z.prototype,"defaultPlugins",{get:function(){var z=this.createInputRules(),X=u0(u0([],this.keymaps),[p8(P({"Shift-Enter":x9.Enter},x9)),$9(),g2(this.placeholder),KA(this.eventEmitter),QA(this.context)]);return z?X.concat(z):X},enumerable:!1,configurable:!0}),Z.prototype.createInputRules=function(){var z=y2(),X=z.map(function(K){var J=K.rule;return new J5(J,function(Q,Y,G,U){var{schema:q,tr:A,doc:V}=Q,W=Y.input.match(new RegExp(J,"g")),j=V.resolve(G),H=j.parent,R=0;if(q4(H))H=j.node(j.depth-1);if(H.forEach(function(O){return q4(O)&&(R+=1)}),W.length>R){var F=C0(W),B=j8(F,q);return A.replaceWith(U-F.length+1,U,B)}return null})});return X.length?g9({rules:X}):null},Z.prototype.clearTimer=function(){if(this.timer)clearTimeout(this.timer),this.timer=null},Z.prototype.createSchema=function(){return new KZ({nodes:this.specs.nodes,marks:this.specs.marks})},Z.prototype.createKeymaps=function(z){var X=SJ(),K=X.undo,J=X.redo,Q=this.specs.keymaps(z),Y={"Mod-z":K(),"Shift-Mod-z":J()};return z?Q.concat(p8(Y)):Q},Z.prototype.createCommands=function(){return this.specs.commands(this.view)},Z.prototype.createPluginProps=function(){var z=this;return this.extraPlugins.map(function(X){return X(z.eventEmitter)})},Z.prototype.focus=function(){var z=this;this.clearTimer(),this.timer=setTimeout(function(){z.view.focus(),z.view.dispatch(z.view.state.tr.scrollIntoView())})},Z.prototype.blur=function(){this.view.dom.blur()},Z.prototype.destroy=function(){var z=this;this.clearTimer(),this.view.destroy(),Object.keys(this).forEach(function(X){delete z[X]})},Z.prototype.moveCursorToStart=function(z){var X=this.view.state.tr;if(this.view.dispatch(X.setSelection(n(X,1)).scrollIntoView()),z)this.focus()},Z.prototype.moveCursorToEnd=function(z){var X=this.view.state.tr;if(this.view.dispatch(X.setSelection(n(X,X.doc.content.size-1)).scrollIntoView()),z)this.focus()},Z.prototype.setScrollTop=function(z){this.view.dom.scrollTop=z},Z.prototype.getScrollTop=function(){return this.view.dom.scrollTop},Z.prototype.setPlaceholder=function(z){this.placeholder.text=z,this.view.dispatch(this.view.state.tr.scrollIntoView())},Z.prototype.setHeight=function(z){A5(this.el,{height:z+"px"})},Z.prototype.setMinHeight=function(z){A5(this.el,{minHeight:z+"px"})},Z.prototype.getElement=function(){return this.el},Z}();function YA(Z){return Z instanceof Function}var c0=YA,GA=["Enter","Shift-Enter","Mod-Enter","Tab","Shift-Tab","Delete","Backspace","Mod-Delete","Mod-Backspace","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Mod-d","Mod-D","Alt-ArrowUp","Alt-ArrowDown"];function bZ(Z,z,X){return Z.focus(),z(X)(Z.state,Z.dispatch,Z)}var mJ=function(){function Z(z){this.specs=z}return Object.defineProperty(Z.prototype,"nodes",{get:function(){return this.specs.filter(function(z){return z.type==="node"}).reduce(function(z,X){var K,J=X.name,Q=X.schema;return P(P({},z),(K={},K[J]=Q,K))},{})},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"marks",{get:function(){return this.specs.filter(function(z){return z.type==="mark"}).reduce(function(z,X){var K,J=X.name,Q=X.schema;return P(P({},z),(K={},K[J]=Q,K))},{})},enumerable:!1,configurable:!0}),Z.prototype.commands=function(z,X){var K=this.specs.filter(function(Q){var Y=Q.commands;return Y}).reduce(function(Q,Y){var G={},U=Y.commands();if(c0(U))G[Y.name]=function(q){return bZ(z,U,q)};else Object.keys(U).forEach(function(q){G[q]=function(A){return bZ(z,U[q],A)}});return P(P({},Q),G)},{}),J=SJ();if(Object.keys(J).forEach(function(Q){K[Q]=function(Y){return bZ(z,J[Q],Y)}}),X)Object.keys(X).forEach(function(Q){K[Q]=function(Y){return bZ(z,X[Q],Y)}});return K},Z.prototype.keymaps=function(z){var X=this.specs.filter(function(K){return K.keymaps}).map(function(K){return K.keymaps()});return X.map(function(K){if(!z)Object.keys(K).forEach(function(J){if(!F0(GA,J))delete K[J]});return p8(K)})},Z.prototype.setContext=function(z){this.specs.forEach(function(X){X.setContext(z)})},Z}();function lJ(Z){var{from:z,to:X}=Z;if(Z instanceof G0)return[z+1,X-1];return[z,X]}function BX(Z){return Z.index(0)+1}function J3(Z,z,X){if(X===void 0)X=1;var K=0;return Z.forEach(function(J,Q){if(q4(J)&&Q+2<z)K+=2*X}),K}function $Z(Z,z,X){if(X===void 0)X=z;var K=z===X,J=Z.resolve(z),Q=BX(J),Y=Q,G=J.start(1),U=G;if(!K){var q=Z.resolve(X===Z.content.size?X-1:X);if(U=q.start(1),Y=BX(q),q.pos===Z.content.size)X=Z.content.size-2}var A=Math.max(z-G+1,1),V=Math.max(X-U+1,1);return[[Q,A+J3(Z.child(Q-1),A,-1)],[Y,V+J3(Z.child(Y-1),V,-1)]]}function cJ(Z,z){var X=[];for(var K=0,J=0;K<z;K+=1){var Q=Z.child(K);X[K]=J,J+=Q.nodeSize}return X}function H8(Z,z,X){var K=cJ(Z,X[0]),J=z[0]-1,Q=X[0]-1,Y=Z.child(J),G=Z.child(Q),U=K[J],q=K[Q];return U+=z[1]+J3(Y,z[1]-1),q+=X[1]+J3(G,X[1]-1),[U,Math.min(q,Z.content.size)]}function J0(Z){var{$from:z,$to:X,from:K,to:J}=Z,Q=z.doc;if(Z instanceof G0)z=Q.resolve(K+1),X=Q.resolve(J-1);if(z.depth===0)z=Q.resolve(K-1),X=z;return{startFromOffset:z.start(1),endFromOffset:X.start(1),startToOffset:z.end(1),endToOffset:X.end(1),startIndex:z.index(0),endIndex:X.index(0),from:z.pos,to:X.pos}}function rZ(Z,z){var X=1,K=1;for(var J=0,Q=0;J<Z.childCount;J+=1){var Y=Z.child(J).nodeSize;if(X=Q+1,K=Q+Y-1,J===z)break;Q+=Y}return{startOffset:X,endOffset:K}}var EX="heading",UA="blockQuote",qA="listItem",AA="table",VA="tableCell",WA="codeBlock",HA="thematicBreak",fZ="link",kZ="code",H1="meta",E8="delimiter",jA="taskDelimiter",a4="markedText",RA="html",FA="customBlock",PX={strong:2,emph:1,strike:2};function p(Z,z,X,K){return{start:Z,end:z,spec:{type:X,attrs:K}}}function BA(Z,z,X){var{level:K,headingType:J}=Z,Q=[p(z,X,EX,{level:K})];if(J==="atx")Q.push(p(z,U0(z,K),E8));else Q.push(p(a5(X,0),X,EX,{seText:!0}));return Q}function h9(Z,z,X){var K=Z.type,J=U0(z,PX[K]),Q=U0(X,-PX[K]);return[p(J,Q,K),p(z,J,E8),p(Q,X,E8)]}function pJ(Z,z,X,K){return[p(Z,z,fZ),p(a5(Z,X[1]+1),a5(z,K),fZ,{desc:!0}),p(a5(z,K+2),U0(z,-1),fZ,{url:!0})]}function EA(Z,z,X){var K=Z.lastChild,J=K?n5(K)+1:3,Q=U0(z,1);return u0([p(z,Q,H1)],pJ(z,X,Q,J))}function PA(Z,z,X){var{lastChild:K,extendedAutolink:J}=Z,Q=K?n5(K)+1:2;return J?[p(z,X,fZ,{desc:!0})]:pJ(z,X,z,Q)}function OA(Z,z,X){var K=Z.tickCount,J=U0(z,K),Q=U0(X,-K);return[p(z,X,kZ),p(z,J,kZ,{start:!0}),p(J,Q,kZ,{marked:!0}),p(Q,X,kZ,{end:!0})]}function iJ(Z,z,X,K){var J={start:z,end:X,spec:{attrs:{className:K+"-line-background",codeStart:z[0],codeEnd:X[0]}},lineBackground:!0};return Z.type!=="item"&&Z.type!=="blockQuote"?[P(P({},J),{end:z,spec:{attrs:{className:K+"-line-background start"}}}),P(P({},J),{start:[Math.min(z[0]+1,X[0]),z[1]]})]:null}function MA(Z,z,X,K){var{fenceOffset:J,fenceLength:Q,fenceChar:Y,info:G,infoPadding:U,parent:q}=Z,A=J+Q,V=[p(a5(z,1),X,WA)];if(Y)V.push(p(z,U0(z,A),E8));if(G)V.push(p(U0(z,Q),U0(z,Q+U+G.length),H1));var W="^(\\s{0,4})("+Y+"{"+Q+",})",j=new RegExp(W);if(j.test(K))V.push(p(a5(X,1),X,E8));var H=iJ(q,z,X,"code-block");return H?V.concat(H):V}function LA(Z,z,X){var K=Z,J=K.offset,Q=K.syntaxLength,Y=K.info,G=K.parent,U=J+Q,q=[p(a5(z,1),X,FA)];if(q.push(p(z,U0(z,U),E8)),Y)q.push(p(U0(z,U),U0(z,Q+Y.length),H1));q.push(p(a5(X,1),X,E8));var A=iJ(G,z,X,"custom-block");return A?q.concat(A):q}function dJ(Z,z){var X=[];while(Z){var K=Z.type;if(K==="paragraph"||K==="codeBlock")X.push(p([p3(Z),A1(Z)-1],[q1(Z),n5(Z)+1],z));Z=Z.next}return X}function IA(Z){var z=[];while(Z)z.push(p([p3(Z),A1(Z)],[q1(Z),n5(Z)+1],a4)),Z=Z.next;return z}function DA(Z,z,X){var K=Z.parent&&Z.parent.type!=="blockQuote"?[p(z,X,UA)]:[];if(Z.firstChild){var J=[];if(Z.firstChild.type==="paragraph")J=IA(Z.firstChild.firstChild);else if(Z.firstChild.type==="list")J=dJ(Z.firstChild,a4);K=u0(u0([],K),J)}return K}function CA(Z){var z=0;while(Z.parent.parent&&Z.parent.parent.type==="item")Z=Z.parent.parent,z+=1;var X=[{odd:!0},{even:!0}][z%2];return[qA,P(P({},X),{listStyle:!0})]}function SA(Z,z){var X=Z.listData,K=X.padding,J=X.task,Q=CA(Z),Y=[p.apply(void 0,u0([z,U0(z,K)],Q))];if(J)Y.push(p(U0(z,K),U0(z,K+3),jA)),Y.push(p(U0(z,K+1),U0(z,K+2),H1));return Y.concat(dJ(Z.firstChild,a4))}var OX={heading:BA,strong:h9,emph:h9,strike:h9,link:PA,image:EA,code:OA,codeBlock:MA,blockQuote:DA,item:SA,customBlock:LA},MX={thematicBreak:HA,table:AA,tableCell:VA,htmlInline:RA};function bA(Z,z,X,K){var J=Z.type;if(c0(OX[J]))return OX[J](Z,z,X,K);if(MX[J])return[p(z,X,MX[J])];return null}var c3={};function kA(Z){var{schema:z,toastMark:X}=Z;return new X0({appendTransaction:function(K,J,Q){var Y=K[0],G=Q.tr;if(Y.docChanged){var U=[],q=Y.getMeta("editResult");q.forEach(function(A){var{nodes:V,removedNodeRange:W}=A;if(V.length){U=U.concat(wA(G,V));for(var j=0,H=V;j<H.length;j++){var R=H[j],F=R.walker(),B=F.next();while(B){var{node:O,entering:M}=B;if(M)U=U.concat(uA(O,X));B=F.next()}}}else if(W){var I=G.doc.childCount-1,D=W.line,b=D[0],x=D[1],u=Math.min(b,I),T=Math.min(x,I);for(var c=u;c<=T;c+=1)c3[c]=!0}}),yA(G,z,U)}return G.setMeta("widget",Y.getMeta("widget"))}})}function NA(Z,z,X){return Object.keys(X).some(function(K){return X[K]!==Z.child(z).attrs[K]})}function TA(Z,z,X,K,J){if(J===void 0)J={};var{startIndex:Q,endIndex:Y,from:G,to:U}=K,q=!1;for(var A=Q;A<=Y;A+=1)delete c3[A],q=NA(z,A,J);if(q)Z.setBlockType(G,U,X,J)}function yA(Z,z,X){var K=Z.doc,J=z.nodes.paragraph,Q=cJ(K,K.childCount);X.forEach(function(Y){var{start:G,end:U,spec:q,lineBackground:A}=Y,V=Math.min(G[0],K.childCount)-1,W=Math.min(U[0],K.childCount)-1,j=K.child(V),H=K.child(W),R=Q[V],F=Q[W];if(R+=G[1]+J3(j,G[1]-1),F+=U[1]+J3(H,U[1]-1),q)if(A){var B={from:R,to:F,startIndex:V,endIndex:W};TA(Z,K,J,B,q.attrs)}else Z.addMark(R,F,z.mark(q.type,q.attrs));else Z.removeMark(R,F)}),xA(Z,Q,J)}function xA(Z,z,X){Object.keys(c3).forEach(function(K){var J=Number(K),Q=Math.min(Number(K)+1,Z.doc.childCount-1),Y=z[J],G=z[Q]-1;if(J===Q)G+=2;Z.setBlockType(Y,G,X)})}function gA(Z,z,X){var K=[];c3={};for(var J=z[0]-1;J<X[0];J+=1){var Q=Z.child(J),Y=Q.attrs.codeEnd,G=Q.attrs.codeStart;if(G&&Y&&!F0(K,G)){K.push(G),Y=Math.min(Y,Z.childCount);var U=G-1,q=X[0];for(var A=U;A<q;A+=1)c3[A]=!0}}}function wA(Z,z){var X=Z.doc,K=z[0].sourcepos[0],J=C0(z).sourcepos,Q=J[1],Y=[K[0],K[1]],G=[Q[0],Q[1]+1],U=[];return gA(X,K,Q),U.push({start:Y,end:G}),U}function uA(Z,z){var X=z.getLineTexts(),K=[p3(Z),A1(Z)],J=[q1(Z),n5(Z)+1],Q=bA(Z,K,J,X[J[0]-1]);return Q!==null&&Q!==void 0?Q:[]}var vA=["taskList","orderedList","bulletList","table","strong","emph","strike","heading","thematicBreak","blockQuote","code","codeBlock","indent","outdent"];function $A(Z){var z=Z.type;if(F8(Z)){if(Z.listData.task)return"taskList";return Z.listData.type==="ordered"?"orderedList":"bulletList"}if(z.indexOf("table")!==-1)return"table";if(!F0(vA,z))return null;return z}function fA(Z){var z={indent:{active:!1,disabled:!0},outdent:{active:!1,disabled:!0}},X=!0;return b2(Z,function(K){var J=$A(K);if(!J)return;if(J==="bulletList"||J==="orderedList"){if(X)z[J]={active:!0},z.indent.disabled=!1,z.outdent.disabled=!1,X=!1}else z[J]={active:!0}}),z}function hA(Z){var{toastMark:z,eventEmitter:X}=Z;return new X0({view:function(){return{update:function(K,J){var Q=K.state,Y=Q.doc,G=Q.selection;if(J&&J.doc.eq(Y)&&J.selection.eq(G))return;var U=G.from,q=Q.doc.resolve(U).start(),A=Q.doc.content.findIndex(U).index+1,V=U-q;if(U===q)V+=1;var W=[A,V],j=z.findNodeAtPosition(W),H=fA(j);X.emit("changeToolbarState",{cursorPos:W,mdNode:j,toolbarState:H}),X.emit("setFocusedNode",j)}}}})}var _A=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"doc"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{content:"block+"}},enumerable:!1,configurable:!0}),z}(d),a=function(){function Z(){}return Object.defineProperty(Z.prototype,"type",{get:function(){return"mark"},enumerable:!1,configurable:!0}),Z.prototype.setContext=function(z){this.context=z},Z}();function $0(Z,z){return r5(Z,z-1)}function r5(Z,z){return Z.child(z).textContent}var h3=/^\s*> ?/,mA=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"blockQuote"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q0("block-quote")},0]}}},enumerable:!1,configurable:!0}),z.prototype.createBlockQuoteText=function(X,K){return K?X.replace(h3,"").trim():"> "+X.trim()},z.prototype.extendBlockQuote=function(){var X=this;return function(K,J){var{selection:Q,doc:Y,tr:G,schema:U}=K,q=J0(Q),A=q.endFromOffset,V=q.endToOffset,W=q.endIndex,j=q.to,H=r5(Y,W),R=h3.test(H);if(R&&j>A&&Q.empty){var F=!H.replace(h3,"").trim();if(F)G.deleteRange(A,V).split(G.mapping.map(V));else{var B=H.slice(j-A).trim(),O=R0(U,X.createBlockQuoteText(B));l4(G,V,B,O)}return J(G),!0}return!1}},z.prototype.commands=function(){var X=this;return function(){return function(K,J){var{selection:Q,doc:Y}=K,G=J0(Q),U=G.startFromOffset,q=G.endToOffset,A=G.startIndex,V=G.endIndex,W=h3.test(r5(Y,A)),j=aZ({state:K,startIndex:A,endIndex:V,from:U,createText:function(H){return X.createBlockQuoteText(H,W)}});return J(j.setSelection(n(j,j.mapping.map(q)))),!0}}},z.prototype.keymaps=function(){var X=this.commands()();return{"alt-q":X,"alt-Q":X,Enter:this.extendBlockQuote()}},z}(a),P8=/(^\s*)([-*+] |[\d]+\. )/,r4=/(^\s*)([\d])+\.( \[[ xX]])? /,C5=/^(\s*)((\d+)([.)]\s(?:\[(?:x|\s)\]\s)?))(.*)/,oZ=/(^\s*)([-*+]|[\d]+\.)( \[[ xX]])? /,lA=/^(\s*)([-*+]+(\s(?:\[(?:x|\s)\]\s)?))(.*)/,cA=/(^\s*)([-*+] |[\d]+\. )(\[[ xX]] )/,pA=/(^\s*)([-*+])( \[[ xX]]) /;function o4(Z){return r4.test(Z)?"ordered":"bullet"}function t4(Z){var z=0;while(Z&&Z.type!=="document"){if(Z.type==="list")z+=1;Z=Z.parent}return z}function A4(Z,z,X,K){var J=Z.getLineTexts(),Q=J.length,Y=[],G=z;while(K?G<Q:G>1){G=K?G+1:G-1;var U=Z.findFirstNodeAtLine(G),q=t4(U);if(q===X)Y.push({line:G,depth:X,mdNode:U});else if(q<X)break}return Y}function iA(Z){var{toastMark:z,mdNode:X,line:K}=Z,J=t4(X),Q=A4(z,K,J,!1).reverse(),Y=A4(z,K,J,!0);return Q.concat([{line:K,depth:J,mdNode:X}]).concat(Y)}function dA(Z){if(!P8.test(Z))return"* "+Z;var z=o4(Z);if(z==="bullet"&&oZ.test(Z))Z=Z.replace(pA,"$1$2 ");else if(z==="ordered")Z=Z.replace(r4,"$1* ");return Z}function sA(Z,z){if(!P8.test(Z))return z+". "+Z;var X=o4(Z);if(X==="bullet"||X==="ordered"&&oZ.test(Z))Z=Z.replace(oZ,"$1"+z+". ");else if(X==="ordered"){var K=C5.exec(Z)[3];if(Number(K)!==z)Z=Z.replace(r4,"$1"+z+". ")}return Z}function sJ(Z,z,X,K){if(K===void 0)K=0;var J=Number.MAX_VALUE,Q=0,Y=z.map(function(G,U){var q=G.line;J=Math.min(q-1,J),Q=Math.max(q-1,Q);var A=$0(Z,q);return A=X==="bullet"?dA(A):sA(A,U+1+K),{text:A,line:q}});return{changedResults:Y,firstIndex:J,lastIndex:Q}}function LX(Z,z){var X=iA(z);return sJ(z.doc,X,Z)}var nA={bullet:function(Z){return LX("bullet",Z)},ordered:function(Z){return LX("ordered",Z)},task:function(Z){var{mdNode:z,doc:X,line:K}=Z,J=$0(X,K);if(z.listData.task)J=J.replace(cA,"$1$2");else if(F8(z))J=J.replace(P8,"$1$2[ ] ");return{changedResults:[{text:J,line:K}]}}},aA={bullet:function(Z){var{doc:z,line:X}=Z,K=$0(z,X),J=[{text:"* "+K,line:X}];return{changedResults:J}},ordered:function(Z){var{toastMark:z,doc:X,line:K,startLine:J}=Z,Q=$0(X,K),Y=1,G=J,U=0;for(var q=J-1;q>0;q-=1){var A=z.findFirstNodeAtLine(q),V=$0(X,q),W=V&&!!X3(A,function(M){return F8(M)}),j=C5.exec($0(X,q));if(!j&&!W)break;if(!j&&W){U+=1;continue}var H=j,R=H[1],F=H[3];if(!R){Y=Number(F),G=q;break}}var B=Y+K-G-U,O=[{text:B+". "+Q,line:K}];return{changedResults:O}},task:function(Z){var{doc:z,line:X}=Z,K=$0(z,X),J=[{text:"* [ ] "+K,line:X}];return{changedResults:J}}},rA={bullet:function(Z){var{line:z,doc:X}=Z,K=$0(X,z),J=lA.exec(K),Q=J[1],Y=J[2];return{listSyntax:""+Q+Y}},ordered:function(Z){var{toastMark:z,line:X,mdNode:K,doc:J}=Z,Q=t4(K),Y=$0(J,X),G=C5.exec(Y),U=G[1],q=G[3],A=G[4],V=Number(q)+1,W=""+U+V+A,j=A4(z,X,Q,!0),H=j.filter(function(R){var F=C5.exec($0(J,R.line));return F&&F[1].length===U.length&&!!X3(R.mdNode,function(B){return MJ(B)})});return P({listSyntax:W},sJ(J,H,"ordered",V))}};function nJ(Z,z,X,K,J){var Q=[],Y=$0(Z,X),G=C5.exec(Y);while(G){var U=G[1],q=G[4],A=G[5],V=U.length;if(V===J)Q.push(R0(z,""+U+K+q+A)),K+=1,X+=1;else if(V>J){var W=nJ(Z,z,X,1,V);X=W.line,Q=Q.concat(W.nodes)}if(V<J||X>Z.childCount)break;Y=$0(Z,X),G=C5.exec(Y)}return{nodes:Q,line:X}}var IX=/(^\s{1,4})(.*)/;function DX(Z,z,X){return Z<z||P8.test(X)||h3.test(X)}function CX(Z,z,X){var K=X.$from;if(K.depth===0)K=Z.resolve(K.pos-1);var J=K.node(1),Q=K.start(1),Y=J.content.size;return J.rangeHasMark(0,Y,z.marks.table)&&K.pos-Q!==Y&&K.pos!==Q}function SX(Z,z){var{from:X,to:K}=z;if(z.type==="indent"){var J=4;X+=J,K+=(z.lineLen+1)*J}else{var Q=z.spaceLenList;X-=Q[0];for(var Y=0;Y<Q.length;Y+=1)K-=Q[Y]}return n(Z,X,K)}var oA=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"paragraph"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{content:"inline*",attrs:{className:{default:null},codeStart:{default:null},codeEnd:{default:null}},selectable:!1,group:"block",parseDOM:[{tag:"div"}],toDOM:function(X){var K=X.attrs;return K.className?["div",{class:Q0(K.className)},0]:["div",0]}}},enumerable:!1,configurable:!0}),z.prototype.reorderList=function(X,K){var J=this.context,Q=J.view,Y=J.toastMark,G=J.schema,U=Q.state,q=U.tr,A=U.selection,V=U.doc,W=Y.findFirstNodeAtLine(X),j=W;while(W&&!C2(W)&&W.parent.type!=="document")if(W=W.parent,MJ(W)){j=W;break}if(j)X=j.sourcepos[0][0];var H=C5.exec($0(V,X)),R=H[1],F=H[3],B=R.length,O=nJ(V,G,X,Number(F),B),M=O.line,I=O.nodes;K=Math.max(K,M-1);var D=rZ(V,X-1).startOffset;for(var b=X-1;b<=K-1;b+=1){var x=V.child(b),u=x.nodeSize,T=x.content,c=q.mapping.map(D),r=c+T.size;q.replaceWith(c,r,I[b-X+1]),D+=u}var g0=n(q,A.from,A.to);Q.dispatch(q.setSelection(g0))},z.prototype.indent=function(X){var K=this;if(X===void 0)X=!1;return function(){return function(J,Q){var{schema:Y,selection:G,doc:U}=J,q=J0(G),A=q.from,V=q.to,W=q.startFromOffset,j=q.startIndex,H=q.endIndex;if(X&&CX(U,Y,G))return!1;var R=r5(U,j);if(X&&DX(A,V,R)||!X&&P8.test(R)){var F=aZ({state:J,from:W,startIndex:j,endIndex:H,createText:function(O){return"    "+O}}),B={type:"indent",from:A,to:V,lineLen:H-j};if(Q(F.setSelection(SX(F,B))),C5.test(R))K.reorderList(j+1,H+1)}else if(X)Q(J.tr.insert(V,R0(Y,"    ")));return!0}}},z.prototype.outdent=function(X){var K=this;if(X===void 0)X=!1;return function(){return function(J,Q){var{selection:Y,doc:G,schema:U}=J,q=J0(Y),A=q.from,V=q.to,W=q.startFromOffset,j=q.startIndex,H=q.endIndex;if(X&&CX(G,U,Y))return!1;var R=r5(G,j);if(X&&DX(A,V,R)||!X&&P8.test(R)){var F=[],B=aZ({state:J,from:W,startIndex:j,endIndex:H,createText:function(b){var x=IX.exec(b);return F.push(x?x[1].length:0),b.replace(IX,"$2")}}),O={type:"outdent",from:A,to:V,spaceLenList:F};if(Q(B.setSelection(SX(B,O))),C5.test(R))K.reorderList(j+1,H+1)}else if(X){var M=R.slice(0,V-W),I=M.replace(/\s{1,4}$/,""),D=V-(M.length-I.length);Q(J.tr.delete(D,V))}return!0}}},z.prototype.deleteLines=function(){var X=this;return function(K,J){var Q=X.context.view,Y=J0(K.selection),G=Y.startFromOffset,U=Y.endToOffset,q=function(){return J(K.tr.deleteRange(G,U)),!0};return g3(q,k9)(K,J,Q)}},z.prototype.moveDown=function(){return function(X,K){var{doc:J,tr:Q,selection:Y,schema:G}=X,U=J0(Y),q=U.startFromOffset,A=U.endToOffset,V=U.endIndex;if(V<J.content.childCount-1){var W=J.child(V+1),j=W.nodeSize,H=W.textContent;return Q.delete(A,A+j).split(q).insert(Q.mapping.map(q)-2,R0(G,H)),K(Q),!0}return!1}},z.prototype.moveUp=function(){return function(X,K){var{tr:J,doc:Q,selection:Y,schema:G}=X,U=J0(Y),q=U.startFromOffset,A=U.endToOffset,V=U.startIndex;if(V>0){var W=Q.child(V-1),j=W.nodeSize,H=W.textContent;return J.delete(q-j,q).split(J.mapping.map(A)).insert(J.mapping.map(A),R0(G,H)),K(J),!0}return!1}},z.prototype.commands=function(){return{indent:this.indent(),outdent:this.outdent()}},z.prototype.keymaps=function(){return{Tab:this.indent(!0)(),"Shift-Tab":this.outdent(!0)(),"Mod-d":this.deleteLines(),"Mod-D":this.deleteLines(),"Alt-ArrowUp":this.moveUp(),"Alt-ArrowDown":this.moveDown()}},z}(d),tA=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"text"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{group:"inline"}},enumerable:!1,configurable:!0}),z}(d),eA=/^#{1,6}\s/,ZV=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"heading"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{attrs:{level:{default:1},seText:{default:!1}},toDOM:function(X){var K=X.attrs,J=K.level,Q=K.seText,Y="heading|heading"+J;if(Q)Y+="|delimiter|setext";return["span",{class:Q0.apply(void 0,Y.split("|"))},0]}}},enumerable:!1,configurable:!0}),z.prototype.createHeadingText=function(X,K,J){var Q=K.replace(J,"").trim(),Y="";while(X>0)Y+="#",X-=1;return Y+" "+Q},z.prototype.commands=function(){var X=this;return function(K){return function(J,Q){var Y=K.level,G=J0(J.selection),U=G.startFromOffset,q=G.endToOffset,A=G.startIndex,V=G.endIndex,W=aZ({state:J,from:U,startIndex:A,endIndex:V,createText:function(j){var H=j.match(eA),R=H?H[0]:"";return X.createHeadingText(Y,j,R)}});return Q(W.setSelection(n(W,W.mapping.map(q)))),!0}}},z}(a),_9="```",zV=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"codeBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q0("code-block")},0]}}},enumerable:!1,configurable:!0}),z.prototype.commands=function(){return function(){return function(X,K){var{selection:J,schema:Q,tr:Y}=X,G=J0(J),U=G.startFromOffset,q=G.endToOffset,A=R0(Q,_9);return Y.insert(U,A).split(U+_9.length),Y.split(Y.mapping.map(q)).insert(Y.mapping.map(q),A),K(Y.setSelection(n(Y,Y.mapping.map(q)-(_9.length+2)))),!0}}},z.prototype.keepIndentation=function(){var X=this;return function(K,J){var{selection:Q,tr:Y,doc:G,schema:U}=K,q=X.context.toastMark,A=J0(Q),V=A.startFromOffset,W=A.endToOffset,j=A.endIndex,H=A.from,R=A.to,F=r5(G,j);if(H===R&&F.trim()){var B=F.match(/^\s+/),O=q.findFirstNodeAtLine(j+1);if(D2(O)&&B){var M=B[0],I=F.slice(R-V),D=R0(U,M+I);return l4(Y,W,I,D),J(Y),!0}}return!1}},z.prototype.keymaps=function(){var X=this.commands()();return{"Shift-Mod-p":X,"Shift-Mod-P":X,Enter:this.keepIndentation()}},z}(a),XV=/\||\s/g;function KV(Z){return[tZ(Z),tZ(Z,!0)]}function JV(Z,z){var X=[];for(var K=0;K<z;K+=1)X.push(tZ(Z));return X}function tZ(Z,z){var X="|";for(var K=0;K<Z;K+=1)X+=z?" --- |":"  |";return X}function QV(Z){return Z?{type:"next",parentType:"tableHead",childType:"firstChild"}:{type:"prev",parentType:"tableBody",childType:"lastChild"}}var YV=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"table"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q0("table")},0]}}},enumerable:!1,configurable:!0}),z.prototype.extendTable=function(){var X=this;return function(K,J){var{selection:Q,doc:Y,tr:G,schema:U}=K;if(!Q.empty)return!1;var q=J0(Q),A=q.endFromOffset,V=q.endToOffset,W=q.endIndex,j=q.to,H=r5(Y,W),R=[W+1,j-A+1],F=X.context.toastMark.findNodeAtPosition(R),B=X3(F,function(b){return jX(b)&&(b.parent.type==="tableDelimRow"||b.parent.parent.type==="tableBody")});if(B){var O=!H.replace(XV,"").trim(),M=B.parent,I=M.parent.parent.columns.length,D=tZ(I);if(O)G.deleteRange(A,V).split(G.mapping.map(V));else G.split(V).insert(G.mapping.map(V),R0(U,D)).setSelection(n(G,G.mapping.map(V)-2));return J(G),!0}return!1}},z.prototype.moveTableCell=function(X){var K=this;return function(J,Q){var{selection:Y,tr:G}=J,U=J0(Y),q=U.endFromOffset,A=U.endIndex,V=U.to,W=[A+1,V-q],j=K.context.toastMark.findNodeAtPosition(W),H=X3(j,function(x){return jX(x)});if(H){var R=H.parent,F=QV(X),B=F.type,O=F.parentType,M=F.childType,I=n5(H);if(H[B])I=n5(H[B])-1;else{var D=!R[B]&&R.parent.type===O?R.parent[B][M]:R[B];if(B==="next"){var b=D?n5(D[M]):0;I+=b+2}else if(B==="prev")I=D?-4:0}return Q(G.setSelection(n(G,q+I))),!0}return!1}},z.prototype.addTable=function(){return function(X){return function(K,J){var{selection:Q,tr:Y,schema:G}=K,U=X,q=U.columnCount,A=U.rowCount,V=J0(Q).endToOffset,W=KV(q),j=JV(q,A-1),H=u0(u0([],W),j);return H.forEach(function(R){Y.split(Y.mapping.map(V)).insert(Y.mapping.map(V),R0(G,R))}),J(Y.setSelection(n(Y,V+4))),!0}}},z.prototype.commands=function(){return{addTable:this.addTable()}},z.prototype.keymaps=function(){return{Enter:this.extendTable(),Tab:this.moveTableCell(!0),"Shift-Tab":this.moveTableCell(!1)}},z}(a),GV="***",UV=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"thematicBreak"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q0("thematic-break")},0]}}},enumerable:!1,configurable:!0}),z.prototype.hr=function(){return function(){return function(X,K){var{selection:J,schema:Q,tr:Y}=X,G=J0(J),U=G.from,q=G.to,A=G.endToOffset,V=R0(Q,GV);return Y.split(U).replaceWith(Y.mapping.map(U),Y.mapping.map(q),V).split(Y.mapping.map(q)).setSelection(n(Y,Y.mapping.map(A))),K(Y),!0}}},z.prototype.commands=function(){return{hr:this.hr()}},z.prototype.keymaps=function(){var X=this.hr()();return{"Mod-l":X,"Mod-L":X}},z}(a);function qV(Z,z){var{type:X,sourcepos:K}=Z,J=K[0][0];return z<=J&&(X==="codeBlock"||X==="heading"||X.match("table"))}var AV=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"listItem"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{attrs:{odd:{default:!1},even:{default:!1},listStyle:{default:!1}},toDOM:function(X){var K=X.attrs,J=K.odd,Q=K.even,Y=K.listStyle,G="list-item";if(Y)G+="|list-item-style";if(J)G+="|list-item-odd";if(Q)G+="|list-item-even";return["span",{class:Q0.apply(void 0,G.split("|"))},0]}}},enumerable:!1,configurable:!0}),z.prototype.extendList=function(){var X=this;return function(K,J){var{selection:Q,doc:Y,schema:G,tr:U}=K,q=X.context.toastMark,A=J0(Q),V=A.to,W=A.startFromOffset,j=A.endFromOffset,H=A.endIndex,R=A.endToOffset,F=r5(Y,H),B=P8.test(F);if(!B||Q.from===W||!Q.empty)return!1;var O=!F.replace(oZ,"").trim();if(O)U.deleteRange(j,R).split(U.mapping.map(R));else{var M=o4(F),I=q.findFirstNodeAtLine(H+1),D=F.slice(V-j),b={toastMark:q,mdNode:I,doc:Y,line:H+1},x=rA[M](b),u=x.listSyntax,T=x.changedResults;if(T===null||T===void 0?void 0:T.length){U.split(V),T.unshift({text:u+D,line:H+1}),X.changeToListPerLine(U,T,{from:V,startLine:T[0].line,endLine:C0(T).line});var c=U.mapping.map(R)-D.length;U.setSelection(n(U,c))}else{var r=R0(G,u+D);l4(U,R,D,r)}}return J(U),!0}},z.prototype.toList=function(X){var K=this;return function(){return function(J,Q){var{doc:Y,tr:G,selection:U}=J,q=K.context.toastMark,A=J0(U),V=A.startIndex+1,W=A.endIndex+1,j=A.endToOffset,H=[];for(var R=V;R<=W;R+=1){var F=q.findFirstNodeAtLine(R);if(F&&qV(F,R))break;if(H.indexOf(R)!==-1)continue;var B={toastMark:q,mdNode:F,doc:Y,line:R,startLine:V},O=(F8(F)?nA[X](B):aA[X](B)).changedResults,M=K.changeToListPerLine(G,O,{from:rZ(Y,O[0].line-1).startOffset,startLine:O[0].line,endLine:C0(O).line,indexDiff:1});if(j=Math.max(M,j),O)H=H.concat(O.map(function(I){return I.line}))}return Q(G.setSelection(n(G,G.mapping.map(j)))),!0}}},z.prototype.changeToListPerLine=function(X,K,J){var{from:Q,startLine:Y,endLine:G,indexDiff:U}=J,q=U===void 0?0:U,A=0,V=function(H){var R=X.doc.child(H),F=R.nodeSize,B=R.content,O=X.mapping.map(Q),M=O+B.size,I=K.filter(function(D){return D.line-q===H})[0];if(I)X.replaceWith(O,M,R0(W.context.schema,I.text)),A=Math.max(A,Q+B.size);Q+=F},W=this;for(var j=Y-q;j<=G-q;j+=1)V(j);return A},z.prototype.toggleTask=function(){var X=this;return function(K,J){var{selection:Q,tr:Y,doc:G,schema:U}=K,q=X.context.toastMark,A=J0(Q),V=A.startIndex,W=A.endIndex,j=null;for(var H=V;H<=W;H+=1){var R=q.findFirstNodeAtLine(H+1);if(F8(R)&&R.listData.task){var F=R.listData,B=F.checked,O=F.padding,M=B?" ":"x",I=R.sourcepos[0],D=rZ(G,I[0]-1).startOffset;D+=I[1]+O,j=Y.replaceWith(D,D+1,U.text(M))}}if(j)return J(j),!0;return!1}},z.prototype.commands=function(){return{bulletList:this.toList("bullet"),orderedList:this.toList("ordered"),taskList:this.toList("task")}},z.prototype.keymaps=function(){var X=this.toList("bullet")(),K=this.toList("ordered")(),J=this.toList("task")(),Q=this.toggleTask();return{"Mod-u":X,"Mod-U":X,"Mod-o":K,"Mod-O":K,"alt-t":J,"alt-T":J,"Shift-Ctrl-x":Q,"Shift-Ctrl-X":Q,Enter:this.extendList()}},z}(a);function j1(Z,z){return function(){return function(X,K){var{tr:J,selection:Q}=X,Y=!c0(Z)?function(M){return Z.test(M)}:Z,G=z.length,U=J.doc,q=lJ(Q),A=q[0],V=q[1],W=Math.max(A-G,1),j=Math.min(V+G,U.content.size-1),H=Q.content(),R=H.content.textBetween(0,H.content.size,`
`),F=U.textBetween(W,A,`
`),B=U.textBetween(V,j,`
`);if(R=""+F+R+B,F&&B&&Y(R))J.delete(j-G,j).delete(W,W+G);else{J.insertText(z,V).insertText(z,A);var O=Q.empty?n(J,A+G):n(J,A+G,V+G);J.setSelection(O)}return K(J),!0}}}var VV=/^(\*{2}|_{2}).*([\s\S]*)\1$/m,WV="**",HV=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"strong"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q0("strong")},0]}}},enumerable:!1,configurable:!0}),z.prototype.bold=function(){return j1(VV,WV)},z.prototype.commands=function(){return{bold:this.bold()}},z.prototype.keymaps=function(){var X=this.bold()();return{"Mod-b":X,"Mod-B":X}},z}(a),jV=/^(~{2}).*([\s\S]*)\1$/m,RV="~~",FV=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"strike"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q0("strike")},0]}}},enumerable:!1,configurable:!0}),z.prototype.commands=function(){return j1(jV,RV)},z.prototype.keymaps=function(){var X=this.commands()();return{"Mod-s":X,"Mod-S":X}},z}(a),BV=/^(\*|_).*([\s\S]*)\1$/m,EV="*",PV=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"emph"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q0("emph")},0]}}},enumerable:!1,configurable:!0}),z.prototype.italic=function(){return j1(BV,EV)},z.prototype.commands=function(){return{italic:this.italic()}},z.prototype.keymaps=function(){var X=this.italic()();return{"Mod-i":X,"Mod-I":X}},z}(a),OV=/^(`).*([\s\S]*)\1$/m,MV="`",LV=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"code"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{attrs:{start:{default:!1},end:{default:!1},marked:{default:!1}},toDOM:function(X){var K=X.attrs,J=K.start,Q=K.end,Y=K.marked,G="code";if(J)G+="|delimiter|start";if(Q)G+="|delimiter|end";if(Y)G+="|marked-text";return["span",{class:Q0.apply(void 0,G.split("|"))},0]}}},enumerable:!1,configurable:!0}),z.prototype.commands=function(){return j1(OV,MV)},z.prototype.keymaps=function(){var X=this.commands()();return{"Shift-Mod-c":X,"Shift-Mod-C":X}},z}(a),IV=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"link"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{attrs:{url:{default:!1},desc:{default:!1}},toDOM:function(X){var K=X.attrs,J=K.url,Q=K.desc,Y="link";if(J)Y+="|link-url|marked-text";if(Q)Y+="|link-desc|marked-text";return["span",{class:Q0.apply(void 0,Y.split("|"))},0]}}},enumerable:!1,configurable:!0}),z.prototype.addLinkOrImage=function(X){return function(K){return function(J,Q){var{selection:Y,tr:G,schema:U}=J,q=lJ(Y),A=q[0],V=q[1],W=K,j=W.linkText,H=W.altText,R=W.linkUrl,F=W.imageUrl,B=j,O=R,M="";if(X==="image")B=H,O=F,M="!";return B=dZ(B),M+="["+B+"]("+O+")",Q(G.replaceWith(A,V,R0(U,M))),!0}}},z.prototype.commands=function(){return{addImage:this.addLinkOrImage("image"),addLink:this.addLinkOrImage("link")}},z}(a),DV=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"taskDelimiter"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q0("delimiter","list-item")},0]}}},enumerable:!1,configurable:!0}),z}(a),CV=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"delimiter"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q0("delimiter")},0]}}},enumerable:!1,configurable:!0}),z}(a),SV=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"meta"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q0("meta")},0]}}},enumerable:!1,configurable:!0}),z}(a),bV=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"markedText"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q0("marked-text")},0]}}},enumerable:!1,configurable:!0}),z}(a),kV=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"tableCell"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q0("table-cell")},0]}}},enumerable:!1,configurable:!0}),z}(a),NV=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"html"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q0("html")},0]}}},enumerable:!1,configurable:!0}),z}(a),m9="$$",TV=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"customBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Q0("custom-block")},0]}}},enumerable:!1,configurable:!0}),z.prototype.commands=function(){return function(X){return function(K,J){var{selection:Q,schema:Y,tr:G}=K,U=J0(Q),q=U.startFromOffset,A=U.endToOffset;if(!(X===null||X===void 0?void 0:X.info))return!1;var V=""+m9+X.info,W=R0(Y,V),j=R0(Y,m9);return G.insert(q,W).split(q+V.length),G.split(G.mapping.map(A)).insert(G.mapping.map(A),j),J(G.setSelection(n(G,G.mapping.map(A)-(m9.length+2)))),!0}}},z}(a),yV=/x|backspace/i,xV=/^\[(\s*)(x?)(\s*)\](?:\s+)/i;function gV(Z){var{schema:z,toastMark:X}=Z;return new X0({props:{handleDOMEvents:{keyup:function(K,J){var Q,Y=K.state,G=Y.doc,U=Y.tr,q=Y.selection;if(q.empty&&yV.test(J.key)){var A=J0(q),V=A.startIndex,W=A.startFromOffset,j=A.from,H=[V+1,j-W+1],R=X.findNodeAtPosition(H),F=X3(R,function(r){var g0;return r.type==="paragraph"&&((g0=r.parent)===null||g0===void 0?void 0:g0.type)==="item"});if((Q=F===null||F===void 0?void 0:F.firstChild)===null||Q===void 0?void 0:Q.literal){var B=F.firstChild,O=B.literal.match(xV);if(O){var M=B.sourcepos[0],I=O[1],D=O[2],b=O[3],x=I.length+b.length,u=rZ(G,M[0]-1).startOffset,T=M[1]+u;if(D){var c=x?x+1:0;U.replaceWith(T,c+T,z.text(D)),K.dispatch(U)}else if(!x)U.insertText(" ",T),K.dispatch(U)}}}return!1}}}})}var l9="cut",bX=/\r\n|\n|\r/,wV=function(Z){k(z,Z);function z(X,K){var J=Z.call(this,X)||this,Q=K.toastMark,Y=K.useCommandShortcut,G=Y===void 0?!0:Y,U=K.mdPlugins,q=U===void 0?[]:U;return J.editorType="markdown",J.el.classList.add("md-mode"),J.toastMark=Q,J.extraPlugins=q,J.specs=J.createSpecs(),J.schema=J.createSchema(),J.context=J.createContext(),J.keymaps=J.createKeymaps(G),J.view=J.createView(),J.commands=J.createCommands(),J.specs.setContext(P(P({},J.context),{view:J.view})),J.createClipboard(),J.eventEmitter.listen("changePreviewTabWrite",function(A){return J.toggleActive(!0,A)}),J.eventEmitter.listen("changePreviewTabPreview",function(){return J.toggleActive(!1)}),J.initEvent(),J}return z.prototype.toggleActive=function(X,K){if(p4(this.el,"active",X),X){if(!K)this.focus()}else this.blur()},z.prototype.createClipboard=function(){var X=this;this.clipboard=document.createElement("textarea"),this.clipboard.className=N("pseudo-clipboard"),this.clipboard.addEventListener("paste",function(K){var J=K.clipboardData||window.clipboardData,Q=J&&J.items;if(Q){var Y=V5(Q).some(function(U){return U.kind==="string"&&U.type==="text/rtf"});if(!Y){var G=$J(Q);if(G)K.preventDefault(),n4(X.eventEmitter,G,K.type)}}}),this.clipboard.addEventListener("input",function(K){var J=K.target.value;X.replaceSelection(J),K.preventDefault(),K.target.value=""}),this.el.insertBefore(this.clipboard,this.view.dom)},z.prototype.createContext=function(){return{toastMark:this.toastMark,schema:this.schema,eventEmitter:this.eventEmitter}},z.prototype.createSpecs=function(){return new mJ([new _A,new oA,new hJ,new tA,new ZV,new mA,new zV,new TV,new YV,new kV,new UV,new AV,new HV,new FV,new PV,new LV,new IV,new CV,new DV,new bV,new SV,new NV])},z.prototype.createPlugins=function(){return u0([kA(this.context),hA(this.context),gV(this.context)],this.createPluginProps()).concat(this.defaultPlugins)},z.prototype.createView=function(){var X=this;return new y3(this.el,{state:this.createState(),dispatchTransaction:function(K){X.updateMarkdown(K);var J=X.view.state.applyTransaction(K).state;X.view.updateState(J),X.emitChangeEvent(K)},handleKeyDown:function(K,J){if((J.metaKey||J.ctrlKey)&&J.key.toUpperCase()==="V")X.clipboard.focus();return X.eventEmitter.emit("keydown",X.editorType,J),!1},handleDOMEvents:{copy:function(K,J){return X.captureCopy(J)},cut:function(K,J){return X.captureCopy(J,l9)},scroll:function(){return X.eventEmitter.emit("scroll","editor"),!0},keyup:function(K,J){return X.eventEmitter.emit("keyup",X.editorType,J),!1}},nodeViews:{widget:fJ}})},z.prototype.createCommands=function(){return this.specs.commands(this.view)},z.prototype.captureCopy=function(X,K){X.preventDefault();var J=this.view.state,Q=J.selection,Y=J.tr;if(Q.empty)return!0;var G=this.getChanged(Q.content());if(X.clipboardData)X.clipboardData.setData("text/plain",G);else window.clipboardData.setData("Text",G);if(K===l9)this.view.dispatch(Y.deleteSelection().scrollIntoView().setMeta("uiEvent",l9));return!0},z.prototype.updateMarkdown=function(X){var K=this;if(X.docChanged)X.steps.forEach(function(J,Q){if(J.slice&&!(J instanceof t)){var Y=X.docs[Q],G=[J.from,J.to],U=G[0],q=G[1],A=$Z(Y,U,q),V=A[0],W=A[1],j=K.getChanged(J.slice);if(V[0]===W[0]&&V[1]===W[1]&&j==="")j=`
`;var H=K.toastMark.editMarkdown(V,W,j);K.eventEmitter.emit("updatePreview",H),X.setMeta("editResult",H).scrollIntoView()}})},z.prototype.getChanged=function(X){var K="",J=0,Q=X.content.size;return X.content.nodesBetween(J,Q,function(Y,G){if(Y.isText)K+=Y.text.slice(Math.max(J,G)-G,Q-G);else if(Y.isBlock&&G>0)K+=`
`}),K},z.prototype.setSelection=function(X,K){if(K===void 0)K=X;var J=this.view.state.tr,Q=H8(J.doc,X,K),Y=Q[0],G=Q[1];this.view.dispatch(J.setSelection(n(J,Y,G)).scrollIntoView())},z.prototype.replaceSelection=function(X,K,J){var Q,Y=this.view.state,G=Y.tr,U=Y.schema,q=Y.doc,A=X.split(bX),V=A.map(function(F){return nZ(U,j8(F,U))}),W=new S(L.from(V),1,1);if(this.focus(),K&&J){var j=H8(q,K,J),H=j[0],R=j[1];Q=G.replaceRange(H,R,W)}else Q=G.replaceSelection(W);this.view.dispatch(Q.scrollIntoView())},z.prototype.deleteSelection=function(X,K){var J,Q=this.view.state,Y=Q.tr,G=Q.doc;if(X&&K){var U=H8(G,X,K),q=U[0],A=U[1];J=Y.deleteRange(q,A)}else J=Y.deleteSelection();this.view.dispatch(J.scrollIntoView())},z.prototype.getSelectedText=function(X,K){var J=this.view.state,Q=J.doc,Y=J.selection,G=Y.from,U=Y.to;if(X&&K){var q=H8(Q,X,K);G=q[0],U=q[1]}return Q.textBetween(G,U,`
`)},z.prototype.getSelection=function(){var X=this.view.state.selection,K=X.from,J=X.to;return $Z(this.view.state.tr.doc,K,J)},z.prototype.setMarkdown=function(X,K){if(K===void 0)K=!0;var J=X.split(bX),Q=this.view.state,Y=Q.tr,G=Q.doc,U=Q.schema,q=J.map(function(A){return nZ(U,j8(A,U))});if(this.view.dispatch(Y.replaceWith(0,G.content.size,q)),K)this.moveCursorToEnd(!0)},z.prototype.addWidget=function(X,K,J){var Q=this.view.state,Y=Q.tr,G=Q.doc,U=Q.selection,q=J?H8(G,J,J)[0]:U.to;this.view.dispatch(Y.setMeta("widget",{pos:q,node:X,style:K}))},z.prototype.replaceWithWidget=function(X,K,J){var Q=this.view.state,Y=Q.tr,G=Q.schema,U=Q.doc,q=H8(U,X,K),A=j8(J,G);this.view.dispatch(Y.replaceWith(q[0],q[1],A))},z.prototype.getRangeInfoOfNode=function(X){var K=this.view.state,J=K.doc,Q=K.selection,Y=X||$Z(J,Q.from)[0],G=this.toastMark.findNodeAtPosition(Y);if(G.type==="text"&&G.parent.type!=="paragraph")G=G.parent;return G.sourcepos[1][1]+=1,{range:G.sourcepos,type:G.type}},z.prototype.getMarkdown=function(){return this.toastMark.getLineTexts().map(function(X){return V1(X)}).join(`
`)},z.prototype.getToastMark=function(){return this.toastMark},z}(_J),kX="_feEventKey";function uV(Z,z){var X=Z[kX],K;if(!X)X=Z[kX]={};if(K=X[z],!K)K=X[z]=[];return K}var aJ=uV,vV=k5,eZ=U1,$V=aJ;function fV(Z,z,X){if(vV(z)){eZ(z.split(/\s+/g),function(K){NX(Z,K,X)});return}eZ(z,function(K,J){NX(Z,J,K)})}function NX(Z,z,X){var K=$V(Z,z),J;if(!X)eZ(K,function(Q){TX(Z,z,Q.wrappedHandler)}),K.splice(0,K.length);else eZ(K,function(Q,Y){if(X===Q.handler)return TX(Z,z,Q.wrappedHandler),J=Y,!1;return!0}),K.splice(J,1)}function TX(Z,z,X){if("removeEventListener"in Z)Z.removeEventListener(z,X);else if("detachEvent"in Z)Z.detachEvent("on"+z,X)}var rJ=fV,hV=k5,V4=U1,_V=aJ;function mV(Z,z,X,K){if(hV(z)){V4(z.split(/\s+/g),function(J){yX(Z,J,X,K)});return}V4(z,function(J,Q){yX(Z,Q,J,X)})}function yX(Z,z,X,K){function J(Q){X.call(K||Z,Q||window.event)}if("addEventListener"in Z)Z.addEventListener(z,J);else if("attachEvent"in Z)Z.attachEvent("on"+z,J);lV(Z,z,X,J)}function lV(Z,z,X,K){var J=_V(Z,z),Q=!1;if(V4(J,function(Y){if(Y.handler===X)return Q=!0,!1;return!0}),!Q)J.push({handler:X,wrappedHandler:K})}var oJ=mV;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var W4=function(Z,z){return W4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,K){X.__proto__=K}||function(X,K){for(var J in K)if(Object.prototype.hasOwnProperty.call(K,J))X[J]=K[J]},W4(Z,z)};function p0(Z,z){if(typeof z!=="function"&&z!==null)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");W4(Z,z);function X(){this.constructor=Z}Z.prototype=z===null?Object.create(z):(X.prototype=z.prototype,new X)}var j0=function(){return j0=Object.assign||function Z(z){for(var X,K=1,J=arguments.length;K<J;K++){X=arguments[K];for(var Q in X)if(Object.prototype.hasOwnProperty.call(X,Q))z[Q]=X[Q]}return z},j0.apply(this,arguments)};function H4(Z,z,X){if(X||arguments.length===2){for(var K=0,J=z.length,Q;K<J;K++)if(Q||!(K in z)){if(!Q)Q=Array.prototype.slice.call(z,0,K);Q[K]=z[K]}}return Z.concat(Q||Array.prototype.slice.call(z))}var Q3=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{},xX={};function cV(Z){var z,X,K=xX[Z];if(K)return K;K=xX[Z]=[];for(z=0;z<128;z++)if(X=String.fromCharCode(z),/^[0-9a-z]$/i.test(X))K.push(X);else K.push("%"+("0"+z.toString(16).toUpperCase()).slice(-2));for(z=0;z<Z.length;z++)K[Z.charCodeAt(z)]=Z[z];return K}function R1(Z,z,X){var K,J,Q,Y,G,U="";if(typeof z!=="string")X=z,z=R1.defaultChars;if(typeof X==="undefined")X=!0;G=cV(z);for(K=0,J=Z.length;K<J;K++){if(Q=Z.charCodeAt(K),X&&Q===37&&K+2<J){if(/^[0-9a-f]{2}$/i.test(Z.slice(K+1,K+3))){U+=Z.slice(K,K+3),K+=2;continue}}if(Q<128){U+=G[Q];continue}if(Q>=55296&&Q<=57343){if(Q>=55296&&Q<=56319&&K+1<J){if(Y=Z.charCodeAt(K+1),Y>=56320&&Y<=57343){U+=encodeURIComponent(Z[K]+Z[K+1]),K++;continue}}U+="%EF%BF%BD";continue}U+=encodeURIComponent(Z[K])}return U}R1.defaultChars=";/?:@&=+$,-_.!~*'()#";R1.componentChars="-_.!~*'()";var pV=R1,e4={},S5={},iV="Á",dV="á",sV="Ă",nV="ă",aV="∾",rV="∿",oV="∾̳",tV="Â",eV="â",ZW="´",zW="А",XW="а",KW="Æ",JW="æ",QW="⁡",YW="\uD835\uDD04",GW="\uD835\uDD1E",UW="À",qW="à",AW="ℵ",VW="ℵ",WW="Α",HW="α",jW="Ā",RW="ā",FW="⨿",BW="&",EW="&",PW="⩕",OW="⩓",MW="∧",LW="⩜",IW="⩘",DW="⩚",CW="∠",SW="⦤",bW="∠",kW="⦨",NW="⦩",TW="⦪",yW="⦫",xW="⦬",gW="⦭",wW="⦮",uW="⦯",vW="∡",$W="∟",fW="⊾",hW="⦝",_W="∢",mW="Å",lW="⍼",cW="Ą",pW="ą",iW="\uD835\uDD38",dW="\uD835\uDD52",sW="⩯",nW="≈",aW="⩰",rW="≊",oW="≋",tW="'",eW="⁡",ZH="≈",zH="≊",XH="Å",KH="å",JH="\uD835\uDC9C",QH="\uD835\uDCB6",YH="≔",GH="*",UH="≈",qH="≍",AH="Ã",VH="ã",WH="Ä",HH="ä",jH="∳",RH="⨑",FH="≌",BH="϶",EH="‵",PH="∽",OH="⋍",MH="∖",LH="⫧",IH="⊽",DH="⌅",CH="⌆",SH="⌅",bH="⎵",kH="⎶",NH="≌",TH="Б",yH="б",xH="„",gH="∵",wH="∵",uH="∵",vH="⦰",$H="϶",fH="ℬ",hH="ℬ",_H="Β",mH="β",lH="ℶ",cH="≬",pH="\uD835\uDD05",iH="\uD835\uDD1F",dH="⋂",sH="◯",nH="⋃",aH="⨀",rH="⨁",oH="⨂",tH="⨆",eH="★",Zj="▽",zj="△",Xj="⨄",Kj="⋁",Jj="⋀",Qj="⤍",Yj="⧫",Gj="▪",Uj="▴",qj="▾",Aj="◂",Vj="▸",Wj="␣",Hj="▒",jj="░",Rj="▓",Fj="█",Bj="=⃥",Ej="≡⃥",Pj="⫭",Oj="⌐",Mj="\uD835\uDD39",Lj="\uD835\uDD53",Ij="⊥",Dj="⊥",Cj="⋈",Sj="⧉",bj="┐",kj="╕",Nj="╖",Tj="╗",yj="┌",xj="╒",gj="╓",wj="╔",uj="─",vj="═",$j="┬",fj="╤",hj="╥",_j="╦",mj="┴",lj="╧",cj="╨",pj="╩",ij="⊟",dj="⊞",sj="⊠",nj="┘",aj="╛",rj="╜",oj="╝",tj="└",ej="╘",ZR="╙",zR="╚",XR="│",KR="║",JR="┼",QR="╪",YR="╫",GR="╬",UR="┤",qR="╡",AR="╢",VR="╣",WR="├",HR="╞",jR="╟",RR="╠",FR="‵",BR="˘",ER="˘",PR="¦",OR="\uD835\uDCB7",MR="ℬ",LR="⁏",IR="∽",DR="⋍",CR="⧅",SR="\\",bR="⟈",kR="•",NR="•",TR="≎",yR="⪮",xR="≏",gR="≎",wR="≏",uR="Ć",vR="ć",$R="⩄",fR="⩉",hR="⩋",_R="∩",mR="⋒",lR="⩇",cR="⩀",pR="ⅅ",iR="∩︀",dR="⁁",sR="ˇ",nR="ℭ",aR="⩍",rR="Č",oR="č",tR="Ç",eR="ç",ZF="Ĉ",zF="ĉ",XF="∰",KF="⩌",JF="⩐",QF="Ċ",YF="ċ",GF="¸",UF="¸",qF="⦲",AF="¢",VF="·",WF="·",HF="\uD835\uDD20",jF="ℭ",RF="Ч",FF="ч",BF="✓",EF="✓",PF="Χ",OF="χ",MF="ˆ",LF="≗",IF="↺",DF="↻",CF="⊛",SF="⊚",bF="⊝",kF="⊙",NF="®",TF="Ⓢ",yF="⊖",xF="⊕",gF="⊗",wF="○",uF="⧃",vF="≗",$F="⨐",fF="⫯",hF="⧂",_F="∲",mF="”",lF="’",cF="♣",pF="♣",iF=":",dF="∷",sF="⩴",nF="≔",aF="≔",rF=",",oF="@",tF="∁",eF="∘",ZB="∁",zB="ℂ",XB="≅",KB="⩭",JB="≡",QB="∮",YB="∯",GB="∮",UB="\uD835\uDD54",qB="ℂ",AB="∐",VB="∐",WB="©",HB="©",jB="℗",RB="∳",FB="↵",BB="✗",EB="⨯",PB="\uD835\uDC9E",OB="\uD835\uDCB8",MB="⫏",LB="⫑",IB="⫐",DB="⫒",CB="⋯",SB="⤸",bB="⤵",kB="⋞",NB="⋟",TB="↶",yB="⤽",xB="⩈",gB="⩆",wB="≍",uB="∪",vB="⋓",$B="⩊",fB="⊍",hB="⩅",_B="∪︀",mB="↷",lB="⤼",cB="⋞",pB="⋟",iB="⋎",dB="⋏",sB="¤",nB="↶",aB="↷",rB="⋎",oB="⋏",tB="∲",eB="∱",ZE="⌭",zE="†",XE="‡",KE="ℸ",JE="↓",QE="↡",YE="⇓",GE="‐",UE="⫤",qE="⊣",AE="⤏",VE="˝",WE="Ď",HE="ď",jE="Д",RE="д",FE="‡",BE="⇊",EE="ⅅ",PE="ⅆ",OE="⤑",ME="⩷",LE="°",IE="∇",DE="Δ",CE="δ",SE="⦱",bE="⥿",kE="\uD835\uDD07",NE="\uD835\uDD21",TE="⥥",yE="⇃",xE="⇂",gE="´",wE="˙",uE="˝",vE="`",$E="˜",fE="⋄",hE="⋄",_E="⋄",mE="♦",lE="♦",cE="¨",pE="ⅆ",iE="ϝ",dE="⋲",sE="÷",nE="÷",aE="⋇",rE="⋇",oE="Ђ",tE="ђ",eE="⌞",ZP="⌍",zP="$",XP="\uD835\uDD3B",KP="\uD835\uDD55",JP="¨",QP="˙",YP="⃜",GP="≐",UP="≑",qP="≐",AP="∸",VP="∔",WP="⊡",HP="⌆",jP="∯",RP="¨",FP="⇓",BP="⇐",EP="⇔",PP="⫤",OP="⟸",MP="⟺",LP="⟹",IP="⇒",DP="⊨",CP="⇑",SP="⇕",bP="∥",kP="⤓",NP="↓",TP="↓",yP="⇓",xP="⇵",gP="̑",wP="⇊",uP="⇃",vP="⇂",$P="⥐",fP="⥞",hP="⥖",_P="↽",mP="⥟",lP="⥗",cP="⇁",pP="↧",iP="⊤",dP="⤐",sP="⌟",nP="⌌",aP="\uD835\uDC9F",rP="\uD835\uDCB9",oP="Ѕ",tP="ѕ",eP="⧶",ZO="Đ",zO="đ",XO="⋱",KO="▿",JO="▾",QO="⇵",YO="⥯",GO="⦦",UO="Џ",qO="џ",AO="⟿",VO="É",WO="é",HO="⩮",jO="Ě",RO="ě",FO="Ê",BO="ê",EO="≖",PO="≕",OO="Э",MO="э",LO="⩷",IO="Ė",DO="ė",CO="≑",SO="ⅇ",bO="≒",kO="\uD835\uDD08",NO="\uD835\uDD22",TO="⪚",yO="È",xO="è",gO="⪖",wO="⪘",uO="⪙",vO="∈",$O="⏧",fO="ℓ",hO="⪕",_O="⪗",mO="Ē",lO="ē",cO="∅",pO="∅",iO="◻",dO="∅",sO="▫",nO=" ",aO=" ",rO=" ",oO="Ŋ",tO="ŋ",eO=" ",ZM="Ę",zM="ę",XM="\uD835\uDD3C",KM="\uD835\uDD56",JM="⋕",QM="⧣",YM="⩱",GM="ε",UM="Ε",qM="ε",AM="ϵ",VM="≖",WM="≕",HM="≂",jM="⪖",RM="⪕",FM="⩵",BM="=",EM="≂",PM="≟",OM="⇌",MM="≡",LM="⩸",IM="⧥",DM="⥱",CM="≓",SM="ℯ",bM="ℰ",kM="≐",NM="⩳",TM="≂",yM="Η",xM="η",gM="Ð",wM="ð",uM="Ë",vM="ë",$M="€",fM="!",hM="∃",_M="∃",mM="ℰ",lM="ⅇ",cM="ⅇ",pM="≒",iM="Ф",dM="ф",sM="♀",nM="ﬃ",aM="ﬀ",rM="ﬄ",oM="\uD835\uDD09",tM="\uD835\uDD23",eM="ﬁ",ZL="◼",zL="▪",XL="fj",KL="♭",JL="ﬂ",QL="▱",YL="ƒ",GL="\uD835\uDD3D",UL="\uD835\uDD57",qL="∀",AL="∀",VL="⋔",WL="⫙",HL="ℱ",jL="⨍",RL="½",FL="⅓",BL="¼",EL="⅕",PL="⅙",OL="⅛",ML="⅔",LL="⅖",IL="¾",DL="⅗",CL="⅜",SL="⅘",bL="⅚",kL="⅝",NL="⅞",TL="⁄",yL="⌢",xL="\uD835\uDCBB",gL="ℱ",wL="ǵ",uL="Γ",vL="γ",$L="Ϝ",fL="ϝ",hL="⪆",_L="Ğ",mL="ğ",lL="Ģ",cL="Ĝ",pL="ĝ",iL="Г",dL="г",sL="Ġ",nL="ġ",aL="≥",rL="≧",oL="⪌",tL="⋛",eL="≥",ZI="≧",zI="⩾",XI="⪩",KI="⩾",JI="⪀",QI="⪂",YI="⪄",GI="⋛︀",UI="⪔",qI="\uD835\uDD0A",AI="\uD835\uDD24",VI="≫",WI="⋙",HI="⋙",jI="ℷ",RI="Ѓ",FI="ѓ",BI="⪥",EI="≷",PI="⪒",OI="⪤",MI="⪊",LI="⪊",II="⪈",DI="≩",CI="⪈",SI="≩",bI="⋧",kI="\uD835\uDD3E",NI="\uD835\uDD58",TI="`",yI="≥",xI="⋛",gI="≧",wI="⪢",uI="≷",vI="⩾",$I="≳",fI="\uD835\uDCA2",hI="ℊ",_I="≳",mI="⪎",lI="⪐",cI="⪧",pI="⩺",iI=">",dI=">",sI="≫",nI="⋗",aI="⦕",rI="⩼",oI="⪆",tI="⥸",eI="⋗",ZD="⋛",zD="⪌",XD="≷",KD="≳",JD="≩︀",QD="≩︀",YD="ˇ",GD=" ",UD="½",qD="ℋ",AD="Ъ",VD="ъ",WD="⥈",HD="↔",jD="⇔",RD="↭",FD="^",BD="ℏ",ED="Ĥ",PD="ĥ",OD="♥",MD="♥",LD="…",ID="⊹",DD="\uD835\uDD25",CD="ℌ",SD="ℋ",bD="⤥",kD="⤦",ND="⇿",TD="∻",yD="↩",xD="↪",gD="\uD835\uDD59",wD="ℍ",uD="―",vD="─",$D="\uD835\uDCBD",fD="ℋ",hD="ℏ",_D="Ħ",mD="ħ",lD="≎",cD="≏",pD="⁃",iD="‐",dD="Í",sD="í",nD="⁣",aD="Î",rD="î",oD="И",tD="и",eD="İ",ZC="Е",zC="е",XC="¡",KC="⇔",JC="\uD835\uDD26",QC="ℑ",YC="Ì",GC="ì",UC="ⅈ",qC="⨌",AC="∭",VC="⧜",WC="℩",HC="Ĳ",jC="ĳ",RC="Ī",FC="ī",BC="ℑ",EC="ⅈ",PC="ℐ",OC="ℑ",MC="ı",LC="ℑ",IC="⊷",DC="Ƶ",CC="⇒",SC="℅",bC="∞",kC="⧝",NC="ı",TC="⊺",yC="∫",xC="∬",gC="ℤ",wC="∫",uC="⊺",vC="⋂",$C="⨗",fC="⨼",hC="⁣",_C="⁢",mC="Ё",lC="ё",cC="Į",pC="į",iC="\uD835\uDD40",dC="\uD835\uDD5A",sC="Ι",nC="ι",aC="⨼",rC="¿",oC="\uD835\uDCBE",tC="ℐ",eC="∈",ZS="⋵",zS="⋹",XS="⋴",KS="⋳",JS="∈",QS="⁢",YS="Ĩ",GS="ĩ",US="І",qS="і",AS="Ï",VS="ï",WS="Ĵ",HS="ĵ",jS="Й",RS="й",FS="\uD835\uDD0D",BS="\uD835\uDD27",ES="ȷ",PS="\uD835\uDD41",OS="\uD835\uDD5B",MS="\uD835\uDCA5",LS="\uD835\uDCBF",IS="Ј",DS="ј",CS="Є",SS="є",bS="Κ",kS="κ",NS="ϰ",TS="Ķ",yS="ķ",xS="К",gS="к",wS="\uD835\uDD0E",uS="\uD835\uDD28",vS="ĸ",$S="Х",fS="х",hS="Ќ",_S="ќ",mS="\uD835\uDD42",lS="\uD835\uDD5C",cS="\uD835\uDCA6",pS="\uD835\uDCC0",iS="⇚",dS="Ĺ",sS="ĺ",nS="⦴",aS="ℒ",rS="Λ",oS="λ",tS="⟨",eS="⟪",Zb="⦑",zb="⟨",Xb="⪅",Kb="ℒ",Jb="«",Qb="⇤",Yb="⤟",Gb="←",Ub="↞",qb="⇐",Ab="⤝",Vb="↩",Wb="↫",Hb="⤹",jb="⥳",Rb="↢",Fb="⤙",Bb="⤛",Eb="⪫",Pb="⪭",Ob="⪭︀",Mb="⤌",Lb="⤎",Ib="❲",Db="{",Cb="[",Sb="⦋",bb="⦏",kb="⦍",Nb="Ľ",Tb="ľ",yb="Ļ",xb="ļ",gb="⌈",wb="{",ub="Л",vb="л",$b="⤶",fb="“",hb="„",_b="⥧",mb="⥋",lb="↲",cb="≤",pb="≦",ib="⟨",db="⇤",sb="←",nb="←",ab="⇐",rb="⇆",ob="↢",tb="⌈",eb="⟦",Zk="⥡",zk="⥙",Xk="⇃",Kk="⌊",Jk="↽",Qk="↼",Yk="⇇",Gk="↔",Uk="↔",qk="⇔",Ak="⇆",Vk="⇋",Wk="↭",Hk="⥎",jk="↤",Rk="⊣",Fk="⥚",Bk="⋋",Ek="⧏",Pk="⊲",Ok="⊴",Mk="⥑",Lk="⥠",Ik="⥘",Dk="↿",Ck="⥒",Sk="↼",bk="⪋",kk="⋚",Nk="≤",Tk="≦",yk="⩽",xk="⪨",gk="⩽",wk="⩿",uk="⪁",vk="⪃",$k="⋚︀",fk="⪓",hk="⪅",_k="⋖",mk="⋚",lk="⪋",ck="⋚",pk="≦",ik="≶",dk="≶",sk="⪡",nk="≲",ak="⩽",rk="≲",ok="⥼",tk="⌊",ek="\uD835\uDD0F",ZN="\uD835\uDD29",zN="≶",XN="⪑",KN="⥢",JN="↽",QN="↼",YN="⥪",GN="▄",UN="Љ",qN="љ",AN="⇇",VN="≪",WN="⋘",HN="⌞",jN="⇚",RN="⥫",FN="◺",BN="Ŀ",EN="ŀ",PN="⎰",ON="⎰",MN="⪉",LN="⪉",IN="⪇",DN="≨",CN="⪇",SN="≨",bN="⋦",kN="⟬",NN="⇽",TN="⟦",yN="⟵",xN="⟵",gN="⟸",wN="⟷",uN="⟷",vN="⟺",$N="⟼",fN="⟶",hN="⟶",_N="⟹",mN="↫",lN="↬",cN="⦅",pN="\uD835\uDD43",iN="\uD835\uDD5D",dN="⨭",sN="⨴",nN="∗",aN="_",rN="↙",oN="↘",tN="◊",eN="◊",ZT="⧫",zT="(",XT="⦓",KT="⇆",JT="⌟",QT="⇋",YT="⥭",GT="‎",UT="⊿",qT="‹",AT="\uD835\uDCC1",VT="ℒ",WT="↰",HT="↰",jT="≲",RT="⪍",FT="⪏",BT="[",ET="‘",PT="‚",OT="Ł",MT="ł",LT="⪦",IT="⩹",DT="<",CT="<",ST="≪",bT="⋖",kT="⋋",NT="⋉",TT="⥶",yT="⩻",xT="◃",gT="⊴",wT="◂",uT="⦖",vT="⥊",$T="⥦",fT="≨︀",hT="≨︀",_T="¯",mT="♂",lT="✠",cT="✠",pT="↦",iT="↦",dT="↧",sT="↤",nT="↥",aT="▮",rT="⨩",oT="М",tT="м",eT="—",Zy="∺",zy="∡",Xy=" ",Ky="ℳ",Jy="\uD835\uDD10",Qy="\uD835\uDD2A",Yy="℧",Gy="µ",Uy="*",qy="⫰",Ay="∣",Vy="·",Wy="⊟",Hy="−",jy="∸",Ry="⨪",Fy="∓",By="⫛",Ey="…",Py="∓",Oy="⊧",My="\uD835\uDD44",Ly="\uD835\uDD5E",Iy="∓",Dy="\uD835\uDCC2",Cy="ℳ",Sy="∾",by="Μ",ky="μ",Ny="⊸",Ty="⊸",yy="∇",xy="Ń",gy="ń",wy="∠⃒",uy="≉",vy="⩰̸",$y="≋̸",fy="ŉ",hy="≉",_y="♮",my="ℕ",ly="♮",cy=" ",py="≎̸",iy="≏̸",dy="⩃",sy="Ň",ny="ň",ay="Ņ",ry="ņ",oy="≇",ty="⩭̸",ey="⩂",Zx="Н",zx="н",Xx="–",Kx="⤤",Jx="↗",Qx="⇗",Yx="↗",Gx="≠",Ux="≐̸",qx="​",Ax="​",Vx="​",Wx="​",Hx="≢",jx="⤨",Rx="≂̸",Fx="≫",Bx="≪",Ex=`
`,Px="∄",Ox="∄",Mx="\uD835\uDD11",Lx="\uD835\uDD2B",Ix="≧̸",Dx="≱",Cx="≱",Sx="≧̸",bx="⩾̸",kx="⩾̸",Nx="⋙̸",Tx="≵",yx="≫⃒",xx="≯",gx="≯",wx="≫̸",ux="↮",vx="⇎",$x="⫲",fx="∋",hx="⋼",_x="⋺",mx="∋",lx="Њ",cx="њ",px="↚",ix="⇍",dx="‥",sx="≦̸",nx="≰",ax="↚",rx="⇍",ox="↮",tx="⇎",ex="≰",Zg="≦̸",zg="⩽̸",Xg="⩽̸",Kg="≮",Jg="⋘̸",Qg="≴",Yg="≪⃒",Gg="≮",Ug="⋪",qg="⋬",Ag="≪̸",Vg="∤",Wg="⁠",Hg=" ",jg="\uD835\uDD5F",Rg="ℕ",Fg="⫬",Bg="¬",Eg="≢",Pg="≭",Og="∦",Mg="∉",Lg="≠",Ig="≂̸",Dg="∄",Cg="≯",Sg="≱",bg="≧̸",kg="≫̸",Ng="≹",Tg="⩾̸",yg="≵",xg="≎̸",gg="≏̸",wg="∉",ug="⋵̸",vg="⋹̸",$g="∉",fg="⋷",hg="⋶",_g="⧏̸",mg="⋪",lg="⋬",cg="≮",pg="≰",ig="≸",dg="≪̸",sg="⩽̸",ng="≴",ag="⪢̸",rg="⪡̸",og="∌",tg="∌",eg="⋾",Zw="⋽",zw="⊀",Xw="⪯̸",Kw="⋠",Jw="∌",Qw="⧐̸",Yw="⋫",Gw="⋭",Uw="⊏̸",qw="⋢",Aw="⊐̸",Vw="⋣",Ww="⊂⃒",Hw="⊈",jw="⊁",Rw="⪰̸",Fw="⋡",Bw="≿̸",Ew="⊃⃒",Pw="⊉",Ow="≁",Mw="≄",Lw="≇",Iw="≉",Dw="∤",Cw="∦",Sw="∦",bw="⫽⃥",kw="∂̸",Nw="⨔",Tw="⊀",yw="⋠",xw="⊀",gw="⪯̸",ww="⪯̸",uw="⤳̸",vw="↛",$w="⇏",fw="↝̸",hw="↛",_w="⇏",mw="⋫",lw="⋭",cw="⊁",pw="⋡",iw="⪰̸",dw="\uD835\uDCA9",sw="\uD835\uDCC3",nw="∤",aw="∦",rw="≁",ow="≄",tw="≄",ew="∤",Zu="∦",zu="⋢",Xu="⋣",Ku="⊄",Ju="⫅̸",Qu="⊈",Yu="⊂⃒",Gu="⊈",Uu="⫅̸",qu="⊁",Au="⪰̸",Vu="⊅",Wu="⫆̸",Hu="⊉",ju="⊃⃒",Ru="⊉",Fu="⫆̸",Bu="≹",Eu="Ñ",Pu="ñ",Ou="≸",Mu="⋪",Lu="⋬",Iu="⋫",Du="⋭",Cu="Ν",Su="ν",bu="#",ku="№",Nu=" ",Tu="≍⃒",yu="⊬",xu="⊭",gu="⊮",wu="⊯",uu="≥⃒",vu=">⃒",$u="⤄",fu="⧞",hu="⤂",_u="≤⃒",mu="<⃒",lu="⊴⃒",cu="⤃",pu="⊵⃒",iu="∼⃒",du="⤣",su="↖",nu="⇖",au="↖",ru="⤧",ou="Ó",tu="ó",eu="⊛",Zv="Ô",zv="ô",Xv="⊚",Kv="О",Jv="о",Qv="⊝",Yv="Ő",Gv="ő",Uv="⨸",qv="⊙",Av="⦼",Vv="Œ",Wv="œ",Hv="⦿",jv="\uD835\uDD12",Rv="\uD835\uDD2C",Fv="˛",Bv="Ò",Ev="ò",Pv="⧁",Ov="⦵",Mv="Ω",Lv="∮",Iv="↺",Dv="⦾",Cv="⦻",Sv="‾",bv="⧀",kv="Ō",Nv="ō",Tv="Ω",yv="ω",xv="Ο",gv="ο",wv="⦶",uv="⊖",vv="\uD835\uDD46",$v="\uD835\uDD60",fv="⦷",hv="“",_v="‘",mv="⦹",lv="⊕",cv="↻",pv="⩔",iv="∨",dv="⩝",sv="ℴ",nv="ℴ",av="ª",rv="º",ov="⊶",tv="⩖",ev="⩗",Z$="⩛",z$="Ⓢ",X$="\uD835\uDCAA",K$="ℴ",J$="Ø",Q$="ø",Y$="⊘",G$="Õ",U$="õ",q$="⨶",A$="⨷",V$="⊗",W$="Ö",H$="ö",j$="⌽",R$="‾",F$="⏞",B$="⎴",E$="⏜",P$="¶",O$="∥",M$="∥",L$="⫳",I$="⫽",D$="∂",C$="∂",S$="П",b$="п",k$="%",N$=".",T$="‰",y$="⊥",x$="‱",g$="\uD835\uDD13",w$="\uD835\uDD2D",u$="Φ",v$="φ",$$="ϕ",f$="ℳ",h$="☎",_$="Π",m$="π",l$="⋔",c$="ϖ",p$="ℏ",i$="ℎ",d$="ℏ",s$="⨣",n$="⊞",a$="⨢",r$="+",o$="∔",t$="⨥",e$="⩲",Zf="±",zf="±",Xf="⨦",Kf="⨧",Jf="±",Qf="ℌ",Yf="⨕",Gf="\uD835\uDD61",Uf="ℙ",qf="£",Af="⪷",Vf="⪻",Wf="≺",Hf="≼",jf="⪷",Rf="≺",Ff="≼",Bf="≺",Ef="⪯",Pf="≼",Of="≾",Mf="⪯",Lf="⪹",If="⪵",Df="⋨",Cf="⪯",Sf="⪳",bf="≾",kf="′",Nf="″",Tf="ℙ",yf="⪹",xf="⪵",gf="⋨",wf="∏",uf="∏",vf="⌮",$f="⌒",ff="⌓",hf="∝",_f="∝",mf="∷",lf="∝",cf="≾",pf="⊰",df="\uD835\uDCAB",sf="\uD835\uDCC5",nf="Ψ",af="ψ",rf=" ",of="\uD835\uDD14",tf="\uD835\uDD2E",ef="⨌",Zh="\uD835\uDD62",zh="ℚ",Xh="⁗",Kh="\uD835\uDCAC",Jh="\uD835\uDCC6",Qh="ℍ",Yh="⨖",Gh="?",Uh="≟",qh='"',Ah='"',Vh="⇛",Wh="∽̱",Hh="Ŕ",jh="ŕ",Rh="√",Fh="⦳",Bh="⟩",Eh="⟫",Ph="⦒",Oh="⦥",Mh="⟩",Lh="»",Ih="⥵",Dh="⇥",Ch="⤠",Sh="⤳",bh="→",kh="↠",Nh="⇒",Th="⤞",yh="↪",xh="↬",gh="⥅",wh="⥴",uh="⤖",vh="↣",$h="↝",fh="⤚",hh="⤜",_h="∶",mh="ℚ",lh="⤍",ch="⤏",ph="⤐",ih="❳",dh="}",sh="]",nh="⦌",ah="⦎",rh="⦐",oh="Ř",th="ř",eh="Ŗ",Z_="ŗ",z_="⌉",X_="}",K_="Р",J_="р",Q_="⤷",Y_="⥩",G_="”",U_="”",q_="↳",A_="ℜ",V_="ℛ",W_="ℜ",H_="ℝ",j_="ℜ",R_="▭",F_="®",B_="®",E_="∋",P_="⇋",O_="⥯",M_="⥽",L_="⌋",I_="\uD835\uDD2F",D_="ℜ",C_="⥤",S_="⇁",b_="⇀",k_="⥬",N_="Ρ",T_="ρ",y_="ϱ",x_="⟩",g_="⇥",w_="→",u_="→",v_="⇒",$_="⇄",f_="↣",h_="⌉",__="⟧",m_="⥝",l_="⥕",c_="⇂",p_="⌋",i_="⇁",d_="⇀",s_="⇄",n_="⇌",a_="⇉",r_="↝",o_="↦",t_="⊢",e_="⥛",Zm="⋌",zm="⧐",Xm="⊳",Km="⊵",Jm="⥏",Qm="⥜",Ym="⥔",Gm="↾",Um="⥓",qm="⇀",Am="˚",Vm="≓",Wm="⇄",Hm="⇌",jm="‏",Rm="⎱",Fm="⎱",Bm="⫮",Em="⟭",Pm="⇾",Om="⟧",Mm="⦆",Lm="\uD835\uDD63",Im="ℝ",Dm="⨮",Cm="⨵",Sm="⥰",bm=")",km="⦔",Nm="⨒",Tm="⇉",ym="⇛",xm="›",gm="\uD835\uDCC7",wm="ℛ",um="↱",vm="↱",$m="]",fm="’",hm="’",_m="⋌",mm="⋊",lm="▹",cm="⊵",pm="▸",im="⧎",dm="⧴",sm="⥨",nm="℞",am="Ś",rm="ś",om="‚",tm="⪸",em="Š",Zl="š",zl="⪼",Xl="≻",Kl="≽",Jl="⪰",Ql="⪴",Yl="Ş",Gl="ş",Ul="Ŝ",ql="ŝ",Al="⪺",Vl="⪶",Wl="⋩",Hl="⨓",jl="≿",Rl="С",Fl="с",Bl="⊡",El="⋅",Pl="⩦",Ol="⤥",Ml="↘",Ll="⇘",Il="↘",Dl="§",Cl=";",Sl="⤩",bl="∖",kl="∖",Nl="✶",Tl="\uD835\uDD16",yl="\uD835\uDD30",xl="⌢",gl="♯",wl="Щ",ul="щ",vl="Ш",$l="ш",fl="↓",hl="←",_l="∣",ml="∥",ll="→",cl="↑",pl="­",il="Σ",dl="σ",sl="ς",nl="ς",al="∼",rl="⩪",ol="≃",tl="≃",el="⪞",Zc="⪠",zc="⪝",Xc="⪟",Kc="≆",Jc="⨤",Qc="⥲",Yc="←",Gc="∘",Uc="∖",qc="⨳",Ac="⧤",Vc="∣",Wc="⌣",Hc="⪪",jc="⪬",Rc="⪬︀",Fc="Ь",Bc="ь",Ec="⌿",Pc="⧄",Oc="/",Mc="\uD835\uDD4A",Lc="\uD835\uDD64",Ic="♠",Dc="♠",Cc="∥",Sc="⊓",bc="⊓︀",kc="⊔",Nc="⊔︀",Tc="√",yc="⊏",xc="⊑",gc="⊏",wc="⊑",uc="⊐",vc="⊒",$c="⊐",fc="⊒",hc="□",_c="□",mc="⊓",lc="⊏",cc="⊑",pc="⊐",ic="⊒",dc="⊔",sc="▪",nc="□",ac="▪",rc="→",oc="\uD835\uDCAE",tc="\uD835\uDCC8",ec="∖",Zp="⌣",zp="⋆",Xp="⋆",Kp="☆",Jp="★",Qp="ϵ",Yp="ϕ",Gp="¯",Up="⊂",qp="⋐",Ap="⪽",Vp="⫅",Wp="⊆",Hp="⫃",jp="⫁",Rp="⫋",Fp="⊊",Bp="⪿",Ep="⥹",Pp="⊂",Op="⋐",Mp="⊆",Lp="⫅",Ip="⊆",Dp="⊊",Cp="⫋",Sp="⫇",bp="⫕",kp="⫓",Np="⪸",Tp="≻",yp="≽",xp="≻",gp="⪰",wp="≽",up="≿",vp="⪰",$p="⪺",fp="⪶",hp="⋩",_p="≿",mp="∋",lp="∑",cp="∑",pp="♪",ip="¹",dp="²",sp="³",np="⊃",ap="⋑",rp="⪾",op="⫘",tp="⫆",ep="⊇",Zi="⫄",zi="⊃",Xi="⊇",Ki="⟉",Ji="⫗",Qi="⥻",Yi="⫂",Gi="⫌",Ui="⊋",qi="⫀",Ai="⊃",Vi="⋑",Wi="⊇",Hi="⫆",ji="⊋",Ri="⫌",Fi="⫈",Bi="⫔",Ei="⫖",Pi="⤦",Oi="↙",Mi="⇙",Li="↙",Ii="⤪",Di="ß",Ci="\t",Si="⌖",bi="Τ",ki="τ",Ni="⎴",Ti="Ť",yi="ť",xi="Ţ",gi="ţ",wi="Т",ui="т",vi="⃛",$i="⌕",fi="\uD835\uDD17",hi="\uD835\uDD31",_i="∴",mi="∴",li="∴",ci="Θ",pi="θ",ii="ϑ",di="ϑ",si="≈",ni="∼",ai="  ",ri=" ",oi=" ",ti="≈",ei="∼",Zd="Þ",zd="þ",Xd="˜",Kd="∼",Jd="≃",Qd="≅",Yd="≈",Gd="⨱",Ud="⊠",qd="×",Ad="⨰",Vd="∭",Wd="⤨",Hd="⌶",jd="⫱",Rd="⊤",Fd="\uD835\uDD4B",Bd="\uD835\uDD65",Ed="⫚",Pd="⤩",Od="‴",Md="™",Ld="™",Id="▵",Dd="▿",Cd="◃",Sd="⊴",bd="≜",kd="▹",Nd="⊵",Td="◬",yd="≜",xd="⨺",gd="⃛",wd="⨹",ud="⧍",vd="⨻",$d="⏢",fd="\uD835\uDCAF",hd="\uD835\uDCC9",_d="Ц",md="ц",ld="Ћ",cd="ћ",pd="Ŧ",id="ŧ",dd="≬",sd="↞",nd="↠",ad="Ú",rd="ú",od="↑",td="↟",ed="⇑",Zs="⥉",zs="Ў",Xs="ў",Ks="Ŭ",Js="ŭ",Qs="Û",Ys="û",Gs="У",Us="у",qs="⇅",As="Ű",Vs="ű",Ws="⥮",Hs="⥾",js="\uD835\uDD18",Rs="\uD835\uDD32",Fs="Ù",Bs="ù",Es="⥣",Ps="↿",Os="↾",Ms="▀",Ls="⌜",Is="⌜",Ds="⌏",Cs="◸",Ss="Ū",bs="ū",ks="¨",Ns="_",Ts="⏟",ys="⎵",xs="⏝",gs="⋃",ws="⊎",us="Ų",vs="ų",$s="\uD835\uDD4C",fs="\uD835\uDD66",hs="⤒",_s="↑",ms="↑",ls="⇑",cs="⇅",ps="↕",is="↕",ds="⇕",ss="⥮",ns="↿",as="↾",rs="⊎",ts="↖",es="↗",Zn="υ",zn="ϒ",Xn="ϒ",Kn="Υ",Jn="υ",Qn="↥",Yn="⊥",Gn="⇈",Un="⌝",qn="⌝",An="⌎",Vn="Ů",Wn="ů",Hn="◹",jn="\uD835\uDCB0",Rn="\uD835\uDCCA",Fn="⋰",Bn="Ũ",En="ũ",Pn="▵",On="▴",Mn="⇈",Ln="Ü",In="ü",Dn="⦧",Cn="⦜",Sn="ϵ",bn="ϰ",kn="∅",Nn="ϕ",Tn="ϖ",yn="∝",xn="↕",gn="⇕",wn="ϱ",un="ς",vn="⊊︀",$n="⫋︀",fn="⊋︀",hn="⫌︀",_n="ϑ",mn="⊲",ln="⊳",cn="⫨",pn="⫫",dn="⫩",sn="В",nn="в",an="⊢",rn="⊨",on="⊩",tn="⊫",en="⫦",Za="⊻",za="∨",Xa="⋁",Ka="≚",Ja="⋮",Qa="|",Ya="‖",Ga="|",Ua="‖",qa="∣",Aa="|",Va="❘",Wa="≀",Ha=" ",ja="\uD835\uDD19",Ra="\uD835\uDD33",Fa="⊲",Ba="⊂⃒",Ea="⊃⃒",Pa="\uD835\uDD4D",Oa="\uD835\uDD67",Ma="∝",La="⊳",Ia="\uD835\uDCB1",Da="\uD835\uDCCB",Ca="⫋︀",Sa="⊊︀",ba="⫌︀",ka="⊋︀",Na="⊪",Ta="⦚",ya="Ŵ",xa="ŵ",ga="⩟",wa="∧",ua="⋀",va="≙",$a="℘",fa="\uD835\uDD1A",ha="\uD835\uDD34",_a="\uD835\uDD4E",ma="\uD835\uDD68",la="℘",ca="≀",pa="≀",ia="\uD835\uDCB2",da="\uD835\uDCCC",sa="⋂",na="◯",aa="⋃",ra="▽",oa="\uD835\uDD1B",ta="\uD835\uDD35",ea="⟷",Zr="⟺",zr="Ξ",Xr="ξ",Kr="⟵",Jr="⟸",Qr="⟼",Yr="⋻",Gr="⨀",Ur="\uD835\uDD4F",qr="\uD835\uDD69",Ar="⨁",Vr="⨂",Wr="⟶",Hr="⟹",jr="\uD835\uDCB3",Rr="\uD835\uDCCD",Fr="⨆",Br="⨄",Er="△",Pr="⋁",Or="⋀",Mr="Ý",Lr="ý",Ir="Я",Dr="я",Cr="Ŷ",Sr="ŷ",br="Ы",kr="ы",Nr="¥",Tr="\uD835\uDD1C",yr="\uD835\uDD36",xr="Ї",gr="ї",wr="\uD835\uDD50",ur="\uD835\uDD6A",vr="\uD835\uDCB4",$r="\uD835\uDCCE",fr="Ю",hr="ю",_r="ÿ",mr="Ÿ",lr="Ź",cr="ź",pr="Ž",ir="ž",dr="З",sr="з",nr="Ż",ar="ż",rr="ℨ",or="​",tr="Ζ",er="ζ",Zo="\uD835\uDD37",zo="ℨ",Xo="Ж",Ko="ж",Jo="⇝",Qo="\uD835\uDD6B",Yo="ℤ",Go="\uD835\uDCB5",Uo="\uD835\uDCCF",qo="‍",Ao="‌",tJ={Aacute:iV,aacute:dV,Abreve:sV,abreve:nV,ac:aV,acd:rV,acE:oV,Acirc:tV,acirc:eV,acute:ZW,Acy:zW,acy:XW,AElig:KW,aelig:JW,af:QW,Afr:YW,afr:GW,Agrave:UW,agrave:qW,alefsym:AW,aleph:VW,Alpha:WW,alpha:HW,Amacr:jW,amacr:RW,amalg:FW,amp:BW,AMP:EW,andand:PW,And:OW,and:MW,andd:LW,andslope:IW,andv:DW,ang:CW,ange:SW,angle:bW,angmsdaa:kW,angmsdab:NW,angmsdac:TW,angmsdad:yW,angmsdae:xW,angmsdaf:gW,angmsdag:wW,angmsdah:uW,angmsd:vW,angrt:$W,angrtvb:fW,angrtvbd:hW,angsph:_W,angst:mW,angzarr:lW,Aogon:cW,aogon:pW,Aopf:iW,aopf:dW,apacir:sW,ap:nW,apE:aW,ape:rW,apid:oW,apos:tW,ApplyFunction:eW,approx:ZH,approxeq:zH,Aring:XH,aring:KH,Ascr:JH,ascr:QH,Assign:YH,ast:GH,asymp:UH,asympeq:qH,Atilde:AH,atilde:VH,Auml:WH,auml:HH,awconint:jH,awint:RH,backcong:FH,backepsilon:BH,backprime:EH,backsim:PH,backsimeq:OH,Backslash:MH,Barv:LH,barvee:IH,barwed:DH,Barwed:CH,barwedge:SH,bbrk:bH,bbrktbrk:kH,bcong:NH,Bcy:TH,bcy:yH,bdquo:xH,becaus:gH,because:wH,Because:uH,bemptyv:vH,bepsi:$H,bernou:fH,Bernoullis:hH,Beta:_H,beta:mH,beth:lH,between:cH,Bfr:pH,bfr:iH,bigcap:dH,bigcirc:sH,bigcup:nH,bigodot:aH,bigoplus:rH,bigotimes:oH,bigsqcup:tH,bigstar:eH,bigtriangledown:Zj,bigtriangleup:zj,biguplus:Xj,bigvee:Kj,bigwedge:Jj,bkarow:Qj,blacklozenge:Yj,blacksquare:Gj,blacktriangle:Uj,blacktriangledown:qj,blacktriangleleft:Aj,blacktriangleright:Vj,blank:Wj,blk12:Hj,blk14:jj,blk34:Rj,block:Fj,bne:Bj,bnequiv:Ej,bNot:Pj,bnot:Oj,Bopf:Mj,bopf:Lj,bot:Ij,bottom:Dj,bowtie:Cj,boxbox:Sj,boxdl:bj,boxdL:kj,boxDl:Nj,boxDL:Tj,boxdr:yj,boxdR:xj,boxDr:gj,boxDR:wj,boxh:uj,boxH:vj,boxhd:$j,boxHd:fj,boxhD:hj,boxHD:_j,boxhu:mj,boxHu:lj,boxhU:cj,boxHU:pj,boxminus:ij,boxplus:dj,boxtimes:sj,boxul:nj,boxuL:aj,boxUl:rj,boxUL:oj,boxur:tj,boxuR:ej,boxUr:ZR,boxUR:zR,boxv:XR,boxV:KR,boxvh:JR,boxvH:QR,boxVh:YR,boxVH:GR,boxvl:UR,boxvL:qR,boxVl:AR,boxVL:VR,boxvr:WR,boxvR:HR,boxVr:jR,boxVR:RR,bprime:FR,breve:BR,Breve:ER,brvbar:PR,bscr:OR,Bscr:MR,bsemi:LR,bsim:IR,bsime:DR,bsolb:CR,bsol:SR,bsolhsub:bR,bull:kR,bullet:NR,bump:TR,bumpE:yR,bumpe:xR,Bumpeq:gR,bumpeq:wR,Cacute:uR,cacute:vR,capand:$R,capbrcup:fR,capcap:hR,cap:_R,Cap:mR,capcup:lR,capdot:cR,CapitalDifferentialD:pR,caps:iR,caret:dR,caron:sR,Cayleys:nR,ccaps:aR,Ccaron:rR,ccaron:oR,Ccedil:tR,ccedil:eR,Ccirc:ZF,ccirc:zF,Cconint:XF,ccups:KF,ccupssm:JF,Cdot:QF,cdot:YF,cedil:GF,Cedilla:UF,cemptyv:qF,cent:AF,centerdot:VF,CenterDot:WF,cfr:HF,Cfr:jF,CHcy:RF,chcy:FF,check:BF,checkmark:EF,Chi:PF,chi:OF,circ:MF,circeq:LF,circlearrowleft:IF,circlearrowright:DF,circledast:CF,circledcirc:SF,circleddash:bF,CircleDot:kF,circledR:NF,circledS:TF,CircleMinus:yF,CirclePlus:xF,CircleTimes:gF,cir:wF,cirE:uF,cire:vF,cirfnint:$F,cirmid:fF,cirscir:hF,ClockwiseContourIntegral:_F,CloseCurlyDoubleQuote:mF,CloseCurlyQuote:lF,clubs:cF,clubsuit:pF,colon:iF,Colon:dF,Colone:sF,colone:nF,coloneq:aF,comma:rF,commat:oF,comp:tF,compfn:eF,complement:ZB,complexes:zB,cong:XB,congdot:KB,Congruent:JB,conint:QB,Conint:YB,ContourIntegral:GB,copf:UB,Copf:qB,coprod:AB,Coproduct:VB,copy:WB,COPY:HB,copysr:jB,CounterClockwiseContourIntegral:RB,crarr:FB,cross:BB,Cross:EB,Cscr:PB,cscr:OB,csub:MB,csube:LB,csup:IB,csupe:DB,ctdot:CB,cudarrl:SB,cudarrr:bB,cuepr:kB,cuesc:NB,cularr:TB,cularrp:yB,cupbrcap:xB,cupcap:gB,CupCap:wB,cup:uB,Cup:vB,cupcup:$B,cupdot:fB,cupor:hB,cups:_B,curarr:mB,curarrm:lB,curlyeqprec:cB,curlyeqsucc:pB,curlyvee:iB,curlywedge:dB,curren:sB,curvearrowleft:nB,curvearrowright:aB,cuvee:rB,cuwed:oB,cwconint:tB,cwint:eB,cylcty:ZE,dagger:zE,Dagger:XE,daleth:KE,darr:JE,Darr:QE,dArr:YE,dash:GE,Dashv:UE,dashv:qE,dbkarow:AE,dblac:VE,Dcaron:WE,dcaron:HE,Dcy:jE,dcy:RE,ddagger:FE,ddarr:BE,DD:EE,dd:PE,DDotrahd:OE,ddotseq:ME,deg:LE,Del:IE,Delta:DE,delta:CE,demptyv:SE,dfisht:bE,Dfr:kE,dfr:NE,dHar:TE,dharl:yE,dharr:xE,DiacriticalAcute:gE,DiacriticalDot:wE,DiacriticalDoubleAcute:uE,DiacriticalGrave:vE,DiacriticalTilde:$E,diam:fE,diamond:hE,Diamond:_E,diamondsuit:mE,diams:lE,die:cE,DifferentialD:pE,digamma:iE,disin:dE,div:sE,divide:nE,divideontimes:aE,divonx:rE,DJcy:oE,djcy:tE,dlcorn:eE,dlcrop:ZP,dollar:zP,Dopf:XP,dopf:KP,Dot:JP,dot:QP,DotDot:YP,doteq:GP,doteqdot:UP,DotEqual:qP,dotminus:AP,dotplus:VP,dotsquare:WP,doublebarwedge:HP,DoubleContourIntegral:jP,DoubleDot:RP,DoubleDownArrow:FP,DoubleLeftArrow:BP,DoubleLeftRightArrow:EP,DoubleLeftTee:PP,DoubleLongLeftArrow:OP,DoubleLongLeftRightArrow:MP,DoubleLongRightArrow:LP,DoubleRightArrow:IP,DoubleRightTee:DP,DoubleUpArrow:CP,DoubleUpDownArrow:SP,DoubleVerticalBar:bP,DownArrowBar:kP,downarrow:NP,DownArrow:TP,Downarrow:yP,DownArrowUpArrow:xP,DownBreve:gP,downdownarrows:wP,downharpoonleft:uP,downharpoonright:vP,DownLeftRightVector:$P,DownLeftTeeVector:fP,DownLeftVectorBar:hP,DownLeftVector:_P,DownRightTeeVector:mP,DownRightVectorBar:lP,DownRightVector:cP,DownTeeArrow:pP,DownTee:iP,drbkarow:dP,drcorn:sP,drcrop:nP,Dscr:aP,dscr:rP,DScy:oP,dscy:tP,dsol:eP,Dstrok:ZO,dstrok:zO,dtdot:XO,dtri:KO,dtrif:JO,duarr:QO,duhar:YO,dwangle:GO,DZcy:UO,dzcy:qO,dzigrarr:AO,Eacute:VO,eacute:WO,easter:HO,Ecaron:jO,ecaron:RO,Ecirc:FO,ecirc:BO,ecir:EO,ecolon:PO,Ecy:OO,ecy:MO,eDDot:LO,Edot:IO,edot:DO,eDot:CO,ee:SO,efDot:bO,Efr:kO,efr:NO,eg:TO,Egrave:yO,egrave:xO,egs:gO,egsdot:wO,el:uO,Element:vO,elinters:$O,ell:fO,els:hO,elsdot:_O,Emacr:mO,emacr:lO,empty:cO,emptyset:pO,EmptySmallSquare:iO,emptyv:dO,EmptyVerySmallSquare:sO,emsp13:nO,emsp14:aO,emsp:rO,ENG:oO,eng:tO,ensp:eO,Eogon:ZM,eogon:zM,Eopf:XM,eopf:KM,epar:JM,eparsl:QM,eplus:YM,epsi:GM,Epsilon:UM,epsilon:qM,epsiv:AM,eqcirc:VM,eqcolon:WM,eqsim:HM,eqslantgtr:jM,eqslantless:RM,Equal:FM,equals:BM,EqualTilde:EM,equest:PM,Equilibrium:OM,equiv:MM,equivDD:LM,eqvparsl:IM,erarr:DM,erDot:CM,escr:SM,Escr:bM,esdot:kM,Esim:NM,esim:TM,Eta:yM,eta:xM,ETH:gM,eth:wM,Euml:uM,euml:vM,euro:$M,excl:fM,exist:hM,Exists:_M,expectation:mM,exponentiale:lM,ExponentialE:cM,fallingdotseq:pM,Fcy:iM,fcy:dM,female:sM,ffilig:nM,fflig:aM,ffllig:rM,Ffr:oM,ffr:tM,filig:eM,FilledSmallSquare:ZL,FilledVerySmallSquare:zL,fjlig:XL,flat:KL,fllig:JL,fltns:QL,fnof:YL,Fopf:GL,fopf:UL,forall:qL,ForAll:AL,fork:VL,forkv:WL,Fouriertrf:HL,fpartint:jL,frac12:RL,frac13:FL,frac14:BL,frac15:EL,frac16:PL,frac18:OL,frac23:ML,frac25:LL,frac34:IL,frac35:DL,frac38:CL,frac45:SL,frac56:bL,frac58:kL,frac78:NL,frasl:TL,frown:yL,fscr:xL,Fscr:gL,gacute:wL,Gamma:uL,gamma:vL,Gammad:$L,gammad:fL,gap:hL,Gbreve:_L,gbreve:mL,Gcedil:lL,Gcirc:cL,gcirc:pL,Gcy:iL,gcy:dL,Gdot:sL,gdot:nL,ge:aL,gE:rL,gEl:oL,gel:tL,geq:eL,geqq:ZI,geqslant:zI,gescc:XI,ges:KI,gesdot:JI,gesdoto:QI,gesdotol:YI,gesl:GI,gesles:UI,Gfr:qI,gfr:AI,gg:VI,Gg:WI,ggg:HI,gimel:jI,GJcy:RI,gjcy:FI,gla:BI,gl:EI,glE:PI,glj:OI,gnap:MI,gnapprox:LI,gne:II,gnE:DI,gneq:CI,gneqq:SI,gnsim:bI,Gopf:kI,gopf:NI,grave:TI,GreaterEqual:yI,GreaterEqualLess:xI,GreaterFullEqual:gI,GreaterGreater:wI,GreaterLess:uI,GreaterSlantEqual:vI,GreaterTilde:$I,Gscr:fI,gscr:hI,gsim:_I,gsime:mI,gsiml:lI,gtcc:cI,gtcir:pI,gt:iI,GT:dI,Gt:sI,gtdot:nI,gtlPar:aI,gtquest:rI,gtrapprox:oI,gtrarr:tI,gtrdot:eI,gtreqless:ZD,gtreqqless:zD,gtrless:XD,gtrsim:KD,gvertneqq:JD,gvnE:QD,Hacek:YD,hairsp:GD,half:UD,hamilt:qD,HARDcy:AD,hardcy:VD,harrcir:WD,harr:HD,hArr:jD,harrw:RD,Hat:FD,hbar:BD,Hcirc:ED,hcirc:PD,hearts:OD,heartsuit:MD,hellip:LD,hercon:ID,hfr:DD,Hfr:CD,HilbertSpace:SD,hksearow:bD,hkswarow:kD,hoarr:ND,homtht:TD,hookleftarrow:yD,hookrightarrow:xD,hopf:gD,Hopf:wD,horbar:uD,HorizontalLine:vD,hscr:$D,Hscr:fD,hslash:hD,Hstrok:_D,hstrok:mD,HumpDownHump:lD,HumpEqual:cD,hybull:pD,hyphen:iD,Iacute:dD,iacute:sD,ic:nD,Icirc:aD,icirc:rD,Icy:oD,icy:tD,Idot:eD,IEcy:ZC,iecy:zC,iexcl:XC,iff:KC,ifr:JC,Ifr:QC,Igrave:YC,igrave:GC,ii:UC,iiiint:qC,iiint:AC,iinfin:VC,iiota:WC,IJlig:HC,ijlig:jC,Imacr:RC,imacr:FC,image:BC,ImaginaryI:EC,imagline:PC,imagpart:OC,imath:MC,Im:LC,imof:IC,imped:DC,Implies:CC,incare:SC,in:"∈",infin:bC,infintie:kC,inodot:NC,intcal:TC,int:yC,Int:xC,integers:gC,Integral:wC,intercal:uC,Intersection:vC,intlarhk:$C,intprod:fC,InvisibleComma:hC,InvisibleTimes:_C,IOcy:mC,iocy:lC,Iogon:cC,iogon:pC,Iopf:iC,iopf:dC,Iota:sC,iota:nC,iprod:aC,iquest:rC,iscr:oC,Iscr:tC,isin:eC,isindot:ZS,isinE:zS,isins:XS,isinsv:KS,isinv:JS,it:QS,Itilde:YS,itilde:GS,Iukcy:US,iukcy:qS,Iuml:AS,iuml:VS,Jcirc:WS,jcirc:HS,Jcy:jS,jcy:RS,Jfr:FS,jfr:BS,jmath:ES,Jopf:PS,jopf:OS,Jscr:MS,jscr:LS,Jsercy:IS,jsercy:DS,Jukcy:CS,jukcy:SS,Kappa:bS,kappa:kS,kappav:NS,Kcedil:TS,kcedil:yS,Kcy:xS,kcy:gS,Kfr:wS,kfr:uS,kgreen:vS,KHcy:$S,khcy:fS,KJcy:hS,kjcy:_S,Kopf:mS,kopf:lS,Kscr:cS,kscr:pS,lAarr:iS,Lacute:dS,lacute:sS,laemptyv:nS,lagran:aS,Lambda:rS,lambda:oS,lang:tS,Lang:eS,langd:Zb,langle:zb,lap:Xb,Laplacetrf:Kb,laquo:Jb,larrb:Qb,larrbfs:Yb,larr:Gb,Larr:Ub,lArr:qb,larrfs:Ab,larrhk:Vb,larrlp:Wb,larrpl:Hb,larrsim:jb,larrtl:Rb,latail:Fb,lAtail:Bb,lat:Eb,late:Pb,lates:Ob,lbarr:Mb,lBarr:Lb,lbbrk:Ib,lbrace:Db,lbrack:Cb,lbrke:Sb,lbrksld:bb,lbrkslu:kb,Lcaron:Nb,lcaron:Tb,Lcedil:yb,lcedil:xb,lceil:gb,lcub:wb,Lcy:ub,lcy:vb,ldca:$b,ldquo:fb,ldquor:hb,ldrdhar:_b,ldrushar:mb,ldsh:lb,le:cb,lE:pb,LeftAngleBracket:ib,LeftArrowBar:db,leftarrow:sb,LeftArrow:nb,Leftarrow:ab,LeftArrowRightArrow:rb,leftarrowtail:ob,LeftCeiling:tb,LeftDoubleBracket:eb,LeftDownTeeVector:Zk,LeftDownVectorBar:zk,LeftDownVector:Xk,LeftFloor:Kk,leftharpoondown:Jk,leftharpoonup:Qk,leftleftarrows:Yk,leftrightarrow:Gk,LeftRightArrow:Uk,Leftrightarrow:qk,leftrightarrows:Ak,leftrightharpoons:Vk,leftrightsquigarrow:Wk,LeftRightVector:Hk,LeftTeeArrow:jk,LeftTee:Rk,LeftTeeVector:Fk,leftthreetimes:Bk,LeftTriangleBar:Ek,LeftTriangle:Pk,LeftTriangleEqual:Ok,LeftUpDownVector:Mk,LeftUpTeeVector:Lk,LeftUpVectorBar:Ik,LeftUpVector:Dk,LeftVectorBar:Ck,LeftVector:Sk,lEg:bk,leg:kk,leq:Nk,leqq:Tk,leqslant:yk,lescc:xk,les:gk,lesdot:wk,lesdoto:uk,lesdotor:vk,lesg:$k,lesges:fk,lessapprox:hk,lessdot:_k,lesseqgtr:mk,lesseqqgtr:lk,LessEqualGreater:ck,LessFullEqual:pk,LessGreater:ik,lessgtr:dk,LessLess:sk,lesssim:nk,LessSlantEqual:ak,LessTilde:rk,lfisht:ok,lfloor:tk,Lfr:ek,lfr:ZN,lg:zN,lgE:XN,lHar:KN,lhard:JN,lharu:QN,lharul:YN,lhblk:GN,LJcy:UN,ljcy:qN,llarr:AN,ll:VN,Ll:WN,llcorner:HN,Lleftarrow:jN,llhard:RN,lltri:FN,Lmidot:BN,lmidot:EN,lmoustache:PN,lmoust:ON,lnap:MN,lnapprox:LN,lne:IN,lnE:DN,lneq:CN,lneqq:SN,lnsim:bN,loang:kN,loarr:NN,lobrk:TN,longleftarrow:yN,LongLeftArrow:xN,Longleftarrow:gN,longleftrightarrow:wN,LongLeftRightArrow:uN,Longleftrightarrow:vN,longmapsto:$N,longrightarrow:fN,LongRightArrow:hN,Longrightarrow:_N,looparrowleft:mN,looparrowright:lN,lopar:cN,Lopf:pN,lopf:iN,loplus:dN,lotimes:sN,lowast:nN,lowbar:aN,LowerLeftArrow:rN,LowerRightArrow:oN,loz:tN,lozenge:eN,lozf:ZT,lpar:zT,lparlt:XT,lrarr:KT,lrcorner:JT,lrhar:QT,lrhard:YT,lrm:GT,lrtri:UT,lsaquo:qT,lscr:AT,Lscr:VT,lsh:WT,Lsh:HT,lsim:jT,lsime:RT,lsimg:FT,lsqb:BT,lsquo:ET,lsquor:PT,Lstrok:OT,lstrok:MT,ltcc:LT,ltcir:IT,lt:DT,LT:CT,Lt:ST,ltdot:bT,lthree:kT,ltimes:NT,ltlarr:TT,ltquest:yT,ltri:xT,ltrie:gT,ltrif:wT,ltrPar:uT,lurdshar:vT,luruhar:$T,lvertneqq:fT,lvnE:hT,macr:_T,male:mT,malt:lT,maltese:cT,Map:"⤅",map:pT,mapsto:iT,mapstodown:dT,mapstoleft:sT,mapstoup:nT,marker:aT,mcomma:rT,Mcy:oT,mcy:tT,mdash:eT,mDDot:Zy,measuredangle:zy,MediumSpace:Xy,Mellintrf:Ky,Mfr:Jy,mfr:Qy,mho:Yy,micro:Gy,midast:Uy,midcir:qy,mid:Ay,middot:Vy,minusb:Wy,minus:Hy,minusd:jy,minusdu:Ry,MinusPlus:Fy,mlcp:By,mldr:Ey,mnplus:Py,models:Oy,Mopf:My,mopf:Ly,mp:Iy,mscr:Dy,Mscr:Cy,mstpos:Sy,Mu:by,mu:ky,multimap:Ny,mumap:Ty,nabla:yy,Nacute:xy,nacute:gy,nang:wy,nap:uy,napE:vy,napid:$y,napos:fy,napprox:hy,natural:_y,naturals:my,natur:ly,nbsp:cy,nbump:py,nbumpe:iy,ncap:dy,Ncaron:sy,ncaron:ny,Ncedil:ay,ncedil:ry,ncong:oy,ncongdot:ty,ncup:ey,Ncy:Zx,ncy:zx,ndash:Xx,nearhk:Kx,nearr:Jx,neArr:Qx,nearrow:Yx,ne:Gx,nedot:Ux,NegativeMediumSpace:qx,NegativeThickSpace:Ax,NegativeThinSpace:Vx,NegativeVeryThinSpace:Wx,nequiv:Hx,nesear:jx,nesim:Rx,NestedGreaterGreater:Fx,NestedLessLess:Bx,NewLine:Ex,nexist:Px,nexists:Ox,Nfr:Mx,nfr:Lx,ngE:Ix,nge:Dx,ngeq:Cx,ngeqq:Sx,ngeqslant:bx,nges:kx,nGg:Nx,ngsim:Tx,nGt:yx,ngt:xx,ngtr:gx,nGtv:wx,nharr:ux,nhArr:vx,nhpar:$x,ni:fx,nis:hx,nisd:_x,niv:mx,NJcy:lx,njcy:cx,nlarr:px,nlArr:ix,nldr:dx,nlE:sx,nle:nx,nleftarrow:ax,nLeftarrow:rx,nleftrightarrow:ox,nLeftrightarrow:tx,nleq:ex,nleqq:Zg,nleqslant:zg,nles:Xg,nless:Kg,nLl:Jg,nlsim:Qg,nLt:Yg,nlt:Gg,nltri:Ug,nltrie:qg,nLtv:Ag,nmid:Vg,NoBreak:Wg,NonBreakingSpace:Hg,nopf:jg,Nopf:Rg,Not:Fg,not:Bg,NotCongruent:Eg,NotCupCap:Pg,NotDoubleVerticalBar:Og,NotElement:Mg,NotEqual:Lg,NotEqualTilde:Ig,NotExists:Dg,NotGreater:Cg,NotGreaterEqual:Sg,NotGreaterFullEqual:bg,NotGreaterGreater:kg,NotGreaterLess:Ng,NotGreaterSlantEqual:Tg,NotGreaterTilde:yg,NotHumpDownHump:xg,NotHumpEqual:gg,notin:wg,notindot:ug,notinE:vg,notinva:$g,notinvb:fg,notinvc:hg,NotLeftTriangleBar:_g,NotLeftTriangle:mg,NotLeftTriangleEqual:lg,NotLess:cg,NotLessEqual:pg,NotLessGreater:ig,NotLessLess:dg,NotLessSlantEqual:sg,NotLessTilde:ng,NotNestedGreaterGreater:ag,NotNestedLessLess:rg,notni:og,notniva:tg,notnivb:eg,notnivc:Zw,NotPrecedes:zw,NotPrecedesEqual:Xw,NotPrecedesSlantEqual:Kw,NotReverseElement:Jw,NotRightTriangleBar:Qw,NotRightTriangle:Yw,NotRightTriangleEqual:Gw,NotSquareSubset:Uw,NotSquareSubsetEqual:qw,NotSquareSuperset:Aw,NotSquareSupersetEqual:Vw,NotSubset:Ww,NotSubsetEqual:Hw,NotSucceeds:jw,NotSucceedsEqual:Rw,NotSucceedsSlantEqual:Fw,NotSucceedsTilde:Bw,NotSuperset:Ew,NotSupersetEqual:Pw,NotTilde:Ow,NotTildeEqual:Mw,NotTildeFullEqual:Lw,NotTildeTilde:Iw,NotVerticalBar:Dw,nparallel:Cw,npar:Sw,nparsl:bw,npart:kw,npolint:Nw,npr:Tw,nprcue:yw,nprec:xw,npreceq:gw,npre:ww,nrarrc:uw,nrarr:vw,nrArr:$w,nrarrw:fw,nrightarrow:hw,nRightarrow:_w,nrtri:mw,nrtrie:lw,nsc:cw,nsccue:pw,nsce:iw,Nscr:dw,nscr:sw,nshortmid:nw,nshortparallel:aw,nsim:rw,nsime:ow,nsimeq:tw,nsmid:ew,nspar:Zu,nsqsube:zu,nsqsupe:Xu,nsub:Ku,nsubE:Ju,nsube:Qu,nsubset:Yu,nsubseteq:Gu,nsubseteqq:Uu,nsucc:qu,nsucceq:Au,nsup:Vu,nsupE:Wu,nsupe:Hu,nsupset:ju,nsupseteq:Ru,nsupseteqq:Fu,ntgl:Bu,Ntilde:Eu,ntilde:Pu,ntlg:Ou,ntriangleleft:Mu,ntrianglelefteq:Lu,ntriangleright:Iu,ntrianglerighteq:Du,Nu:Cu,nu:Su,num:bu,numero:ku,numsp:Nu,nvap:Tu,nvdash:yu,nvDash:xu,nVdash:gu,nVDash:wu,nvge:uu,nvgt:vu,nvHarr:$u,nvinfin:fu,nvlArr:hu,nvle:_u,nvlt:mu,nvltrie:lu,nvrArr:cu,nvrtrie:pu,nvsim:iu,nwarhk:du,nwarr:su,nwArr:nu,nwarrow:au,nwnear:ru,Oacute:ou,oacute:tu,oast:eu,Ocirc:Zv,ocirc:zv,ocir:Xv,Ocy:Kv,ocy:Jv,odash:Qv,Odblac:Yv,odblac:Gv,odiv:Uv,odot:qv,odsold:Av,OElig:Vv,oelig:Wv,ofcir:Hv,Ofr:jv,ofr:Rv,ogon:Fv,Ograve:Bv,ograve:Ev,ogt:Pv,ohbar:Ov,ohm:Mv,oint:Lv,olarr:Iv,olcir:Dv,olcross:Cv,oline:Sv,olt:bv,Omacr:kv,omacr:Nv,Omega:Tv,omega:yv,Omicron:xv,omicron:gv,omid:wv,ominus:uv,Oopf:vv,oopf:$v,opar:fv,OpenCurlyDoubleQuote:hv,OpenCurlyQuote:_v,operp:mv,oplus:lv,orarr:cv,Or:pv,or:iv,ord:dv,order:sv,orderof:nv,ordf:av,ordm:rv,origof:ov,oror:tv,orslope:ev,orv:Z$,oS:z$,Oscr:X$,oscr:K$,Oslash:J$,oslash:Q$,osol:Y$,Otilde:G$,otilde:U$,otimesas:q$,Otimes:A$,otimes:V$,Ouml:W$,ouml:H$,ovbar:j$,OverBar:R$,OverBrace:F$,OverBracket:B$,OverParenthesis:E$,para:P$,parallel:O$,par:M$,parsim:L$,parsl:I$,part:D$,PartialD:C$,Pcy:S$,pcy:b$,percnt:k$,period:N$,permil:T$,perp:y$,pertenk:x$,Pfr:g$,pfr:w$,Phi:u$,phi:v$,phiv:$$,phmmat:f$,phone:h$,Pi:_$,pi:m$,pitchfork:l$,piv:c$,planck:p$,planckh:i$,plankv:d$,plusacir:s$,plusb:n$,pluscir:a$,plus:r$,plusdo:o$,plusdu:t$,pluse:e$,PlusMinus:Zf,plusmn:zf,plussim:Xf,plustwo:Kf,pm:Jf,Poincareplane:Qf,pointint:Yf,popf:Gf,Popf:Uf,pound:qf,prap:Af,Pr:Vf,pr:Wf,prcue:Hf,precapprox:jf,prec:Rf,preccurlyeq:Ff,Precedes:Bf,PrecedesEqual:Ef,PrecedesSlantEqual:Pf,PrecedesTilde:Of,preceq:Mf,precnapprox:Lf,precneqq:If,precnsim:Df,pre:Cf,prE:Sf,precsim:bf,prime:kf,Prime:Nf,primes:Tf,prnap:yf,prnE:xf,prnsim:gf,prod:wf,Product:uf,profalar:vf,profline:$f,profsurf:ff,prop:hf,Proportional:_f,Proportion:mf,propto:lf,prsim:cf,prurel:pf,Pscr:df,pscr:sf,Psi:nf,psi:af,puncsp:rf,Qfr:of,qfr:tf,qint:ef,qopf:Zh,Qopf:zh,qprime:Xh,Qscr:Kh,qscr:Jh,quaternions:Qh,quatint:Yh,quest:Gh,questeq:Uh,quot:qh,QUOT:Ah,rAarr:Vh,race:Wh,Racute:Hh,racute:jh,radic:Rh,raemptyv:Fh,rang:Bh,Rang:Eh,rangd:Ph,range:Oh,rangle:Mh,raquo:Lh,rarrap:Ih,rarrb:Dh,rarrbfs:Ch,rarrc:Sh,rarr:bh,Rarr:kh,rArr:Nh,rarrfs:Th,rarrhk:yh,rarrlp:xh,rarrpl:gh,rarrsim:wh,Rarrtl:uh,rarrtl:vh,rarrw:$h,ratail:fh,rAtail:hh,ratio:_h,rationals:mh,rbarr:lh,rBarr:ch,RBarr:ph,rbbrk:ih,rbrace:dh,rbrack:sh,rbrke:nh,rbrksld:ah,rbrkslu:rh,Rcaron:oh,rcaron:th,Rcedil:eh,rcedil:Z_,rceil:z_,rcub:X_,Rcy:K_,rcy:J_,rdca:Q_,rdldhar:Y_,rdquo:G_,rdquor:U_,rdsh:q_,real:A_,realine:V_,realpart:W_,reals:H_,Re:j_,rect:R_,reg:F_,REG:B_,ReverseElement:E_,ReverseEquilibrium:P_,ReverseUpEquilibrium:O_,rfisht:M_,rfloor:L_,rfr:I_,Rfr:D_,rHar:C_,rhard:S_,rharu:b_,rharul:k_,Rho:N_,rho:T_,rhov:y_,RightAngleBracket:x_,RightArrowBar:g_,rightarrow:w_,RightArrow:u_,Rightarrow:v_,RightArrowLeftArrow:$_,rightarrowtail:f_,RightCeiling:h_,RightDoubleBracket:__,RightDownTeeVector:m_,RightDownVectorBar:l_,RightDownVector:c_,RightFloor:p_,rightharpoondown:i_,rightharpoonup:d_,rightleftarrows:s_,rightleftharpoons:n_,rightrightarrows:a_,rightsquigarrow:r_,RightTeeArrow:o_,RightTee:t_,RightTeeVector:e_,rightthreetimes:Zm,RightTriangleBar:zm,RightTriangle:Xm,RightTriangleEqual:Km,RightUpDownVector:Jm,RightUpTeeVector:Qm,RightUpVectorBar:Ym,RightUpVector:Gm,RightVectorBar:Um,RightVector:qm,ring:Am,risingdotseq:Vm,rlarr:Wm,rlhar:Hm,rlm:jm,rmoustache:Rm,rmoust:Fm,rnmid:Bm,roang:Em,roarr:Pm,robrk:Om,ropar:Mm,ropf:Lm,Ropf:Im,roplus:Dm,rotimes:Cm,RoundImplies:Sm,rpar:bm,rpargt:km,rppolint:Nm,rrarr:Tm,Rrightarrow:ym,rsaquo:xm,rscr:gm,Rscr:wm,rsh:um,Rsh:vm,rsqb:$m,rsquo:fm,rsquor:hm,rthree:_m,rtimes:mm,rtri:lm,rtrie:cm,rtrif:pm,rtriltri:im,RuleDelayed:dm,ruluhar:sm,rx:nm,Sacute:am,sacute:rm,sbquo:om,scap:tm,Scaron:em,scaron:Zl,Sc:zl,sc:Xl,sccue:Kl,sce:Jl,scE:Ql,Scedil:Yl,scedil:Gl,Scirc:Ul,scirc:ql,scnap:Al,scnE:Vl,scnsim:Wl,scpolint:Hl,scsim:jl,Scy:Rl,scy:Fl,sdotb:Bl,sdot:El,sdote:Pl,searhk:Ol,searr:Ml,seArr:Ll,searrow:Il,sect:Dl,semi:Cl,seswar:Sl,setminus:bl,setmn:kl,sext:Nl,Sfr:Tl,sfr:yl,sfrown:xl,sharp:gl,SHCHcy:wl,shchcy:ul,SHcy:vl,shcy:$l,ShortDownArrow:fl,ShortLeftArrow:hl,shortmid:_l,shortparallel:ml,ShortRightArrow:ll,ShortUpArrow:cl,shy:pl,Sigma:il,sigma:dl,sigmaf:sl,sigmav:nl,sim:al,simdot:rl,sime:ol,simeq:tl,simg:el,simgE:Zc,siml:zc,simlE:Xc,simne:Kc,simplus:Jc,simrarr:Qc,slarr:Yc,SmallCircle:Gc,smallsetminus:Uc,smashp:qc,smeparsl:Ac,smid:Vc,smile:Wc,smt:Hc,smte:jc,smtes:Rc,SOFTcy:Fc,softcy:Bc,solbar:Ec,solb:Pc,sol:Oc,Sopf:Mc,sopf:Lc,spades:Ic,spadesuit:Dc,spar:Cc,sqcap:Sc,sqcaps:bc,sqcup:kc,sqcups:Nc,Sqrt:Tc,sqsub:yc,sqsube:xc,sqsubset:gc,sqsubseteq:wc,sqsup:uc,sqsupe:vc,sqsupset:$c,sqsupseteq:fc,square:hc,Square:_c,SquareIntersection:mc,SquareSubset:lc,SquareSubsetEqual:cc,SquareSuperset:pc,SquareSupersetEqual:ic,SquareUnion:dc,squarf:sc,squ:nc,squf:ac,srarr:rc,Sscr:oc,sscr:tc,ssetmn:ec,ssmile:Zp,sstarf:zp,Star:Xp,star:Kp,starf:Jp,straightepsilon:Qp,straightphi:Yp,strns:Gp,sub:Up,Sub:qp,subdot:Ap,subE:Vp,sube:Wp,subedot:Hp,submult:jp,subnE:Rp,subne:Fp,subplus:Bp,subrarr:Ep,subset:Pp,Subset:Op,subseteq:Mp,subseteqq:Lp,SubsetEqual:Ip,subsetneq:Dp,subsetneqq:Cp,subsim:Sp,subsub:bp,subsup:kp,succapprox:Np,succ:Tp,succcurlyeq:yp,Succeeds:xp,SucceedsEqual:gp,SucceedsSlantEqual:wp,SucceedsTilde:up,succeq:vp,succnapprox:$p,succneqq:fp,succnsim:hp,succsim:_p,SuchThat:mp,sum:lp,Sum:cp,sung:pp,sup1:ip,sup2:dp,sup3:sp,sup:np,Sup:ap,supdot:rp,supdsub:op,supE:tp,supe:ep,supedot:Zi,Superset:zi,SupersetEqual:Xi,suphsol:Ki,suphsub:Ji,suplarr:Qi,supmult:Yi,supnE:Gi,supne:Ui,supplus:qi,supset:Ai,Supset:Vi,supseteq:Wi,supseteqq:Hi,supsetneq:ji,supsetneqq:Ri,supsim:Fi,supsub:Bi,supsup:Ei,swarhk:Pi,swarr:Oi,swArr:Mi,swarrow:Li,swnwar:Ii,szlig:Di,Tab:Ci,target:Si,Tau:bi,tau:ki,tbrk:Ni,Tcaron:Ti,tcaron:yi,Tcedil:xi,tcedil:gi,Tcy:wi,tcy:ui,tdot:vi,telrec:$i,Tfr:fi,tfr:hi,there4:_i,therefore:mi,Therefore:li,Theta:ci,theta:pi,thetasym:ii,thetav:di,thickapprox:si,thicksim:ni,ThickSpace:ai,ThinSpace:ri,thinsp:oi,thkap:ti,thksim:ei,THORN:Zd,thorn:zd,tilde:Xd,Tilde:Kd,TildeEqual:Jd,TildeFullEqual:Qd,TildeTilde:Yd,timesbar:Gd,timesb:Ud,times:qd,timesd:Ad,tint:Vd,toea:Wd,topbot:Hd,topcir:jd,top:Rd,Topf:Fd,topf:Bd,topfork:Ed,tosa:Pd,tprime:Od,trade:Md,TRADE:Ld,triangle:Id,triangledown:Dd,triangleleft:Cd,trianglelefteq:Sd,triangleq:bd,triangleright:kd,trianglerighteq:Nd,tridot:Td,trie:yd,triminus:xd,TripleDot:gd,triplus:wd,trisb:ud,tritime:vd,trpezium:$d,Tscr:fd,tscr:hd,TScy:_d,tscy:md,TSHcy:ld,tshcy:cd,Tstrok:pd,tstrok:id,twixt:dd,twoheadleftarrow:sd,twoheadrightarrow:nd,Uacute:ad,uacute:rd,uarr:od,Uarr:td,uArr:ed,Uarrocir:Zs,Ubrcy:zs,ubrcy:Xs,Ubreve:Ks,ubreve:Js,Ucirc:Qs,ucirc:Ys,Ucy:Gs,ucy:Us,udarr:qs,Udblac:As,udblac:Vs,udhar:Ws,ufisht:Hs,Ufr:js,ufr:Rs,Ugrave:Fs,ugrave:Bs,uHar:Es,uharl:Ps,uharr:Os,uhblk:Ms,ulcorn:Ls,ulcorner:Is,ulcrop:Ds,ultri:Cs,Umacr:Ss,umacr:bs,uml:ks,UnderBar:Ns,UnderBrace:Ts,UnderBracket:ys,UnderParenthesis:xs,Union:gs,UnionPlus:ws,Uogon:us,uogon:vs,Uopf:$s,uopf:fs,UpArrowBar:hs,uparrow:_s,UpArrow:ms,Uparrow:ls,UpArrowDownArrow:cs,updownarrow:ps,UpDownArrow:is,Updownarrow:ds,UpEquilibrium:ss,upharpoonleft:ns,upharpoonright:as,uplus:rs,UpperLeftArrow:ts,UpperRightArrow:es,upsi:Zn,Upsi:zn,upsih:Xn,Upsilon:Kn,upsilon:Jn,UpTeeArrow:Qn,UpTee:Yn,upuparrows:Gn,urcorn:Un,urcorner:qn,urcrop:An,Uring:Vn,uring:Wn,urtri:Hn,Uscr:jn,uscr:Rn,utdot:Fn,Utilde:Bn,utilde:En,utri:Pn,utrif:On,uuarr:Mn,Uuml:Ln,uuml:In,uwangle:Dn,vangrt:Cn,varepsilon:Sn,varkappa:bn,varnothing:kn,varphi:Nn,varpi:Tn,varpropto:yn,varr:xn,vArr:gn,varrho:wn,varsigma:un,varsubsetneq:vn,varsubsetneqq:$n,varsupsetneq:fn,varsupsetneqq:hn,vartheta:_n,vartriangleleft:mn,vartriangleright:ln,vBar:cn,Vbar:pn,vBarv:dn,Vcy:sn,vcy:nn,vdash:an,vDash:rn,Vdash:on,VDash:tn,Vdashl:en,veebar:Za,vee:za,Vee:Xa,veeeq:Ka,vellip:Ja,verbar:Qa,Verbar:Ya,vert:Ga,Vert:Ua,VerticalBar:qa,VerticalLine:Aa,VerticalSeparator:Va,VerticalTilde:Wa,VeryThinSpace:Ha,Vfr:ja,vfr:Ra,vltri:Fa,vnsub:Ba,vnsup:Ea,Vopf:Pa,vopf:Oa,vprop:Ma,vrtri:La,Vscr:Ia,vscr:Da,vsubnE:Ca,vsubne:Sa,vsupnE:ba,vsupne:ka,Vvdash:Na,vzigzag:Ta,Wcirc:ya,wcirc:xa,wedbar:ga,wedge:wa,Wedge:ua,wedgeq:va,weierp:$a,Wfr:fa,wfr:ha,Wopf:_a,wopf:ma,wp:la,wr:ca,wreath:pa,Wscr:ia,wscr:da,xcap:sa,xcirc:na,xcup:aa,xdtri:ra,Xfr:oa,xfr:ta,xharr:ea,xhArr:Zr,Xi:zr,xi:Xr,xlarr:Kr,xlArr:Jr,xmap:Qr,xnis:Yr,xodot:Gr,Xopf:Ur,xopf:qr,xoplus:Ar,xotime:Vr,xrarr:Wr,xrArr:Hr,Xscr:jr,xscr:Rr,xsqcup:Fr,xuplus:Br,xutri:Er,xvee:Pr,xwedge:Or,Yacute:Mr,yacute:Lr,YAcy:Ir,yacy:Dr,Ycirc:Cr,ycirc:Sr,Ycy:br,ycy:kr,yen:Nr,Yfr:Tr,yfr:yr,YIcy:xr,yicy:gr,Yopf:wr,yopf:ur,Yscr:vr,yscr:$r,YUcy:fr,yucy:hr,yuml:_r,Yuml:mr,Zacute:lr,zacute:cr,Zcaron:pr,zcaron:ir,Zcy:dr,zcy:sr,Zdot:nr,zdot:ar,zeetrf:rr,ZeroWidthSpace:or,Zeta:tr,zeta:er,zfr:Zo,Zfr:zo,ZHcy:Xo,zhcy:Ko,zigrarr:Jo,zopf:Qo,Zopf:Yo,Zscr:Go,zscr:Uo,zwj:qo,zwnj:Ao},Vo="Á",Wo="á",Ho="Â",jo="â",Ro="´",Fo="Æ",Bo="æ",Eo="À",Po="à",Oo="&",Mo="&",Lo="Å",Io="å",Do="Ã",Co="ã",So="Ä",bo="ä",ko="¦",No="Ç",To="ç",yo="¸",xo="¢",go="©",wo="©",uo="¤",vo="°",$o="÷",fo="É",ho="é",_o="Ê",mo="ê",lo="È",co="è",po="Ð",io="ð",so="Ë",no="ë",ao="½",ro="¼",oo="¾",to=">",eo=">",Zt="Í",zt="í",Xt="Î",Kt="î",Jt="¡",Qt="Ì",Yt="ì",Gt="¿",Ut="Ï",qt="ï",At="«",Vt="<",Wt="<",Ht="¯",jt="µ",Rt="·",Ft=" ",Bt="¬",Et="Ñ",Pt="ñ",Ot="Ó",Mt="ó",Lt="Ô",It="ô",Dt="Ò",Ct="ò",St="ª",bt="º",kt="Ø",Nt="ø",Tt="Õ",yt="õ",xt="Ö",gt="ö",wt="¶",ut="±",vt="£",$t='"',ft='"',ht="»",_t="®",mt="®",lt="§",ct="­",pt="¹",it="²",dt="³",st="ß",nt="Þ",at="þ",rt="×",ot="Ú",tt="ú",et="Û",Ze="û",ze="Ù",Xe="ù",Ke="¨",Je="Ü",Qe="ü",Ye="Ý",Ge="ý",Ue="¥",qe="ÿ",Ae={Aacute:Vo,aacute:Wo,Acirc:Ho,acirc:jo,acute:Ro,AElig:Fo,aelig:Bo,Agrave:Eo,agrave:Po,amp:Oo,AMP:Mo,Aring:Lo,aring:Io,Atilde:Do,atilde:Co,Auml:So,auml:bo,brvbar:ko,Ccedil:No,ccedil:To,cedil:yo,cent:xo,copy:go,COPY:wo,curren:uo,deg:vo,divide:$o,Eacute:fo,eacute:ho,Ecirc:_o,ecirc:mo,Egrave:lo,egrave:co,ETH:po,eth:io,Euml:so,euml:no,frac12:ao,frac14:ro,frac34:oo,gt:to,GT:eo,Iacute:Zt,iacute:zt,Icirc:Xt,icirc:Kt,iexcl:Jt,Igrave:Qt,igrave:Yt,iquest:Gt,Iuml:Ut,iuml:qt,laquo:At,lt:Vt,LT:Wt,macr:Ht,micro:jt,middot:Rt,nbsp:Ft,not:Bt,Ntilde:Et,ntilde:Pt,Oacute:Ot,oacute:Mt,Ocirc:Lt,ocirc:It,Ograve:Dt,ograve:Ct,ordf:St,ordm:bt,Oslash:kt,oslash:Nt,Otilde:Tt,otilde:yt,Ouml:xt,ouml:gt,para:wt,plusmn:ut,pound:vt,quot:$t,QUOT:ft,raquo:ht,reg:_t,REG:mt,sect:lt,shy:ct,sup1:pt,sup2:it,sup3:dt,szlig:st,THORN:nt,thorn:at,times:rt,Uacute:ot,uacute:tt,Ucirc:et,ucirc:Ze,Ugrave:ze,ugrave:Xe,uml:Ke,Uuml:Je,uuml:Qe,Yacute:Ye,yacute:Ge,yen:Ue,yuml:qe},Ve="&",We="'",He=">",je="<",Re='"',eJ={amp:Ve,apos:We,gt:He,lt:je,quot:Re},Z7={},Fe={"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376},Be=Q3&&Q3.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}};Object.defineProperty(Z7,"__esModule",{value:!0});var gX=Be(Fe),Ee=String.fromCodePoint||function(Z){var z="";if(Z>65535)Z-=65536,z+=String.fromCharCode(Z>>>10&1023|55296),Z=56320|Z&1023;return z+=String.fromCharCode(Z),z};function Pe(Z){if(Z>=55296&&Z<=57343||Z>1114111)return"�";if(Z in gX.default)Z=gX.default[Z];return Ee(Z)}Z7.default=Pe;var F1=Q3&&Q3.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}};Object.defineProperty(S5,"__esModule",{value:!0});S5.decodeHTML=S5.decodeHTMLStrict=S5.decodeXML=void 0;var j4=F1(tJ),Oe=F1(Ae),Me=F1(eJ),wX=F1(Z7),Le=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;S5.decodeXML=ZQ(Me.default);S5.decodeHTMLStrict=ZQ(j4.default);function ZQ(Z){var z=zQ(Z);return function(X){return String(X).replace(Le,z)}}var uX=function(Z,z){return Z<z?1:-1};S5.decodeHTML=function(){var Z=Object.keys(Oe.default).sort(uX),z=Object.keys(j4.default).sort(uX);for(var X=0,K=0;X<z.length;X++)if(Z[K]===z[X])z[X]+=";?",K++;else z[X]+=";";var J=new RegExp("&(?:"+z.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),Q=zQ(j4.default);function Y(G){if(G.substr(-1)!==";")G+=";";return Q(G)}return function(G){return String(G).replace(J,Y)}}();function zQ(Z){return function z(X){if(X.charAt(1)==="#"){var K=X.charAt(2);if(K==="X"||K==="x")return wX.default(parseInt(X.substr(3),16));return wX.default(parseInt(X.substr(2),10))}return Z[X.slice(1,-1)]||X}}var f0={},XQ=Q3&&Q3.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}};Object.defineProperty(f0,"__esModule",{value:!0});f0.escapeUTF8=f0.escape=f0.encodeNonAsciiHTML=f0.encodeHTML=f0.encodeXML=void 0;var Ie=XQ(eJ),KQ=QQ(Ie.default),JQ=YQ(KQ);f0.encodeXML=qQ(KQ);var De=XQ(tJ),z7=QQ(De.default),Ce=YQ(z7);f0.encodeHTML=be(z7,Ce);f0.encodeNonAsciiHTML=qQ(z7);function QQ(Z){return Object.keys(Z).sort().reduce(function(z,X){return z[Z[X]]="&"+X+";",z},{})}function YQ(Z){var z=[],X=[];for(var K=0,J=Object.keys(Z);K<J.length;K++){var Q=J[K];if(Q.length===1)z.push("\\"+Q);else X.push(Q)}z.sort();for(var Y=0;Y<z.length-1;Y++){var G=Y;while(G<z.length-1&&z[G].charCodeAt(1)+1===z[G+1].charCodeAt(1))G+=1;var U=1+G-Y;if(U<3)continue;z.splice(Y,U,z[Y]+"-"+z[G])}return X.unshift("["+z.join("")+"]"),new RegExp(X.join("|"),"g")}var GQ=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,Se=String.prototype.codePointAt!=null?function(Z){return Z.codePointAt(0)}:function(Z){return(Z.charCodeAt(0)-55296)*1024+Z.charCodeAt(1)-56320+65536};function B1(Z){return"&#x"+(Z.length>1?Se(Z):Z.charCodeAt(0)).toString(16).toUpperCase()+";"}function be(Z,z){return function(X){return X.replace(z,function(K){return Z[K]}).replace(GQ,B1)}}var UQ=new RegExp(JQ.source+"|"+GQ.source,"g");function ke(Z){return Z.replace(UQ,B1)}f0.escape=ke;function Ne(Z){return Z.replace(JQ,B1)}f0.escapeUTF8=Ne;function qQ(Z){return function(z){return z.replace(UQ,function(X){return Z[X]||B1(X)})}}(function(Z){Object.defineProperty(Z,"__esModule",{value:!0}),Z.decodeXMLStrict=Z.decodeHTML5Strict=Z.decodeHTML4Strict=Z.decodeHTML5=Z.decodeHTML4=Z.decodeHTMLStrict=Z.decodeHTML=Z.decodeXML=Z.encodeHTML5=Z.encodeHTML4=Z.escapeUTF8=Z.escape=Z.encodeNonAsciiHTML=Z.encodeHTML=Z.encodeXML=Z.encode=Z.decodeStrict=Z.decode=void 0;var z=S5,X=f0;function K(U,q){return(!q||q<=0?z.decodeXML:z.decodeHTML)(U)}Z.decode=K;function J(U,q){return(!q||q<=0?z.decodeXML:z.decodeHTMLStrict)(U)}Z.decodeStrict=J;function Q(U,q){return(!q||q<=0?X.encodeXML:X.encodeHTML)(U)}Z.encode=Q;var Y=f0;Object.defineProperty(Z,"encodeXML",{enumerable:!0,get:function(){return Y.encodeXML}}),Object.defineProperty(Z,"encodeHTML",{enumerable:!0,get:function(){return Y.encodeHTML}}),Object.defineProperty(Z,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return Y.encodeNonAsciiHTML}}),Object.defineProperty(Z,"escape",{enumerable:!0,get:function(){return Y.escape}}),Object.defineProperty(Z,"escapeUTF8",{enumerable:!0,get:function(){return Y.escapeUTF8}}),Object.defineProperty(Z,"encodeHTML4",{enumerable:!0,get:function(){return Y.encodeHTML}}),Object.defineProperty(Z,"encodeHTML5",{enumerable:!0,get:function(){return Y.encodeHTML}});var G=S5;Object.defineProperty(Z,"decodeXML",{enumerable:!0,get:function(){return G.decodeXML}}),Object.defineProperty(Z,"decodeHTML",{enumerable:!0,get:function(){return G.decodeHTML}}),Object.defineProperty(Z,"decodeHTMLStrict",{enumerable:!0,get:function(){return G.decodeHTMLStrict}}),Object.defineProperty(Z,"decodeHTML4",{enumerable:!0,get:function(){return G.decodeHTML}}),Object.defineProperty(Z,"decodeHTML5",{enumerable:!0,get:function(){return G.decodeHTML}}),Object.defineProperty(Z,"decodeHTML4Strict",{enumerable:!0,get:function(){return G.decodeHTMLStrict}}),Object.defineProperty(Z,"decodeHTML5Strict",{enumerable:!0,get:function(){return G.decodeHTMLStrict}}),Object.defineProperty(Z,"decodeXMLStrict",{enumerable:!0,get:function(){return G.decodeXML}})})(e4);var AQ="&(?:#x[a-f0-9]{1,6}|#[0-9]{1,7}|[a-z][a-z0-9]{1,31});",Te=92,ye=/[\\&]/,X7="[!\"#$%&'()*+,./:;<=>?@[\\\\\\]^_`{|}~-]",xe=new RegExp("\\\\"+X7+"|"+AQ,"gi"),ge='[&<>"]',vX=new RegExp(ge,"g"),we=function(Z){if(Z.charCodeAt(0)===Te)return Z.charAt(1);return e4.decodeHTML(Z)};function m3(Z){if(ye.test(Z))return Z.replace(xe,we);return Z}function NZ(Z){try{return pV(Z)}catch(z){return Z}}function ue(Z){switch(Z){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return Z}}function o8(Z){if(vX.test(Z))return Z.replace(vX,ue);return Z}function R4(Z,z){var X=[];for(var K=0;K<z;K++)X.push(Z);return X.join("")}function $X(Z){if(!Z)return!0;return!/[^ \t]+/.test(Z)}var ve=function(){function Z(z){this.current=z,this.root=z,this.entering=!0}return Z.prototype.next=function(){var z=this.current,X=this.entering;if(z===null)return null;var K=K7(z);if(X&&K)if(z.firstChild)this.current=z.firstChild,this.entering=!0;else this.entering=!1;else if(z===this.root)this.current=null;else if(z.next===null)this.current=z.parent,this.entering=!1;else this.current=z.next,this.entering=!0;return{entering:X,node:z}},Z.prototype.resumeAt=function(z,X){this.current=z,this.entering=X===!0},Z}();function K7(Z){switch(Z.type){case"document":case"blockQuote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"strike":case"link":case"image":case"table":case"tableHead":case"tableBody":case"tableRow":case"tableCell":case"tableDelimRow":case"customInline":return!0;default:return!1}}var $e=1,E1={};function fe(Z){return E1[Z]}function F4(Z){delete E1[Z]}function he(){E1={}}var i3=function(){function Z(z,X){if(this.parent=null,this.prev=null,this.next=null,this.firstChild=null,this.lastChild=null,this.literal=null,z==="document")this.id=-1;else this.id=$e++;this.type=z,this.sourcepos=X,E1[this.id]=this}return Z.prototype.isContainer=function(){return K7(this)},Z.prototype.unlink=function(){if(this.prev)this.prev.next=this.next;else if(this.parent)this.parent.firstChild=this.next;if(this.next)this.next.prev=this.prev;else if(this.parent)this.parent.lastChild=this.prev;this.parent=null,this.next=null,this.prev=null},Z.prototype.replaceWith=function(z){this.insertBefore(z),this.unlink()},Z.prototype.insertAfter=function(z){if(z.unlink(),z.next=this.next,z.next)z.next.prev=z;if(z.prev=this,this.next=z,this.parent){if(z.parent=this.parent,!z.next)z.parent.lastChild=z}},Z.prototype.insertBefore=function(z){if(z.unlink(),z.prev=this.prev,z.prev)z.prev.next=z;if(z.next=this,this.prev=z,z.parent=this.parent,!z.prev)z.parent.firstChild=z},Z.prototype.appendChild=function(z){if(z.unlink(),z.parent=this,this.lastChild)this.lastChild.next=z,z.prev=this.lastChild,this.lastChild=z;else this.firstChild=z,this.lastChild=z},Z.prototype.prependChild=function(z){if(z.unlink(),z.parent=this,this.firstChild)this.firstChild.prev=z,z.next=this.firstChild,this.firstChild=z;else this.firstChild=z,this.lastChild=z},Z.prototype.walker=function(){return new ve(this)},Z}(),N5=function(Z){p0(z,Z);function z(X,K){var J=Z.call(this,X,K)||this;return J.open=!0,J.lineOffsets=null,J.stringContent=null,J.lastLineBlank=!1,J.lastLineChecked=!1,J.type=X,J}return z}(i3),_e=function(Z){p0(z,Z);function z(){var X=Z!==null&&Z.apply(this,arguments)||this;return X.listData=null,X}return z}(N5),me=function(Z){p0(z,Z);function z(){var X=Z!==null&&Z.apply(this,arguments)||this;return X.level=0,X.headingType="atx",X}return z}(N5),le=function(Z){p0(z,Z);function z(){var X=Z!==null&&Z.apply(this,arguments)||this;return X.isFenced=!1,X.fenceChar=null,X.fenceLength=0,X.fenceOffset=-1,X.info=null,X.infoPadding=0,X}return z}(N5),ce=function(Z){p0(z,Z);function z(){var X=Z!==null&&Z.apply(this,arguments)||this;return X.columns=[],X}return z}(N5),pe=function(Z){p0(z,Z);function z(){var X=Z!==null&&Z.apply(this,arguments)||this;return X.startIdx=0,X.endIdx=0,X.paddingLeft=0,X.paddingRight=0,X.ignored=!1,X}return z}(N5),ie=function(Z){p0(z,Z);function z(){var X=Z!==null&&Z.apply(this,arguments)||this;return X.title="",X.dest="",X.label="",X}return z}(N5),de=function(Z){p0(z,Z);function z(){var X=Z!==null&&Z.apply(this,arguments)||this;return X.syntaxLength=0,X.offset=-1,X.info="",X}return z}(N5),se=function(Z){p0(z,Z);function z(){var X=Z!==null&&Z.apply(this,arguments)||this;return X.htmlBlockType=-1,X}return z}(N5),ne=function(Z){p0(z,Z);function z(){var X=Z!==null&&Z.apply(this,arguments)||this;return X.destination=null,X.title=null,X.extendedAutolink=!1,X}return z}(i3),ae=function(Z){p0(z,Z);function z(){var X=Z!==null&&Z.apply(this,arguments)||this;return X.tickCount=0,X}return z}(i3),re=function(Z){p0(z,Z);function z(){var X=Z!==null&&Z.apply(this,arguments)||this;return X.info="",X}return z}(i3);function e(Z,z){switch(Z){case"heading":return new me(Z,z);case"list":case"item":return new _e(Z,z);case"link":case"image":return new ne(Z,z);case"codeBlock":return new le(Z,z);case"htmlBlock":return new se(Z,z);case"table":return new ce(Z,z);case"tableCell":return new pe(Z,z);case"document":case"paragraph":case"blockQuote":case"thematicBreak":case"tableRow":case"tableBody":case"tableHead":case"frontMatter":return new N5(Z,z);case"code":return new ae(Z,z);case"refDef":return new ie(Z,z);case"customBlock":return new de(Z,z);case"customInline":return new re(Z,z);default:return new i3(Z,z)}}function VQ(Z){return Z.type==="codeBlock"}function oe(Z){return Z.type==="htmlBlock"}function te(Z){return Z.type==="heading"}function fX(Z){return Z.type==="list"}function ee(Z){return Z.type==="table"}function n8(Z){return Z.type==="refDef"}function WQ(Z){return Z.type==="customBlock"}function Z00(Z){return Z.type==="customInline"}function K0(Z,z){var X=e("text",z);return X.literal=Z,X}var HQ="[A-Za-z][A-Za-z0-9-]*",z00="[a-zA-Z_:][a-zA-Z0-9:._-]*",X00="[^\"'=<>`\\x00-\\x20]+",K00="'[^']*'",J00='"[^"]*"',Q00="(?:"+X00+"|"+K00+"|"+J00+")",Y00="(?:\\s*=\\s*"+Q00+")",G00="(?:\\s+"+z00+Y00+"?)",jQ="<"+HQ+G00+"*\\s*/?>",RQ="</"+HQ+"\\s*[>]",U00="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",q00="[<][?].*?[?][>]",A00="<![A-Z]+\\s+[^>]*>",V00="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",W00="(?:"+jQ+"|"+RQ+"|"+U00+"|"+q00+"|"+A00+"|"+V00+")",H00=new RegExp("^"+W00,"i");/*! http://mths.be/fromcodepoint v0.2.1 by @mathias */var B4;if(String.fromCodePoint)B4=function(Z){try{return String.fromCodePoint(Z)}catch(z){if(z instanceof RangeError)return String.fromCharCode(65533);throw z}};else E4=String.fromCharCode,P4=Math.floor,B4=function(){var Z=[];for(var z=0;z<arguments.length;z++)Z[z]=arguments[z];var X=16384,K=[],J,Q,Y=-1,G=Z.length;if(!G)return"";var U="";while(++Y<G){var q=Number(Z[Y]);if(!isFinite(q)||q<0||q>1114111||P4(q)!==q)return String.fromCharCode(65533);if(q<=65535)K.push(q);else q-=65536,J=(q>>10)+55296,Q=q%1024+56320,K.push(J,Q);if(Y+1===G||K.length>X)U+=E4.apply(void 0,K),K.length=0}return U};var E4,P4,c9=B4,j00="(?:[w-]+.)*[A-Za-z0-9-]+.[A-Za-z0-9-]+",R00="[^<\\s]*[^<?!.,:*_?~\\s]",F00="[\\w.+-]+@(?:[\\w-]+\\.)+[\\w-]+";function B00(Z){var z=/\)+$/.exec(Z);if(z){var X=0;for(var K=0,J=Z;K<J.length;K++){var Q=J[K];if(Q==="(")if(X<0)X=1;else X+=1;else if(Q===")")X-=1}if(X<0){var Y=Math.min(-X,z[0].length);return Z.substring(0,Z.length-Y)}}return Z}function E00(Z){return Z.replace(/&[A-Za-z0-9]+;$/,"")}function P00(Z){var z=new RegExp(F00,"g"),X=[],K;while(K=z.exec(Z)){var J=K[0];if(!/[_-]+$/.test(J))X.push({text:J,range:[K.index,K.index+J.length-1],url:"mailto:"+J})}return X}function O00(Z){var z=new RegExp("(www|https?://)."+j00+R00,"g"),X=[],K;while(K=z.exec(Z)){var J=E00(B00(K[0])),Q=K[1]==="www"?"http://":"";X.push({text:J,range:[K.index,K.index+J.length-1],url:""+Q+J})}return X}function M00(Z){return H4(H4([],O00(Z)),P00(Z)).sort(function(z,X){return z.range[0]-X.range[0]})}function L00(Z,z){if(typeof z==="boolean")z=M00;var X,K=function(){var{entering:J,node:Q}=X;if(J&&Q.type==="text"&&Q.parent.type!=="link"){var Y=Q.literal,G=z(Y);if(!G||!G.length)return"continue";var U=0,q=Q.sourcepos[0],A=q[0],V=q[1],W=function(u,T){return[[A,V+u],[A,V+T]]},j=[];for(var H=0,R=G;H<R.length;H++){var F=R[H],B=F.range,O=F.url,M=F.text;if(B[0]>U)j.push(K0(Y.substring(U,B[0]),W(U,B[0]-1)));var I=e("link",W.apply(void 0,B));I.appendChild(K0(M,W.apply(void 0,B))),I.destination=O,I.extendedAutolink=!0,j.push(I),U=B[1]+1}if(U<Y.length)j.push(K0(Y.substring(U),W(U,Y.length-1)));for(var D=0,b=j;D<b.length;D++){var x=b[D];Q.insertBefore(x)}Q.unlink()}};while(X=Z.next())K()}function Z1(Z){return Z[Z.length-1]}function hX(Z){return Z.slice(1,Z.length-1).trim().replace(/[ \t\r\n]+/," ").toLowerCase().toUpperCase()}function TZ(Z,z){Object.keys(Z).forEach(function(X){z(X,Z[X])})}function I00(Z){var z=[];for(var X=1;X<arguments.length;X++)z[X-1]=arguments[X];var K=j0({},Z);return z.forEach(function(J){delete K[J]}),K}function a8(Z){return!Object.keys(Z).length}function D00(Z){Object.keys(Z).forEach(function(z){delete Z[z]})}var O4=10,p9=42,yZ=95,C00=96,_X=91,S00=93,xZ=126,mX=60,b00=33,lX=92,k00=38,cX=40,i9=41,N00=58,q8=39,A8=34,V8=36,d9="\\\\"+X7,pX=new RegExp(/[!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/),T00=new RegExp('^(?:"('+d9+'|[^"\\x00])*"|'+("'("+d9+"|[^'\\x00])*'")+"|"+("\\(("+d9+"|[^()\\x00])*\\))")),y00=/^(?:<(?:[^<>\n\\\x00]|\\.)*>)/,iX=new RegExp("^"+X7),x00=new RegExp("^"+AQ,"i"),g00=/`+/,w00=/^`+/,u00=/\.\.\./g,v00=/--+/g,$00=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,f00=/^<[A-Za-z][A-Za-z0-9.+-]{1,31}:[^<>\x00-\x20]*>/i,h00=/^ *(?:\n *)?/,s9=/^[ \t\n\x0b\x0c\x0d]/,dX=/^\s/,_00=/ *$/,m00=/^ */,sX=/^ *(?:\n|$)/,l00=/^\[(?:[^\\\[\]]|\\.){0,1000}\]/,c00=/^[^\n`\[\]\\!<&*_'"~$]+/m,p00=function(){function Z(z){this.subject="",this.delimiters=null,this.brackets=null,this.pos=0,this.lineStartNum=0,this.lineIdx=0,this.lineOffsets=[0],this.linePosOffset=0,this.refMap={},this.refLinkCandidateMap={},this.refDefCandidateMap={},this.options=z}return Z.prototype.sourcepos=function(z,X){var K=this.linePosOffset+this.lineOffsets[this.lineIdx],J=this.lineStartNum+this.lineIdx,Q=[J,z+K];if(typeof X==="number")return[Q,[J,X+K]];return Q},Z.prototype.nextLine=function(){this.lineIdx+=1,this.linePosOffset=-this.pos},Z.prototype.match=function(z){var X=z.exec(this.subject.slice(this.pos));if(X===null)return null;return this.pos+=X.index+X[0].length,X[0]},Z.prototype.peek=function(){if(this.pos<this.subject.length)return this.subject.charCodeAt(this.pos);return-1},Z.prototype.spnl=function(){return this.match(h00),!0},Z.prototype.parseBackticks=function(z){var X=this.pos+1,K=this.match(w00);if(K===null)return!1;var J=this.pos,Q;while((Q=this.match(g00))!==null)if(Q===K){var Y=this.subject.slice(J,this.pos-K.length),G=this.sourcepos(X,this.pos),U=Y.split(`
`);if(U.length>1){var q=Z1(U);this.lineIdx+=U.length-1,this.linePosOffset=-(this.pos-q.length-K.length),G[1]=this.sourcepos(this.pos),Y=U.join(" ")}var A=e("code",G);if(Y.length>0&&Y.match(/[^ ]/)!==null&&Y[0]==" "&&Y[Y.length-1]==" ")A.literal=Y.slice(1,Y.length-1);else A.literal=Y;return A.tickCount=K.length,z.appendChild(A),!0}return this.pos=J,z.appendChild(K0(K,this.sourcepos(X,this.pos-1))),!0},Z.prototype.parseBackslash=function(z){var X=this.subject,K;this.pos+=1;var J=this.pos;if(this.peek()===O4)this.pos+=1,K=e("linebreak",this.sourcepos(this.pos-1,this.pos)),z.appendChild(K),this.nextLine();else if(iX.test(X.charAt(this.pos)))z.appendChild(K0(X.charAt(this.pos),this.sourcepos(J,this.pos))),this.pos+=1;else z.appendChild(K0("\\",this.sourcepos(J,J)));return!0},Z.prototype.parseAutolink=function(z){var X,K,J,Q=this.pos+1;if(X=this.match($00))return K=X.slice(1,X.length-1),J=e("link",this.sourcepos(Q,this.pos)),J.destination=NZ("mailto:"+K),J.title="",J.appendChild(K0(K,this.sourcepos(Q+1,this.pos-1))),z.appendChild(J),!0;if(X=this.match(f00))return K=X.slice(1,X.length-1),J=e("link",this.sourcepos(Q,this.pos)),J.destination=NZ(K),J.title="",J.appendChild(K0(K,this.sourcepos(Q+1,this.pos-1))),z.appendChild(J),!0;return!1},Z.prototype.parseHtmlTag=function(z){var X=this.pos+1,K=this.match(H00);if(K===null)return!1;var J=e("htmlInline",this.sourcepos(X,this.pos));return J.literal=K,z.appendChild(J),!0},Z.prototype.scanDelims=function(z){var X=0,K=this.pos;if(z===q8||z===A8)X++,this.pos++;else while(this.peek()===z)X++,this.pos++;if(X===0||X<2&&(z===xZ||z===V8))return this.pos=K,null;var J=K===0?`
`:this.subject.charAt(K-1),Q=this.peek(),Y;if(Q===-1)Y=`
`;else Y=c9(Q);var G=dX.test(Y),U=pX.test(Y),q=dX.test(J),A=pX.test(J),V=!G&&(!U||q||A),W=!q&&(!A||G||U),j,H;if(z===yZ)j=V&&(!W||A),H=W&&(!V||U);else if(z===q8||z===A8)j=V&&!W,H=W;else if(z===V8)j=!G,H=!q;else j=V,H=W;return this.pos=K,{numdelims:X,canOpen:j,canClose:H}},Z.prototype.handleDelim=function(z,X){var K=this.scanDelims(z);if(!K)return!1;var J=K.numdelims,Q=this.pos+1,Y;if(this.pos+=J,z===q8)Y="’";else if(z===A8)Y="“";else Y=this.subject.slice(Q-1,this.pos);var G=K0(Y,this.sourcepos(Q,this.pos));if(X.appendChild(G),(K.canOpen||K.canClose)&&(this.options.smart||z!==q8&&z!==A8)){if(this.delimiters={cc:z,numdelims:J,origdelims:J,node:G,previous:this.delimiters,next:null,canOpen:K.canOpen,canClose:K.canClose},this.delimiters.previous)this.delimiters.previous.next=this.delimiters}return!0},Z.prototype.removeDelimiter=function(z){if(z.previous!==null)z.previous.next=z.next;if(z.next===null)this.delimiters=z.previous;else z.next.previous=z.previous},Z.prototype.removeDelimitersBetween=function(z,X){if(z.next!==X)z.next=X,X.previous=z},Z.prototype.processEmphasis=function(z){var X,K,J,Q,Y,G,U,q=!1,A=(X={},X[yZ]=[z,z,z],X[p9]=[z,z,z],X[q8]=[z],X[A8]=[z],X[xZ]=[z],X[V8]=[z],X);J=this.delimiters;while(J!==null&&J.previous!==z)J=J.previous;while(J!==null){var V=J.cc,W=V===yZ||V===p9;if(!J.canClose)J=J.next;else{K=J.previous,U=!1;while(K!==null&&K!==z&&K!==A[V][W?J.origdelims%3:0]){if(q=W&&(J.canOpen||K.canClose)&&J.origdelims%3!==0&&(K.origdelims+J.origdelims)%3===0,K.cc===J.cc&&K.canOpen&&!q){U=!0;break}K=K.previous}if(Q=J,W||V===xZ||V===V8){if(!U)J=J.next;else if(K){var j=J.numdelims>=2&&K.numdelims>=2?2:1,H=W?0:1;Y=K.node,G=J.node;var R=W?j===1?"emph":"strong":"strike";if(V===V8)R="customInline";var F=e(R),B=Y.sourcepos[1],O=G.sourcepos[0];F.sourcepos=[[B[0],B[1]-j+1],[O[0],O[1]+j-1]],Y.sourcepos[1][1]-=j,G.sourcepos[0][1]+=j,Y.literal=Y.literal.slice(j),G.literal=G.literal.slice(j),K.numdelims-=j,J.numdelims-=j;var M=Y.next,I=void 0;while(M&&M!==G)I=M.next,M.unlink(),F.appendChild(M),M=I;if(V===V8){var D=F.firstChild,b=D.literal||"",x=b.split(/\s/)[0];if(F.info=x,b.length<=x.length)D.unlink();else D.sourcepos[0][1]+=x.length,D.literal=b.replace(x+" ","")}if(Y.insertAfter(F),this.removeDelimitersBetween(K,J),K.numdelims<=H){if(K.numdelims===0)Y.unlink();this.removeDelimiter(K)}if(J.numdelims<=H){if(J.numdelims===0)G.unlink();var u=J.next;this.removeDelimiter(J),J=u}}}else if(V===q8){if(J.node.literal="’",U)K.node.literal="‘";J=J.next}else if(V===A8){if(J.node.literal="”",U)K.node.literal="“";J=J.next}if(!U){if(A[V][W?Q.origdelims%3:0]=Q.previous,!Q.canOpen)this.removeDelimiter(Q)}}}while(this.delimiters!==null&&this.delimiters!==z)this.removeDelimiter(this.delimiters)},Z.prototype.parseLinkTitle=function(){var z=this.match(T00);if(z===null)return null;return m3(z.substr(1,z.length-2))},Z.prototype.parseLinkDestination=function(){var z=this.match(y00);if(z===null){if(this.peek()===mX)return null;var X=this.pos,K=0,J=void 0;while((J=this.peek())!==-1)if(J===lX&&iX.test(this.subject.charAt(this.pos+1))){if(this.pos+=1,this.peek()!==-1)this.pos+=1}else if(J===cX)this.pos+=1,K+=1;else if(J===i9)if(K<1)break;else this.pos+=1,K-=1;else if(s9.exec(c9(J))!==null)break;else this.pos+=1;if(this.pos===X&&J!==i9)return null;if(K!==0)return null;return z=this.subject.substr(X,this.pos-X),NZ(m3(z))}return NZ(m3(z.substr(1,z.length-2)))},Z.prototype.parseLinkLabel=function(){var z=this.match(l00);if(z===null||z.length>1001)return 0;return z.length},Z.prototype.parseOpenBracket=function(z){var X=this.pos;this.pos+=1;var K=K0("[",this.sourcepos(this.pos,this.pos));return z.appendChild(K),this.addBracket(K,X,!1),!0},Z.prototype.parseBang=function(z){var X=this.pos;if(this.pos+=1,this.peek()===_X){this.pos+=1;var K=K0("![",this.sourcepos(this.pos-1,this.pos));z.appendChild(K),this.addBracket(K,X+1,!0)}else{var K=K0("!",this.sourcepos(this.pos,this.pos));z.appendChild(K)}return!0},Z.prototype.parseCloseBracket=function(z){var X=null,K=null,J=!1;this.pos+=1;var Q=this.pos,Y=this.brackets;if(Y===null)return z.appendChild(K0("]",this.sourcepos(Q,Q))),!0;if(!Y.active)return z.appendChild(K0("]",this.sourcepos(Q,Q))),this.removeBracket(),!0;var G=Y.image,U=this.pos;if(this.peek()===cX)if(this.pos++,this.spnl()&&(X=this.parseLinkDestination())!==null&&this.spnl()&&(s9.test(this.subject.charAt(this.pos-1))&&(K=this.parseLinkTitle())||!0)&&this.spnl()&&this.peek()===i9)this.pos+=1,J=!0;else this.pos=U;var q="";if(!J){var A=this.pos,V=this.parseLinkLabel();if(V>2)q=this.subject.slice(A,A+V);else if(!Y.bracketAfter)q=this.subject.slice(Y.index,Q);if(V===0)this.pos=U;if(q){q=hX(q);var W=this.refMap[q];if(W)X=W.destination,K=W.title,J=!0}}if(J){var j=e(G?"image":"link");j.destination=X,j.title=K||"",j.sourcepos=[Y.startpos,this.sourcepos(this.pos)];var H=Y.node.next,R=void 0;while(H)R=H.next,H.unlink(),j.appendChild(H),H=R;if(z.appendChild(j),this.processEmphasis(Y.previousDelimiter),this.removeBracket(),Y.node.unlink(),!G){Y=this.brackets;while(Y!==null){if(!Y.image)Y.active=!1;Y=Y.previous}}if(this.options.referenceDefinition)this.refLinkCandidateMap[z.id]={node:z,refLabel:q};return!0}if(this.removeBracket(),this.pos=Q,z.appendChild(K0("]",this.sourcepos(Q,Q))),this.options.referenceDefinition)this.refLinkCandidateMap[z.id]={node:z,refLabel:q};return!0},Z.prototype.addBracket=function(z,X,K){if(this.brackets!==null)this.brackets.bracketAfter=!0;this.brackets={node:z,startpos:this.sourcepos(X+(K?0:1)),previous:this.brackets,previousDelimiter:this.delimiters,index:X,image:K,active:!0}},Z.prototype.removeBracket=function(){if(this.brackets)this.brackets=this.brackets.previous},Z.prototype.parseEntity=function(z){var X,K=this.pos+1;if(X=this.match(x00))return z.appendChild(K0(e4.decodeHTML(X),this.sourcepos(K,this.pos))),!0;return!1},Z.prototype.parseString=function(z){var X,K=this.pos+1;if(X=this.match(c00)){if(this.options.smart){var J=X.replace(u00,"…").replace(v00,function(Y){var G=0,U=0;if(Y.length%3===0)U=Y.length/3;else if(Y.length%2===0)G=Y.length/2;else if(Y.length%3===2)G=1,U=(Y.length-2)/3;else G=2,U=(Y.length-4)/3;return R4("—",U)+R4("–",G)});z.appendChild(K0(J,this.sourcepos(K,this.pos)))}else{var Q=K0(X,this.sourcepos(K,this.pos));z.appendChild(Q)}return!0}return!1},Z.prototype.parseNewline=function(z){this.pos+=1;var X=z.lastChild;if(X&&X.type==="text"&&X.literal[X.literal.length-1]===" "){var K=X.literal[X.literal.length-2]===" ",J=X.literal.length;X.literal=X.literal.replace(_00,"");var Q=J-X.literal.length;X.sourcepos[1][1]-=Q,z.appendChild(e(K?"linebreak":"softbreak",this.sourcepos(this.pos-Q,this.pos)))}else z.appendChild(e("softbreak",this.sourcepos(this.pos,this.pos)));return this.nextLine(),this.match(m00),!0},Z.prototype.parseReference=function(z,X){if(!this.options.referenceDefinition)return 0;this.subject=z.stringContent,this.pos=0;var K=null,J=this.pos,Q=this.parseLinkLabel();if(Q===0)return 0;var Y=this.subject.substr(0,Q);if(this.peek()===N00)this.pos++;else return this.pos=J,0;this.spnl();var G=this.parseLinkDestination();if(G===null)return this.pos=J,0;var U=this.pos;if(this.spnl(),this.pos!==U)K=this.parseLinkTitle();if(K===null)K="",this.pos=U;var q=!0;if(this.match(sX)===null)if(K==="")q=!1;else K="",this.pos=U,q=this.match(sX)!==null;if(!q)return this.pos=J,0;var A=hX(Y);if(A==="")return this.pos=J,0;var V=this.getReferenceDefSourcepos(z);z.sourcepos[0][0]=V[1][0]+1;var W=e("refDef",V);if(W.title=K,W.dest=G,W.label=A,z.insertBefore(W),!X[A])X[A]=I4(W);else this.refDefCandidateMap[W.id]=W;return this.pos-J},Z.prototype.mergeTextNodes=function(z){var X,K=[];while(X=z.next()){var{entering:J,node:Q}=X;if(J&&Q.type==="text")K.push(Q);else if(K.length===1)K=[];else if(K.length>1){var Y=K[0],G=K[K.length-1];if(Y.sourcepos&&G.sourcepos)Y.sourcepos[1]=G.sourcepos[1];if(Y.next=G.next,Y.next)Y.next.prev=Y;for(var U=1;U<K.length;U+=1)Y.literal+=K[U].literal,K[U].unlink();K=[]}}},Z.prototype.getReferenceDefSourcepos=function(z){var X=z.stringContent.split(/\n|\r\n/),K=!1,J=0,Q={line:0,ch:0};for(var Y=0;Y<X.length;Y+=1){var G=X[Y];if(s9.test(G))break;if(/\:/.test(G)&&J===0){if(K)break;var U=G.indexOf(":")===G.length-1?Y+1:Y;Q={line:U,ch:X[U].length},K=!0}var q=G.match(/'|"/g);if(q)J+=q.length;if(J===2){Q={line:Y,ch:G.length};break}}return[[z.sourcepos[0][0],z.sourcepos[0][1]],[z.sourcepos[0][0]+Q.line,Q.ch]]},Z.prototype.parseInline=function(z){var X,K=!1,J=this.peek();if(J===-1)return!1;switch(J){case O4:K=this.parseNewline(z);break;case lX:K=this.parseBackslash(z);break;case C00:K=this.parseBackticks(z);break;case p9:case yZ:case xZ:case V8:K=this.handleDelim(J,z);break;case q8:case A8:K=!!((X=this.options)===null||X===void 0?void 0:X.smart)&&this.handleDelim(J,z);break;case _X:K=this.parseOpenBracket(z);break;case b00:K=this.parseBang(z);break;case S00:K=this.parseCloseBracket(z);break;case mX:K=this.parseAutolink(z)||this.parseHtmlTag(z);break;case k00:if(!z.disabledEntityParse)K=this.parseEntity(z);break;default:K=this.parseString(z);break}if(!K)this.pos+=1,z.appendChild(K0(c9(J),this.sourcepos(this.pos,this.pos+1)));return!0},Z.prototype.parse=function(z){if(this.subject=z.stringContent.trim(),this.pos=0,this.delimiters=null,this.brackets=null,this.lineOffsets=z.lineOffsets||[0],this.lineIdx=0,this.linePosOffset=0,this.lineStartNum=z.sourcepos[0][0],te(z))this.lineOffsets[0]+=z.level+1;while(this.parseInline(z));z.stringContent=null,this.processEmphasis(null),this.mergeTextNodes(z.walker());var X=this.options,K=X.extendedAutolinks,J=X.customParser;if(K)L00(z.walker(),K);if(J&&z.firstChild){var Q,Y=z.firstChild.walker();while(Q=Y.next()){var{node:G,entering:U}=Q;if(J[G.type])J[G.type](G,{entering:U,options:this.options})}}},Z}(),i00=/^\[([ \txX])\][ \t]+/;function d00(Z,z){if(z.firstChild&&z.firstChild.type==="paragraph"){var X=z.firstChild,K=X.stringContent.match(i00);if(K){var J=K[0].length;X.stringContent=X.stringContent.substring(J-1),X.sourcepos[0][1]+=J,X.lineOffsets[0]+=J,z.listData.task=!0,z.listData.checked=/[xX]/.test(K[1])}}}var s00={continue:function(){return 0},finalize:function(){},canContain:function(Z){return Z==="tableHead"||Z==="tableBody"},acceptsLines:!1},n00={continue:function(){return 0},finalize:function(){},canContain:function(Z){return Z==="tableRow"},acceptsLines:!1},a00={continue:function(){return 1},finalize:function(){},canContain:function(Z){return Z==="tableRow"||Z==="tableDelimRow"},acceptsLines:!1},r00={continue:function(){return 1},finalize:function(){},canContain:function(Z){return Z==="tableDelimCell"},acceptsLines:!1},o00={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},t00={continue:function(){return 1},finalize:function(){},canContain:function(Z){return Z==="tableCell"},acceptsLines:!1},e00={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},z1=4,FQ=9,BQ=62,Z50=60,EQ=32,PQ=91,OQ=/[^ \t\f\v\r\n]/,z50=/^(?:`{3,}|~{3,})(?= *$)/;function nX(Z){var z=Z;while(z){if(z.lastLineBlank)return!0;var X=z.type;if(!z.lastLineChecked&&(X==="list"||X==="item"))z.lastLineChecked=!0,z=z.lastChild;else{z.lastLineChecked=!0;break}}return!1}function h0(Z,z){if(z<Z.length)return Z.charCodeAt(z);return-1}function MQ(Z){return!OQ.test(Z)}function Y3(Z){return Z===EQ||Z===FQ}var X50=/^\$\$$/,K50={continue:function(Z,z){var X=Z.currentLine,K=X.match(X50);if(K)return Z.lastLineLength=K[0].length,Z.finalize(z,Z.lineNumber),2;var J=z.offset;while(J>0&&Y3(h0(X,Z.offset)))Z.advanceOffset(1,!0),J--;return 0},finalize:function(Z,z){if(z.stringContent===null)return;var X=z.stringContent,K=X.indexOf(`
`),J=X.slice(0,K),Q=X.slice(K+1),Y=J.match(/^(\s*)(.*)/);z.info=m3(Y[2].trim()),z.literal=Q,z.stringContent=null},canContain:function(){return!1},acceptsLines:!0},LQ={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!0},J50={continue:function(){return 0},finalize:function(){},canContain:function(Z){return Z!=="item"},acceptsLines:!1},Q50={continue:function(){return 0},finalize:function(Z,z){var X=z.firstChild;while(X){if(nX(X)&&X.next){z.listData.tight=!1;break}var K=X.firstChild;while(K){if(nX(K)&&(X.next||K.next)){z.listData.tight=!1;break}K=K.next}X=X.next}},canContain:function(Z){return Z==="item"},acceptsLines:!1},Y50={continue:function(Z){var z=Z.currentLine;if(!Z.indented&&h0(z,Z.nextNonspace)===BQ){if(Z.advanceNextNonspace(),Z.advanceOffset(1,!1),Y3(h0(z,Z.offset)))Z.advanceOffset(1,!0)}else return 1;return 0},finalize:function(){},canContain:function(Z){return Z!=="item"},acceptsLines:!1},G50={continue:function(Z,z){if(Z.blank){if(z.firstChild===null)return 1;Z.advanceNextNonspace()}else if(Z.indent>=z.listData.markerOffset+z.listData.padding)Z.advanceOffset(z.listData.markerOffset+z.listData.padding,!0);else return 1;return 0},finalize:d00,canContain:function(Z){return Z!=="item"},acceptsLines:!1},U50={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},q50={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},A50={continue:function(Z,z){var{currentLine:X,indent:K}=Z;if(z.isFenced){var J=K<=3&&X.charAt(Z.nextNonspace)===z.fenceChar&&X.slice(Z.nextNonspace).match(z50);if(J&&J[0].length>=z.fenceLength)return Z.lastLineLength=Z.offset+K+J[0].length,Z.finalize(z,Z.lineNumber),2;var Q=z.fenceOffset;while(Q>0&&Y3(h0(X,Z.offset)))Z.advanceOffset(1,!0),Q--}else if(K>=z1)Z.advanceOffset(z1,!0);else if(Z.blank)Z.advanceNextNonspace();else return 1;return 0},finalize:function(Z,z){var X;if(z.stringContent===null)return;if(z.isFenced){var K=z.stringContent,J=K.indexOf(`
`),Q=K.slice(0,J),Y=K.slice(J+1),G=Q.match(/^(\s*)(.*)/);z.infoPadding=G[1].length,z.info=m3(G[2].trim()),z.literal=Y}else z.literal=(X=z.stringContent)===null||X===void 0?void 0:X.replace(/(\n *)+$/,`
`);z.stringContent=null},canContain:function(){return!1},acceptsLines:!0},V50={continue:function(Z,z){return Z.blank&&(z.htmlBlockType===6||z.htmlBlockType===7)?1:0},finalize:function(Z,z){var X;z.literal=((X=z.stringContent)===null||X===void 0?void 0:X.replace(/(\n *)+$/,""))||null,z.stringContent=null},canContain:function(){return!1},acceptsLines:!0},W50={continue:function(Z){return Z.blank?1:0},finalize:function(Z,z){if(z.stringContent===null)return;var X,K=!1;while(h0(z.stringContent,0)===PQ&&(X=Z.inlineParser.parseReference(z,Z.refMap)))z.stringContent=z.stringContent.slice(X),K=!0;if(K&&MQ(z.stringContent))z.unlink()},canContain:function(){return!1},acceptsLines:!0},H50=LQ,j50=LQ,r8={document:J50,list:Q50,blockQuote:Y50,item:G50,heading:U50,thematicBreak:q50,codeBlock:A50,htmlBlock:V50,paragraph:W50,table:s00,tableBody:n00,tableHead:a00,tableRow:t00,tableCell:e00,tableDelimRow:r00,tableDelimCell:o00,refDef:H50,customBlock:K50,frontMatter:j50};function M4(Z){var z=0,X=0,K=[];for(var J=0;J<Z.length;J+=1)if(Z[J]==="|"&&Z[J-1]!=="\\"){var Q=Z.substring(z,J);if(z===0&&$X(Q))X=J+1;else K.push(Q);z=J+1}if(z<Z.length){var Q=Z.substring(z,Z.length);if(!$X(Q))K.push(Q)}return[X,K]}function L4(Z,z,X,K){var J=[];for(var Q=0,Y=z;Q<Y.length;Q++){var G=Y[Q],U=G.match(/^[ \t]+/),q=U?U[0].length:0,A=void 0,V=void 0;if(q===G.length)q=0,A=0,V="";else{var W=G.match(/[ \t]+$/);A=W?W[0].length:0,V=G.slice(q,G.length-A)}var j=K+q,H=e(Z,[[X,K],[X,K+G.length-1]]);H.stringContent=V.replace(/\\\|/g,"|"),H.startIdx=J.length,H.endIdx=J.length,H.lineOffsets=[j-1],H.paddingLeft=q,H.paddingRight=A,J.push(H),K+=G.length+1}return J}function R50(Z){var z=null,X=Z.stringContent,K=X[0],J=X[X.length-1];if(J===":")z=K===":"?"center":"right";else if(K===":")z="left";return{align:z}}var F50=function(Z,z){var X=z.stringContent;if(z.type==="paragraph"&&!Z.indented&&!Z.blank){var K=X.length-1,J=X.lastIndexOf(`
`,K-1)+1,Q=X.slice(J,K),Y=Z.currentLine.slice(Z.nextNonspace),G=M4(Q),U=G[0],q=G[1],A=M4(Y),V=A[0],W=A[1],j=/^[ \t]*:?-+:?[ \t]*$/;if(!q.length||!W.length||W.some(function(u){return!j.test(u)})||W.length===1&&Y.indexOf("|")!==0)return 0;var H=z.lineOffsets,R=Z.lineNumber-1,F=Z1(H)+1,B=e("table",[[R,F],[Z.lineNumber,Z.offset]]);if(B.columns=W.map(function(){return{align:null}}),z.insertAfter(B),H.length===1)z.unlink();else{z.stringContent=X.slice(0,J);var O=X.lastIndexOf(`
`,J-2)+1,M=J-O-1;Z.lastLineLength=H[H.length-2]+M,Z.finalize(z,R-1)}Z.advanceOffset(Z.currentLine.length-Z.offset,!1);var I=e("tableHead",[[R,F],[Z.lineNumber,Z.offset]]);B.appendChild(I);var D=e("tableRow",[[R,F],[R,F+Q.length-1]]),b=e("tableDelimRow",[[Z.lineNumber,Z.nextNonspace+1],[Z.lineNumber,Z.offset]]);I.appendChild(D),I.appendChild(b),L4("tableCell",q,R,F+U).forEach(function(u){D.appendChild(u)});var x=L4("tableDelimCell",W,Z.lineNumber,Z.nextNonspace+1+V);return x.forEach(function(u){b.appendChild(u)}),B.columns=x.map(R50),Z.tip=B,2}return 0},B50=function(Z,z){if(z.type!=="table"&&z.type!=="tableBody"||!Z.blank&&Z.currentLine.indexOf("|")===-1)return 0;if(Z.advanceOffset(Z.currentLine.length-Z.offset,!1),Z.blank){var X=z;if(z.type==="tableBody")X=z.parent,Z.finalize(z,Z.lineNumber-1);return Z.finalize(X,Z.lineNumber-1),0}var K=z;if(z.type==="table")K=Z.addChild("tableBody",Z.nextNonspace),K.stringContent=null;var J=e("tableRow",[[Z.lineNumber,Z.nextNonspace+1],[Z.lineNumber,Z.currentLine.length]]);K.appendChild(J);var Q=K.parent,Y=Z.currentLine.slice(Z.nextNonspace),G=M4(Y),U=G[0],q=G[1];return L4("tableCell",q,Z.lineNumber,Z.nextNonspace+1+U).forEach(function(A,V){if(V>=Q.columns.length)A.ignored=!0;J.appendChild(A)}),2},E50=/^(\$\$)(\s*[a-zA-Z])+/,P50=/^(\$\$)(\s*[a-zA-Z])+.*(\$\$)/,O50=function(Z){var z;if(!Z.indented&&!P50.test(Z.currentLine)&&(z=Z.currentLine.match(E50))){var X=z[1].length;Z.closeUnmatchedBlocks();var K=Z.addChild("customBlock",Z.nextNonspace);return K.syntaxLength=X,K.offset=Z.indent,Z.advanceNextNonspace(),Z.advanceOffset(X,!1),2}return 0},M50=/^`{3,}(?!.*`)|^~{3,}/,L50=[/./,/^<(?:script|pre|style)(?:\s|>|$)/i,/^<!--/,/^<[?]/,/^<![A-Z]/,/^<!\[CDATA\[/,/^<[/]?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[123456]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|[/]?[>]|$)/i,new RegExp("^(?:"+jQ+"|"+RQ+")\\s*$","i")],I50=/^(?:=+|-+)[ \t]*$/,D50=/^#{1,6}(?:[ \t]+|$)/,C50=/^(?:(?:\*[ \t]*){3,}|(?:_[ \t]*){3,}|(?:-[ \t]*){3,})[ \t]*$/,IQ=/^[*+-]/,DQ=/^(\d{1,9})([.)])/;function S50(Z,z){var X=Z.currentLine.slice(Z.nextNonspace),K,J,Q={type:"bullet",tight:!0,bulletChar:"",start:0,delimiter:"",padding:0,markerOffset:Z.indent,task:!1,checked:!1};if(Z.indent>=4)return null;if(K=X.match(IQ))Q.type="bullet",Q.bulletChar=K[0][0];else if((K=X.match(DQ))&&(z.type!=="paragraph"||K[1]==="1"))Q.type="ordered",Q.start=parseInt(K[1],10),Q.delimiter=K[2];else return null;if(J=h0(Z.currentLine,Z.nextNonspace+K[0].length),!(J===-1||J===FQ||J===EQ))return null;if(z.type==="paragraph"&&!Z.currentLine.slice(Z.nextNonspace+K[0].length).match(OQ))return null;Z.advanceNextNonspace(),Z.advanceOffset(K[0].length,!0);var{column:Y,offset:G}=Z;do Z.advanceOffset(1,!0),J=h0(Z.currentLine,Z.offset);while(Z.column-Y<5&&Y3(J));var U=h0(Z.currentLine,Z.offset)===-1,q=Z.column-Y;if(q>=5||q<1||U){if(Q.padding=K[0].length+1,Z.column=Y,Z.offset=G,Y3(h0(Z.currentLine,Z.offset)))Z.advanceOffset(1,!0)}else Q.padding=K[0].length+q;return Q}function b50(Z,z){return Z.type===z.type&&Z.delimiter===z.delimiter&&Z.bulletChar===z.bulletChar}function CQ(Z,z){return Z.options.disallowDeepHeading&&(z.type==="blockQuote"||z.type==="item")}var k50=function(Z){if(!Z.indented&&h0(Z.currentLine,Z.nextNonspace)===BQ){if(Z.advanceNextNonspace(),Z.advanceOffset(1,!1),Y3(h0(Z.currentLine,Z.offset)))Z.advanceOffset(1,!0);return Z.closeUnmatchedBlocks(),Z.addChild("blockQuote",Z.nextNonspace),1}return 0},N50=function(Z,z){var X;if(!Z.indented&&!CQ(Z,z)&&(X=Z.currentLine.slice(Z.nextNonspace).match(D50))){Z.advanceNextNonspace(),Z.advanceOffset(X[0].length,!1),Z.closeUnmatchedBlocks();var K=Z.addChild("heading",Z.nextNonspace);return K.level=X[0].trim().length,K.headingType="atx",K.stringContent=Z.currentLine.slice(Z.offset).replace(/^[ \t]*#+[ \t]*$/,"").replace(/[ \t]+#+[ \t]*$/,""),Z.advanceOffset(Z.currentLine.length-Z.offset),2}return 0},T50=function(Z){var z;if(!Z.indented&&(z=Z.currentLine.slice(Z.nextNonspace).match(M50))){var X=z[0].length;Z.closeUnmatchedBlocks();var K=Z.addChild("codeBlock",Z.nextNonspace);return K.isFenced=!0,K.fenceLength=X,K.fenceChar=z[0][0],K.fenceOffset=Z.indent,Z.advanceNextNonspace(),Z.advanceOffset(X,!1),2}return 0},y50=function(Z,z){if(!Z.indented&&h0(Z.currentLine,Z.nextNonspace)===Z50){var X=Z.currentLine.slice(Z.nextNonspace),K=Z.options.disallowedHtmlBlockTags,J=void 0;for(J=1;J<=7;J++){var Q=X.match(L50[J]);if(Q){if(J===7){if(z.type==="paragraph")return 0;if(K.length>0){var Y=new RegExp("</?(?:"+K.join("|")+")","i");if(Y.test(Q[0]))return 0}}Z.closeUnmatchedBlocks();var G=Z.addChild("htmlBlock",Z.offset);return G.htmlBlockType=J,2}}}return 0},x50=function(Z,z){var X;if(z.stringContent!==null&&!Z.indented&&z.type==="paragraph"&&!CQ(Z,z.parent)&&(X=Z.currentLine.slice(Z.nextNonspace).match(I50))){Z.closeUnmatchedBlocks();var K=void 0;while(h0(z.stringContent,0)===PQ&&(K=Z.inlineParser.parseReference(z,Z.refMap)))z.stringContent=z.stringContent.slice(K);if(z.stringContent.length>0){var J=e("heading",z.sourcepos);return J.level=X[0][0]==="="?1:2,J.headingType="setext",J.stringContent=z.stringContent,z.insertAfter(J),z.unlink(),Z.tip=J,Z.advanceOffset(Z.currentLine.length-Z.offset,!1),2}return 0}return 0},g50=function(Z){if(!Z.indented&&C50.test(Z.currentLine.slice(Z.nextNonspace)))return Z.closeUnmatchedBlocks(),Z.addChild("thematicBreak",Z.nextNonspace),Z.advanceOffset(Z.currentLine.length-Z.offset,!1),2;return 0},w50=function(Z,z){var X,K=z;if((!Z.indented||z.type==="list")&&(X=S50(Z,K))){if(Z.closeUnmatchedBlocks(),Z.tip.type!=="list"||!b50(K.listData,X))K=Z.addChild("list",Z.nextNonspace),K.listData=X;return K=Z.addChild("item",Z.nextNonspace),K.listData=X,1}return 0},u50=function(Z){if(Z.indented&&Z.tip.type!=="paragraph"&&!Z.blank)return Z.advanceOffset(z1,!0),Z.closeUnmatchedBlocks(),Z.addChild("codeBlock",Z.offset),2;return 0},n9=[k50,N50,T50,y50,x50,g50,w50,u50,F50,B50,O50],SQ=/^(-{3}|\+{3}|;{3})$/,v50=function(Z,z){var{currentLine:X,lineNumber:K,indented:J}=Z;if(K===1&&!J&&z.type==="document"&&SQ.test(X)){Z.closeUnmatchedBlocks();var Q=Z.addChild("frontMatter",Z.nextNonspace);return Q.stringContent=X,Z.advanceNextNonspace(),Z.advanceOffset(X.length,!1),2}return 0},$50={continue:function(Z,z){var X=Z.currentLine,K=X.match(SQ);if(z.type==="frontMatter"&&K)return z.stringContent+=X,Z.lastLineLength=K[0].length,Z.finalize(z,Z.lineNumber),2;return 0},finalize:function(Z,z){if(z.stringContent===null)return;z.literal=z.stringContent,z.stringContent=null},canContain:function(){return!1},acceptsLines:!0},f50=[/./,/<\/(?:script|pre|style)>/i,/-->/,/\?>/,/>/,/\]\]>/],h50=/^[#`~*+_=<>0-9-;$]/,_50=/\r\n|\n|\r/;function a9(){return e("document",[[1,1],[0,0]])}var m50={smart:!1,tagFilter:!1,extendedAutolinks:!1,disallowedHtmlBlockTags:[],referenceDefinition:!1,disallowDeepHeading:!1,customParser:null,frontMatter:!1},l50=function(){function Z(z){if(this.options=j0(j0({},m50),z),this.doc=a9(),this.tip=this.doc,this.oldtip=this.doc,this.lineNumber=0,this.offset=0,this.column=0,this.nextNonspace=0,this.nextNonspaceColumn=0,this.indent=0,this.currentLine="",this.indented=!1,this.blank=!1,this.partiallyConsumedTab=!1,this.allClosed=!0,this.lastMatchedContainer=this.doc,this.refMap={},this.refLinkCandidateMap={},this.refDefCandidateMap={},this.lastLineLength=0,this.lines=[],this.options.frontMatter)r8.frontMatter=$50,n9.unshift(v50);this.inlineParser=new p00(this.options)}return Z.prototype.advanceOffset=function(z,X){if(X===void 0)X=!1;var K=this.currentLine,J,Q,Y;while(z>0&&(Y=K[this.offset]))if(Y==="\t")if(J=4-this.column%4,X)this.partiallyConsumedTab=J>z,Q=J>z?z:J,this.column+=Q,this.offset+=this.partiallyConsumedTab?0:1,z-=Q;else this.partiallyConsumedTab=!1,this.column+=J,this.offset+=1,z-=1;else this.partiallyConsumedTab=!1,this.offset+=1,this.column+=1,z-=1},Z.prototype.advanceNextNonspace=function(){this.offset=this.nextNonspace,this.column=this.nextNonspaceColumn,this.partiallyConsumedTab=!1},Z.prototype.findNextNonspace=function(){var z=this.currentLine,X=this.offset,K=this.column,J;while((J=z.charAt(X))!=="")if(J===" ")X++,K++;else if(J==="\t")X++,K+=4-K%4;else break;this.blank=J===`
`||J==="\r"||J==="",this.nextNonspace=X,this.nextNonspaceColumn=K,this.indent=this.nextNonspaceColumn-this.column,this.indented=this.indent>=z1},Z.prototype.addLine=function(){if(this.partiallyConsumedTab){this.offset+=1;var z=4-this.column%4;this.tip.stringContent+=R4(" ",z)}if(this.tip.lineOffsets)this.tip.lineOffsets.push(this.offset);else this.tip.lineOffsets=[this.offset];this.tip.stringContent+=this.currentLine.slice(this.offset)+`
`},Z.prototype.addChild=function(z,X){while(!r8[this.tip.type].canContain(z))this.finalize(this.tip,this.lineNumber-1);var K=X+1,J=e(z,[[this.lineNumber,K],[0,0]]);return J.stringContent="",this.tip.appendChild(J),this.tip=J,J},Z.prototype.closeUnmatchedBlocks=function(){if(!this.allClosed){while(this.oldtip!==this.lastMatchedContainer){var z=this.oldtip.parent;this.finalize(this.oldtip,this.lineNumber-1),this.oldtip=z}this.allClosed=!0}},Z.prototype.finalize=function(z,X){var K=z.parent;z.open=!1,z.sourcepos[1]=[X,this.lastLineLength],r8[z.type].finalize(this,z),this.tip=K},Z.prototype.processInlines=function(z){var X,K=this.options.customParser,J=z.walker();this.inlineParser.refMap=this.refMap,this.inlineParser.refLinkCandidateMap=this.refLinkCandidateMap,this.inlineParser.refDefCandidateMap=this.refDefCandidateMap,this.inlineParser.options=this.options;while(X=J.next()){var{node:Q,entering:Y}=X,G=Q.type;if(K&&K[G])K[G](Q,{entering:Y,options:this.options});if(!Y&&(G==="paragraph"||G==="heading"||G==="tableCell"&&!Q.ignored))this.inlineParser.parse(Q)}},Z.prototype.incorporateLine=function(z){var X=this.doc;if(this.oldtip=this.tip,this.offset=0,this.column=0,this.blank=!1,this.partiallyConsumedTab=!1,this.lineNumber+=1,z.indexOf("\x00")!==-1)z=z.replace(/\0/g,"�");this.currentLine=z;var K=!0,J;while((J=X.lastChild)&&J.open){switch(X=J,this.findNextNonspace(),r8[X.type].continue(this,X)){case 0:break;case 1:K=!1;break;case 2:this.lastLineLength=z.length;return;default:throw new Error("continue returned illegal value, must be 0, 1, or 2")}if(!K){X=X.parent;break}}this.allClosed=X===this.oldtip,this.lastMatchedContainer=X;var Q=X.type!=="paragraph"&&r8[X.type].acceptsLines,Y=n9.length;while(!Q){if(this.findNextNonspace(),X.type!=="table"&&X.type!=="tableBody"&&X.type!=="paragraph"&&!this.indented&&!h50.test(z.slice(this.nextNonspace))){this.advanceNextNonspace();break}var G=0;while(G<Y){var U=n9[G](this,X);if(U===1){X=this.tip;break}else if(U===2){X=this.tip,Q=!0;break}else G++}if(G===Y){this.advanceNextNonspace();break}}if(!this.allClosed&&!this.blank&&this.tip.type==="paragraph")this.addLine();else{if(this.closeUnmatchedBlocks(),this.blank&&X.lastChild)X.lastChild.lastLineBlank=!0;var q=X.type,A=this.blank&&!(q==="blockQuote"||VQ(X)&&X.isFenced||q==="item"&&!X.firstChild&&X.sourcepos[0][0]===this.lineNumber),V=X;while(V)V.lastLineBlank=A,V=V.parent;if(r8[q].acceptsLines){if(this.addLine(),oe(X)&&X.htmlBlockType>=1&&X.htmlBlockType<=5&&f50[X.htmlBlockType].test(this.currentLine.slice(this.offset)))this.lastLineLength=z.length,this.finalize(X,this.lineNumber)}else if(this.offset<z.length&&!this.blank)X=this.addChild("paragraph",this.offset),this.advanceNextNonspace(),this.addLine()}this.lastLineLength=z.length},Z.prototype.parse=function(z,X){this.doc=a9(),this.tip=this.doc,this.lineNumber=0,this.lastLineLength=0,this.offset=0,this.column=0,this.lastMatchedContainer=this.doc,this.currentLine="";var K=z.split(_50),J=K.length;if(this.lines=X?X:K,this.options.referenceDefinition)this.clearRefMaps();if(z.charCodeAt(z.length-1)===O4)J-=1;for(var Q=0;Q<J;Q++)this.incorporateLine(K[Q]);while(this.tip)this.finalize(this.tip,J);return this.processInlines(this.doc),this.doc},Z.prototype.partialParseStart=function(z,X){this.doc=a9(),this.tip=this.doc,this.lineNumber=z-1,this.lastLineLength=0,this.offset=0,this.column=0,this.lastMatchedContainer=this.doc,this.currentLine="";var K=X.length;for(var J=0;J<K;J++)this.incorporateLine(X[J]);return this.doc},Z.prototype.partialParseExtends=function(z){for(var X=0;X<z.length;X++)this.incorporateLine(z[X])},Z.prototype.partialParseFinish=function(){while(this.tip)this.finalize(this.tip,this.lineNumber);this.processInlines(this.doc)},Z.prototype.setRefMaps=function(z,X,K){this.refMap=z,this.refLinkCandidateMap=X,this.refDefCandidateMap=K},Z.prototype.clearRefMaps=function(){[this.refMap,this.refLinkCandidateMap,this.refDefCandidateMap].forEach(function(z){D00(z)})},Z}();function aX(Z,z){if(Z[0]<z[0])return 1;if(Z[0]>z[0])return-1;if(Z[1]<z[1])return 1;if(Z[1]>z[1])return-1;return 0}function c50(Z,z){var X=Z[0],K=Z[1];if(aX(K,z)===1)return 1;if(aX(X,z)===-1)return-1;return 0}function p50(Z,z){if(Z.parent!==z.parent||Z===z)return;var X=Z.next;while(X&&X!==z){var K=X.next;for(var J=0,Q=["parent","prev","next"];J<Q.length;J++){var Y=Q[J];if(X[Y])F4(X[Y].id),X[Y]=null}X=K}if(Z.next=z.next,z.next)z.next.prev=Z;else Z.parent.lastChild=Z}function i50(Z){var z=[],X=Z.firstChild;while(X)z.push(X),X=X.next;return z}function rX(Z,z){for(var X=0,K=z;X<K.length;X++){var J=K[X];Z.insertBefore(J)}}function d50(Z,z){for(var X=z.length-1;X>=0;X-=1)Z.prependChild(z[X])}function s50(Z,z){if(!Z||!Z.parent||z===0)return;var X=Z.parent.walker();X.resumeAt(Z,!0);var K;while(K=X.next()){var{node:J,entering:Q}=K;if(Q)J.sourcepos[0][0]+=z,J.sourcepos[1][0]+=z}}function bQ(Z,z){var X=Z[0],K=Z[1];if(K[0]<z)return 1;if(X[0]>z)return-1;return 0}function gZ(Z,z){var X=Z.firstChild;while(X){var K=bQ(X.sourcepos,z);if(K===0)return X;if(K===-1)return X.prev||X;X=X.next}return Z.lastChild}function n50(Z){while(Z.lastChild)Z=Z.lastChild;return Z}function a50(Z){while(Z.parent&&Z.parent.type!=="document"&&Z.parent.sourcepos[0][0]===Z.sourcepos[0][0])Z=Z.parent;return Z}function r50(Z,z){var X=Z.firstChild,K=null;while(X){var J=bQ(X.sourcepos,z);if(J===0){if(X.sourcepos[0][0]===z||!X.firstChild)return X;K=X,X=X.firstChild}else if(J===-1)break;else K=X,X=X.next}if(K)return a50(n50(K));return null}function o50(Z,z){var X=Z,K=null;while(X){var J=c50(X.sourcepos,z);if(J===0)if(X.firstChild)K=X,X=X.firstChild;else return X;else if(J===-1)return K;else if(X.next)X=X.next;else return K}return X}function kQ(Z){return fe(Z)||null}function r9(Z,z,X){if(X===void 0)X=null;if(z){var K=z.walker();while(z&&z!==X){Z(z);var J=K.next();if(J)z=J.node;else break}}}function t50(Z){var z=kQ(Z);if(!z)return!0;while(z&&z.type!=="document"){if(!z.parent&&!z.prev&&!z.next)return!0;z=z.parent}return!1}var oX=/\r\n|\n|\r/;function e50(Z){var z=Z.match(/^[ \t]+/);if(z&&(z[0].length>=2||/\t/.test(z[0])))return!0;var X=z?Z.slice(z.length):Z;return IQ.test(X)||DQ.test(X)}function Z80(Z){return!MQ(Z)&&Z.indexOf("|")!==-1}function I4(Z){var{id:z,title:X,sourcepos:K,dest:J}=Z;return{id:z,title:X,sourcepos:K,unlinked:!1,destination:J}}var NQ=function(){function Z(z,X){this.refMap={},this.refLinkCandidateMap={},this.refDefCandidateMap={},this.referenceDefinition=!!(X===null||X===void 0?void 0:X.referenceDefinition),this.parser=new l50(X),this.parser.setRefMaps(this.refMap,this.refLinkCandidateMap,this.refDefCandidateMap),this.eventHandlerMap={change:[]},z=z||"",this.lineTexts=z.split(oX),this.root=this.parser.parse(z,this.lineTexts)}return Z.prototype.updateLineTexts=function(z,X,K){var J,Q=z[0],Y=z[1],G=X[0],U=X[1],q=K.split(oX),A=q.length,V=this.lineTexts[Q-1],W=this.lineTexts[G-1];q[0]=V.slice(0,Y-1)+q[0],q[A-1]=q[A-1]+W.slice(U-1);var j=G-Q+1;return(J=this.lineTexts).splice.apply(J,H4([Q-1,j],q)),A-j},Z.prototype.updateRootNodeState=function(){if(this.lineTexts.length===1&&this.lineTexts[0]===""){this.root.lastLineBlank=!0,this.root.sourcepos=[[1,1],[1,0]];return}if(this.root.lastChild)this.root.lastLineBlank=this.root.lastChild.lastLineBlank;var z=this.lineTexts,X=z.length-1;while(z[X]==="")X-=1;if(z.length-2>X)X+=1;this.root.sourcepos[1]=[X+1,z[X].length]},Z.prototype.replaceRangeNodes=function(z,X,K){if(!z)if(X)rX(X,K),F4(X.id),X.unlink();else d50(this.root,K);else rX(z,K),p50(z,X),[z.id,X.id].forEach(function(J){return F4(J)}),z.unlink()},Z.prototype.getNodeRange=function(z,X){var K=gZ(this.root,z[0]),J=gZ(this.root,X[0]);if(J&&J.next&&X[0]+1===J.next.sourcepos[0][0])J=J.next;return[K,J]},Z.prototype.trigger=function(z,X){this.eventHandlerMap[z].forEach(function(K){K(X)})},Z.prototype.extendEndLine=function(z){while(this.lineTexts[z]==="")z+=1;return z},Z.prototype.parseRange=function(z,X,K,J){if(z&&z.prev&&(fX(z.prev)&&e50(this.lineTexts[K-1])||ee(z.prev)&&Z80(this.lineTexts[K-1])))z=z.prev,K=z.sourcepos[0][0];var Q=this.lineTexts.slice(K-1,J),Y=this.parser.partialParseStart(K,Q),G=X?X.next:this.root.firstChild,U=Y.lastChild,q=U&&VQ(U)&&U.open,A=U&&WQ(U)&&U.open,V=U&&fX(U);while((q||A)&&G||V&&G&&(G.type==="list"||G.sourcepos[0][1]>=2)){var W=this.extendEndLine(G.sourcepos[1][0]);if(this.parser.partialParseExtends(this.lineTexts.slice(J,W)),!z)z=X;X=G,J=W,G=G.next}this.parser.partialParseFinish();var j=i50(Y);return{newNodes:j,extStartNode:z,extEndNode:X}},Z.prototype.getRemovedNodeRange=function(z,X){if(!z||z&&n8(z)||X&&n8(X))return null;return{id:[z.id,X.id],line:[z.sourcepos[0][0]-1,X.sourcepos[1][0]-1]}},Z.prototype.markDeletedRefMap=function(z,X){var K=this;if(!a8(this.refMap)){var J=function(Q){if(n8(Q)){var Y=K.refMap[Q.label];if(Y&&Q.id===Y.id)Y.unlinked=!0}};if(z)r9(J,z.parent,X);if(X)r9(J,X)}},Z.prototype.replaceWithNewRefDefState=function(z){var X=this;if(!a8(this.refMap)){var K=function(J){if(n8(J)){var Q=J.label,Y=X.refMap[Q];if(!Y||Y.unlinked)X.refMap[Q]=I4(J)}};z.forEach(function(J){r9(K,J)})}},Z.prototype.replaceWithRefDefCandidate=function(){var z=this;if(!a8(this.refDefCandidateMap))TZ(this.refDefCandidateMap,function(X,K){var{label:J,sourcepos:Q}=K,Y=z.refMap[J];if(!Y||Y.unlinked||Y.sourcepos[0][0]>Q[0][0])z.refMap[J]=I4(K)})},Z.prototype.getRangeWithRefDef=function(z,X,K,J,Q){if(this.referenceDefinition&&!a8(this.refMap)){var Y=gZ(this.root,z-1),G=gZ(this.root,X+1);if(Y&&n8(Y)&&Y!==K&&Y!==J)K=Y,z=K.sourcepos[0][0];if(G&&n8(G)&&G!==K&&G!==J)J=G,X=this.extendEndLine(J.sourcepos[1][0]+Q)}return[K,J,z,X]},Z.prototype.parse=function(z,X,K){if(K===void 0)K=0;var J=this.getNodeRange(z,X),Q=J[0],Y=J[1],G=Q?Math.min(Q.sourcepos[0][0],z[0]):z[0],U=this.extendEndLine((Y?Math.max(Y.sourcepos[1][0],X[0]):X[0])+K),q=this.parseRange.apply(this,this.getRangeWithRefDef(G,U,Q,Y,K)),A=q.newNodes,V=q.extStartNode,W=q.extEndNode,j=this.getRemovedNodeRange(V,W),H=W?W.next:this.root.firstChild;if(this.referenceDefinition)this.markDeletedRefMap(V,W),this.replaceRangeNodes(V,W,A),this.replaceWithNewRefDefState(A);else this.replaceRangeNodes(V,W,A);return{nodes:A,removedNodeRange:j,nextNode:H}},Z.prototype.parseRefLink=function(){var z=this,X=[];if(!a8(this.refMap))TZ(this.refMap,function(K,J){if(J.unlinked)delete z.refMap[K];TZ(z.refLinkCandidateMap,function(Q,Y){var{node:G,refLabel:U}=Y;if(U===K)X.push(z.parse(G.sourcepos[0],G.sourcepos[1]))})});return X},Z.prototype.removeUnlinkedCandidate=function(){if(!a8(this.refDefCandidateMap))[this.refLinkCandidateMap,this.refDefCandidateMap].forEach(function(z){TZ(z,function(X){if(t50(X))delete z[X]})})},Z.prototype.editMarkdown=function(z,X,K){var J=this.updateLineTexts(z,X,K),Q=this.parse(z,X,J),Y=I00(Q,"nextNode");s50(Q.nextNode,J),this.updateRootNodeState();var G=[Y];if(this.referenceDefinition)this.removeUnlinkedCandidate(),this.replaceWithRefDefCandidate(),G=G.concat(this.parseRefLink());return this.trigger("change",G),G},Z.prototype.getLineTexts=function(){return this.lineTexts},Z.prototype.getRootNode=function(){return this.root},Z.prototype.findNodeAtPosition=function(z){var X=o50(this.root,z);if(!X||X===this.root)return null;return X},Z.prototype.findFirstNodeAtLine=function(z){return r50(this.root,z)},Z.prototype.on=function(z,X){this.eventHandlerMap[z].push(X)},Z.prototype.off=function(z,X){var K=this.eventHandlerMap[z],J=K.indexOf(X);K.splice(J,1)},Z.prototype.findNodeById=function(z){return kQ(z)},Z.prototype.removeAllNode=function(){he()},Z}(),z80=["title","textarea","style","xmp","iframe","noembed","noframes","script","plaintext"],tX=new RegExp("<(/?(?:"+z80.join("|")+")[^>]*>)","ig");function eX(Z){if(tX.test(Z))return Z.replace(tX,function(z,X){return"&lt;"+X});return Z}var ZK={heading:function(Z,z){var X=z.entering;return{type:X?"openTag":"closeTag",tagName:"h"+Z.level,outerNewLine:!0}},text:function(Z){return{type:"text",content:Z.literal}},softbreak:function(Z,z){var X=z.options;return{type:"html",content:X.softbreak}},linebreak:function(){return{type:"html",content:`<br />
`}},emph:function(Z,z){var X=z.entering;return{type:X?"openTag":"closeTag",tagName:"em"}},strong:function(Z,z){var X=z.entering;return{type:X?"openTag":"closeTag",tagName:"strong"}},paragraph:function(Z,z){var X,K=z.entering,J=(X=Z.parent)===null||X===void 0?void 0:X.parent;if(J&&J.type==="list"){if(J.listData.tight)return null}return{type:K?"openTag":"closeTag",tagName:"p",outerNewLine:!0}},thematicBreak:function(){return{type:"openTag",tagName:"hr",outerNewLine:!0,selfClose:!0}},blockQuote:function(Z,z){var X=z.entering;return{type:X?"openTag":"closeTag",tagName:"blockquote",outerNewLine:!0,innerNewLine:!0}},list:function(Z,z){var X=z.entering,K=Z.listData,J=K.type,Q=K.start,Y=J==="bullet"?"ul":"ol",G={};if(Y==="ol"&&Q!==null&&Q!==1)G.start=Q.toString();return{type:X?"openTag":"closeTag",tagName:Y,attributes:G,outerNewLine:!0}},item:function(Z,z){var X=z.entering;return{type:X?"openTag":"closeTag",tagName:"li",outerNewLine:!0}},htmlInline:function(Z,z){var X=z.options,K=X.tagFilter?eX(Z.literal):Z.literal;return{type:"html",content:K}},htmlBlock:function(Z,z){var X=z.options,K=X.tagFilter?eX(Z.literal):Z.literal;if(X.nodeId)return[{type:"openTag",tagName:"div",outerNewLine:!0},{type:"html",content:K},{type:"closeTag",tagName:"div",outerNewLine:!0}];return{type:"html",content:K,outerNewLine:!0}},code:function(Z){return[{type:"openTag",tagName:"code"},{type:"text",content:Z.literal},{type:"closeTag",tagName:"code"}]},codeBlock:function(Z){var z=Z.info,X=z?z.split(/\s+/):[],K=[];if(X.length>0&&X[0].length>0)K.push("language-"+o8(X[0]));return[{type:"openTag",tagName:"pre",outerNewLine:!0},{type:"openTag",tagName:"code",classNames:K},{type:"text",content:Z.literal},{type:"closeTag",tagName:"code"},{type:"closeTag",tagName:"pre",outerNewLine:!0}]},link:function(Z,z){var X=z.entering;if(X){var K=Z,J=K.title,Q=K.destination;return{type:"openTag",tagName:"a",attributes:j0({href:o8(Q)},J&&{title:o8(J)})}}return{type:"closeTag",tagName:"a"}},image:function(Z,z){var{getChildrenText:X,skipChildren:K}=z,J=Z,Q=J.title,Y=J.destination;return K(),{type:"openTag",tagName:"img",selfClose:!0,attributes:j0({src:o8(Y),alt:X(Z)},Q&&{title:o8(Q)})}},customBlock:function(Z,z,X){var K=Z.info.trim().toLowerCase(),J=X[K];if(J)try{return J(Z,z)}catch(Q){console.warn("[@toast-ui/editor] - The error occurred when "+K+" block node was parsed in markdown renderer: "+Q)}return[{type:"openTag",tagName:"div",outerNewLine:!0},{type:"text",content:Z.literal},{type:"closeTag",tagName:"div",outerNewLine:!0}]},frontMatter:function(Z){return[{type:"openTag",tagName:"div",outerNewLine:!0,attributes:{style:"white-space: pre; display: none;"}},{type:"text",content:Z.literal},{type:"closeTag",tagName:"div",outerNewLine:!0}]},customInline:function(Z,z,X){var K=Z,J=K.info,Q=K.firstChild,Y=J.trim().toLowerCase(),G=X[Y],U=z.entering;if(G)try{return G(Z,z)}catch(q){console.warn("[@toast-ui/editor] - The error occurred when "+Y+" inline node was parsed in markdown renderer: "+q)}return U?[{type:"openTag",tagName:"span"},{type:"text",content:"$$"+J+(Q?" ":"")}]:[{type:"text",content:"$$"},{type:"closeTag",tagName:"span"}]}},zK={strike:function(Z,z){var X=z.entering;return{type:X?"openTag":"closeTag",tagName:"del"}},item:function(Z,z){var X=z.entering,K=Z.listData,J=K.checked,Q=K.task;if(X){var Y={type:"openTag",tagName:"li",outerNewLine:!0};if(Q)return[Y,{type:"openTag",tagName:"input",selfClose:!0,attributes:j0(j0({},J&&{checked:""}),{disabled:"",type:"checkbox"})},{type:"text",content:" "}];return Y}return{type:"closeTag",tagName:"li",outerNewLine:!0}},table:function(Z,z){var X=z.entering;return{type:X?"openTag":"closeTag",tagName:"table",outerNewLine:!0}},tableHead:function(Z,z){var X=z.entering;return{type:X?"openTag":"closeTag",tagName:"thead",outerNewLine:!0}},tableBody:function(Z,z){var X=z.entering;return{type:X?"openTag":"closeTag",tagName:"tbody",outerNewLine:!0}},tableRow:function(Z,z){var X=z.entering;if(X)return{type:"openTag",tagName:"tr",outerNewLine:!0};var K=[];if(Z.lastChild){var J=Z.parent.parent.columns.length,Q=Z.lastChild.endIdx;for(var Y=Q+1;Y<J;Y+=1)K.push({type:"openTag",tagName:"td",outerNewLine:!0},{type:"closeTag",tagName:"td",outerNewLine:!0})}return K.push({type:"closeTag",tagName:"tr",outerNewLine:!0}),K},tableCell:function(Z,z){var X=z.entering;if(Z.ignored)return{type:"text",content:""};var K=Z.parent.parent,J=K.type==="tableHead"?"th":"td",Q=K.parent,Y=Q.columns[Z.startIdx],G=(Y===null||Y===void 0?void 0:Y.align)?{align:Y.align}:null;if(X)return j0({type:"openTag",tagName:J,outerNewLine:!0},G&&{attributes:G});return{type:"closeTag",tagName:J,outerNewLine:!0}}},X80={softbreak:`
`,gfm:!1,tagFilter:!1,nodeId:!1};function K80(Z){var z=[],X=Z.walker(),K=null;while(K=X.next()){var J=K.node;if(J.type==="text")z.push(J.literal)}return z.join("")}var J7=function(){function Z(z){this.buffer=[],this.options=j0(j0({},X80),z),this.convertors=this.createConvertors(),delete this.options.convertors}return Z.prototype.createConvertors=function(){var z=j0({},ZK);if(this.options.gfm)z=j0(j0({},z),zK);if(this.options.convertors){var X=this.options.convertors,K=Object.keys(X),J=j0(j0({},ZK),zK);K.forEach(function(Q){var Y=z[Q],G=X[Q],U=Object.keys(J).indexOf(Q)===-1?Q.toLowerCase():Q;if(Y)z[U]=function(q,A,V){return A.origin=function(){return Y(q,A,V)},G(q,A)};else z[U]=G})}return z},Z.prototype.getConvertors=function(){return this.convertors},Z.prototype.getOptions=function(){return this.options},Z.prototype.render=function(z){var X=this;this.buffer=[];var K=z.walker(),J=null,Q=function(){var{node:G,entering:U}=J,q=Y.convertors[G.type];if(!q)return"continue";var A=!1,V={entering:U,leaf:!K7(G),options:Y.options,getChildrenText:K80,skipChildren:function(){A=!0}},W=WQ(G)||Z00(G)?q(G,V,Y.convertors):q(G,V);if(W){var j=Array.isArray(W)?W:[W];if(j.forEach(function(H,R){if(H.type==="openTag"&&X.options.nodeId&&R===0){if(!H.attributes)H.attributes={};H.attributes["data-nodeid"]=String(G.id)}X.renderHTMLNode(H)}),A)K.resumeAt(G,!1),K.next()}},Y=this;while(J=K.next())Q();return this.addNewLine(),this.buffer.join("")},Z.prototype.renderHTMLNode=function(z){switch(z.type){case"openTag":case"closeTag":this.renderElementNode(z);break;case"text":this.renderTextNode(z);break;case"html":this.renderRawHtmlNode(z);break}},Z.prototype.generateOpenTagString=function(z){var X=this,K=z.tagName,J=z.classNames,Q=z.attributes;if(this.buffer.push("<"+K),J&&J.length>0)this.buffer.push(' class="'+J.join(" ")+'"');if(Q)Object.keys(Q).forEach(function(Y){var G=Q[Y];X.buffer.push(" "+Y+'="'+G+'"')});if(z.selfClose)this.buffer.push(" /");this.buffer.push(">")},Z.prototype.generateCloseTagString=function(z){var X=z.tagName;this.buffer.push("</"+X+">")},Z.prototype.addNewLine=function(){if(this.buffer.length&&Z1(Z1(this.buffer))!==`
`)this.buffer.push(`
`)},Z.prototype.addOuterNewLine=function(z){if(z.outerNewLine)this.addNewLine()},Z.prototype.addInnerNewLine=function(z){if(z.innerNewLine)this.addNewLine()},Z.prototype.renderTextNode=function(z){this.buffer.push(o8(z.content))},Z.prototype.renderRawHtmlNode=function(z){this.addOuterNewLine(z),this.buffer.push(z.content),this.addOuterNewLine(z)},Z.prototype.renderElementNode=function(z){if(z.type==="openTag")if(this.addOuterNewLine(z),this.generateOpenTagString(z),z.selfClose)this.addOuterNewLine(z);else this.addInnerNewLine(z);else this.addInnerNewLine(z),this.generateCloseTagString(z),this.addOuterNewLine(z)},Z}();/*! @license DOMPurify 2.3.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.3/LICENSE */function J80(Z){if(Array.isArray(Z)){for(var z=0,X=Array(Z.length);z<Z.length;z++)X[z]=Z[z];return X}else return Array.from(Z)}var{hasOwnProperty:Q80,setPrototypeOf:XK,isFrozen:Y80,getPrototypeOf:G80,getOwnPropertyDescriptor:U80,freeze:x0,seal:b5,create:q80}=Object,TQ=typeof Reflect!=="undefined"&&Reflect,X1=TQ.apply,D4=TQ.construct;if(!X1)X1=function Z(z,X,K){return z.apply(X,K)};if(!x0)x0=function Z(z){return z};if(!b5)b5=function Z(z){return z};if(!D4)D4=function Z(z,X){return new(Function.prototype.bind.apply(z,[null].concat(J80(X))))};var A80=t0(Array.prototype.forEach),KK=t0(Array.prototype.pop),w3=t0(Array.prototype.push),hZ=t0(String.prototype.toLowerCase),JK=t0(String.prototype.match),d5=t0(String.prototype.replace),V80=t0(String.prototype.indexOf),W80=t0(String.prototype.trim),L5=t0(RegExp.prototype.test),QK=H80(TypeError);function t0(Z){return function(z){for(var X=arguments.length,K=Array(X>1?X-1:0),J=1;J<X;J++)K[J-1]=arguments[J];return X1(Z,z,K)}}function H80(Z){return function(){for(var z=arguments.length,X=Array(z),K=0;K<z;K++)X[K]=arguments[K];return D4(Z,X)}}function f(Z,z){if(XK)XK(Z,null);var X=z.length;while(X--){var K=z[X];if(typeof K==="string"){var J=hZ(K);if(J!==K){if(!Y80(z))z[X]=J;K=J}}Z[K]=!0}return Z}function W8(Z){var z=q80(null),X=void 0;for(X in Z)if(X1(Q80,Z,[X]))z[X]=Z[X];return z}function wZ(Z,z){while(Z!==null){var X=U80(Z,z);if(X){if(X.get)return t0(X.get);if(typeof X.value==="function")return t0(X.value)}Z=G80(Z)}function K(J){return console.warn("fallback value for",J),null}return K}var YK=x0(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),o9=x0(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),t9=x0(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),j80=x0(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),e9=x0(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),R80=x0(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),GK=x0(["#text"]),UK=x0(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Z4=x0(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),qK=x0(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),uZ=x0(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),F80=b5(/\{\{[\s\S]*|[\s\S]*\}\}/gm),B80=b5(/<%[\s\S]*|[\s\S]*%>/gm),E80=b5(/^data-[\-\w.\u00B7-\uFFFF]/),P80=b5(/^aria-[\-\w]+$/),O80=b5(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),M80=b5(/^(?:\w+script|data):/i),L80=b5(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),_3=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol==="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z};function Y5(Z){if(Array.isArray(Z)){for(var z=0,X=Array(Z.length);z<Z.length;z++)X[z]=Z[z];return X}else return Array.from(Z)}var I80=function Z(){return typeof window==="undefined"?null:window},D80=function Z(z,X){if((typeof z==="undefined"?"undefined":_3(z))!=="object"||typeof z.createPolicy!=="function")return null;var K=null,J="data-tt-policy-suffix";if(X.currentScript&&X.currentScript.hasAttribute(J))K=X.currentScript.getAttribute(J);var Q="dompurify"+(K?"#"+K:"");try{return z.createPolicy(Q,{createHTML:function Y(G){return G}})}catch(Y){return console.warn("TrustedTypes policy "+Q+" could not be created."),null}};function yQ(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:I80(),z=function g(E){return yQ(E)};if(z.version="2.3.3",z.removed=[],!Z||!Z.document||Z.document.nodeType!==9)return z.isSupported=!1,z;var{document:X,document:K,DocumentFragment:J,HTMLTemplateElement:Q,Node:Y,Element:G,NodeFilter:U,NamedNodeMap:q}=Z,A=q===void 0?Z.NamedNodeMap||Z.MozNamedAttrMap:q,V=Z.Text,W=Z.Comment,j=Z.DOMParser,H=Z.trustedTypes,R=G.prototype,F=wZ(R,"cloneNode"),B=wZ(R,"nextSibling"),O=wZ(R,"childNodes"),M=wZ(R,"parentNode");if(typeof Q==="function"){var I=K.createElement("template");if(I.content&&I.content.ownerDocument)K=I.content.ownerDocument}var D=D80(H,X),b=D&&n3?D.createHTML(""):"",x=K,u=x.implementation,T=x.createNodeIterator,c=x.createDocumentFragment,r=x.getElementsByTagName,g0=X.importNode,d3={};try{d3=W8(K).documentMode?K.documentMode:{}}catch(g){}var e0={};z.isSupported=typeof M==="function"&&u&&typeof u.createHTMLDocument!=="undefined"&&d3!==9;var M1=F80,L1=B80,EY=E80,PY=P80,OY=M80,V7=L80,I1=O80,B0=null,W7=f({},[].concat(Y5(YK),Y5(o9),Y5(t9),Y5(e9),Y5(GK))),E0=null,H7=f({},[].concat(Y5(UK),Y5(Z4),Y5(qK),Y5(uZ))),D1=null,C1=null,j7=!0,S1=!0,R7=!1,M8=!1,L8=!1,b1=!1,k1=!1,I8=!1,s3=!1,F7=!0,n3=!1,B7=!0,N1=!0,V3=!1,D8={},C8=null,E7=f({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),P7=null,O7=f({},["audio","video","img","source","image","track"]),T1=null,M7=f({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),y1="http://www.w3.org/1998/Math/MathML",x1="http://www.w3.org/2000/svg",T5="http://www.w3.org/1999/xhtml",a3=T5,g1=!1,S8=void 0,MY=["application/xhtml+xml","text/html"],LY="text/html",b8=void 0,k8=null,IY=K.createElement("form"),w1=function g(E){if(k8&&k8===E)return;if(!E||(typeof E==="undefined"?"undefined":_3(E))!=="object")E={};if(E=W8(E),B0="ALLOWED_TAGS"in E?f({},E.ALLOWED_TAGS):W7,E0="ALLOWED_ATTR"in E?f({},E.ALLOWED_ATTR):H7,T1="ADD_URI_SAFE_ATTR"in E?f(W8(M7),E.ADD_URI_SAFE_ATTR):M7,P7="ADD_DATA_URI_TAGS"in E?f(W8(O7),E.ADD_DATA_URI_TAGS):O7,C8="FORBID_CONTENTS"in E?f({},E.FORBID_CONTENTS):E7,D1="FORBID_TAGS"in E?f({},E.FORBID_TAGS):{},C1="FORBID_ATTR"in E?f({},E.FORBID_ATTR):{},D8="USE_PROFILES"in E?E.USE_PROFILES:!1,j7=E.ALLOW_ARIA_ATTR!==!1,S1=E.ALLOW_DATA_ATTR!==!1,R7=E.ALLOW_UNKNOWN_PROTOCOLS||!1,M8=E.SAFE_FOR_TEMPLATES||!1,L8=E.WHOLE_DOCUMENT||!1,I8=E.RETURN_DOM||!1,s3=E.RETURN_DOM_FRAGMENT||!1,F7=E.RETURN_DOM_IMPORT!==!1,n3=E.RETURN_TRUSTED_TYPE||!1,k1=E.FORCE_BODY||!1,B7=E.SANITIZE_DOM!==!1,N1=E.KEEP_CONTENT!==!1,V3=E.IN_PLACE||!1,I1=E.ALLOWED_URI_REGEXP||I1,a3=E.NAMESPACE||T5,S8=MY.indexOf(E.PARSER_MEDIA_TYPE)===-1?S8=LY:S8=E.PARSER_MEDIA_TYPE,b8=S8==="application/xhtml+xml"?function(C){return C}:hZ,M8)S1=!1;if(s3)I8=!0;if(D8){if(B0=f({},[].concat(Y5(GK))),E0=[],D8.html===!0)f(B0,YK),f(E0,UK);if(D8.svg===!0)f(B0,o9),f(E0,Z4),f(E0,uZ);if(D8.svgFilters===!0)f(B0,t9),f(E0,Z4),f(E0,uZ);if(D8.mathMl===!0)f(B0,e9),f(E0,qK),f(E0,uZ)}if(E.ADD_TAGS){if(B0===W7)B0=W8(B0);f(B0,E.ADD_TAGS)}if(E.ADD_ATTR){if(E0===H7)E0=W8(E0);f(E0,E.ADD_ATTR)}if(E.ADD_URI_SAFE_ATTR)f(T1,E.ADD_URI_SAFE_ATTR);if(E.FORBID_CONTENTS){if(C8===E7)C8=W8(C8);f(C8,E.FORBID_CONTENTS)}if(N1)B0["#text"]=!0;if(L8)f(B0,["html","head","body"]);if(B0.table)f(B0,["tbody"]),delete D1.tbody;if(x0)x0(E);k8=E},L7=f({},["mi","mo","mn","ms","mtext"]),I7=f({},["foreignobject","desc","title","annotation-xml"]),r3=f({},o9);f(r3,t9),f(r3,j80);var u1=f({},e9);f(u1,R80);var DY=function g(E){var C=M(E);if(!C||!C.tagName)C={namespaceURI:T5,tagName:"template"};var y=hZ(E.tagName),i=hZ(C.tagName);if(E.namespaceURI===x1){if(C.namespaceURI===T5)return y==="svg";if(C.namespaceURI===y1)return y==="svg"&&(i==="annotation-xml"||L7[i]);return Boolean(r3[y])}if(E.namespaceURI===y1){if(C.namespaceURI===T5)return y==="math";if(C.namespaceURI===x1)return y==="math"&&I7[i];return Boolean(u1[y])}if(E.namespaceURI===T5){if(C.namespaceURI===x1&&!I7[i])return!1;if(C.namespaceURI===y1&&!L7[i])return!1;var P0=f({},["title","style","font","a","script"]);return!u1[y]&&(P0[y]||!r3[y])}return!1},W5=function g(E){w3(z.removed,{element:E});try{E.parentNode.removeChild(E)}catch(C){try{E.outerHTML=b}catch(y){E.remove()}}},D7=function g(E,C){try{w3(z.removed,{attribute:C.getAttributeNode(E),from:C})}catch(y){w3(z.removed,{attribute:null,from:C})}if(C.removeAttribute(E),E==="is"&&!E0[E])if(I8||s3)try{W5(C)}catch(y){}else try{C.setAttribute(E,"")}catch(y){}},C7=function g(E){var C=void 0,y=void 0;if(k1)E="<remove></remove>"+E;else{var i=JK(E,/^[\r\n\t ]+/);y=i&&i[0]}if(S8==="application/xhtml+xml")E='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+E+"</body></html>";var P0=D?D.createHTML(E):E;if(a3===T5)try{C=new j().parseFromString(P0,S8)}catch(M0){}if(!C||!C.documentElement){C=u.createDocument(a3,"template",null);try{C.documentElement.innerHTML=g1?"":P0}catch(M0){}}var O0=C.body||C.documentElement;if(E&&y)O0.insertBefore(K.createTextNode(y),O0.childNodes[0]||null);if(a3===T5)return r.call(C,L8?"html":"body")[0];return L8?C.documentElement:O0},S7=function g(E){return T.call(E.ownerDocument||E,E,U.SHOW_ELEMENT|U.SHOW_COMMENT|U.SHOW_TEXT,null,!1)},CY=function g(E){if(E instanceof V||E instanceof W)return!1;if(typeof E.nodeName!=="string"||typeof E.textContent!=="string"||typeof E.removeChild!=="function"||!(E.attributes instanceof A)||typeof E.removeAttribute!=="function"||typeof E.setAttribute!=="function"||typeof E.namespaceURI!=="string"||typeof E.insertBefore!=="function")return!0;return!1},W3=function g(E){return(typeof Y==="undefined"?"undefined":_3(Y))==="object"?E instanceof Y:E&&(typeof E==="undefined"?"undefined":_3(E))==="object"&&typeof E.nodeType==="number"&&typeof E.nodeName==="string"},H5=function g(E,C,y){if(!e0[E])return;A80(e0[E],function(i){i.call(z,C,y,k8)})},b7=function g(E){var C=void 0;if(H5("beforeSanitizeElements",E,null),CY(E))return W5(E),!0;if(JK(E.nodeName,/[\u0080-\uFFFF]/))return W5(E),!0;var y=b8(E.nodeName);if(H5("uponSanitizeElement",E,{tagName:y,allowedTags:B0}),!W3(E.firstElementChild)&&(!W3(E.content)||!W3(E.content.firstElementChild))&&L5(/<[/\w]/g,E.innerHTML)&&L5(/<[/\w]/g,E.textContent))return W5(E),!0;if(y==="select"&&L5(/<template/i,E.innerHTML))return W5(E),!0;if(!B0[y]||D1[y]){if(N1&&!C8[y]){var i=M(E)||E.parentNode,P0=O(E)||E.childNodes;if(P0&&i){var O0=P0.length;for(var M0=O0-1;M0>=0;--M0)i.insertBefore(F(P0[M0],!0),B(E))}}return W5(E),!0}if(E instanceof G&&!DY(E))return W5(E),!0;if((y==="noscript"||y==="noembed")&&L5(/<\/no(script|embed)/i,E.innerHTML))return W5(E),!0;if(M8&&E.nodeType===3){if(C=E.textContent,C=d5(C,M1," "),C=d5(C,L1," "),E.textContent!==C)w3(z.removed,{element:E.cloneNode()}),E.textContent=C}return H5("afterSanitizeElements",E,null),!1},k7=function g(E,C,y){if(B7&&(C==="id"||C==="name")&&((y in K)||(y in IY)))return!1;if(S1&&!C1[C]&&L5(EY,C));else if(j7&&L5(PY,C));else if(!E0[C]||C1[C])return!1;else if(T1[C]);else if(L5(I1,d5(y,V7,"")));else if((C==="src"||C==="xlink:href"||C==="href")&&E!=="script"&&V80(y,"data:")===0&&P7[E]);else if(R7&&!L5(OY,d5(y,V7,"")));else if(!y);else return!1;return!0},N7=function g(E){var C=void 0,y=void 0,i=void 0,P0=void 0;H5("beforeSanitizeAttributes",E,null);var O0=E.attributes;if(!O0)return;var M0={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:E0};P0=O0.length;while(P0--){C=O0[P0];var j5=C,H3=j5.name,T7=j5.namespaceURI;if(y=W80(C.value),i=b8(H3),M0.attrName=i,M0.attrValue=y,M0.keepAttr=!0,M0.forceKeepAttr=void 0,H5("uponSanitizeAttribute",E,M0),y=M0.attrValue,M0.forceKeepAttr)continue;if(D7(H3,E),!M0.keepAttr)continue;if(L5(/\/>/i,y)){D7(H3,E);continue}if(M8)y=d5(y,M1," "),y=d5(y,L1," ");var bY=b8(E.nodeName);if(!k7(bY,i,y))continue;try{if(T7)E.setAttributeNS(T7,H3,y);else E.setAttribute(H3,y);KK(z.removed)}catch(z40){}}H5("afterSanitizeAttributes",E,null)},SY=function g(E){var C=void 0,y=S7(E);H5("beforeSanitizeShadowDOM",E,null);while(C=y.nextNode()){if(H5("uponSanitizeShadowNode",C,null),b7(C))continue;if(C.content instanceof J)g(C.content);N7(C)}H5("afterSanitizeShadowDOM",E,null)};return z.sanitize=function(g,E){var C=void 0,y=void 0,i=void 0,P0=void 0,O0=void 0;if(g1=!g,g1)g="<!-->";if(typeof g!=="string"&&!W3(g)){if(typeof g.toString!=="function")throw QK("toString is not a function");else if(g=g.toString(),typeof g!=="string")throw QK("dirty is not a string, aborting")}if(!z.isSupported){if(_3(Z.toStaticHTML)==="object"||typeof Z.toStaticHTML==="function"){if(typeof g==="string")return Z.toStaticHTML(g);if(W3(g))return Z.toStaticHTML(g.outerHTML)}return g}if(!b1)w1(E);if(z.removed=[],typeof g==="string")V3=!1;if(V3);else if(g instanceof Y)if(C=C7("<!---->"),y=C.ownerDocument.importNode(g,!0),y.nodeType===1&&y.nodeName==="BODY")C=y;else if(y.nodeName==="HTML")C=y;else C.appendChild(y);else{if(!I8&&!M8&&!L8&&g.indexOf("<")===-1)return D&&n3?D.createHTML(g):g;if(C=C7(g),!C)return I8?null:b}if(C&&k1)W5(C.firstChild);var M0=S7(V3?g:C);while(i=M0.nextNode()){if(i.nodeType===3&&i===P0)continue;if(b7(i))continue;if(i.content instanceof J)SY(i.content);N7(i),P0=i}if(P0=null,V3)return g;if(I8){if(s3){O0=c.call(C.ownerDocument);while(C.firstChild)O0.appendChild(C.firstChild)}else O0=C;if(F7)O0=g0.call(X,O0,!0);return O0}var j5=L8?C.outerHTML:C.innerHTML;if(M8)j5=d5(j5,M1," "),j5=d5(j5,L1," ");return D&&n3?D.createHTML(j5):j5},z.setConfig=function(g){w1(g),b1=!0},z.clearConfig=function(){k8=null,b1=!1},z.isValidAttribute=function(g,E,C){if(!k8)w1({});var y=b8(g),i=b8(E);return k7(y,i,C)},z.addHook=function(g,E){if(typeof E!=="function")return;e0[g]=e0[g]||[],w3(e0[g],E)},z.removeHook=function(g){if(e0[g])KK(e0[g])},z.removeHooks=function(g){if(e0[g])e0[g]=[]},z.removeAllHooks=function(){e0={}},z}var C80=yQ(),S80=["iframe","embed"],xQ=[];function gQ(Z){if(F0(S80,Z))xQ.push(Z.toLowerCase())}function O8(Z,z){return C80.sanitize(Z,P({ADD_TAGS:xQ,ADD_ATTR:["rel","target","hreflang","type"],FORBID_TAGS:["input","script","textarea","form","button","select","meta","style","link","title","object","base"]},z))}function wQ(Z,z){return Z.literal.replace(new RegExp("(<\\s*"+z+"[^>]*>)|(</"+z+"\\s*[>])","ig"),"").trim()}function C4(Z){Z=Z.match(K3)[0];var z=Z.match(new RegExp(NJ,"g"));return z?z.reduce(function(X,K){var J=K.trim().split("="),Q=J[0],Y=J.slice(1);if(Y.length)X[Q]=Y.join("=").replace(/'|"/g,"").trim();return X},{}):{}}function S4(Z){return V5(Z.attributes).reduce(function(z,X){return z[X.nodeName]=X.nodeValue,z},{})}function AK(Z,z,X,K){var J=K.getToDOMNode(z)(Z),Q=X(J.outerHTML),Y=document.createElement("div");Y.innerHTML=Q,J=Y.firstChild;var G=S4(J);return{dom:J,htmlAttrs:G}}var b80={htmlBlock:function(Z,z,X){return{atom:!0,content:"block+",group:"block",attrs:{htmlAttrs:{default:{}},childrenHTML:{default:""},htmlBlock:{default:!0}},parseDOM:[{tag:Z,getAttrs:function(K){return{htmlAttrs:S4(K),childrenHTML:K.innerHTML}}}],toDOM:function(K){var J=AK(K,Z,z,X),Q=J.dom,Y=J.htmlAttrs;return Y.class=Y.class?Y.class+" html-block":"html-block",u0([Z,Y],V5(Q.childNodes))}}},htmlInline:function(Z,z,X){return{attrs:{htmlAttrs:{default:{}},htmlInline:{default:!0}},parseDOM:[{tag:Z,getAttrs:function(K){return{htmlAttrs:S4(K)}}}],toDOM:function(K){var J=AK(K,Z,z,X).htmlAttrs;return[Z,J,0]}}}};function k80(Z,z,X){var K={nodes:{},marks:{}};return["htmlBlock","htmlInline"].forEach(function(J){if(Z[J])Object.keys(Z[J]).forEach(function(Q){var Y=J==="htmlBlock"?"nodes":"marks";gQ(Q),K[Y][Q]=b80[J](Q,z,X)})}),K}var N80=/^\s*<\s*\//,T80={paragraph:function(Z,z){var{entering:X,origin:K,options:J}=z;if(J.nodeId)return{type:X?"openTag":"closeTag",outerNewLine:!0,tagName:"p"};return K()},softbreak:function(Z){var z=Z.prev&&Z.prev.type==="htmlInline",X=z&&/<br ?\/?>/.test(Z.prev.literal),K=X?`
`:`<br>
`;return{type:"html",content:K}},item:function(Z,z){var X=z.entering;if(X){var K={},J=[];if(Z.listData.task){if(K["data-task"]="",J.push("task-list-item"),Z.listData.checked)J.push("checked"),K["data-task-checked"]=""}return{type:"openTag",tagName:"li",classNames:J,attributes:K,outerNewLine:!0}}return{type:"closeTag",tagName:"li",outerNewLine:!0}},code:function(Z){var z={"data-backticks":String(Z.tickCount)};return[{type:"openTag",tagName:"code",attributes:z},{type:"text",content:Z.literal},{type:"closeTag",tagName:"code"}]},codeBlock:function(Z){var z=Z,X=z.fenceLength,K=z.info,J=K?K.split(/\s+/):[],Q=[],Y={};if(X>3)Y["data-backticks"]=X;if(J.length>0&&J[0].length>0){var G=J[0];Q.push("lang-"+G),Y["data-language"]=G}return[{type:"openTag",tagName:"pre",classNames:Q},{type:"openTag",tagName:"code",attributes:Y},{type:"text",content:Z.literal},{type:"closeTag",tagName:"code"},{type:"closeTag",tagName:"pre"}]},customInline:function(Z,z){var{origin:X,entering:K,skipChildren:J}=z,Q=Z.info;if(Q.indexOf("widget")!==-1&&K){J();var Y=CJ(Z),G=DJ(Q,Y).outerHTML;return[{type:"openTag",tagName:"span",classNames:["tui-widget"]},{type:"html",content:G},{type:"closeTag",tagName:"span"}]}return X()}};function Q7(Z,z){var X=P({},T80);if(Z)X.link=function(K,J){var{entering:Q,origin:Y}=J,G=Y();if(Q)G.attributes=P(P({},G.attributes),Z);return G};if(z)Object.keys(z).forEach(function(K){var J=X[K],Q=z[K];if(J&&c0(Q))X[K]=function(Y,G){var U=P({},G);return U.origin=function(){return J(Y,G)},Q(Y,U)};else if(F0(["htmlBlock","htmlInline"],K)&&!c0(Q))X[K]=function(Y,G){var U=Y.literal.match(K3);if(U){var q=U[0],A=U[1],V=U[3],W=(A||V).toLowerCase(),j=Q[W],H=wQ(Y,W);if(j){var R=P({},Y);return R.attrs=C4(q),R.childrenHTML=H,R.type=W,G.entering=!N80.test(Y.literal),j(R,G)}}return G.origin()};else X[K]=Q});return X}var y80=["list","item","blockQuote"],x80=["UL","OL","BLOCKQUOTE"];function g80(Z,z){var X,K=Z.child(z);return!K.childCount||K.childCount===1&&!((X=K.firstChild.text)===null||X===void 0?void 0:X.trim())}function VK(Z,z,X){var K=p3(z)-1,J=q1(z)-1,Q=X[K].getBoundingClientRect(),Y=X[J].offsetTop-X[K].offsetTop+X[J].clientHeight;return{height:Y<=0?X[K].clientHeight:Y+w80(Z,X,Math.min(J+1,Z.childCount-1)),rect:Q}}function w80(Z,z,X){var K=Z.childCount-1,J=0;while(X<=K&&g80(Z,X))J+=z[X].clientHeight,X+=1;return J}function u80(Z,z){while(!Z.getAttribute("data-nodeid")&&Z.parentElement!==z)Z=Z.parentElement;return Z}function K1(Z,z){var X=0;while(Z&&Z!==z){if(!F0(x80,Z.tagName))X+=Z.offsetTop;if(Z.offsetParent===z.offsetParent)break;Z=Z.parentElement}return X}function v80(Z,z){var X=z,K=null;while(X){var J=X.firstElementChild;if(!J)break;var Q=uQ(J,Z,K1(X,z));K=X,X=Q}var Y=X||K;return Y===z?null:Y}function uQ(Z,z,X){if(Z&&z>X+Z.offsetTop)return uQ(Z.nextElementSibling,z,X)||Z;return null}function $80(Z,z,X,K){var J=Math.min((Z-z)/X,1);return J*K}function z4(Z,z){var X=Z.querySelector('[data-nodeid="'+z.id+'"]');while(!X||I2(z))z=z.parent,X=Z.querySelector('[data-nodeid="'+z.id+'"]');return f80({mdNode:z,el:X})}function f80(Z){var{mdNode:z,el:X}=Z;while((F0(y80,z.type)||z.type==="table")&&z.firstChild)z=z.firstChild,X=X.firstElementChild;return{mdNode:z,el:X}}var a0={};function h80(Z,z){a0[Z]=a0[Z]||{},a0[Z].height=z}function _80(Z,z){a0[Z]=a0[Z]||{},a0[Z].offsetTop=z}function m80(Z){return a0[Z]&&a0[Z].height}function l80(Z){return a0[Z]&&a0[Z].offsetTop}function b4(Z){if(Z)delete a0[Number(Z.getAttribute("data-nodeid"))],V5(Z.children).forEach(function(z){b4(z)})}function c80(Z,z,X){var K=m80(X),J=l80(X),Q=K||Z.clientHeight,Y=J||K1(Z,z)||Z.offsetTop;if(!K)h80(X,Q);if(!J)_80(X,Y);return{nodeHeight:Q,offsetTop:Y}}var X4=N("md-preview-highlight");function p80(Z,z){var X=Z.firstChild;while(X&&X.next){if(A1(X.next)>z+1)break;X=X.next}return X}var vQ=function(){function Z(z,X){var K=document.createElement("div");this.el=K,this.eventEmitter=z,this.isViewer=!!X.isViewer,this.el.className=N("md-preview");var{linkAttributes:J,customHTMLRenderer:Q,sanitizer:Y,highlight:G}=X,U=G===void 0?!1:G;if(this.renderer=new J7({gfm:!0,nodeId:!0,convertors:Q7(J,Q)}),this.cursorNodeId=null,this.sanitizer=Y,this.initEvent(U),this.initContentSection(),this.isViewer)this.previewContent.style.overflowWrap="break-word"}return Z.prototype.initContentSection=function(){if(this.previewContent=wJ('<div class="'+N("contents")+'"></div>'),!this.isViewer)this.el.appendChild(this.previewContent)},Z.prototype.toggleActive=function(z){p4(this.el,"active",z)},Z.prototype.initEvent=function(z){var X=this;if(this.eventEmitter.listen("updatePreview",this.update.bind(this)),this.isViewer)return;if(z)this.eventEmitter.listen("changeToolbarState",function(K){var{mdNode:J,cursorPos:Q}=K;X.updateCursorNode(J,Q)}),this.eventEmitter.listen("blur",function(){X.removeHighlight()});oJ(this.el,"scroll",function(K){X.eventEmitter.emit("scroll","preview",v80(K.target.scrollTop,X.previewContent))}),this.eventEmitter.listen("changePreviewTabPreview",function(){return X.toggleActive(!0)}),this.eventEmitter.listen("changePreviewTabWrite",function(){return X.toggleActive(!1)})},Z.prototype.removeHighlight=function(){if(this.cursorNodeId){var z=this.getElementByNodeId(this.cursorNodeId);if(z)n0(z,X4)}},Z.prototype.updateCursorNode=function(z,X){if(z){if(z=X3(z,function(Y){return!S2(Y)}),z.type==="tableRow")z=p80(z,X[1]);else if(z.type==="tableBody")z=null}var K=z?z.id:null;if(this.cursorNodeId===K)return;var J=this.getElementByNodeId(this.cursorNodeId),Q=this.getElementByNodeId(K);if(J)n0(J,X4);if(Q)U5(Q,X4);this.cursorNodeId=K},Z.prototype.getElementByNodeId=function(z){return z?this.previewContent.querySelector('[data-nodeid="'+z+'"]'):null},Z.prototype.update=function(z){var X=this;z.forEach(function(K){return X.replaceRangeNodes(K)}),this.eventEmitter.emit("afterPreviewRender",this)},Z.prototype.replaceRangeNodes=function(z){var X=this,K=z.nodes,J=z.removedNodeRange,Q=this.previewContent,Y=this.eventEmitter.emitReduce("beforePreviewRender",this.sanitizer(K.map(function(H){return X.renderer.render(H)}).join("")));if(!J)Q.insertAdjacentHTML("afterbegin",Y);else{var G=J.id,U=G[0],q=G[1],A=this.getElementByNodeId(U),V=this.getElementByNodeId(q);if(A){A.insertAdjacentHTML("beforebegin",Y);var W=A;while(W&&W!==V){var j=W.nextElementSibling;B8(W),b4(W),W=j}if(W===null||W===void 0?void 0:W.parentNode)B8(W),b4(W)}}},Z.prototype.getRenderer=function(){return this.renderer},Z.prototype.destroy=function(){rJ(this.el,"scroll"),this.el=null},Z.prototype.getElement=function(){return this.el},Z.prototype.getHTML=function(){return s4(this.previewContent.innerHTML)},Z.prototype.setHTML=function(z){this.previewContent.innerHTML=z},Z.prototype.setHeight=function(z){A5(this.el,{height:z+"px"})},Z.prototype.setMinHeight=function(z){A5(this.el,{minHeight:z+"px"})},Z}();function D5(Z,z){var X=Z.depth;while(X){var K=Z.node(X);if(z(K,X))return{node:K,depth:X,offset:X>0?Z.before(X):0};X-=1}return null}function G3(Z){return!!D5(Z,function(z){var X=z.type;return X.name==="listItem"||X.name==="bulletList"||X.name==="orderedList"})}function J1(Z){return!!D5(Z,function(z){var X=z.type;return X.name==="tableHeadCell"||X.name==="tableBodyCell"})}function U3(Z){return D5(Z,function(z){var X=z.type;return X.name==="listItem"})}function P1(Z){return{tag:Z,getAttrs:function(z){var X=z.getAttribute("data-raw-html");return P({},X&&{rawHTML:X})}}}function $Q(Z){return Object.keys(Z).reduce(function(z,X){if(X!=="rawHTML"&&Z[X])X=X==="className"?"class":X,z[X]=Z[X];return z},{})}function fQ(Z){return{tag:Z,getAttrs:function(z){return["rawHTML","colspan","rowspan","extended"].reduce(function(X,K){var J=K==="rawHTML"?"data-raw-html":K,Q=z.getAttribute(J);if(Q)X[K]=F0(["rawHTML","extended"],K)?Q:Number(Q);return X},{})}}}function q0(){return{htmlAttrs:{default:null},classNames:{default:null}}}function z0(Z){var{htmlAttrs:z,classNames:X}=Z;return P(P({},z),{class:X?X.join(" "):null})}function i80(Z,z){var{parent:X,startIndex:K,endIndex:J}=Z,Q=X.contentMatchAt(K).findWrapping(z);if(Q){var Y=Q.length?Q[0]:z;return X.canReplaceWith(K,J,Y)?Q:null}return null}function d80(Z,z){var{parent:X,startIndex:K,endIndex:J}=Z,Q=X.child(K),Y=z.contentMatch.findWrapping(Q.type);if(Y){var G=Y.length?Y[Y.length-1]:z,U=G.contentMatch;for(var q=K;U&&q<J;q+=1)U=U.matchType(X.child(q).type);if(U&&U.validEnd)return Y}return null}function s80(Z,z,X,K){var J=i80(Z,X),Q=d80(z,X);if(J&&Q){var Y=J.map(function(U){return{type:U}}),G=Q.map(function(U){return{type:U,attrs:K}});return Y.concat({type:X}).concat(G)}return null}function n80(Z,z,X,K,J){var{start:Q,end:Y,startIndex:G,endIndex:U,parent:q}=z,A=L.empty;for(var V=X.length-1;V>=0;V-=1)A=L.from(X[V].type.create(X[V].attrs,A));Z.step(new t(Q-(K?2:0),Y,Q,Y,new S(A,0,0),X.length,!0));var W=0;for(var V=0;V<X.length;V+=1)if(X[V].type===J){W=V+1;break}var j=X.length-W,H=Q+X.length-(K?2:0);for(var V=G,R=U;V<R;V+=1){var F=V===G;if(!F&&w5(Z.doc,H,j))Z.split(H,j),H+=j*2;H+=q.child(V).nodeSize}return Z}function hQ(Z,z,X,K){var{$from:J,$to:Q,depth:Y}=z,G=z,U=!1;if(Y>=2&&J.node(Y-1).type.compatibleContent(X)&&z.startIndex===0&&J.index(Y-1)){var q=Z.doc.resolve(z.start-2);if(G=new T8(q,q,Y),z.endIndex<z.parent.childCount)z=new T8(J,Z.doc.resolve(Q.end(Y)),Y);U=!0}var A=s80(G,z,X,K);if(A)return n80(Z,z,A,U,X);return Z}function _Q(Z,z){var X=Z.resolve(z);while(X.node().type.name!=="paragraph")z-=2,X=Z.resolve(z);return U3(X)}function a80(Z,z){var{$from:X,$to:K}=z,J=U3(X),Q=U3(K);if(J&&Q)while(Q){var{offset:Y,node:G}=Q,U={task:!G.attrs.task,checked:!1};if(Z.setNodeMarkup(Y,null,U),Y===J.offset)break;Q=_Q(Z.doc,Y)}return Z}function r80(Z,z,X){var{$from:K,$to:J}=z,Q=U3(K),Y=U3(J);if(Q&&Y)while(Y){var{offset:G,node:U,depth:q}=Y;if(U.attrs.task)Z.setNodeMarkup(G,null,{task:!1,checked:!1});var A=Z.doc.resolve(G);if(A.parent.type!==X){var V=A.before(q-1);Z.setNodeMarkup(V,X)}if(G===Q.offset)break;Y=_Q(Z.doc,G)}return Z}function mQ(Z){return function(z,X){var{selection:K,tr:J}=z,Q=K.$from,Y=K.$to,G=Q.blockRange(Y);if(G){var U=G3(Q)?r80(J,G,Z):hQ(J,G,Z);return X(U),!0}return!1}}function o80(){return function(Z,z){var{selection:X,tr:K,schema:J}=Z,Q=X.$from,Y=X.$to,G=Q.blockRange(Y);if(G){var U=G3(Q)?a80(K,G):hQ(K,G,J.nodes.bulletList,{task:!0});return z(U),!0}return!1}}function t80(Z){return function(z,X){var{tr:K,selection:J}=z,Q=J.$from,Y=J.$to,G=Q.blockRange(Y,function(R){var{childCount:F,firstChild:B}=R;return!!F&&B.type===Z});if(G&&G.startIndex>0){var U=G.parent,q=U.child(G.startIndex-1);if(q.type!==Z)return!1;var A=q.lastChild&&q.lastChild.type===U.type,V=A?L.from(Z.create()):null,W=new S(L.from(Z.create(null,L.from(U.type.create(null,V)))),A?3:1,0),j=G.start,H=G.end;return K.step(new t(j-(A?3:1),H,j,H,W,1,!0)),X(K),!0}return!1}}function e80(Z,z,X){var{$from:K,$to:J,end:Q,depth:Y,parent:G}=z,U=J.end(Y);if(Q<U)Z.step(new t(Q-1,U,Q,U,new S(L.from(X.create(null,G.copy())),1,0),1,!0)),z=new T8(Z.doc.resolve(K.pos),Z.doc.resolve(U),Y);return Z.lift(z,w8(z)),Z}function Z30(Z,z){var{parent:X,end:K}=z;for(var J=z.endIndex-1,Q=z.startIndex;J>Q;J-=1)K-=X.child(J).nodeSize,Z.delete(K-1,K+1);var Y=Z.doc.resolve(z.start),G=Y.nodeAfter,U=z.startIndex===0,q=z.endIndex===X.childCount,A=Y.node(-1),V=Y.index(-1),W=A.canReplace(V+(U?0:1),V+1,G===null||G===void 0?void 0:G.content.append(q?L.empty:L.from(X)));if(G&&W){var j=Y.pos,H=j+G.nodeSize;Z.step(new t(j-(U?1:0),H+(q?1:0),j+1,H-1,new S((U?L.empty:L.from(X.copy(L.empty))).append(q?L.empty:L.from(X.copy(L.empty))),U?0:1,q?0:1),U?0:1))}return Z}function z30(Z){return function(z,X){var{tr:K,selection:J}=z,Q=J.$from,Y=J.$to,G=Q.blockRange(Y,function(A){var{childCount:V,firstChild:W}=A;return!!V&&W.type===Z});if(G){var U=Q.node(G.depth-1).type===Z,q=U?e80(K,G,Z):Z30(K,G);return X(q),!0}return!1}}function X30(Z){return function(z,X){var{tr:K,selection:J}=z,Q=J.$from,Y=J.$to;if(Q.depth<2||!Q.sameParent(Y))return!1;var G=Q.node(-1);if(G.type!==Z)return!1;if(Q.parent.content.size===0&&Q.node(-1).childCount===Q.indexAfter(-1)){if(Q.depth===2||Q.node(-3).type!==Z||Q.index(-2)!==Q.node(-2).childCount-1)return!1;var U=Q.index(-1)>0,q=L.empty;for(var A=Q.depth-(U?1:2);A>=Q.depth-3;A-=1)q=L.from(Q.node(A).copy(q));return q=q.append(L.from(Z.createAndFill())),K.replace(U?Q.before():Q.before(-1),Q.after(-3),new S(q,U?3:2,2)),K.setSelection($.near(K.doc.resolve(Q.pos+(U?3:2)))),X(K),!0}var V=Y.pos===Q.end()?G.contentMatchAt(0).defaultType:null,W=V&&[null,{type:V}];if(K.delete(Q.pos,Y.pos),w5(K.doc,Q.pos,2,W))return K.split(Q.pos,2,W),X(K),!0;return!1}}function K30(){return function(){return function(Z,z){var{selection:X,schema:K}=Z,J=X.$from,Q=X.$to,Y=J.blockRange(Q);if(Y&&G3(J))return t80(K.nodes.listItem)(Z,z);return!1}}}function J30(){return function(){return function(Z,z){var{selection:X,schema:K}=Z,J=X.$from,Q=X.$to,Y=J.blockRange(Q);if(Y&&G3(J))return z30(K.nodes.listItem)(Z,z);return!1}}}function Y7(){return{indent:K30(),outdent:J30()}}var WK=new Map,H0=function(){function Z(z,X,K,J){this.table=z,this.tableRows=X,this.tableStartPos=K,this.rowInfo=J}return Z.create=function(z){var X=D5(z,function(H){var R=H.type;return R.name==="table"});if(X){var{node:K,depth:J,offset:Q}=X,Y=WK.get(K);if((Y===null||Y===void 0?void 0:Y.tableStartPos)===Q+1)return Y;var G=[],U=z.start(J),q=K.child(0),A=K.child(1),V=k4(q,U),W=k4(A,U+q.nodeSize);q.forEach(function(H){return G.push(H)}),A.forEach(function(H){return G.push(H)});var j=new Z(K,G,U,V.concat(W));return WK.set(K,j),j}return null},Object.defineProperty(Z.prototype,"totalRowCount",{get:function(){return this.rowInfo.length},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"totalColumnCount",{get:function(){return this.rowInfo[0].length},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"tableStartOffset",{get:function(){return this.tableStartPos},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"tableEndOffset",{get:function(){return this.tableStartPos+this.table.nodeSize-1},enumerable:!1,configurable:!0}),Z.prototype.getCellInfo=function(z,X){return this.rowInfo[z][X]},Z.prototype.posAt=function(z,X){for(var K=0,J=this.tableStartPos;;K+=1){var Q=J+this.tableRows[K].nodeSize;if(K===z){var Y=X;while(Y<this.totalColumnCount&&this.rowInfo[K][Y].offset<J)Y+=1;return Y===this.totalColumnCount?Q:this.rowInfo[K][Y].offset}J=Q}},Z.prototype.getNodeAndPos=function(z,X){var K=this.rowInfo[z][X];return{node:this.table.nodeAt(K.offset-this.tableStartOffset),pos:K.offset}},Z.prototype.extendedRowspan=function(z,X){return!1},Z.prototype.extendedColspan=function(z,X){return!1},Z.prototype.getRowspanCount=function(z,X){return 0},Z.prototype.getColspanCount=function(z,X){return 0},Z.prototype.decreaseColspanCount=function(z,X){return 0},Z.prototype.decreaseRowspanCount=function(z,X){return 0},Z.prototype.getColspanStartInfo=function(z,X){return null},Z.prototype.getRowspanStartInfo=function(z,X){return null},Z.prototype.getCellStartOffset=function(z,X){var K=this.rowInfo[z][X].offset;return this.extendedRowspan(z,X)?this.posAt(z,X):K},Z.prototype.getCellEndOffset=function(z,X){var K=this.rowInfo[z][X],J=K.offset,Q=K.nodeSize;return this.extendedRowspan(z,X)?this.posAt(z,X):J+Q},Z.prototype.getCellIndex=function(z){for(var X=0;X<this.totalRowCount;X+=1){var K=this.rowInfo[X];for(var J=0;J<this.totalColumnCount;J+=1)if(K[J].offset+1>z.pos)return[X,J]}return[0,0]},Z.prototype.getRectOffsets=function(z,X){var K,J,Q;if(X===void 0)X=z;if(z.pos>X.pos)K=[X,z],z=K[0],X=K[1];var Y=this.getCellIndex(z),G=Y[0],U=Y[1],q=this.getCellIndex(X),A=q[0],V=q[1];return J=HX(G,A),G=J[0],A=J[1],Q=HX(U,V),U=Q[0],V=Q[1],this.getSpannedOffsets({startRowIdx:G,startColIdx:U,endRowIdx:A,endColIdx:V})},Z.prototype.getSpannedOffsets=function(z){return z},Z}(),k4=function(Z,z){var X=[];return Z.forEach(function(K,J){var Q={rowspanMap:{},colspanMap:{},length:0};K.forEach(function(Y,G){var U=Y.nodeSize,q=0;while(Q[q])q+=1;Q[q]={offset:z+J+G+2,nodeSize:U},Q.length+=1}),X.push(Q)}),X};function Q30(Z,z){return _4(H0.prototype,Z),k4=z,H0}function Y30(Z,z,X){var{startRowIdx:K,startColIdx:J,endRowIdx:Q,endColIdx:Y}=X,G=[];for(var U=K;U<=Q;U+=1)for(var q=J;q<=Y;q+=1){var A=z.getCellInfo(U,q),V=A.offset,W=A.nodeSize;G.push(new z8(Z.resolve(V+1),Z.resolve(V+W-1)))}return G}function G30(Z,z){var X=[];if(Z.childCount)X.push(Z);if(z.childCount)X.push(z);return L.from(X)}var G7=function(Z){k(z,Z);function z(X,K){if(K===void 0)K=X;var J=this,Q=X.node(0),Y=H0.create(X),G=Y.getRectOffsets(X,K),U=Y30(Q,Y,G);return J=Z.call(this,U[0].$from,U[0].$to,U)||this,J.startCell=X,J.endCell=K,J.offsetMap=Y,J.isCellSelection=!0,J.visible=!1,J}return z.prototype.map=function(X,K){var J=this.startCell.pos,Q=this.endCell.pos,Y=X.resolve(K.map(J)),G=X.resolve(K.map(Q)),U=H0.create(Y);if(this.offsetMap.totalColumnCount>U.totalColumnCount||this.offsetMap.totalRowCount>U.totalRowCount){var q={tableBody:1,tableRow:2,tableCell:3,paragraph:4},A=q[G.parent.type.name],V=G.end(G.depth-A),W=Math.min(V-4,G.pos);return _.create(X,W)}return new z(Y,G)},z.prototype.eq=function(X){return X instanceof z&&X.startCell.pos===this.startCell.pos&&X.endCell.pos===this.endCell.pos},z.prototype.content=function(){var X=this.startCell.node(-2),K=this.startCell.start(-2),J=X.child(1).firstChild,Q=X.child(0).type.create(),Y=X.child(1).type.create(),G=H0.create(this.startCell),U=G.getRectOffsets(this.startCell,this.endCell),q=U.startRowIdx,A=U.startColIdx,V=U.endRowIdx,W=U.endColIdx,j=!1;for(var H=q;H<=V;H+=1){var R=[];for(var F=A;F<=W;F+=1){var B=G.getCellInfo(H,F).offset,O=X.nodeAt(B-K);if(O)if(j=O.type.name==="tableHeadCell",G.extendedRowspan(H,F)||G.extendedColspan(H,F))R.push(O.type.create({extended:!0}));else R.push(O.copy(O.content))}var M=J.copy(L.from(R)),I=j?Q:Y;I.content=I.content.append(L.from(M))}return new S(G30(Q,Y),1,1)},z.prototype.toJSON=function(){return JSON.stringify(this)},z}($);function U30(Z,z,X){var K=z.nodes,J=K.tableRow,Q=K.tableHeadCell,Y=K.paragraph,G=[];for(var U=0;U<Z;U+=1){var q=X&&X[U],A=Y.create(null,q?z.text(q):[]);G.push(Q.create(null,A))}return[J.create(null,G)]}function lQ(Z,z,X,K){var J=X.nodes,Q=J.tableRow,Y=J.tableBodyCell,G=J.paragraph,U=[];for(var q=0;q<Z;q+=1){var A=[];for(var V=0;V<z;V+=1){var W=K&&K[q*z+V],j=G.create(null,W?X.text(W):[]);A.push(Y.create(null,j))}U.push(Q.create(null,A))}return U}function _Z(Z,z,X,K){if(K===void 0)K=null;var J=X.nodes,Q=J.tableHeadCell,Y=J.tableBodyCell,G=J.paragraph,U=z===0?Q:Y,q=[];for(var A=0;A<Z;A+=1)q.push(U.create(K,G.create()));return q}function cQ(Z,z){while(Z&&Z!==z){if(Z.nodeName==="TD"||Z.nodeName==="TH")return Z;Z=Z.parentNode}return null}function pQ(Z){return D5(Z,function(z){var X=z.type;return X.name==="tableHeadCell"||X.name==="tableBodyCell"})}function G5(Z){if(Z instanceof _){var z=Z.$anchor,X=pQ(z);if(X){var K=z.node(0).resolve(z.before(X.depth));return{anchor:K,head:K}}}var J=Z,Q=J.startCell,Y=J.endCell;return{anchor:Q,head:Y}}function iQ(Z){var z;if(Z.size){var{content:X,openStart:K,openEnd:J}=Z;if(X.childCount!==1)return null;while(X.childCount===1&&(K>0&&J>0||((z=X.firstChild)===null||z===void 0?void 0:z.type.name)==="table"))K-=1,J-=1,X=X.firstChild.content;if(X.firstChild.type.name==="tableHead"||X.firstChild.type.name==="tableBody")return X}return null}function e8(Z){var{startRowIdx:z,startColIdx:X,endRowIdx:K,endColIdx:J}=Z,Q=K-z+1,Y=J-X+1;return{rowCount:Q,columnCount:Y}}function q30(Z,z){return P(P({},Z.attrs),z)}var s5=new v5("cellSelection"),A30=2,V30=function(){function Z(z){this.view=z,this.handlers={mousedown:this.handleMousedown.bind(this),mousemove:this.handleMousemove.bind(this),mouseup:this.handleMouseup.bind(this)},this.startCellPos=null,this.init()}return Z.prototype.init=function(){this.view.dom.addEventListener("mousedown",this.handlers.mousedown)},Z.prototype.handleMousedown=function(z){var X=cQ(z.target,this.view.dom);if(z.button===A30){z.preventDefault();return}if(X){var K=this.getCellPos(z);if(K)this.startCellPos=K;this.bindEvent()}},Z.prototype.handleMousemove=function(z){var X=s5.getState(this.view.state),K=this.getCellPos(z),J=this.startCellPos,Q;if(X)Q=this.view.state.doc.resolve(X);else if(J!==K)Q=J;if(Q&&J&&K)this.setCellSelection(J,K)},Z.prototype.handleMouseup=function(){if(this.startCellPos=null,this.unbindEvent(),s5.getState(this.view.state)!==null)this.view.dispatch(this.view.state.tr.setMeta(s5,-1))},Z.prototype.bindEvent=function(){var z=this.view.dom;z.addEventListener("mousemove",this.handlers.mousemove),z.addEventListener("mouseup",this.handlers.mouseup)},Z.prototype.unbindEvent=function(){var z=this.view.dom;z.removeEventListener("mousemove",this.handlers.mousemove),z.removeEventListener("mouseup",this.handlers.mouseup)},Z.prototype.getCellPos=function(z){var{clientX:X,clientY:K}=z,J=this.view.posAtCoords({left:X,top:K});if(J){var Q=this.view.state.doc,Y=Q.resolve(J.pos),G=pQ(Y);if(G){var U=Y.before(G.depth);return Q.resolve(U)}}return null},Z.prototype.setCellSelection=function(z,X){var K=this.view.state,J=K.selection,Q=K.tr,Y=s5.getState(this.view.state)===null,G=new G7(z,X);if(Y||!J.eq(G)){var U=Q.setSelection(G);if(Y)U.setMeta(s5,X.pos);this.view.dispatch(U)}},Z.prototype.destroy=function(){this.view.dom.removeEventListener("mousedown",this.handlers.mousedown)},Z}(),W30=N("cell-selected");function H30(Z){var{selection:z,doc:X}=Z;if(z instanceof G7){var K=[],J=z.ranges;return J.forEach(function(Q){var{$from:Y,$to:G}=Q;K.push(k0.node(Y.pos-1,G.pos+1,{class:W30}))}),o.create(X,K)}return null}function j30(){return new X0({key:s5,state:{init:function(){return null},apply:function(Z,z){var X=Z.getMeta(s5);if(X)return X===-1?null:X;if(pZ(z)||!Z.docChanged)return z;var K=Z.mapping.mapResult(z),J=K.deleted,Q=K.pos;return J?null:Q}},props:{decorations:H30,createSelectionBetween:function(Z){var z=Z.state;if(!pZ(s5.getState(z)))return z.selection;return null}},view:function(Z){return new V30(Z)}})}var dQ=function(){function Z(){this.keys=[],this.values=[]}return Z.prototype.getKeyIndex=function(z){return R8(z,this.keys)},Z.prototype.get=function(z){return this.values[this.getKeyIndex(z)]},Z.prototype.set=function(z,X){var K=this.getKeyIndex(z);if(K>-1)this.values[K]=X;else this.keys.push(z),this.values.push(X);return this},Z.prototype.has=function(z){return this.getKeyIndex(z)>-1},Z.prototype.delete=function(z){var X=this.getKeyIndex(z);if(X>-1)return this.keys.splice(X,1),this.values.splice(X,1),!0;return!1},Z.prototype.forEach=function(z,X){var K=this;if(X===void 0)X=this;this.values.forEach(function(J,Q){if(J&&K.keys[Q])z.call(X,J,K.keys[Q],K)})},Z.prototype.clear=function(){this.keys=[],this.values=[]},Z}(),K4="en-US",R30=function(){function Z(){this.code=K4,this.langs=new dQ}return Z.prototype.setCode=function(z){this.code=z||K4},Z.prototype.setLanguage=function(z,X){var K=this;z=[].concat(z),z.forEach(function(J){if(!K.langs.has(J))K.langs.set(J,X);else{var Q=K.langs.get(J);K.langs.set(J,w4(Q,X))}})},Z.prototype.get=function(z,X){if(!X)X=this.code;var K=this.langs.get(X);if(!K)K=this.langs.get(K4);var J=K[z];if(!J)throw new Error('There is no text key "'+z+'" in '+X);return J},Z}(),v=new R30,F30=[[{action:"Add row to up",command:"addRowToUp",disableInThead:!0,className:"add-row-up"},{action:"Add row to down",command:"addRowToDown",disableInThead:!0,className:"add-row-down"},{action:"Remove row",command:"removeRow",disableInThead:!0,className:"remove-row"}],[{action:"Add column to left",command:"addColumnToLeft",className:"add-column-left"},{action:"Add column to right",command:"addColumnToRight",className:"add-column-right"},{action:"Remove column",command:"removeColumn",className:"remove-column"}],[{action:"Align column to left",command:"alignColumn",payload:{align:"left"},className:"align-column-left"},{action:"Align column to center",command:"alignColumn",payload:{align:"center"},className:"align-column-center"},{action:"Align column to right",command:"alignColumn",payload:{align:"right"},className:"align-column-right"}],[{action:"Remove table",command:"removeTable",className:"remove-table"}]];function B30(Z,z){return F30.map(function(X){return X.map(function(K){var{action:J,command:Q,payload:Y,disableInThead:G,className:U}=K;return{label:v.get(J),onClick:function(){Z.emit("command",Q,Y)},disabled:z&&!!G,className:U}})}).concat()}function E30(Z){return new X0({props:{handleDOMEvents:{contextmenu:function(z,X){var K=cQ(X.target,z.dom);if(K){X.preventDefault();var J=X,Q=J.clientX,Y=J.clientY,G=z.dom.parentNode.getBoundingClientRect(),U=G.left,q=G.top,A=K.nodeName==="TH";return Z.emit("contextmenu",{pos:{left:Q-U+10+"px",top:Y-q+30+"px"},menuGroups:B30(Z,A),tableCell:K}),!0}return!1}}}})}function P30(){return new X0({props:{handleDOMEvents:{mousedown:function(Z,z){var X=z,K=X.clientX,J=X.clientY,Q=Z.posAtCoords({left:K,top:J});if(Q){var Y=Z.state,G=Y.doc,U=Y.tr,q=G.resolve(Q.pos),A=U3(q),V=z.target,W=getComputedStyle(V,":before"),j=z,H=j.offsetX,R=j.offsetY;if(!A||!c4(W,H,R))return!1;z.preventDefault();var F=q.before(A.depth),B=A.node.attrs;return U.setNodeMarkup(F,null,P(P({},B),{checked:!B.checked})),Z.dispatch(U),!0}return!1}}}})}var O30=["image","link","customBlock","frontMatter"],M30=["strong","strike","emph","code"],sQ=["bulletList","orderedList","taskList"];function L30(Z,z){var X=Z.type.name;if(X==="listItem")return Z.attrs.task?"taskList":z.type.name;if(X.indexOf("table")!==-1)return"table";return X}function I30(Z,z){z[Z]={active:!0},sQ.filter(function(X){return X!==Z}).forEach(function(X){if(z[X])delete z[X]})}function D30(Z,z,X,K){M30.forEach(function(J){var Q=X.marks[J],Y=Z.marksAcross(z)||[],G=!!Q.isInSet(Y);if(G)K[J]={active:!0}})}function C30(Z,z,X){var{$from:K,$to:J,from:Q,to:Y}=Z,G={indent:{active:!1,disabled:!0},outdent:{active:!1,disabled:!0}};return z.nodesBetween(Q,Y,function(U,q,A){var V=L30(U,A);if(F0(O30,V))return;if(F0(sQ,V))I30(V,G),G.indent.disabled=!1,G.outdent.disabled=!1;else if(V==="paragraph"||V==="text")D30(K,J,X,G);else G[V]={active:!0}}),G}function S30(Z){return new X0({view:function(){return{update:function(z){var X=z.state,K=X.selection,J=X.doc,Q=X.schema;Z.emit("changeToolbarState",{toolbarState:C30(K,J,Q)})}}}})}var b30=function(){function Z(z,X,K,J){var Q=this;this.openEditor=function(){if(Q.innerEditorView)throw new Error("The editor is already opened.");Q.dom.draggable=!1,Q.wrapper.style.display="none",Q.innerViewContainer.style.display="block",Q.innerEditorView=new y3(Q.innerViewContainer,{state:u5.create({doc:Q.node,plugins:[p8({"Mod-z":function(){return s8(Q.innerEditorView.state,Q.innerEditorView.dispatch)},"Shift-Mod-z":function(){return CZ(Q.innerEditorView.state,Q.innerEditorView.dispatch)},Tab:function(Y,G){return G(Y.tr.insertText("\t")),!0},Enter:N9,Escape:function(){return Q.cancelEditing(),!0},"Ctrl-Enter":function(){return Q.saveAndFinishEditing(),!0}}),$9()]}),dispatchTransaction:function(Y){return Q.dispatchInner(Y)},handleDOMEvents:{mousedown:function(){if(Q.editorView.hasFocus())Q.innerEditorView.focus();return!0},blur:function(){return Q.saveAndFinishEditing(),!0}}}),Q.innerEditorView.focus()},this.node=z,this.editorView=X,this.getPos=K,this.toDOMAdaptor=J,this.innerEditorView=null,this.canceled=!1,this.dom=document.createElement("div"),this.dom.className=N("custom-block"),this.wrapper=document.createElement("div"),this.wrapper.className=N("custom-block-view"),this.createInnerViewContainer(),this.renderCustomBlock(),this.dom.appendChild(this.innerViewContainer),this.dom.appendChild(this.wrapper)}return Z.prototype.renderToolArea=function(){var z=this,X=document.createElement("div"),K=document.createElement("span"),J=document.createElement("button");X.className="tool",K.textContent=this.node.attrs.info,K.className="info",J.type="button",J.addEventListener("click",function(){return z.openEditor()}),X.appendChild(K),X.appendChild(J),this.wrapper.appendChild(X)},Z.prototype.renderCustomBlock=function(){var z=this.toDOMAdaptor.getToDOMNode(this.node.attrs.info);if(z){var X=z(this.node);while(this.wrapper.hasChildNodes())this.wrapper.removeChild(this.wrapper.lastChild);if(X)this.wrapper.appendChild(X);this.renderToolArea()}},Z.prototype.createInnerViewContainer=function(){this.innerViewContainer=document.createElement("div"),this.innerViewContainer.className=N("custom-block-editor"),this.innerViewContainer.style.display="none"},Z.prototype.closeEditor=function(){if(this.innerEditorView)this.innerEditorView.destroy(),this.innerEditorView=null,this.innerViewContainer.style.display="none";this.wrapper.style.display="block"},Z.prototype.saveAndFinishEditing=function(){var z=this.editorView.state.selection.to,X=this.editorView.state;this.editorView.dispatch(X.tr.setSelection(n(X.tr,z))),this.editorView.focus(),this.renderCustomBlock(),this.closeEditor()},Z.prototype.cancelEditing=function(){var z=QX(this.innerEditorView.state);this.canceled=!0;while(z--)s8(this.innerEditorView.state,this.innerEditorView.dispatch),s8(this.editorView.state,this.editorView.dispatch);this.canceled=!1;var X=this.editorView.state.selection.to,K=this.editorView.state;this.editorView.dispatch(K.tr.setSelection(_.create(K.doc,X))),this.editorView.focus(),this.closeEditor()},Z.prototype.dispatchInner=function(z){var X=this.innerEditorView.state.applyTransaction(z),K=X.state,J=X.transactions;if(this.innerEditorView.updateState(K),!this.canceled&&c0(this.getPos)){var Q=this.editorView.state.tr,Y=b0.offset(this.getPos()+1);for(var G=0;G<J.length;G+=1){var U=J[G].steps;for(var q=0;q<U.length;q+=1)Q.step(U[q].map(Y))}if(Q.docChanged)this.editorView.dispatch(Q)}},Z.prototype.update=function(z){if(!z.sameMarkup(this.node))return!1;if(this.node=z,!this.innerEditorView)this.renderCustomBlock();return!0},Z.prototype.stopEvent=function(z){return!!this.innerEditorView&&!!z.target&&this.innerEditorView.dom.contains(z.target)},Z.prototype.ignoreMutation=function(){return!0},Z.prototype.destroy=function(){this.dom.removeEventListener("dblclick",this.openEditor),this.closeEditor()},Z}(),HK="image-link",k30=function(){function Z(z,X,K,J){var Q=this,Y;this.handleMousedown=function(G){G.preventDefault();var{target:U,offsetX:q,offsetY:A}=G;if(Q.imageLink&&c0(Q.getPos)&&bJ(U,HK)){var V=getComputedStyle(U,":before");if(G.stopPropagation(),c4(V,q,A)){var W=Q.view.state.tr,j=Q.getPos();W.setSelection(n(W,j,j+1)),Q.view.dispatch(W),Q.eventEmitter.emit("openPopup","link",Q.imageLink.attrs)}}},this.node=z,this.view=X,this.getPos=K,this.eventEmitter=J,this.imageLink=(Y=z.marks.filter(function(G){var U=G.type;return U.name==="link"})[0])!==null&&Y!==void 0?Y:null,this.dom=this.createElement(),this.bindEvent()}return Z.prototype.createElement=function(){var z=this.createImageElement(this.node);if(this.imageLink){var X=document.createElement("span");return X.className=HK,X.appendChild(z),X}return z},Z.prototype.createImageElement=function(z){var X=document.createElement("img"),K=z.attrs,J=K.imageUrl,Q=K.altText,Y=z0(z.attrs);if(X.src=J,Q)X.alt=Q;return d4(Y,X),X},Z.prototype.bindEvent=function(){if(this.imageLink)this.dom.addEventListener("mousedown",this.handleMousedown)},Z.prototype.stopEvent=function(){return!0},Z.prototype.destroy=function(){if(this.imageLink)this.dom.removeEventListener("mousedown",this.handleMousedown)},Z}(),N30="toastui-editor-ww-code-block",T30="toastui-editor-ww-code-block-language",y30=function(){function Z(z,X,K,J){var Q=this;this.contentDOM=null,this.input=null,this.timer=null,this.handleMousedown=function(Y){var G=Y.target,U=getComputedStyle(G,":after");if(U.backgroundImage!=="none"&&c0(Q.getPos)){var q=Q.view.coordsAtPos(Q.getPos()),A=q.top,V=q.right;Q.createLanguageEditor({top:A,right:V})}},this.handleKeydown=function(Y){if(Y.key==="Enter"&&Q.input)Y.preventDefault(),Q.changeLanguage()},this.node=z,this.view=X,this.getPos=K,this.eventEmitter=J,this.createElement(),this.bindDOMEvent(),this.bindEvent()}return Z.prototype.createElement=function(){var z=this.node.attrs.language,X=document.createElement("div");X.setAttribute("data-language",z||"text"),X.className=N30;var K=this.createCodeBlockElement(),J=K.firstChild;X.appendChild(K),this.dom=X,this.contentDOM=J},Z.prototype.createCodeBlockElement=function(){var z=document.createElement("pre"),X=document.createElement("code"),K=this.node.attrs.language,J=z0(this.node.attrs);if(K)X.setAttribute("data-language",K);return d4(J,z),z.appendChild(X),z},Z.prototype.createLanguageEditor=function(z){var X=this,K=z.top,J=z.right,Q=document.createElement("span");Q.className=T30;var Y=document.createElement("input");Y.type="text",Y.value=this.node.attrs.language,Q.appendChild(Y),this.view.dom.parentElement.appendChild(Q);var G=Q.clientWidth;A5(Q,{top:K+10+"px",left:J-G-10+"px",width:G+"px"}),this.input=Y,this.input.addEventListener("blur",function(){return X.changeLanguage()}),this.input.addEventListener("keydown",this.handleKeydown),this.clearTimer(),this.timer=setTimeout(function(){X.input.focus()})},Z.prototype.bindDOMEvent=function(){if(this.dom)this.dom.addEventListener("click",this.handleMousedown)},Z.prototype.bindEvent=function(){var z=this;this.eventEmitter.listen("scroll",function(){if(z.input)z.reset()})},Z.prototype.changeLanguage=function(){if(this.input&&c0(this.getPos)){var z=this.input.value;this.reset();var X=this.getPos(),K=this.view.state.tr;K.setNodeMarkup(X,null,{language:z}),this.view.dispatch(K)}},Z.prototype.reset=function(){var z;if((z=this.input)===null||z===void 0?void 0:z.parentElement){var X=this.input.parentElement;this.input=null,B8(X)}},Z.prototype.clearTimer=function(){if(this.timer)clearTimeout(this.timer),this.timer=null},Z.prototype.stopEvent=function(){return!0},Z.prototype.update=function(z){if(!z.sameMarkup(this.node))return!1;return this.node=z,!0},Z.prototype.destroy=function(){if(this.reset(),this.clearTimer(),this.dom)this.dom.removeEventListener("click",this.handleMousedown)},Z}(),x30=/MsoListParagraph/,nQ=/style=(.|\n)*mso-/,aQ=/mso-list:(.*)/,g30=/O:P/,w30=/^(n|u|l)/,u30="p.MsoListParagraph";function v30(Z){return nQ.test(Z)}function $30(Z){var z=[],X=document.createTreeWalker(Z,1,null,!1);while(X.nextNode()){var K=X.currentNode;if(W1(K)){var J=K,Q=J.outerHTML,Y=J.textContent,G=nQ.test(Q),U=aQ.test(Q);if(G&&!U&&Y)z.push([K,!0]);else if(g30.test(K.nodeName)||G&&!Y||U)z.push([K,!1])}}return z.forEach(function(q){var A=q[0],V=q[1];if(V)ZA(A);else B8(A)}),Z.innerHTML.trim()}function f30(Z,z){var X=Z.getAttribute("style");if(X){var K=X.match(aQ),J=K[1],Q=J.trim().split(" "),Y=Q[1],G=parseInt(Y.replace("level",""),10),U=w30.test(Z.textContent||"");return{id:z,level:G,prev:null,parent:null,children:[],unordered:U,contents:$30(Z)}}return null}function h30(Z,z){if(z.level<Z.level)z.children.push(Z),Z.parent=z;else{while(z){if(z.level===Z.level)break;z=z.parent}if(z){if(Z.prev=z,Z.parent=z.parent,Z.parent)Z.parent.children.push(Z)}}}function _30(Z){var z=[];return Z.forEach(function(X,K){var J=z[K-1],Q=f30(X,K);if(Q){if(J)h30(Q,J);z.push(Q)}}),z}function rQ(Z){var z=Z[0].unordered?"ul":"ol",X=document.createElement(z);return Z.forEach(function(K){var{children:J,contents:Q}=K,Y=document.createElement("li");if(Y.innerHTML=Q,X.appendChild(Y),J.length)X.appendChild(rQ(J))}),X}function m30(Z){var z=_30(Z),X=z.filter(function(K){var J=K.parent;return!J});return rQ(X)}function l30(Z){while(Z){if(W1(Z))break;Z=Z.nextSibling}return Z?!x30.test(Z.className):!0}function c30(Z){var z=document.createElement("div");z.innerHTML=Z;var X=[],K=o2(z,u30);K.forEach(function(Q){var Y=l30(Q.nextSibling);if(X.push(Q),Y){var G=m30(X),U=Q.nextSibling;if(U)e2(G,U);else t2(z,G);X=[]}B8(Q)});var J=K.length?"<p></p>":"";return""+J+z.innerHTML}var jK="<!--StartFragment-->",p30="<!--EndFragment-->";function i30(Z){var z=Z.indexOf(jK),X=Z.lastIndexOf(p30);if(z>-1&&X>-1)Z=Z.slice(z+jK.length,X);return Z.replace(/<br[^>]*>/g,xJ)}function d30(Z){if(/<\/td>((?!<\/tr>)[\s\S])*$/i.test(Z))Z="<tr>"+Z+"</tr>";if(/<\/tr>((?!<\/table>)[\s\S])*$/i.test(Z))Z="<table>"+Z+"</table>";return Z}function s30(Z){if(Z=i30(Z),Z=d30(Z),v30(Z))Z=c30(Z);return Z}function n30(Z){var z=Z.reduce(function(X,K){return X.childCount>K.childCount?X:K});return z.childCount}function oQ(Z,z,X){var K=[],J=Z.childCount;for(var Q=0;Q<J;Q+=1)if(!Z.child(Q).attrs.extended){var Y=Q<J?X.create(Z.child(Q).attrs,Z.child(Q).content):X.createAndFill();K.push(Y)}return K}function tQ(Z,z,X){var K=X.nodes,J=K.tableRow,Q=K.tableHeadCell,Y=oQ(Z,z,Q);return J.create(null,Y)}function eQ(Z,z,X){var K=X.nodes,J=K.tableRow,Q=K.tableBodyCell,Y=oQ(Z,z,Q);return J.create(null,Y)}function a30(Z,z){var X=z.nodes,K=X.tableRow,J=X.tableBodyCell,Q=[];for(var Y=0;Y<Z;Y+=1){var G=J.createAndFill();Q.push(G)}return K.create({dummyRowForPasting:!0},Q)}function ZY(Z){var z=[],X=[];if(Z.firstChild.type.name==="tableHead"){var K=Z.firstChild;K.forEach(function(Q){return z.push(Q)})}if(Z.lastChild.type.name==="tableBody"){var J=Z.lastChild;J.forEach(function(Q){return X.push(Q)})}return u0(u0([],z),X)}function r30(Z,z,X){var K=tQ(Z,z,X);return X.nodes.tableHead.create(null,K)}function RK(Z,z,X){var K=Z.map(function(Q){return eQ(Q,z,X)});if(!Z.length){var J=a30(z,X);K.push(J)}return X.nodes.tableBody.create(null,K)}function o30(Z,z,X,K){var J=n30(Z);if(X&&K)return z.nodes.table.create(null,[RK(Z,J,z)]);var Q=Z[0],Y=Z.slice(1),G=[r30(Q,J,z)];if(Y.length)G.push(RK(Y,J,z));return z.nodes.table.create(null,G)}function t30(Z,z,X){var K=[],J=Z.content,Q=Z.openStart,Y=Z.openEnd;return J.forEach(function(G){if(G.type.name==="table"){var U=iQ(new S(L.from(G),0,0));if(U){var q=ZY(U),A=U.firstChild.type.name==="tableBody",V=o30(q,z,A,X);K.push(V)}}else K.push(G)}),new S(L.from(K),Q,Y)}var e30=4,ZZ0=2;function mZ(Z){return Z*e30}function zZ0(Z,z,X){var K=[],J=ZY(Z),Q=J[0].childCount,Y=J.length,G=z.startRowIdx===0,U=J.slice(0,Y);if(G){var q=U.shift();if(q){var A=tQ(q,Q,X).content;K.push(A)}}return U.forEach(function(V){if(!V.attrs.dummyRowForPasting){var W=eQ(V,Q,X).content;K.push(W)}}),K}function XZ0(Z,z,X){var{startRowIdx:K,startColIdx:J}=z,Q=X.length,Y=0,G=function(j){var H=X[j].childCount;X[j].forEach(function(R){var F=R.attrs,B=F.colspan;if(B>1)H+=B-1}),Y=Math.max(Y,H)};for(var U=0;U<Q;U+=1)G(U);var q=K+Q-1,A=J+Y-1,V=Math.max(q+1-Z.totalRowCount,0),W=Math.max(A+1-Z.totalColumnCount,0);return{startRowIdx:K,startColIdx:J,endRowIdx:q,endColIdx:A,addedRowCount:V,addedColumnCount:W}}function KZ0(Z,z){var{startRowIdx:X,startColIdx:K,endRowIdx:J,endColIdx:Q,addedRowCount:Y,addedColumnCount:G}=Z;for(var U=X;U<=J-Y;U+=1)z.push({rowIdx:U,startColIdx:K,endColIdx:Q-G})}function JZ0(Z,z,X,K,J){var{startRowIdx:Q,startColIdx:Y,endRowIdx:G,endColIdx:U,addedRowCount:q,addedColumnCount:A}=K,V=X.totalRowCount,W=0;for(var j=0;j<V;j+=1){var H=X.getCellInfo(j,U-A),R=H.offset,F=H.nodeSize,B=Z.mapping.map(R+F),O=_Z(A,j,z);if(Z.insert(B,O),j>=Q&&j<=G-q){var M=X.getCellInfo(j,U-A),I=Z.mapping.map(M.offset),D=B+mZ(A);J[W]={rowIdx:j,startColIdx:Y,endColIdx:U,dummyOffsets:[I,D]},W+=1}}}function QZ0(Z,z,X,K,J){var{addedRowCount:Q,addedColumnCount:Y,startColIdx:G,endColIdx:U}=K,q=Z.mapping.maps.length,A=X.tableEndOffset-2,V=lQ(Q,X.totalColumnCount+Y,z),W=A;Z.insert(Z.mapping.slice(q).map(W),V);for(var j=0;j<Q;j+=1){var H=W+mZ(G)+1,R=W+mZ(U+1)+1,F=W+mZ(X.totalColumnCount+Y)+ZZ0;J.push({rowIdx:j+X.totalRowCount,startColIdx:G,endColIdx:U,dummyOffsets:[H,R]}),W=F}}function YZ0(Z,z,X,K){var J=Z.mapping.maps.length;X.forEach(function(Q,Y){var{rowIdx:G,startColIdx:U,endColIdx:q,dummyOffsets:A}=Q,V=Z.mapping.slice(J),W=new S(z[Y],0,0),j=A?A[0]:K.getCellStartOffset(G,U),H=A?A[1]:K.getCellEndOffset(G,q);Z.replace(V.map(j),V.map(H),W)})}function GZ0(Z,z){var X=Z.state,K=X.selection,J=X.schema,Q=X.tr,Y=G5(K),G=Y.anchor,U=Y.head;if(G&&U){var q=iQ(z);if(!q)return!1;var A=H0.create(G),V=A.getRectOffsets(G,U),W=zZ0(q,V,J),j=XZ0(A,V,W),H=[];if(qZ0(A,j)){if(KZ0(j,H),j.addedColumnCount)JZ0(Q,J,A,j,H);if(j.addedRowCount)QZ0(Q,J,A,j,H);YZ0(Q,W,H,A),Z.dispatch(Q),UZ0(Z,H,A.getCellInfo(0,0).offset)}return!0}return!1}function UZ0(Z,z,X){var K=Z.state,J=K.tr,Q=K.doc,Y=H0.create(Q.resolve(X)),G=z[0],U=G.rowIdx,q=G.startColIdx,A=C0(z),V=A.rowIdx,W=A.endColIdx,j=Y.getCellInfo(U,q).offset,H=Y.getCellInfo(V,W).offset;Z.dispatch(J.setSelection(new G7(Q.resolve(j),Q.resolve(H))))}function qZ0(Z,z){var X=Z.getSpannedOffsets(z),K=e8(X),J=K.rowCount,Q=K.columnCount,Y=e8(z),G=Y.rowCount,U=Y.columnCount;return J===G&&Q===U}var AZ0=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"doc"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{content:"block+"}},enumerable:!1,configurable:!0}),z}(d),VZ0=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"paragraph"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{content:"inline*",group:"block",attrs:P({},q0()),parseDOM:[{tag:"p"}],toDOM:function(X){var K=X.attrs;return["p",z0(K),0]}}},enumerable:!1,configurable:!0}),z}(d),WZ0=/\s{1,4}$/,HZ0=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"text"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{group:"inline"}},enumerable:!1,configurable:!0}),z.prototype.addSpaces=function(){return function(X,K){var{selection:J,tr:Q}=X,Y=J.$from,G=J.$to,U=Y.blockRange(G);if(U&&!G3(Y)&&!J1(Y))return K(Q.insertText("    ",Y.pos,G.pos)),!0;return!1}},z.prototype.removeSpaces=function(){return function(X,K){var{selection:J,tr:Q}=X,Y=J.$from,G=J.$to,U=J.from,q=Y.blockRange(G);if(q&&!G3(Y)&&!J1(Y)){var A=Y.nodeBefore;if(A&&A.isText){var V=A.text,W=V.replace(WZ0,""),j=V.length-W.length;return K(Q.delete(U-j,U)),!0}}return!1}},z.prototype.keymaps=function(){return{Tab:this.addSpaces(),"Shift-Tab":this.removeSpaces()}},z}(d),jZ0=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"heading"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"levels",{get:function(){return[1,2,3,4,5,6]},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){var X=this.levels.map(function(K){return{tag:"h"+K,getAttrs:function(J){var Q=J.getAttribute("data-raw-html");return P({level:K},Q&&{rawHTML:Q})}}});return{attrs:P({level:{default:1},headingType:{default:"atx"},rawHTML:{default:null}},q0()),content:"inline*",group:"block",defining:!0,parseDOM:X,toDOM:function(K){var J=K.attrs;return["h"+J.level,z0(J),0]}}},enumerable:!1,configurable:!0}),z.prototype.commands=function(){return function(X){return function(K,J){var Q=K.schema.nodes[X.level?"heading":"paragraph"];return MZ(Q,X)(K,J)}}},z}(d),RZ0=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"codeBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{content:"text*",group:"block",attrs:P({language:{default:null},rawHTML:{default:null}},q0()),code:!0,defining:!0,marks:"",parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:function(X){var K=X.getAttribute("data-raw-html"),J=X.firstElementChild;return P({language:(J===null||J===void 0?void 0:J.getAttribute("data-language"))||null},K&&{rawHTML:K})}}],toDOM:function(X){var K=X.attrs;return[K.rawHTML||"pre",["code",P({"data-language":K.language},z0(K)),0]]}}},enumerable:!1,configurable:!0}),z.prototype.commands=function(){return function(){return function(X,K){return MZ(X.schema.nodes.codeBlock)(X,K)}}},z.prototype.moveCursor=function(X){var K=this;return function(J,Q){var{tr:Y,doc:G,schema:U}=J,q=J.selection.$from,A=K.context.view;if(A.endOfTextblock(X)&&q.node().type.name==="codeBlock"){var V=q.parent.textContent.split(`
`),W=X==="up"?q.start():q.end(),j=X==="up"?[W,V[0].length+W]:[W-C0(V).length,W],H=G.resolve(X==="up"?q.before():q.after()),R=X==="up"?H.nodeBefore:H.nodeAfter;if(P2(q.pos,j[0],j[1])&&!R){var F=m4(Y,H,U);if(F)return Q(F),!0}}return!1}},z.prototype.keymaps=function(){var X=this.commands()();return{"Shift-Mod-p":X,"Shift-Mod-P":X,ArrowUp:this.moveCursor("up"),ArrowDown:this.moveCursor("down")}},z}(d),FZ0=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"bulletList"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{content:"listItem+",group:"block",attrs:P({rawHTML:{default:null}},q0()),parseDOM:[P1("ul")],toDOM:function(X){var K=X.attrs;return["ul",z0(K),0]}}},enumerable:!1,configurable:!0}),z.prototype.changeList=function(){return function(X,K){return mQ(X.schema.nodes.bulletList)(X,K)}},z.prototype.commands=function(){return{bulletList:this.changeList,taskList:o80}},z.prototype.keymaps=function(){var X=this.changeList(),K=Y7(),J=K.indent,Q=K.outdent;return{"Mod-u":X,"Mod-U":X,Tab:J(),"Shift-Tab":Q()}},z}(d),BZ0=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"orderedList"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{content:"listItem+",group:"block",attrs:P({order:{default:1},rawHTML:{default:null}},q0()),parseDOM:[{tag:"ol",getAttrs:function(X){var K=X.getAttribute("start"),J=X.getAttribute("data-raw-html");return P({order:X.hasAttribute("start")?Number(K):1},J&&{rawHTML:J})}}],toDOM:function(X){var K=X.attrs;return[K.rawHTML||"ol",P({start:K.order===1?null:K.order},z0(K)),0]}}},enumerable:!1,configurable:!0}),z.prototype.commands=function(){return function(){return function(X,K){return mQ(X.schema.nodes.orderedList)(X,K)}}},z.prototype.keymaps=function(){var X=this.commands()(),K=Y7(),J=K.indent,Q=K.outdent;return{"Mod-o":X,"Mod-O":X,Tab:J(),"Shift-Tab":Q()}},z}(d),EZ0=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"listItem"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{content:"paragraph block*",selectable:!1,attrs:{task:{default:!1},checked:{default:!1},rawHTML:{default:null}},defining:!0,parseDOM:[{tag:"li",getAttrs:function(X){var K=X.getAttribute("data-raw-html");return P({task:X.hasAttribute("data-task"),checked:X.hasAttribute("data-task-checked")},K&&{rawHTML:K})}}],toDOM:function(X){var K=X.attrs,J=K.task,Q=K.checked;if(!J)return[K.rawHTML||"li",0];var Y=["task-list-item"];if(Q)Y.push("checked");return[K.rawHTML||"li",P({class:Y.join(" "),"data-task":J},Q&&{"data-task-checked":Q}),0]}}},enumerable:!1,configurable:!0}),z.prototype.liftToPrevListItem=function(){return function(X,K){var{selection:J,tr:Q,schema:Y}=X,G=J.$from,U=J.empty,q=Y.nodes.listItem,A=G.parent,V=G.node(-1);if(U&&!A.childCount&&V.type===q){if(G.index(-2)>=1)return Q.delete(G.start(-1)-1,G.end(-1)),K(Q),!0;var W=G.node(-3);if(W.type===q)return Q.delete(G.start(-2)-1,G.end(-1)),K(Q),!0}return!1}},z.prototype.keymaps=function(){var X=function(K,J){return X30(K.schema.nodes.listItem)(K,J)};return{Backspace:this.liftToPrevListItem(),Enter:X}},z}(d),PZ0=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"blockQuote"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{attrs:P({rawHTML:{default:null}},q0()),content:"block+",group:"block",parseDOM:[P1("blockquote")],toDOM:function(X){var K=X.attrs;return["blockquote",z0(K),0]}}},enumerable:!1,configurable:!0}),z.prototype.commands=function(){return function(){return function(X,K){return tz(X.schema.nodes.blockQuote)(X,K)}}},z.prototype.keymaps=function(){var X=this.commands()();return{"Alt-q":X,"Alt-Q":X}},z}(d),OZ0={left:kZ0,right:bZ0,up:NZ0,down:TZ0};function MZ0(Z,z,X){var K=X[0],J=X[1],Q=z.resolve(Z.before(K-1));return J===K&&!Q.nodeBefore}function LZ0(Z){var z,X=Z.depth,K;while(X){if(K=Z.node(X),K.type.name==="tableBodyCell")break;if(K.type.name==="listItem"){var J=Z.node(X-1),Q=J.lastChild===K,Y=((z=K.lastChild)===null||z===void 0?void 0:z.type.name)!=="paragraph";if(!Q)return!1;return!Y}X-=1}return!1}function IZ0(Z,z,X,K,J){var Q=z[0],Y=z[1],G=z[2];if(Z==="left"||Z==="up"){if(J&&!MZ0(X,K,[Q,Y]))return!1;var U=X.before(G),q=K.resolve(U).nodeBefore;if(q)return!1}return!0}function DZ0(Z,z,X,K,J){if(Z==="right"||Z==="down"){if(J&&!LZ0(X))return!1;var Q=X.after(z),Y=K.resolve(Q).nodeAfter;if(Y)return!1}return!0}function CZ0(Z,z,X,K){var J=z[0],Q=z[1],Y=J+3,G=Q>=Y,U=G?J+1:Q,q=IZ0(Z,[Q,Y,U],X,K,G),A=DZ0(Z,U,X,K,G);return q&&A}function FK(Z,z,X){var K=X[0],J=X[1],Q=z.getRowspanStartInfo(K,J),Y=Z==="up"&&K===0,G=Z==="down"&&((Q===null||Q===void 0?void 0:Q.count)>1?K+Q.count-1:K)===z.totalRowCount-1;return Y||G}function SZ0(Z,z,X){var K=Z.doc.resolve(z.tableStartOffset-1);if(!K.nodeBefore)return m4(Z,K,X);return Z.setSelection($.near(K,-1))}function J4(Z,z,X,K){if(K===void 0)K=!1;var J=Z.doc.resolve(z.tableEndOffset);if(K||!J.nodeAfter)return m4(Z,J,X);return Z.setSelection($.near(J,1))}function bZ0(Z,z){var X=Z[0],K=Z[1],J=z.totalRowCount,Q=z.totalColumnCount,Y=K===Q-1,G=X===J-1&&Y;if(!G){var U=K+1,q=z.getColspanStartInfo(X,K);if((q===null||q===void 0?void 0:q.count)>1)U+=q.count-1;if(Y||U===Q)X+=1,U=0;var A=z.getCellInfo(X,U).offset;return A+2}return null}function kZ0(Z,z){var X=Z[0],K=Z[1],J=z.totalColumnCount,Q=K===0,Y=X===0&&Q;if(!Y){if(K-=1,Q)X-=1,K=J-1;var G=z.getCellInfo(X,K),U=G.offset,q=G.nodeSize;return U+q-2}return null}function NZ0(Z,z){var X=Z[0],K=Z[1];if(X>0){var J=z.getCellInfo(X-1,K),Q=J.offset,Y=J.nodeSize;return Q+Y-2}return null}function TZ0(Z,z){var X=Z[0],K=Z[1],J=z.totalRowCount;if(X<J-1){var Q=X+1,Y=z.getRowspanStartInfo(X,K);if((Y===null||Y===void 0?void 0:Y.count)>1)Q+=Y.count-1;var G=z.getCellInfo(Q,K).offset;return G+2}return null}function BK(Z,z,X,K){var J=OZ0[Z],Q=J(X,K);if(Q){var Y=Z==="right"||Z==="down"?1:-1;return z.setSelection($.near(z.doc.resolve(Q),Y))}return null}function yZ0(Z,z,X){var K=X[0],J=X[1];if(Z==="up"||Z==="down")return!1;var{tableStartOffset:Q,tableEndOffset:Y}=z,G=z.getCellInfo(K,J),U=G.offset,q=G.nodeSize,A=Z==="left"?Q:Y,V=Z==="left"?U-2:U+q+3;return A===V}function xZ0(Z,z,X){var K=Z.doc.resolve(z.before(X-3));return Z.setSelection(new w(K))}function gZ0(Z,z,X){var K,J,Q;if(Z==="up")K=X.startRowIdx,J=0,Q=-1;else K=X.endRowIdx,J=z.totalColumnCount-1,Q=z.getCellInfo(K,J).nodeSize+1;return{targetRowIdx:K,insertColIdx:J,nodeSize:Q}}function wZ0(Z,z,X){var K=Z.getCellInfo(z,0).offset,J=Z.getCellInfo(z,X-1),Q=J.offset,Y=J.nodeSize;return{from:K,to:Q+Y}}var uZ0=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"table"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{content:"tableHead{1} tableBody{1}",group:"block",attrs:P({rawHTML:{default:null}},q0()),parseDOM:[P1("table")],toDOM:function(X){var K=X.attrs;return["table",z0(K),0]}}},enumerable:!1,configurable:!0}),z.prototype.addTable=function(){return function(X){if(X===void 0)X={rowCount:2,columnCount:1,data:[]};return function(K,J){var{rowCount:Q,columnCount:Y,data:G}=X,U=K.schema,q=K.selection,A=K.tr,V=q.from,W=q.to,j=q.$from,H=V===W;if(H&&!J1(j)){var R=U.nodes,F=R.tableHead,B=R.tableBody,O=G===null||G===void 0?void 0:G.slice(0,Y),M=G===null||G===void 0?void 0:G.slice(Y,G.length),I=U30(Y,U,O),D=lQ(Q-1,Y,U,M),b=U.nodes.table.create(null,[F.create(null,I),B.create(null,D)]);return J(A.replaceSelectionWith(b)),!0}return!1}}},z.prototype.removeTable=function(){return function(){return function(X,K){var{selection:J,tr:Q}=X,Y=H0.create(J.$anchor);if(Y){var{tableStartOffset:G,tableEndOffset:U}=Y,q=G-1,A=n(Q.delete(q,U),q);return K(Q.setSelection(A)),!0}return!1}}},z.prototype.addColumn=function(X){return function(){return function(K,J){var{selection:Q,tr:Y,schema:G}=K,U=G5(Q),q=U.anchor,A=U.head;if(q&&A){var V=H0.create(q),W=V.getRectOffsets(q,A),j=X==="left"?W.startColIdx:W.endColIdx+1,H=e8(W).columnCount,R=V.totalRowCount;for(var F=0;F<R;F+=1){var B=_Z(H,F,G);Y.insert(Y.mapping.map(V.posAt(F,j)),B)}return J(Y),!0}return!1}}},z.prototype.removeColumn=function(){return function(){return function(X,K){var{selection:J,tr:Q}=X,Y=G5(J),G=Y.anchor,U=Y.head;if(G&&U){var q=H0.create(G),A=q.getRectOffsets(G,U),V=q.totalColumnCount,W=q.totalRowCount,j=e8(A).columnCount,H=j===V;if(H)return!1;var{startColIdx:R,endColIdx:F}=A,B=Q.mapping.maps.length;for(var O=0;O<W;O+=1)for(var M=F;M>=R;M-=1){var I=q.getCellInfo(O,M),D=I.offset,b=I.nodeSize,x=Q.mapping.slice(B).map(D),u=x+b;Q.delete(x,u)}return K(Q),!0}return!1}}},z.prototype.addRow=function(X){return function(){return function(K,J){var{selection:Q,schema:Y,tr:G}=K,U=G5(Q),q=U.anchor,A=U.head;if(q&&A){var V=H0.create(q),W=V.totalColumnCount,j=V.getRectOffsets(q,A),H=e8(j).rowCount,R=gZ0(X,V,j),F=R.targetRowIdx,B=R.insertColIdx,O=R.nodeSize,M=F===0;if(!M){var I=[],D=G.mapping.map(V.posAt(F,B))+O,b=[];for(var x=0;x<W;x+=1)b=b.concat(_Z(1,F,Y));for(var u=0;u<H;u+=1)I.push(Y.nodes.tableRow.create(null,b));return J(G.insert(D,I)),!0}}return!1}}},z.prototype.removeRow=function(){return function(){return function(X,K){var{selection:J,tr:Q}=X,Y=G5(J),G=Y.anchor,U=Y.head;if(G&&U){var q=H0.create(G),A=q.totalRowCount,V=q.totalColumnCount,W=q.getRectOffsets(G,U),j=e8(W).rowCount,H=W.startRowIdx,R=W.endRowIdx,F=H===0,B=j===A-1;if(B||F)return!1;for(var O=R;O>=H;O-=1){var M=wZ0(q,O,V),I=M.from,D=M.to;Q.delete(I-1,D+1)}return K(Q),!0}return!1}}},z.prototype.alignColumn=function(){return function(X){if(X===void 0)X={align:"center"};return function(K,J){var Q=X.align,Y=K.selection,G=K.tr,U=G5(Y),q=U.anchor,A=U.head;if(q&&A){var V=H0.create(q),W=V.totalRowCount,j=V.getRectOffsets(q,A),H=j.startColIdx,R=j.endColIdx;for(var F=0;F<W;F+=1)for(var B=H;B<=R;B+=1)if(!V.extendedRowspan(F,B)&&!V.extendedColspan(F,B)){var O=V.getNodeAndPos(F,B),M=O.node,I=O.pos,D=q30(M,{align:Q});G.setNodeMarkup(I,null,D)}return J(G),!0}return!1}}},z.prototype.moveToCell=function(X){return function(K,J){var{selection:Q,tr:Y,schema:G}=K,U=G5(Q),q=U.anchor,A=U.head;if(q&&A){var V=H0.create(q),W=V.getCellIndex(q),j=void 0;if(FK(X,V,W))j=J4(Y,V,G);else j=BK(X,Y,W,V);if(j)return J(j),!0}return!1}},z.prototype.moveInCell=function(X){var K=this;return function(J,Q){var{selection:Y,tr:G,doc:U,schema:q}=J,A=Y.$from,V=K.context.view;if(!V.endOfTextblock(X))return!1;var W=D5(A,function(M){var I=M.type;return I.name==="tableHeadCell"||I.name==="tableBodyCell"});if(W){var j=D5(A,function(M){var I=M.type;return I.name==="paragraph"}),H=W.depth;if(j&&CZ0(X,[H,j.depth],A,U)){var R=G5(Y).anchor,F=H0.create(R),B=F.getCellIndex(R),O=void 0;if(yZ0(X,F,B))O=xZ0(G,A,H);else if(FK(X,F,B)){if(X==="up")O=SZ0(G,F,q);else if(X==="down")O=J4(G,F,q)}else O=BK(X,G,B,F);if(O)return Q(O),!0}}return!1}},z.prototype.deleteCells=function(){return function(X,K){var{schema:J,selection:Q,tr:Y}=X,G=G5(Q),U=G.anchor,q=G.head,A=Q instanceof _;if(U&&q&&!A){var V=H0.create(U),W=V.getRectOffsets(U,q),j=W.startRowIdx,H=W.startColIdx,R=W.endRowIdx,F=W.endColIdx;for(var B=j;B<=R;B+=1)for(var O=H;O<=F;O+=1)if(!V.extendedRowspan(B,O)&&!V.extendedColspan(B,O)){var M=V.getNodeAndPos(B,O),I=M.node,D=M.pos,b=_Z(1,B,J,I.attrs);Y.replaceWith(Y.mapping.map(D),Y.mapping.map(D+I.nodeSize),b)}return K(Y),!0}return!1}},z.prototype.exitTable=function(){return function(X,K){var{selection:J,tr:Q,schema:Y}=X,G=J.$from,U=D5(G,function(W){var j=W.type;return j.name==="tableHeadCell"||j.name==="tableBodyCell"});if(U){var q=D5(G,function(W){var j=W.type;return j.name==="paragraph"});if(q){var A=G5(J).anchor,V=H0.create(A);return K(J4(Q,V,Y,!0)),!0}}return!1}},z.prototype.commands=function(){return{addTable:this.addTable(),removeTable:this.removeTable(),addColumnToLeft:this.addColumn("left"),addColumnToRight:this.addColumn("right"),removeColumn:this.removeColumn(),addRowToUp:this.addRow("up"),addRowToDown:this.addRow("down"),removeRow:this.removeRow(),alignColumn:this.alignColumn()}},z.prototype.keymaps=function(){var X=this.deleteCells();return{Tab:this.moveToCell("right"),"Shift-Tab":this.moveToCell("left"),ArrowUp:this.moveInCell("up"),ArrowDown:this.moveInCell("down"),ArrowLeft:this.moveInCell("left"),ArrowRight:this.moveInCell("right"),Backspace:X,"Mod-Backspace":X,Delete:X,"Mod-Delete":X,"Mod-Enter":this.exitTable()}},z}(d),vZ0=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"tableHead"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{content:"tableRow{1}",attrs:P({rawHTML:{default:null}},q0()),parseDOM:[P1("thead")],toDOM:function(X){var K=X.attrs;return["thead",z0(K),0]}}},enumerable:!1,configurable:!0}),z}(d),$Z0=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"tableBody"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{content:"tableRow+",attrs:P({rawHTML:{default:null}},q0()),parseDOM:[{tag:"tbody",getAttrs:function(X){var K=X.querySelectorAll("tr"),J=K[0].children.length,Q=X.getAttribute("data-raw-html");if(!J)return!1;return P({},Q&&{rawHTML:Q})}}],toDOM:function(X){var K=X.attrs;return["tbody",z0(K),0]}}},enumerable:!1,configurable:!0}),z}(d),fZ0=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"tableRow"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{content:"(tableHeadCell | tableBodyCell)*",attrs:P({rawHTML:{default:null}},q0()),parseDOM:[{tag:"tr",getAttrs:function(X){var K=X.children.length,J=X.getAttribute("data-raw-html");if(!K)return!1;return P({},J&&{rawHTML:J})}}],toDOM:function(X){var K=X.attrs;return["tr",z0(K),0]}}},enumerable:!1,configurable:!0}),z}(d),hZ0=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"tableHeadCell"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{content:"paragraph+",attrs:P({align:{default:null},className:{default:null},rawHTML:{default:null},colspan:{default:null},extended:{default:null}},q0()),isolating:!0,parseDOM:[fQ("th")],toDOM:function(X){var K=X.attrs,J=$Q(K);return["th",P(P({},J),z0(K)),0]}}},enumerable:!1,configurable:!0}),z}(d),_Z0=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"tableBodyCell"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{content:"(paragraph | bulletList | orderedList)+",attrs:{align:{default:null},className:{default:null},rawHTML:{default:null},colspan:{default:null},rowspan:{default:null},extended:{default:null}},isolating:!0,parseDOM:[fQ("td")],toDOM:function(X){var K=X.attrs,J=$Q(K);return["td",J,0]}}},enumerable:!1,configurable:!0}),z}(d),mZ0=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"image"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{inline:!0,attrs:P({imageUrl:{default:""},altText:{default:null},rawHTML:{default:null}},q0()),group:"inline",selectable:!1,parseDOM:[{tag:"img[src]",getAttrs:function(X){var K=O8(X,{RETURN_DOM_FRAGMENT:!0}).firstChild,J=K.getAttribute("src")||"",Q=K.getAttribute("data-raw-html"),Y=K.getAttribute("alt");return P({imageUrl:J,altText:Y},Q&&{rawHTML:Q})}}],toDOM:function(X){var K=X.attrs;return[K.rawHTML||"img",P(P({src:t8(K.imageUrl)},K.altText&&{alt:K.altText}),z0(K))]}}},enumerable:!1,configurable:!0}),z.prototype.addImage=function(){return function(X){return function(K,J){var{schema:Q,tr:Y}=K,G=X,U=G.imageUrl,q=G.altText;if(!U)return!1;var A=Q.nodes.image.createAndFill(P({imageUrl:U},q&&{altText:q}));return J(Y.replaceSelectionWith(A).scrollIntoView()),!0}}},z.prototype.commands=function(){return{addImage:this.addImage()}},z}(d),EK=1,lZ0=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"thematicBreak"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{attrs:P({rawHTML:{default:null}},q0()),group:"block",parseDOM:[{tag:"hr"}],selectable:!1,toDOM:function(X){var K=X.attrs;return["div",z0(K),[K.rawHTML||"hr"]]}}},enumerable:!1,configurable:!0}),z.prototype.hr=function(){var X=this;return function(){return function(K,J){var Q,Y=K.selection,G=Y.$from,U=Y.$to;if(G===U){var q=K.doc,A=K.schema.nodes,V=A.thematicBreak,W=A.paragraph,j=[V.create()],H=G.node(EK),R=q.child(q.childCount-1)===H,F=q.resolve(G.after(EK)),B=((Q=G.nodeAfter)===null||Q===void 0?void 0:Q.type.name)===X.name;if(R||B)j.push(W.create());return J(K.tr.insert(F.pos,j).scrollIntoView()),!0}return!1}}},z.prototype.commands=function(){return{hr:this.hr()}},z.prototype.keymaps=function(){var X=this.hr()();return{"Mod-l":X,"Mod-L":X}},z}(d),cZ0=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"strong"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){var X=["b","strong"].map(function(K){return{tag:K,getAttrs:function(J){var Q=J.getAttribute("data-raw-html");return P({},Q&&{rawHTML:Q})}}});return{attrs:P({rawHTML:{default:null}},q0()),parseDOM:X,toDOM:function(K){var J=K.attrs;return[J.rawHTML||"strong",z0(J)]}}},enumerable:!1,configurable:!0}),z.prototype.bold=function(){return function(){return function(X,K){return d8(X.schema.marks.strong)(X,K)}}},z.prototype.commands=function(){return{bold:this.bold()}},z.prototype.keymaps=function(){var X=this.bold()();return{"Mod-b":X,"Mod-B":X}},z}(a),pZ0=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"emph"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){var X=["i","em"].map(function(K){return{tag:K,getAttrs:function(J){var Q=J.getAttribute("data-raw-html");return P({},Q&&{rawHTML:Q})}}});return{attrs:P({rawHTML:{default:null}},q0()),parseDOM:X,toDOM:function(K){var J=K.attrs;return[J.rawHTML||"em",z0(J)]}}},enumerable:!1,configurable:!0}),z.prototype.italic=function(){return function(){return function(X,K){return d8(X.schema.marks.emph)(X,K)}}},z.prototype.commands=function(){return{italic:this.italic()}},z.prototype.keymaps=function(){var X=this.italic()();return{"Mod-i":X,"Mod-I":X}},z}(a),iZ0=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"strike"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){var X=["s","del"].map(function(K){return{tag:K,getAttrs:function(J){var Q=J.getAttribute("data-raw-html");return P({},Q&&{rawHTML:Q})}}});return{attrs:P({rawHTML:{default:null}},q0()),parseDOM:X,toDOM:function(K){var J=K.attrs;return[J.rawHTML||"del",z0(J)]}}},enumerable:!1,configurable:!0}),z.prototype.commands=function(){return function(){return function(X,K){return d8(X.schema.marks.strike)(X,K)}}},z.prototype.keymaps=function(){var X=this.commands()();return{"Mod-s":X,"Mod-S":X}},z}(a),dZ0=function(Z){k(z,Z);function z(X){var K=Z.call(this)||this;return K.linkAttributes=X,K}return Object.defineProperty(z.prototype,"name",{get:function(){return"link"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){var X=this;return{attrs:P({linkUrl:{default:""},title:{default:null},rawHTML:{default:null}},q0()),inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(K){var J=O8(K,{RETURN_DOM_FRAGMENT:!0}).firstChild,Q=J.getAttribute("href")||"",Y=J.getAttribute("title")||"",G=J.getAttribute("data-raw-html");return P({linkUrl:Q,title:Y},G&&{rawHTML:G})}}],toDOM:function(K){var J=K.attrs;return[J.rawHTML||"a",P(P({href:t8(J.linkUrl)},X.linkAttributes),z0(J))]}}},enumerable:!1,configurable:!0}),z.prototype.addLink=function(){return function(X){return function(K,J){var Q=X,Y=Q.linkUrl,G=Q.linkText,U=G===void 0?"":G,q=K.schema,A=K.tr,V=K.selection,W=V.empty,j=V.from,H=V.to;if(j&&H&&Y){var R={linkUrl:Y},F=q.mark("link",R);if(W&&U){var B=R0(q,U,F);A.replaceRangeWith(j,H,B)}else A.addMark(j,H,F);return J(A.scrollIntoView()),!0}return!1}}},z.prototype.toggleLink=function(){return function(X){return function(K,J){return d8(K.schema.marks.link,X)(K,J)}}},z.prototype.commands=function(){return{addLink:this.addLink(),toggleLink:this.toggleLink()}},z}(a),sZ0=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"code"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{attrs:P({rawHTML:{default:null}},q0()),parseDOM:[{tag:"code",getAttrs:function(X){var K=X.getAttribute("data-raw-html");return P({},K&&{rawHTML:K})}}],toDOM:function(X){var K=X.attrs;return[K.rawHTML||"code",z0(K)]}}},enumerable:!1,configurable:!0}),z.prototype.commands=function(){return function(){return function(X,K){return d8(X.schema.marks.code)(X,K)}}},z.prototype.keymaps=function(){var X=this.commands()();return{"Shift-Mod-c":X,"Shift-Mod-C":X}},z}(a),nZ0=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"customBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{content:"text*",group:"block",attrs:{info:{default:null}},atom:!0,code:!0,defining:!0,parseDOM:[{tag:"div[data-custom-info]",getAttrs:function(X){var K=X.getAttribute("data-custom-info");return{info:K}}}],toDOM:function(X){var K=X.attrs;return["div",{"data-custom-info":K.info||null},0]}}},enumerable:!1,configurable:!0}),z.prototype.commands=function(){return function(X){return function(K,J){return(X===null||X===void 0?void 0:X.info)?MZ(K.schema.nodes.customBlock,X)(K,J):!1}}},z}(d),aZ0=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"frontMatter"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{content:"text*",group:"block",code:!0,defining:!0,parseDOM:[{preserveWhitespace:"full",tag:"div[data-front-matter]"}],toDOM:function(){return["div",{"data-front-matter":"true"},0]}}},enumerable:!1,configurable:!0}),z.prototype.commands=function(){return function(){return function(X,K,J){var Q=X.selection.$from;if(J.endOfTextblock("down")&&Q.node().type.name==="frontMatter")return OZ(X,K);return!1}}},z.prototype.keymaps=function(){return{Enter:this.commands()()}},z}(d),rZ0=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"name",{get:function(){return"htmlComment"},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"schema",{get:function(){return{content:"text*",group:"block",code:!0,defining:!0,parseDOM:[{preserveWhitespace:"full",tag:"div[data-html-comment]"}],toDOM:function(){return["div",{"data-html-comment":"true"},0]}}},enumerable:!1,configurable:!0}),z.prototype.commands=function(){return function(){return function(X,K,J){var Q=X.selection.$from;if(J.endOfTextblock("down")&&Q.node().type.name==="htmlComment")return OZ(X,K);return!1}}},z.prototype.keymaps=function(){return{Enter:this.commands()()}},z}(d);function oZ0(Z){return new mJ([new AZ0,new VZ0,new HZ0,new jZ0,new RZ0,new FZ0,new BZ0,new EZ0,new PZ0,new uZ0,new vZ0,new $Z0,new fZ0,new hZ0,new _Z0,new mZ0,new lZ0,new cZ0,new pZ0,new iZ0,new dZ0(Z),new sZ0,new nZ0,new aZ0,new hJ,new rZ0])}var tZ0=N("contents"),eZ0=function(Z){k(z,Z);function z(X,K){var J=Z.call(this,X)||this,Q=K.toDOMAdaptor,Y=K.htmlSchemaMap,G=Y===void 0?{}:Y,U=K.linkAttributes,q=U===void 0?{}:U,A=K.useCommandShortcut,V=A===void 0?!0:A,W=K.wwPlugins,j=W===void 0?[]:W,H=K.wwNodeViews,R=H===void 0?{}:H;return J.editorType="wysiwyg",J.el.classList.add("ww-mode"),J.toDOMAdaptor=Q,J.linkAttributes=q,J.extraPlugins=j,J.pluginNodeViews=R,J.specs=J.createSpecs(),J.schema=J.createSchema(G),J.context=J.createContext(),J.keymaps=J.createKeymaps(V),J.view=J.createView(),J.commands=J.createCommands(),J.specs.setContext(P(P({},J.context),{view:J.view})),J.initEvent(),J}return z.prototype.createSpecs=function(){return oZ0(this.linkAttributes)},z.prototype.createContext=function(){return{schema:this.schema,eventEmitter:this.eventEmitter}},z.prototype.createSchema=function(X){return new KZ({nodes:P(P({},this.specs.nodes),X.nodes),marks:P(P({},this.specs.marks),X.marks)})},z.prototype.createPlugins=function(){return u0([j30(),E30(this.eventEmitter),P30(),S30(this.eventEmitter)],this.createPluginProps()).concat(this.defaultPlugins)},z.prototype.createPluginNodeViews=function(){var X=this,K=X.eventEmitter,J=X.pluginNodeViews,Q={};if(J)Object.keys(J).forEach(function(Y){Q[Y]=function(G,U,q){return J[Y](G,U,q,K)}});return Q},z.prototype.createView=function(){var X=this,K=this,J=K.toDOMAdaptor,Q=K.eventEmitter;return new y3(this.el,{state:this.createState(),attributes:{class:tZ0},nodeViews:P({customBlock:function(Y,G,U){return new b30(Y,G,U,J)},image:function(Y,G,U){return new k30(Y,G,U,Q)},codeBlock:function(Y,G,U){return new y30(Y,G,U,Q)},widget:fJ},this.createPluginNodeViews()),dispatchTransaction:function(Y){var G=X.view.state.applyTransaction(Y).state;X.view.updateState(G),X.emitChangeEvent(Y.scrollIntoView()),X.eventEmitter.emit("setFocusedNode",G.selection.$from.node(1))},transformPastedHTML:s30,transformPasted:function(Y){return t30(Y,X.schema,J1(X.view.state.selection.$from))},handlePaste:function(Y,G,U){return GZ0(Y,U)},handleKeyDown:function(Y,G){return X.eventEmitter.emit("keydown",X.editorType,G),!1},handleDOMEvents:{paste:function(Y,G){var U=G.clipboardData||window.clipboardData,q=U===null||U===void 0?void 0:U.items;if(q){var A=V5(q).some(function(W){return W.kind==="string"&&W.type==="text/rtf"});if(!A){var V=$J(q);if(V)G.preventDefault(),n4(X.eventEmitter,V,G.type)}}return!1},keyup:function(Y,G){return X.eventEmitter.emit("keyup",X.editorType,G),!1},scroll:function(){return X.eventEmitter.emit("scroll","editor"),!0}}})},z.prototype.createCommands=function(){return this.specs.commands(this.view,Y7())},z.prototype.getHTML=function(){return s4(this.view.dom.innerHTML)},z.prototype.getModel=function(){return this.view.state.doc},z.prototype.getSelection=function(){var X=this.view.state.selection,K=X.from,J=X.to;return[K,J]},z.prototype.getSchema=function(){return this.view.state.schema},z.prototype.replaceSelection=function(X,K,J){var Q=this.view.state,Y=Q.schema,G=Q.tr,U=X.split(`
`),q=U.map(function(W){return nZ(Y,j8(W,Y))}),A=new S(L.from(q),1,1),V=I5(K)&&I5(J)?G.replaceRange(K,J,A):G.replaceSelection(A);this.view.dispatch(V),this.focus()},z.prototype.deleteSelection=function(X,K){var J=this.view.state.tr,Q=I5(X)&&I5(K)?J.deleteRange(X,K):J.deleteSelection();this.view.dispatch(Q.scrollIntoView())},z.prototype.getSelectedText=function(X,K){var J=this.view.state,Q=J.doc,Y=J.selection,G=Y.from,U=Y.to;if(I5(X)&&I5(K))G=X,U=K;return Q.textBetween(G,U,`
`)},z.prototype.setModel=function(X,K){if(K===void 0)K=!1;var J=this.view.state,Q=J.tr,Y=J.doc;if(this.view.dispatch(Q.replaceWith(0,Y.content.size,X)),K)this.moveCursorToEnd(!0)},z.prototype.setSelection=function(X,K){if(K===void 0)K=X;var J=this.view.state.tr,Q=n(J,X,K);this.view.dispatch(J.setSelection(Q).scrollIntoView())},z.prototype.addWidget=function(X,K,J){var Q=this.view,Y=Q.dispatch,G=Q.state;Y(G.tr.setMeta("widget",{pos:J!==null&&J!==void 0?J:G.selection.to,node:X,style:K}))},z.prototype.replaceWithWidget=function(X,K,J){var Q=this.view.state,Y=Q.tr,G=Q.schema,U=j8(J,G);this.view.dispatch(Y.replaceWith(X,K,U))},z.prototype.getRangeInfoOfNode=function(X){var K=this.view.state,J=K.doc,Q=K.selection,Y=X?J.resolve(X):Q.$from,G=Y.marks(),U=Y.node(),q=Y.start(),A=Y.end(),V=U.type.name;if(G.length||V==="paragraph"){var W=G[G.length-1],j=function(H){return H.length?F0(H,W):!0};V=W?W.type.name:"text",U.forEach(function(H,R){var{isText:F,nodeSize:B,marks:O}=H,M=Y.pos-q;if(F&&R<=M&&R+B>=M&&j(O))q=q+R,A=q+B})}return{range:[q,A],type:V}},z}(_J),Z10=o0,z10=pZ;function X10(Z){return!Z10(Z)&&!z10(Z)}var K10=X10,J10=K10;function Q10(Z){return J10(Z)&&Z!==!1}var Y10=Q10,G10=Y10;function U10(Z){return!G10(Z)}var q10=U10,PK=["afterPreviewRender","updatePreview","changeMode","needChangeMode","command","changePreviewStyle","changePreviewTabPreview","changePreviewTabWrite","scroll","contextmenu","show","hide","changeLanguage","changeToolbarState","toggleScrollSync","mixinTableOffsetMapPrototype","setFocusedNode","removePopupWidget","query","openPopup","closePopup","addImageBlobHook","beforePreviewRender","beforeConvertWysiwygToMarkdown","load","loadUI","change","caretChange","destroy","focus","blur","keydown","keyup"],zY=function(){function Z(){var z=this;this.events=new dQ,this.eventTypes=PK.reduce(function(X,K){return P(P({},X),{type:K})},{}),this.hold=!1,PK.forEach(function(X){z.addEventType(X)})}return Z.prototype.listen=function(z,X){var K=this.getTypeInfo(z),J=this.events.get(K.type)||[];if(!this.hasEventType(K.type))throw new Error("There is no event type "+K.type);if(K.namespace)X.namespace=K.namespace;J.push(X),this.events.set(K.type,J)},Z.prototype.emit=function(z){var X=[];for(var K=1;K<arguments.length;K++)X[K-1]=arguments[K];var J=this.getTypeInfo(z),Q=this.events.get(J.type),Y=[];if(!this.hold&&Q)Q.forEach(function(G){var U=G.apply(void 0,X);if(!o0(U))Y.push(U)});return Y},Z.prototype.emitReduce=function(z,X){var K=[];for(var J=2;J<arguments.length;J++)K[J-2]=arguments[J];var Q=this.events.get(z);if(!this.hold&&Q)Q.forEach(function(Y){var G=Y.apply(void 0,u0([X],K));if(!q10(G))X=G});return X},Z.prototype.getTypeInfo=function(z){var X=z.split(".");return{type:X[0],namespace:X[1]}},Z.prototype.hasEventType=function(z){return!o0(this.eventTypes[this.getTypeInfo(z).type])},Z.prototype.addEventType=function(z){if(this.hasEventType(z))throw new Error("There is already have event type "+z);this.eventTypes[z]=z},Z.prototype.removeEventHandler=function(z,X){var K=this,J=this.getTypeInfo(z),Q=J.type,Y=J.namespace;if(Q&&X)this.removeEventHandlerWithHandler(Q,X);else if(Q&&!Y)this.events.delete(Q);else if(!Q&&Y)this.events.forEach(function(G,U){K.removeEventHandlerWithTypeInfo(U,Y)});else if(Q&&Y)this.removeEventHandlerWithTypeInfo(Q,Y)},Z.prototype.removeEventHandlerWithHandler=function(z,X){var K=this.events.get(z);if(K){var J=K.indexOf(X);if(K.indexOf(X)>=0)K.splice(J,1)}},Z.prototype.removeEventHandlerWithTypeInfo=function(z,X){var K=[],J=this.events.get(z);if(!J)return;J.map(function(Q){if(Q.namespace!==X)K.push(Q);return null}),this.events.set(z,K)},Z.prototype.getEvents=function(){return this.events},Z.prototype.holdEventInvoke=function(z){this.hold=!0,z(),this.hold=!1},Z}(),A10=function(){function Z(z,X,K,J){this.eventEmitter=z,this.mdCommands=X,this.wwCommands=K,this.getEditorType=J,this.initEvent()}return Z.prototype.initEvent=function(){var z=this;this.eventEmitter.listen("command",function(X,K){z.exec(X,K)})},Z.prototype.addCommand=function(z,X,K){if(z==="markdown")this.mdCommands[X]=K;else this.wwCommands[X]=K},Z.prototype.deleteCommand=function(z,X){if(z==="markdown")delete this.mdCommands[X];else delete this.wwCommands[X]},Z.prototype.exec=function(z,X){var K=this.getEditorType();if(K==="markdown")this.mdCommands[z](X);else this.wwCommands[z](X)},Z}();function lZ(Z){return Z[Z.length-1]===`
`?Z.slice(0,Z.length-1):Z}function N4(Z,z){var X=Z.schema,K=z.literal,J=K.match(K3);if(J){var Q=J[1],Y=J[3],G=(Q||Y).toLowerCase();return z.type==="htmlInline"&&!!(X.marks[G]||X.nodes[G])}return!1}function T4(Z){var z=Z.type;return F0(["text","strong","emph","strike","image","link","code"],z)}function OK(Z){return(Z===null||Z===void 0?void 0:Z.type)==="softbreak"}function u3(Z){var{type:z,literal:X}=Z,K=z==="htmlInline"&&X.match(K3);if(K){var J=K[1],Q=K[3],Y=J||Q;if(Y)return F0(["ul","ol","li"],Y.toLowerCase())}return!1}function V10(Z){var z=Z.literal,X=/data-task/.test(z),K=/data-task-checked/.test(z);return{task:X,checked:K}}function MK(Z){var z=[];for(var X=1;X<arguments.length;X++)z[X-1]=arguments[X];var K=document.createElement("div");K.innerHTML=O8(Z);var J=K.firstChild;return z.map(function(Q){return J.getAttribute(Q)||""})}function W10(Z){var z={};return Object.keys(Z).forEach(function(X){var K=X.split(", ");K.forEach(function(J){var Q=J.toLowerCase();z[Q]=Z[X]})}),z}var H10={"b, strong":function(Z,z,X){var K=Z.schema.marks.strong;if(X)Z.openMark(K.create({rawHTML:X}));else Z.closeMark(K)},"i, em":function(Z,z,X){var K=Z.schema.marks.emph;if(X)Z.openMark(K.create({rawHTML:X}));else Z.closeMark(K)},"s, del":function(Z,z,X){var K=Z.schema.marks.strike;if(X)Z.openMark(K.create({rawHTML:X}));else Z.closeMark(K)},code:function(Z,z,X){var K=Z.schema.marks.code;if(X)Z.openMark(K.create({rawHTML:X}));else Z.closeMark(K)},a:function(Z,z,X){var K=z.literal,J=Z.schema.marks.link;if(X){var Q=MK(K,"href")[0];Z.openMark(J.create({linkUrl:Q,rawHTML:X}))}else Z.closeMark(J)},img:function(Z,z,X){var K=z.literal;if(X){var J=MK(K,"src","alt"),Q=J[0],Y=J[1],G=Z.schema.nodes.image;Z.addNode(G,P({rawHTML:X,imageUrl:Q},Y&&{altText:Y}))}},hr:function(Z,z,X){Z.addNode(Z.schema.nodes.thematicBreak,{rawHTML:X})},br:function(Z,z){var X=Z.schema.nodes.paragraph,K=z.parent,J=z.prev,Q=z.next;if((K===null||K===void 0?void 0:K.type)==="paragraph"){if(OK(J))Z.openNode(X);if(OK(Q))Z.closeNode();else if(Q)Z.closeNode(),Z.openNode(X)}else if((K===null||K===void 0?void 0:K.type)==="tableCell"){if(J&&(T4(J)||N4(Z,J)))Z.closeNode();if(Q&&(T4(Q)||N4(Z,Q)))Z.openNode(X)}},pre:function(Z,z,X){var K,J,Q=document.createElement("div");Q.innerHTML=z.literal;var Y=(J=(K=Q.firstChild)===null||K===void 0?void 0:K.firstChild)===null||J===void 0?void 0:J.textContent;Z.openNode(Z.schema.nodes.codeBlock,{rawHTML:X}),Z.addText(lZ(Y)),Z.closeNode()},"ul, ol":function(Z,z,X){if(z.parent.type==="tableCell"){var K=Z.schema.nodes,J=K.bulletList,Q=K.orderedList,Y=K.paragraph,G=X==="ul"?J:Q;if(X){if(z.prev&&!u3(z.prev))Z.closeNode();Z.openNode(G,{rawHTML:X})}else if(Z.closeNode(),z.next&&!u3(z.next))Z.openNode(Y)}},li:function(Z,z,X){var K;if(((K=z.parent)===null||K===void 0?void 0:K.type)==="tableCell"){var J=Z.schema.nodes,Q=J.listItem,Y=J.paragraph;if(X){var G=V10(z);if(z.prev&&!u3(z.prev))Z.closeNode();if(Z.openNode(Q,P({rawHTML:X},G)),z.next&&!u3(z.next))Z.openNode(Y)}else{if(z.prev&&!u3(z.prev))Z.closeNode();Z.closeNode()}}}},j10=W10(H10);function LK(Z){return Z.type==="htmlInline"&&U4.test(Z.literal)}function XY(Z){V5(Z.childNodes).forEach(function(z){if(W1(z)){var X=z.nodeName.toLowerCase();if(z.setAttribute("data-raw-html",X),z.childNodes)XY(z)}})}var IK={text:function(Z,z){Z.addText(z.literal||"")},paragraph:function(Z,z,X,K){var J,Q=X.entering;if(Q){var Y=Z.schema.nodes.paragraph;if(((J=z.prev)===null||J===void 0?void 0:J.type)==="paragraph")Z.openNode(Y,K),Z.closeNode();Z.openNode(Y,K)}else Z.closeNode()},heading:function(Z,z,X,K){var J=X.entering;if(J){var Q=z,Y=Q.level,G=Q.headingType;Z.openNode(Z.schema.nodes.heading,P({level:Y,headingType:G},K))}else Z.closeNode()},codeBlock:function(Z,z,X){var K=Z.schema.nodes.codeBlock,J=z,Q=J.info,Y=J.literal;Z.openNode(K,P({language:Q},X)),Z.addText(lZ(Y||"")),Z.closeNode()},list:function(Z,z,X,K){var J=X.entering;if(J){var Q=Z.schema.nodes,Y=Q.bulletList,G=Q.orderedList,U=z.listData,q=U.type,A=U.start;if(q==="bullet")Z.openNode(Y,K);else Z.openNode(G,P({order:A},K))}else Z.closeNode()},item:function(Z,z,X,K){var J=X.entering,Q=Z.schema.nodes.listItem,Y=z.listData,G=Y.task,U=Y.checked;if(J){var q=P(P(P({},G&&{task:G}),U&&{checked:U}),K);Z.openNode(Q,q)}else Z.closeNode()},blockQuote:function(Z,z,X,K){var J=X.entering;if(J)Z.openNode(Z.schema.nodes.blockQuote,K);else Z.closeNode()},image:function(Z,z,X,K){var{entering:J,skipChildren:Q}=X,Y=Z.schema.nodes.image,G=z,U=G.destination,q=G.firstChild;if(J&&Q)Q();Z.addNode(Y,P(P({imageUrl:U},q&&{altText:q.literal}),K))},thematicBreak:function(Z,z,X,K){Z.addNode(Z.schema.nodes.thematicBreak,K)},strong:function(Z,z,X,K){var J=X.entering,Q=Z.schema.marks.strong;if(J)Z.openMark(Q.create(K));else Z.closeMark(Q)},emph:function(Z,z,X,K){var J=X.entering,Q=Z.schema.marks.emph;if(J)Z.openMark(Q.create(K));else Z.closeMark(Q)},link:function(Z,z,X,K){var J=X.entering,Q=Z.schema.marks.link,Y=z,G=Y.destination,U=Y.title;if(J){var q=P({linkUrl:G,title:U},K);Z.openMark(Q.create(q))}else Z.closeMark(Q)},softbreak:function(Z,z){if(z.parent.type==="paragraph"){var{prev:X,next:K}=z;if(X&&!LK(X))Z.closeNode();if(K&&!LK(K))Z.openNode(Z.schema.nodes.paragraph)}},table:function(Z,z,X,K){var J=X.entering;if(J)Z.openNode(Z.schema.nodes.table,K);else Z.closeNode()},tableHead:function(Z,z,X,K){var J=X.entering;if(J)Z.openNode(Z.schema.nodes.tableHead,K);else Z.closeNode()},tableBody:function(Z,z,X,K){var J=X.entering;if(J)Z.openNode(Z.schema.nodes.tableBody,K);else Z.closeNode()},tableRow:function(Z,z,X,K){var J=X.entering;if(J)Z.openNode(Z.schema.nodes.tableRow,K);else Z.closeNode()},tableCell:function(Z,z,X){var K=X.entering;if(!z.ignored){var J=function(H){return H&&(T4(H)||N4(Z,H))};if(K){var Q=Z.schema.nodes,Y=Q.tableHeadCell,G=Q.tableBodyCell,U=Q.paragraph,q=z.parent.parent,A=q.type==="tableHead"?Y:G,V=q.parent,W=(V.columns[z.startIdx]||{}).align,j=P({},z.attrs);if(W)j.align=W;if(Z.openNode(A,j),J(z.firstChild))Z.openNode(U)}else{if(J(z.lastChild))Z.closeNode();Z.closeNode()}}},strike:function(Z,z,X,K){var J=X.entering,Q=Z.schema.marks.strike;if(J)Z.openMark(Q.create(K));else Z.closeMark(Q)},code:function(Z,z,X,K){var J=Z.schema.marks.code;Z.openMark(J.create(K)),Z.addText(lZ(z.literal||"")),Z.closeMark(J)},customBlock:function(Z,z){var X=Z.schema.nodes,K=X.customBlock,J=X.paragraph,Q=z,Y=Q.info,G=Q.literal;if(Z.openNode(K,{info:Y}),Z.addText(lZ(G||"")),Z.closeNode(),!z.next)Z.openNode(J),Z.closeNode()},frontMatter:function(Z,z){Z.openNode(Z.schema.nodes.frontMatter),Z.addText(z.literal),Z.closeNode()},htmlInline:function(Z,z){var X=z.literal,K=X.match(K3),J=K[1],Q=K[3],Y=(J||Q).toLowerCase(),G=Z.schema.marks[Y],U=O8(X);if(G===null||G===void 0?void 0:G.spec.attrs.htmlInline)if(J){var q=C4(U);Z.openMark(G.create({htmlAttrs:q}))}else Z.closeMark(G);else{var A=j10[Y];if(A)A(Z,z,J)}},htmlBlock:function(Z,z){var X=z.literal,K=document.createElement("div"),J=a2.test(X);if(J)Z.openNode(Z.schema.nodes.htmlComment),Z.addText(z.literal),Z.closeNode();else{var Q=X.match(K3),Y=Q[1],G=Q[3],U=(Y||G).toLowerCase(),q=Z.schema.nodes[U],A=O8(X);if(q===null||q===void 0?void 0:q.spec.attrs.htmlBlock){var V=C4(A),W=wQ(z,U);Z.addNode(q,{htmlAttrs:V,childrenHTML:W})}else K.innerHTML=A,XY(K),Z.convertByDOMParser(K)}},customInline:function(Z,z,X){var{entering:K,skipChildren:J}=X,Q=z,Y=Q.info,G=Q.firstChild,U=Z.schema;if(Y.indexOf("widget")!==-1&&K){var q=CJ(z);J(),Z.addNode(U.nodes.widget,{info:Y},[U.text(IJ(Y,q))])}else{var A="$$";if(K)A+=G?Y+" ":Y;Z.addText(A)}}};function R10(Z){var z=Object.keys(Z),X=P({},IK),K=new J7({gfm:!0,nodeId:!0,convertors:Z}),J=K.getConvertors();return z.forEach(function(Q){var Y=IK[Q];if(Y&&!F0(["htmlBlock","htmlInline"],Q))X[Q]=function(G,U,q){q.origin=function(){return J[Q](U,q,J)};var A=Z[Q](U,q),V;if(A){var W=Array.isArray(A)?A[0]:A,j=W.attributes,H=W.classNames;V={htmlAttrs:j,classNames:H}}Y(G,U,q,V)}}),X}function F10(Z,z){if(Z.isText&&z.isText&&h.sameSet(Z.marks,z.marks))return Z.withText(Z.text+z.text);return!1}var B10=function(){function Z(z,X){this.schema=z,this.convertors=X,this.stack=[{type:this.schema.topNodeType,attrs:null,content:[]}],this.marks=h.none}return Z.prototype.top=function(){return C0(this.stack)},Z.prototype.push=function(z){if(this.stack.length)this.top().content.push(z)},Z.prototype.addText=function(z){if(z){var X=this.top().content,K=C0(X),J=this.schema.text(z,this.marks),Q=K&&F10(K,J);if(Q)X[X.length-1]=Q;else X.push(J)}},Z.prototype.openMark=function(z){this.marks=z.addToSet(this.marks)},Z.prototype.closeMark=function(z){this.marks=z.removeFromSet(this.marks)},Z.prototype.addNode=function(z,X,K){var J=z.createAndFill(X,K,this.marks);if(J)return this.push(J),J;return null},Z.prototype.openNode=function(z,X){this.stack.push({type:z,attrs:X,content:[]})},Z.prototype.closeNode=function(){if(this.marks.length)this.marks=h.none;var z=this.stack.pop(),X=z.type,K=z.attrs,J=z.content;return this.addNode(X,K,J)},Z.prototype.convertByDOMParser=function(z){var X=this,K=Z5.fromSchema(this.schema).parse(z);K.content.forEach(function(J){return X.push(J)})},Z.prototype.closeUnmatchedHTMLInline=function(z,X){var K;if(!X&&z.type!=="htmlInline"){var J=this.stack.length-1;for(var Q=J;Q>=0;Q-=1){var Y=this.stack[Q];if((K=Y.attrs)===null||K===void 0?void 0:K.rawHTML)if(Y.content.length)this.closeNode();else this.stack.pop();else break}}},Z.prototype.convert=function(z,X){var K=z.walker(),J=K.next(),Q=function(){var{node:G,entering:U}=J,q=Y.convertors[G.type],A=!1;if(q){var V={entering:U,leaf:!N2(G),getChildrenText:T2,options:{gfm:!0,nodeId:!1,tagFilter:!1,softbreak:`
`},skipChildren:function(){A=!0}};if(Y.closeUnmatchedHTMLInline(G,U),q(Y,G,V),(X===null||X===void 0?void 0:X.node)===G){var W=Y.stack.reduce(function(j,H){return j+H.content.reduce(function(R,F){return R+F.nodeSize},0)},0)+1;X.setMappedPos(W)}}if(A)K.resumeAt(G,!1),K.next();J=K.next()},Y=this;while(J)Q()},Z.prototype.convertNode=function(z,X){if(this.convert(z,X),this.stack.length)return this.closeNode();return null},Z}();function E10(Z,z,X){var K=X[0],J=X[1];Z.write(K),Z.convertInline(z),Z.write(J)}function P10(Z,z,X){var{node:K,parent:J}=z,Q=X[0],Y=X[1];if(Z.stopNewline=!0,Z.write(Q),Z.convertNode(K),Z.write(Y),(J===null||J===void 0?void 0:J.type.name)==="doc")Z.closeBlock(K),Z.stopNewline=!1}function O10(Z,z){var X=Z.length,K="",J="";if(z==="left")K=":",X-=1;else if(z==="right")J=":",X-=1;else if(z==="center")K=":",J=":",X-=2;return""+K+iZ("-",Math.max(X,3))+J}var y4={text:function(Z,z){var X,K=z.node,J=(X=K.text)!==null&&X!==void 0?X:"";if((K.marks||[]).some(function(Q){return Q.type.name==="link"}))Z.text(dZ(J),!1);else Z.text(J)},paragraph:function(Z,z){var{node:X,parent:K,index:J}=z,Q=J===void 0?0:J;if(Z.stopNewline)Z.convertInline(X);else{var Y=Q===0,G=!Y&&K.child(Q-1),U=G&&G.childCount===0,q=Q<K.childCount-1&&K.child(Q+1),A=q&&q.type.name==="paragraph",V=X.childCount===0;if(V&&U)Z.write(`<br>
`);else if(V&&!U&&!Y){if((K===null||K===void 0?void 0:K.type.name)==="listItem"){var W=Z.getDelim();Z.setDelim(""),Z.write("<br>"),Z.setDelim(W)}Z.write(`
`)}else if(Z.convertInline(X),A)Z.write(`
`);else Z.closeBlock(X)}},heading:function(Z,z,X){var K=z.node,J=X.delim,Q=K.attrs.headingType;if(Q==="atx")Z.write(J+" "),Z.convertInline(K),Z.closeBlock(K);else Z.convertInline(K),Z.ensureNewLine(),Z.write(J),Z.closeBlock(K)},codeBlock:function(Z,z,X){var K=z.node,J=X.delim,Q=X.text,Y=J,G=Y[0],U=Y[1];Z.write(G),Z.ensureNewLine(),Z.text(Q,!1),Z.ensureNewLine(),Z.write(U),Z.closeBlock(K)},blockQuote:function(Z,z,X){var{node:K,parent:J}=z,Q=X.delim;if((J===null||J===void 0?void 0:J.type.name)===K.type.name)Z.flushClose(1);Z.wrapBlock(Q,null,K,function(){return Z.convertNode(K)})},bulletList:function(Z,z,X){var K=z.node,J=X.delim;Z.convertList(K,iZ(" ",4),function(){return J+" "})},orderedList:function(Z,z){var X=z.node,K=X.attrs.order||1;Z.convertList(X,iZ(" ",4),function(J){var Q=String(K+J);return Q+". "})},listItem:function(Z,z){var X=z.node,K=X.attrs,J=K.task,Q=K.checked;if(J)Z.write("["+(Q?"x":" ")+"] ");Z.convertNode(X)},image:function(Z,z,X){var K=X.attrs;Z.write("!["+(K===null||K===void 0?void 0:K.altText)+"]("+(K===null||K===void 0?void 0:K.imageUrl)+")")},thematicBreak:function(Z,z,X){var K=z.node,J=X.delim;Z.write(J),Z.closeBlock(K)},table:function(Z,z){var X=z.node;Z.convertNode(X),Z.closeBlock(X)},tableHead:function(Z,z,X){var K=z.node,J=X.delim,Q=K.firstChild;Z.convertNode(K);var Y=J!==null&&J!==void 0?J:"";if(!J&&Q)Q.forEach(function(G){var{textContent:U,attrs:q}=G,A=O10(U,q.align);Y+="| "+A+" "});Z.write(Y+"|"),Z.ensureNewLine()},tableBody:function(Z,z){var X=z.node;Z.convertNode(X)},tableRow:function(Z,z){var X=z.node;Z.convertNode(X),Z.write("|"),Z.ensureNewLine()},tableHeadCell:function(Z,z,X){var K=z.node,J=X.delim,Q=J===void 0?"| ":J;Z.write(Q),Z.convertTableCell(K),Z.write(" ")},tableBodyCell:function(Z,z,X){var K=z.node,J=X.delim,Q=J===void 0?"| ":J;Z.write(Q),Z.convertTableCell(K),Z.write(" ")},customBlock:function(Z,z,X){var K=z.node,J=X.delim,Q=X.text,Y=J,G=Y[0],U=Y[1];Z.write(G),Z.ensureNewLine(),Z.text(Q,!1),Z.ensureNewLine(),Z.write(U),Z.closeBlock(K)},frontMatter:function(Z,z,X){var K=z.node,J=X.text;Z.text(J,!1),Z.closeBlock(K)},widget:function(Z,z,X){var K=X.text;Z.write(K)},html:function(Z,z,X){var K=z.node,J=X.text;if(Z.write(J),K.attrs.htmlBlock)Z.closeBlock(K)},htmlComment:function(Z,z,X){var K=z.node,J=X.text;Z.write(J),Z.closeBlock(K)}};function M10(Z,z){var{state:X,nodeInfo:K,params:J}=z,Q=J.rawHTML;if(Q)if(R8(Z,["heading","codeBlock"])>-1)E10(X,K.node,Q);else if(R8(Z,["image","thematicBreak"])>-1)X.write(Q);else P10(X,K,Q);else y4[Z](X,K,J)}function DK(Z,z){var X=Z.text,K=/`+/g,J=0;if(Z.isText&&X){var Q=K.exec(X);while(Q)J=Math.max(J,Q[0].length),Q=K.exec(X)}var Y=J>0&&z>0?" `":"`";for(var G=0;G<J;G+=1)Y+="`";if(J>0&&z<0)Y+=" ";return Y}function s0(Z){return Z?["<"+Z+">","</"+Z+">"]:null}function v3(Z){return Z?"<"+Z+">":null}function $3(Z){return Z?"</"+Z+">":null}var f3={heading:function(Z){var z=Z.node,X=z.attrs,K=X.level,J=iZ("#",K);if(X.headingType==="setext")J=K===1?"===":"---";return{delim:J,rawHTML:s0(X.rawHTML)}},codeBlock:function(Z){var z=Z.node,X=z,K=X.attrs,J=X.textContent;return{delim:["```"+(K.language||""),"```"],rawHTML:s0(K.rawHTML),text:J}},blockQuote:function(Z){var z=Z.node;return{delim:"> ",rawHTML:s0(z.attrs.rawHTML)}},bulletList:function(Z,z){var X=Z.node,K=z.inTable,J=X.attrs.rawHTML;if(K)J=J||"ul";return{delim:"*",rawHTML:s0(J)}},orderedList:function(Z,z){var X=Z.node,K=z.inTable,J=X.attrs.rawHTML;if(K)J=J||"ol";return{rawHTML:s0(J)}},listItem:function(Z,z){var X=Z.node,K=z.inTable,J=X.attrs,Q=J.task,Y=J.checked,G=X.attrs.rawHTML;if(K)G=G||"li";var U=Q?' class="task-list-item'+(Y?" checked":"")+'"':"",q=Q?" data-task"+(Y?" data-task-checked":""):"";return{rawHTML:G?["<"+G+U+q+">","</"+G+">"]:null}},table:function(Z){var z=Z.node;return{rawHTML:s0(z.attrs.rawHTML)}},tableHead:function(Z){var z=Z.node;return{rawHTML:s0(z.attrs.rawHTML)}},tableBody:function(Z){var z=Z.node;return{rawHTML:s0(z.attrs.rawHTML)}},tableRow:function(Z){var z=Z.node;return{rawHTML:s0(z.attrs.rawHTML)}},tableHeadCell:function(Z){var z=Z.node;return{rawHTML:s0(z.attrs.rawHTML)}},tableBodyCell:function(Z){var z=Z.node;return{rawHTML:s0(z.attrs.rawHTML)}},image:function(Z){var z=Z.node,X=z.attrs,K=X.rawHTML,J=X.altText,Q=X.imageUrl.replace(/&amp;/g,"&"),Y=J?' alt="'+t8(J)+'"':"";return{rawHTML:K?"<"+K+' src="'+t8(Q)+'"'+Y+">":null,attrs:{altText:dZ(J||""),imageUrl:Q}}},thematicBreak:function(Z){var z=Z.node;return{delim:"***",rawHTML:v3(z.attrs.rawHTML)}},customBlock:function(Z){var z=Z.node,X=z,K=X.attrs,J=X.textContent;return{delim:["$$"+K.info,"$$"],text:J}},frontMatter:function(Z){var z=Z.node;return{text:z.textContent}},widget:function(Z){var z=Z.node;return{text:z.textContent}},strong:function(Z,z){var X=Z.node,K=z.entering,J=X.attrs.rawHTML;return{delim:"**",rawHTML:K?v3(J):$3(J)}},emph:function(Z,z){var X=Z.node,K=z.entering,J=X.attrs.rawHTML;return{delim:"*",rawHTML:K?v3(J):$3(J)}},strike:function(Z,z){var X=Z.node,K=z.entering,J=X.attrs.rawHTML;return{delim:"~~",rawHTML:K?v3(J):$3(J)}},link:function(Z,z){var X=Z.node,K=z.entering,J=X.attrs,Q=J.title,Y=J.rawHTML,G=J.linkUrl.replace(/&amp;/g,"&"),U=Q?' title="'+t8(Q)+'"':"";if(K)return{delim:"[",rawHTML:Y?"<"+Y+' href="'+t8(G)+'"'+U+">":null};return{delim:"]("+G+(Q?" "+E2(dZ(Q)):"")+")",rawHTML:$3(Y)}},code:function(Z,z){var{node:X,parent:K,index:J}=Z,Q=J===void 0?0:J,Y=z.entering,G=Y?DK(K.child(Q),-1):DK(K.child(Q-1),1),U=Y?v3(X.attrs.rawHTML):$3(X.attrs.rawHTML);return{delim:G,rawHTML:U}},htmlComment:function(Z){var z=Z.node;return{text:z.textContent}},html:function(Z,z){var X=Z.node,K=z.entering,J=X.type.name,Q=X.attrs.htmlAttrs,Y="<"+J,G="</"+J+">";if(Object.keys(Q).forEach(function(U){Y+=" "+U+'="'+Q[U].replace(/"/g,"'")+'"'}),Y+=">",X.attrs.htmlInline)return{rawHTML:K?Y:G};return{text:""+Y+X.attrs.childrenHTML+G}}},CK={strong:{mixable:!0,removedEnclosingWhitespace:!0},emph:{mixable:!0,removedEnclosingWhitespace:!0},strike:{mixable:!0,removedEnclosingWhitespace:!0},code:{escape:!1},link:null,html:null};function L10(Z){var z={},X=Object.keys(y4);return X.forEach(function(K){z[K]=function(J,Q){var Y=y4[K];if(Y){var G=Z[K],U=G?G(Q,{inTable:J.inTable}):{};M10(K,{state:J,nodeInfo:Q,params:U})}}}),z}function I10(Z){var z={},X=Object.keys(CK);return X.forEach(function(K){z[K]=function(J,Q){var Y=CK[K],G=Z[K],U=G&&J&&!o0(Q),q=U?G(J,{entering:Q}):{};return P(P({},q),Y)}}),z}function D10(Z){var z=Object.keys(Z);z.forEach(function(J){var Q=f3[J],Y=Z[J];if(Q)f3[J]=function(G,U){return U.origin=function(){return Q(G,U)},Y(G,U)};else f3[J]=Y;delete Z[J]});var X=L10(f3),K=I10(f3);return{nodeTypeConvertors:X,markTypeConvertors:K}}var C10=function(){function Z(z){var{nodeTypeConvertors:X,markTypeConvertors:K}=z;this.nodeTypeConvertors=X,this.markTypeConvertors=K,this.delim="",this.result="",this.closed=!1,this.tightList=!1,this.stopNewline=!1,this.inTable=!1}return Z.prototype.getMarkConvertor=function(z){var X=z.attrs.htmlInline?"html":z.type.name;return this.markTypeConvertors[X]},Z.prototype.isInBlank=function(){return/(^|\n)$/.test(this.result)},Z.prototype.markText=function(z,X,K,J){var Q=this.getMarkConvertor(z);if(Q){var Y=Q({node:z,parent:K,index:J},X),G=Y.delim,U=Y.rawHTML;return U||G}return""},Z.prototype.setDelim=function(z){this.delim=z},Z.prototype.getDelim=function(){return this.delim},Z.prototype.flushClose=function(z){if(!this.stopNewline&&this.closed){if(!this.isInBlank())this.result+=`
`;if(!z)z=2;if(z>1){var X=this.delim,K=/\s+$/.exec(X);if(K)X=X.slice(0,X.length-K[0].length);for(var J=1;J<z;J+=1)this.result+=X+`
`}this.closed=!1}},Z.prototype.wrapBlock=function(z,X,K,J){var Q=this.getDelim();this.write(X||z),this.setDelim(this.getDelim()+z),J(),this.setDelim(Q),this.closeBlock(K)},Z.prototype.ensureNewLine=function(){if(!this.isInBlank())this.result+=`
`},Z.prototype.write=function(z){if(z===void 0)z="";if(this.flushClose(),this.delim&&this.isInBlank())this.result+=this.delim;if(z)this.result+=z},Z.prototype.closeBlock=function(z){this.closed=z},Z.prototype.text=function(z,X){if(X===void 0)X=!0;var K=z.split(`
`);for(var J=0;J<K.length;J+=1)if(this.write(),this.result+=X?B2(K[J]):K[J],J!==K.length-1)this.result+=`
`},Z.prototype.convertBlock=function(z,X,K){var J=z.type.name,Q=this.nodeTypeConvertors[J],Y={node:z,parent:X,index:K};if(z.attrs.htmlBlock)this.nodeTypeConvertors.html(this,Y);else if(Q)Q(this,Y)},Z.prototype.convertInline=function(z){var X=this,K=[],J="",Q=function(Y,G,U){var q=Y?Y.marks:[],A=J;J="";var V=Y&&Y.isText&&q.some(function(c){var r=X.getMarkConvertor(c),g0=r&&r();return g0&&g0.removedEnclosingWhitespace});if(V&&Y&&Y.text){var W=/^(\s*)(.*?)(\s*)$/m.exec(Y.text),j=W[1],H=W[2],R=W[3];if(A+=j,J=R,j||R){if(Y=H?Y.withText(H):null,!Y)q=K}}var F=q.length&&C0(q),B=F&&X.getMarkConvertor(F),O=B&&B(),M=O&&O.escape===!1,I=q.length-(M?1:0);for(var D=0;D<I;D+=1){var H=q[D];if(O&&!O.mixable)break;for(var b=0;b<K.length;b+=1){var x=K[b];if(O&&!O.mixable)break;if(H.eq(x)){if(D>b)q=q.slice(0,b).concat(H).concat(q.slice(b,D)).concat(q.slice(D+1,I));else if(b>D)q=q.slice(0,D).concat(q.slice(D+1,b)).concat(H).concat(q.slice(b,I));break}}}var u=0;while(u<Math.min(K.length,I)&&q[u].eq(K[u]))u+=1;while(u<K.length){var T=K.pop();if(T)X.text(X.markText(T,!1,z,U),!1)}if(A)X.text(A);if(Y){while(K.length<I){var H=q[K.length];K.push(H),X.text(X.markText(H,!0,z,U),!1)}if(M&&Y.isText)X.text(X.markText(F,!0,z,U)+Y.text+X.markText(F,!1,z,U+1),!1);else X.convertBlock(Y,z,U)}};z.forEach(Q),Q(null,null,z.childCount)},Z.prototype.convertList=function(z,X,K){var J=this,Q;if(this.closed&&this.closed.type===z.type)this.flushClose(3);else if(this.tightList)this.flushClose(1);var Y=(Q=z.attrs.tight)!==null&&Q!==void 0?Q:!0,G=this.tightList;this.tightList=Y,z.forEach(function(U,q,A){if(A&&Y)J.flushClose(1);J.wrapBlock(X,K(A),z,function(){return J.convertBlock(U,z,A)})}),this.tightList=G},Z.prototype.convertTableCell=function(z){var X=this;this.stopNewline=!0,this.inTable=!0,z.forEach(function(K,J,Q){if(F0(["bulletList","orderedList"],K.type.name))X.convertBlock(K,z,Q),X.closed=!1;else if(X.convertInline(K),Q<z.childCount-1){var Y=z.child(Q+1);if(Y.type.name==="paragraph")X.write("<br>")}}),this.stopNewline=!1,this.inTable=!1},Z.prototype.convertNode=function(z,X){var K=this;return z.forEach(function(J,Q,Y){if(K.convertBlock(J,z,Y),(X===null||X===void 0?void 0:X.node)===J){var G=K.result.split(`
`);X.setMappedPos([G.length,C0(G).length+1])}}),this.result},Z}(),S10=function(){function Z(z,X,K,J){var Q=this;this.setMappedPos=function(Y){Q.mappedPosWhenConverting=Y},this.schema=z,this.eventEmitter=J,this.focusedNode=null,this.mappedPosWhenConverting=null,this.toWwConvertors=R10(K),this.toMdConvertors=D10(X||{}),this.eventEmitter.listen("setFocusedNode",function(Y){return Q.focusedNode=Y})}return Z.prototype.getMappedPos=function(){return this.mappedPosWhenConverting},Z.prototype.getInfoForPosSync=function(){return{node:this.focusedNode,setMappedPos:this.setMappedPos}},Z.prototype.toWysiwygModel=function(z){var X=new B10(this.schema,this.toWwConvertors);return X.convertNode(z,this.getInfoForPosSync())},Z.prototype.toMarkdownText=function(z){var X=new C10(this.toMdConvertors),K=X.convertNode(z,this.getInfoForPosSync());return K=this.eventEmitter.emitReduce("beforeConvertWysiwygToMarkdown",K),K},Z}();function b10(Z){var{plugin:z,eventEmitter:X,usageStatistics:K,instance:J}=Z,Q={Plugin:X0,PluginKey:v5,Selection:$,TextSelection:_},Y={Decoration:k0,DecorationSet:o},G={Fragment:L},U={InputRule:J5,inputRules:g9,undoInputRule:zX},q={keymap:p8},A={eventEmitter:X,usageStatistics:K,instance:J,pmState:Q,pmView:Y,pmModel:G,pmRules:U,pmKeymap:q,i18n:v};if(A3(z)){var V=z[0],W=z[1],j=W===void 0?{}:W;return V(A,j)}return z(A)}function KY(Z){var{plugins:z,eventEmitter:X,usageStatistics:K,instance:J}=Z;return X.listen("mixinTableOffsetMapPrototype",Q30),(z!==null&&z!==void 0?z:[]).reduce(function(Q,Y){var G=b10({plugin:Y,eventEmitter:X,usageStatistics:K,instance:J});if(!G)throw new Error("The return value of the executed plugin is empty.");var{markdownParsers:U,toHTMLRenderers:q,toMarkdownRenderers:A,markdownPlugins:V,wysiwygPlugins:W,wysiwygNodeViews:j,markdownCommands:H,wysiwygCommands:R,toolbarItems:F}=G;if(q)Q.toHTMLRenderers=sZ(Q.toHTMLRenderers,q);if(A)Q.toMarkdownRenderers=sZ(Q.toMarkdownRenderers,A);if(V)Q.mdPlugins=Q.mdPlugins.concat(V);if(W)Q.wwPlugins=Q.wwPlugins.concat(W);if(j)Q.wwNodeViews=P(P({},Q.wwNodeViews),j);if(H)Q.mdCommands=P(P({},Q.mdCommands),H);if(R)Q.wwCommands=P(P({},Q.wwCommands),R);if(F)Q.toolbarItems=Q.toolbarItems.concat(F);if(U)Q.markdownParsers=P(P({},Q.markdownParsers),U);return Q},{toHTMLRenderers:{},toMarkdownRenderers:{},mdPlugins:[],wwPlugins:[],wwNodeViews:{},mdCommands:{},wwCommands:{},toolbarItems:[],markdownParsers:{}})}var k10="data-task",N10="data-task-disabled",T10="checked";function y10(Z){["htmlBlock","htmlInline"].forEach(function(z){if(Z[z])Object.keys(Z[z]).forEach(function(X){return gQ(X)})})}var JY=function(){function Z(z){var X=this;this.options=w4({linkAttributes:null,extendedAutolinks:!1,customHTMLRenderer:null,referenceDefinition:!1,customHTMLSanitizer:null,frontMatter:!1,usageStatistics:!0,theme:"light"},z),this.eventEmitter=new zY;var K=OJ(this.options.linkAttributes),J=KY({plugins:this.options.plugins,eventEmitter:this.eventEmitter,usageStatistics:this.options.usageStatistics,instance:this})||{},Q=J.toHTMLRenderers,Y=J.markdownParsers,G=this.options,U=G.customHTMLRenderer,q=G.extendedAutolinks,A=G.referenceDefinition,V=G.frontMatter,W=G.customHTMLSanitizer,j={linkAttributes:K,customHTMLRenderer:P(P({},Q),U),extendedAutolinks:q,referenceDefinition:A,frontMatter:V,sanitizer:W||O8};if(y10(j.customHTMLRenderer),this.options.events)Z3(this.options.events,function(M,I){X.on(I,M)});var H=this.options,R=H.el,F=H.initialValue,B=H.theme,O=R.innerHTML;if(B!=="light")R.classList.add(N(B));if(R.innerHTML="",this.toastMark=new NQ("",{disallowedHtmlBlockTags:["br","img"],extendedAutolinks:q,referenceDefinition:A,disallowDeepHeading:!0,frontMatter:V,customParser:Y}),this.preview=new vQ(this.eventEmitter,P(P({},j),{isViewer:!0})),oJ(this.preview.previewContent,"mousedown",this.toggleTask.bind(this)),F)this.setMarkdown(F);else if(O)this.preview.setHTML(O);R.appendChild(this.preview.previewContent),this.eventEmitter.emit("load",this)}return Z.prototype.toggleTask=function(z){var X=z.target,K=getComputedStyle(X,":before");if(!X.hasAttribute(N10)&&X.hasAttribute(k10)&&c4(K,z.offsetX,z.offsetY))p4(X,T10),this.eventEmitter.emit("change",{source:"viewer",date:z})},Z.prototype.setMarkdown=function(z){var X=this.toastMark.getLineTexts(),K=X.length,J=C0(X),Q=[K,J.length+1],Y=this.toastMark.editMarkdown([1,1],Q,z||"");this.eventEmitter.emit("updatePreview",Y)},Z.prototype.on=function(z,X){this.eventEmitter.listen(z,X)},Z.prototype.off=function(z){this.eventEmitter.removeEventHandler(z)},Z.prototype.addHook=function(z,X){this.eventEmitter.removeEventHandler(z),this.eventEmitter.listen(z,X)},Z.prototype.destroy=function(){rJ(this.preview.el,"mousedown",this.toggleTask.bind(this)),this.preview.destroy(),this.eventEmitter.emit("destroy")},Z.prototype.isViewer=function(){return!0},Z.prototype.isMarkdownMode=function(){return!1},Z.prototype.isWysiwygMode=function(){return!1},Z}();function cZ(Z){return Z instanceof v0}function QY(Z){var z=["document","blockQuote","bulletList","orderedList","listItem","paragraph","heading","emph","strong","strike","link","image","table","tableHead","tableBody","tableRow","tableHeadCell","tableBodyCell"];return F0(z,Z)}function x10(Z){var{attrs:z,type:X}=Z,K=X.name,J={type:K,wysiwygNode:!0,literal:!QY(K)&&cZ(Z)?Z.textContent:null},Q={heading:{level:z.level},link:{destination:z.linkUrl,title:z.title},image:{destination:z.imageUrl},codeBlock:{info:z.language},bulletList:{type:"list",listData:{type:"bullet"}},orderedList:{type:"list",listData:{type:"ordered",start:z.order}},listItem:{type:"item",listData:{task:z.task,checked:z.checked}},tableHeadCell:{type:"tableCell",cellType:"head",align:z.align},tableBodyCell:{type:"tableCell",cellType:"body",align:z.align},customBlock:{info:z.info}},Y=Q[K],G=P(P({},J),Y),U=Z.attrs,q=U.htmlAttrs,A=U.childrenHTML;if(q)return P(P({},G),{attrs:q,childrenHTML:A});return G}var g10={openTag:function(Z,z){var X=Z,K=X.tagName,J=X.classNames,Q=X.attributes,Y=document.createElement(K),G={};if(J)Y.className=J.join(" ");if(Q)G=P(P({},G),Q);d4(G,Y),z.push(Y)},closeTag:function(Z,z){if(z.length>1){var X=z.pop();C0(z).appendChild(X)}},html:function(Z,z){C0(z).insertAdjacentHTML("beforeend",Z.content)},text:function(Z,z){var X=document.createTextNode(Z.content);C0(z).appendChild(X)}},w10=function(){function Z(z,X){var K=Q7(z,X),J=P(P({},X.htmlBlock),X.htmlInline);this.customConvertorKeys=Object.keys(X).concat(Object.keys(J)),this.renderer=new J7({gfm:!0,convertors:P(P({},K),J)}),this.convertors=this.renderer.getConvertors()}return Z.prototype.generateTokens=function(z){var X=x10(z),K={entering:!0,leaf:cZ(z)?z.isLeaf:!1,options:this.renderer.getOptions(),getChildrenText:function(){return cZ(z)?z.textContent:""},skipChildren:function(){return!1}},J=this.convertors[z.type.name],Q=J(X,K,this.convertors),Y=A3(Q)?Q:[Q];if(QY(z.type.name)||z.attrs.htmlInline)K.entering=!1,Y.push({type:"text",content:cZ(z)?z.textContent:""}),Y=Y.concat(J(X,K,this.convertors));return Y},Z.prototype.toDOMNode=function(z){var X=this.generateTokens(z),K=[];return X.forEach(function(J){return g10[J.type](J,K)}),K[0]},Z.prototype.getToDOMNode=function(z){if(F0(this.customConvertorKeys,z))return this.toDOMNode.bind(this);return null},Z}(),u10=100,v10=15,vZ=null,Q4=null;function SK(Z,z){var{syncScrollTop:X,releaseEventBlock:K}=z;if(Q4)clearTimeout(Q4);X(Z),Q4=setTimeout(function(){K()},v10)}function $10(Z,z,X){var K=z-Z,J=Date.now(),Q=function(){var Y=Date.now(),G=(Y-J)/u10,U;if(vZ)clearTimeout(vZ);if(G<1)U=Z+K*Math.cos((1-G)*Math.PI/2),SK(Math.ceil(U),X),vZ=setTimeout(Q,1);else SK(z,X),vZ=null};Q()}var f10=18,h10=function(){function Z(z,X,K){this.latestEditorScrollTop=null,this.latestPreviewScrollTop=null,this.blockedScroll=null,this.active=!0,this.timer=null;var{previewContent:J,el:Q}=X;this.previewRoot=J,this.previewEl=Q,this.mdEditor=z,this.editorView=z.view,this.toastMark=z.getToastMark(),this.eventEmitter=K,this.addScrollSyncEvent()}return Z.prototype.addScrollSyncEvent=function(){var z=this;this.eventEmitter.listen("afterPreviewRender",function(){z.clearTimer(),z.timer=setTimeout(function(){z.syncPreviewScrollTop(!0)},200)}),this.eventEmitter.listen("scroll",function(X,K){if(z.active){if(X==="editor"&&z.blockedScroll!=="editor")z.syncPreviewScrollTop();else if(X==="preview"&&z.blockedScroll!=="preview")z.syncEditorScrollTop(K)}}),this.eventEmitter.listen("toggleScrollSync",function(X){z.active=X})},Z.prototype.getMdNodeAtPos=function(z,X){var K=z.content.findIndex(X.pos),J=K.index;return this.toastMark.findFirstNodeAtLine(J+1)},Z.prototype.getScrollTopByCaretPos=function(){var z=this.mdEditor.getSelection(),X=this.toastMark.findFirstNodeAtLine(z[0][0]),K=this.previewEl.clientHeight,J=z4(this.previewRoot,X).el,Q=K1(J,this.previewRoot)||J.offsetTop,Y=J.clientHeight,G=Q+Y-K*0.5;this.latestEditorScrollTop=null;var U=J.getBoundingClientRect().top-this.previewEl.getBoundingClientRect().top;return U<K?null:G},Z.prototype.syncPreviewScrollTop=function(z){if(z===void 0)z=!1;var X=this,K=X.editorView,J=X.previewEl,Q=X.previewRoot,Y=K.dom.getBoundingClientRect(),G=Y.left,U=Y.top,q=K.posAtCoords({left:G,top:U}),A=K.state.doc,V=this.getMdNodeAtPos(A,q);if(!V||L2(V))return;var W=J.scrollTop,j=K.dom,H=j.scrollTop,R=j.scrollHeight,F=j.clientHeight,B=j.children,O=R-H<=F+f10,M=O?J.scrollHeight:0;if(H&&!O){if(z){var I=this.getScrollTopByCaretPos();if(!I)return;M=I}else{var D=z4(this.previewRoot,V),b=D.el,x=D.mdNode,u=VK(A,x,B),T=u.height,c=u.rect,r=K1(b,Q)||b.offsetTop,g0=b.clientHeight,d3=U>c.top?Math.min((U-c.top)/T,1):0;M=r+g0*d3}M=this.getResolvedScrollTop("editor",H,M,W),this.latestEditorScrollTop=H}if(M!==W)this.run("editor",M,W)},Z.prototype.syncEditorScrollTop=function(z){var X=this,K=X.toastMark,J=X.editorView,Q=X.previewRoot,Y=X.previewEl,G=J.dom,U=J.state,q=Y.scrollTop,A=Y.clientHeight,V=Y.scrollHeight,W=V-q<=A,j=G.scrollTop,H=W?G.scrollHeight:0;if(q&&z&&!W){if(z=u80(z,Q),!z.getAttribute("data-nodeid"))return;var R=G.children,F=Number(z.getAttribute("data-nodeid")),B=z4(this.previewRoot,K.findNodeById(F)),O=B.mdNode,M=B.el,I=p3(O);H=R[I-1].offsetTop;var D=VK(U.doc,O,R).height,b=c80(M,Q,F),x=b.nodeHeight,u=b.offsetTop;H+=$80(q,u,x,D),H=this.getResolvedScrollTop("preview",q,H,j),this.latestPreviewScrollTop=q}if(H!==j)this.run("preview",H,j)},Z.prototype.getResolvedScrollTop=function(z,X,K,J){var Q=z==="editor"?this.latestEditorScrollTop:this.latestPreviewScrollTop;if(Q===null)return K;return Q<X?Math.max(K,J):Math.min(K,J)},Z.prototype.run=function(z,X,K){var J=this,Q;if(z==="editor")Q=this.previewEl,this.blockedScroll="preview";else Q=this.editorView.dom,this.blockedScroll="editor";var Y={syncScrollTop:function(G){return Q.scrollTop=G},releaseEventBlock:function(){return J.blockedScroll=null}};$10(K,X,Y)},Z.prototype.clearTimer=function(){if(this.timer)clearTimeout(this.timer),this.timer=null},Z.prototype.destroy=function(){this.clearTimer(),this.eventEmitter.removeEventHandler("scroll"),this.eventEmitter.removeEventHandler("afterPreviewRender")},Z}(),_10={getPopupInitialValues:function(Z,z){var X=z.popupName;return X==="link"?{linkText:Z.getSelectedText()}:{}}};function m10(Z){Z.eventEmitter.listen("query",function(z,X){return _10[z](Z,X)})}var YY=function(){function Z(z){var X=this;this.initialHTML=z.el.innerHTML,z.el.innerHTML="",this.options=w4({previewStyle:"tab",previewHighlight:!0,initialEditType:"markdown",height:"300px",minHeight:"200px",language:"en-US",useCommandShortcut:!0,usageStatistics:!0,toolbarItems:[["heading","bold","italic","strike"],["hr","quote"],["ul","ol","task","indent","outdent"],["table","image","link"],["code","codeblock"],["scrollSync"]],hideModeSwitch:!1,linkAttributes:null,extendedAutolinks:!1,customHTMLRenderer:null,customMarkdownRenderer:null,referenceDefinition:!1,customHTMLSanitizer:null,frontMatter:!1,widgetRules:[],theme:"light",autofocus:!0},z);var K=this.options,J=K.customHTMLRenderer,Q=K.extendedAutolinks,Y=K.referenceDefinition,G=K.frontMatter,U=K.customMarkdownRenderer,q=K.useCommandShortcut,A=K.initialEditType,V=K.widgetRules,W=K.customHTMLSanitizer;this.mode=A||"markdown",this.mdPreviewStyle=this.options.previewStyle,this.i18n=v,this.i18n.setCode(this.options.language),this.eventEmitter=new zY,x2(V);var j=OJ(this.options.linkAttributes);this.pluginInfo=KY({plugins:this.options.plugins,eventEmitter:this.eventEmitter,usageStatistics:this.options.usageStatistics,instance:this});var H=this.pluginInfo,R=H.toHTMLRenderers,F=H.toMarkdownRenderers,B=H.mdPlugins,O=H.wwPlugins,M=H.wwNodeViews,I=H.mdCommands,D=H.wwCommands,b=H.markdownParsers,x={linkAttributes:j,customHTMLRenderer:sZ(R,J),extendedAutolinks:Q,referenceDefinition:Y,frontMatter:G,sanitizer:W||O8},u=new w10(j,x.customHTMLRenderer),T=k80(x.customHTMLRenderer,x.sanitizer,u);if(this.toastMark=new NQ("",{disallowedHtmlBlockTags:["br","img"],extendedAutolinks:Q,referenceDefinition:Y,disallowDeepHeading:!0,frontMatter:G,customParser:b}),this.mdEditor=new wV(this.eventEmitter,{toastMark:this.toastMark,useCommandShortcut:q,mdPlugins:B}),this.preview=new vQ(this.eventEmitter,P(P({},x),{isViewer:!1,highlight:this.options.previewHighlight})),this.wwEditor=new eZ0(this.eventEmitter,{toDOMAdaptor:u,useCommandShortcut:q,htmlSchemaMap:T,linkAttributes:j,wwPlugins:O,wwNodeViews:M}),this.convertor=new S10(this.wwEditor.getSchema(),P(P({},F),U),Q7(j,x.customHTMLRenderer),this.eventEmitter),this.setMinHeight(this.options.minHeight),this.setHeight(this.options.height),this.setMarkdown(this.options.initialValue,!1),this.options.placeholder)this.setPlaceholder(this.options.placeholder);if(!this.options.initialValue)this.setHTML(this.initialHTML,!1);if(this.commandManager=new A10(this.eventEmitter,this.mdEditor.commands,this.wwEditor.commands,function(){return X.mode}),this.options.usageStatistics)H2();if(this.scrollSync=new h10(this.mdEditor,this.preview,this.eventEmitter),this.addInitEvent(),this.addInitCommand(I,D),m10(this),this.options.hooks)Z3(this.options.hooks,function(c,r){return X.addHook(r,c)});if(this.options.events)Z3(this.options.events,function(c,r){return X.on(r,c)});this.eventEmitter.emit("load",this),this.moveCursorToStart(this.options.autofocus)}return Z.prototype.addInitEvent=function(){var z=this;this.on("needChangeMode",this.changeMode.bind(this)),this.on("loadUI",function(){if(z.height!=="auto"){var X=Math.min(parseInt(z.minHeight,10),parseInt(z.height,10)-75)+"px";z.setMinHeight(X)}}),JA(this.eventEmitter)},Z.prototype.addInitCommand=function(z,X){var K=this,J=function(Q,Y){Object.keys(Y).forEach(function(G){K.addCommand(Q,G,Y[G])})};this.addCommand("markdown","toggleScrollSync",function(Q){return K.eventEmitter.emit("toggleScrollSync",Q.active),!0}),J("markdown",z),J("wysiwyg",X)},Z.prototype.getCurrentModeEditor=function(){return this.isMarkdownMode()?this.mdEditor:this.wwEditor},Z.factory=function(z){return z.viewer?new JY(z):new Z(z)},Z.setLanguage=function(z,X){v.setLanguage(z,X)},Z.prototype.changePreviewStyle=function(z){if(this.mdPreviewStyle!==z)this.mdPreviewStyle=z,this.eventEmitter.emit("changePreviewStyle",z)},Z.prototype.exec=function(z,X){this.commandManager.exec(z,X)},Z.prototype.addCommand=function(z,X,K){var J=this,Q=function(Y){if(Y===void 0)Y={};var G=(z==="markdown"?J.mdEditor:J.wwEditor).view;K(Y,G.state,G.dispatch,G)};this.commandManager.addCommand(z,X,Q)},Z.prototype.on=function(z,X){this.eventEmitter.listen(z,X)},Z.prototype.off=function(z){this.eventEmitter.removeEventHandler(z)},Z.prototype.addHook=function(z,X){this.eventEmitter.removeEventHandler(z),this.eventEmitter.listen(z,X)},Z.prototype.removeHook=function(z){this.eventEmitter.removeEventHandler(z)},Z.prototype.focus=function(){this.getCurrentModeEditor().focus()},Z.prototype.blur=function(){this.getCurrentModeEditor().blur()},Z.prototype.moveCursorToEnd=function(z){if(z===void 0)z=!0;this.getCurrentModeEditor().moveCursorToEnd(z)},Z.prototype.moveCursorToStart=function(z){if(z===void 0)z=!0;this.getCurrentModeEditor().moveCursorToStart(z)},Z.prototype.setMarkdown=function(z,X){if(z===void 0)z="";if(X===void 0)X=!0;if(this.mdEditor.setMarkdown(z,X),this.isWysiwygMode()){var K=this.toastMark.getRootNode(),J=this.convertor.toWysiwygModel(K);this.wwEditor.setModel(J,X)}},Z.prototype.setHTML=function(z,X){if(z===void 0)z="";if(X===void 0)X=!0;var K=document.createElement("div");K.innerHTML=zA(z);var J=Z5.fromSchema(this.wwEditor.schema).parse(K);if(this.isMarkdownMode())this.mdEditor.setMarkdown(this.convertor.toMarkdownText(J),X);else this.wwEditor.setModel(J,X)},Z.prototype.getMarkdown=function(){if(this.isMarkdownMode())return this.mdEditor.getMarkdown();return this.convertor.toMarkdownText(this.wwEditor.getModel())},Z.prototype.getHTML=function(){var z=this;this.eventEmitter.holdEventInvoke(function(){if(z.isMarkdownMode()){var J=z.toastMark.getRootNode(),Q=z.convertor.toWysiwygModel(J);z.wwEditor.setModel(Q)}});var X=s4(this.wwEditor.view.dom.innerHTML);if(this.placeholder){var K=new RegExp('<span class="placeholder[^>]+>'+this.placeholder+"</span>","i");return X.replace(K,"")}return X},Z.prototype.insertText=function(z){this.getCurrentModeEditor().replaceSelection(z)},Z.prototype.setSelection=function(z,X){this.getCurrentModeEditor().setSelection(z,X)},Z.prototype.replaceSelection=function(z,X,K){this.getCurrentModeEditor().replaceSelection(z,X,K)},Z.prototype.deleteSelection=function(z,X){this.getCurrentModeEditor().deleteSelection(z,X)},Z.prototype.getSelectedText=function(z,X){return this.getCurrentModeEditor().getSelectedText(z,X)},Z.prototype.getRangeInfoOfNode=function(z){return this.getCurrentModeEditor().getRangeInfoOfNode(z)},Z.prototype.addWidget=function(z,X,K){this.getCurrentModeEditor().addWidget(z,X,K)},Z.prototype.replaceWithWidget=function(z,X,K){this.getCurrentModeEditor().replaceWithWidget(z,X,K)},Z.prototype.setHeight=function(z){var X=this.options.el;if(k5(z)){if(z==="auto")U5(X,"auto-height");else n0(X,"auto-height");this.setMinHeight(this.getMinHeight())}A5(X,{height:z}),this.height=z},Z.prototype.getHeight=function(){return this.height},Z.prototype.setMinHeight=function(z){if(z!==this.minHeight){var X=this.height||this.options.height;if(X!=="auto"&&this.options.el.querySelector("."+N("main")))z=Math.min(parseInt(z,10),parseInt(X,10)-75)+"px";var K=parseInt(z,10);this.minHeight=z,this.wwEditor.setMinHeight(K),this.mdEditor.setMinHeight(K),this.preview.setMinHeight(K)}},Z.prototype.getMinHeight=function(){return this.minHeight},Z.prototype.isMarkdownMode=function(){return this.mode==="markdown"},Z.prototype.isWysiwygMode=function(){return this.mode==="wysiwyg"},Z.prototype.isViewer=function(){return!1},Z.prototype.getCurrentPreviewStyle=function(){return this.mdPreviewStyle},Z.prototype.changeMode=function(z,X){if(this.mode===z)return;if(this.mode=z,this.isWysiwygMode()){var K=this.toastMark.getRootNode(),J=this.convertor.toWysiwygModel(K);this.wwEditor.setModel(J)}else{var J=this.wwEditor.getModel();this.mdEditor.setMarkdown(this.convertor.toMarkdownText(J),!X)}if(this.eventEmitter.emit("removePopupWidget"),this.eventEmitter.emit("changeMode",z),!X){var Q=this.convertor.getMappedPos();if(this.focus(),this.isWysiwygMode()&&I5(Q))this.wwEditor.setSelection(Q);else if(Array.isArray(Q))this.mdEditor.setSelection(Q)}},Z.prototype.destroy=function(){var z=this;this.wwEditor.destroy(),this.mdEditor.destroy(),this.preview.destroy(),this.scrollSync.destroy(),this.eventEmitter.emit("destroy"),this.eventEmitter.getEvents().forEach(function(X,K){return z.off(K)})},Z.prototype.hide=function(){this.eventEmitter.emit("hide")},Z.prototype.show=function(){this.eventEmitter.emit("show")},Z.prototype.setScrollTop=function(z){this.getCurrentModeEditor().setScrollTop(z)},Z.prototype.getScrollTop=function(){return this.getCurrentModeEditor().getScrollTop()},Z.prototype.reset=function(){this.wwEditor.setModel([]),this.mdEditor.setMarkdown("")},Z.prototype.getSelection=function(){return this.getCurrentModeEditor().getSelection()},Z.prototype.setPlaceholder=function(z){this.placeholder=z,this.mdEditor.setPlaceholder(z),this.wwEditor.setPlaceholder(z)},Z.prototype.getEditorElements=function(){return{mdEditor:this.mdEditor.getElement(),mdPreview:this.preview.getElement(),wwEditor:this.wwEditor.getElement()}},Z.prototype.convertPosToMatchEditorMode=function(z,X,K){var J,Q;if(X===void 0)X=z;if(K===void 0)K=this.mode;var Y=this.mdEditor.view.state.doc,G=Array.isArray(z),U=Array.isArray(X),q=z,A=X;if(G!==U)throw new Error("Types of arguments must be same");if(K==="markdown"&&!G&&!U)J=$Z(Y,z,X),q=J[0],A=J[1];else if(K==="wysiwyg"&&G&&U)Q=H8(Y,z,X),q=Q[0],A=Q[1];return[q,A]},Z}();function l10(Z){for(var z,X,K=arguments,J=1,Q="",Y="",G=[0],U=function(A){J===1&&(A||(Q=Q.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?G.push(A?K[A]:Q):J===3&&(A||Q)?(G[1]=A?K[A]:Q,J=2):J===2&&Q==="..."&&A?G[2]=_4(G[2]||{},K[A]):J===2&&Q&&!A?(G[2]=G[2]||{})[Q]=!0:J>=5&&(J===5?((G[2]=G[2]||{})[X]=A?Q?Q+K[A]:K[A]:Q,J=6):(A||Q)&&(G[2][X]+=A?Q+K[A]:Q)),Q=""},q=0;q<Z.length;q++){q&&(J===1&&U(),U(q));for(let A=0;A<Z[q].length;A++)z=Z[q][A],J===1?z==="<"?(U(),G=[G,"",null],J=3):Q+=z:J===4?Q==="--"&&z===">"?(J=1,Q=""):Q=z+Q[0]:Y?z===Y?Y="":Q+=z:z==='"'||z==="'"?Y=z:z===">"?(U(),J=1):J&&(z==="="?(J=5,X=Q,Q=""):z==="/"&&(J<5||Z[q][A+1]===">")?(U(),J===3&&(G=G[0]),J=G,(G=G[0]).push(this.apply(null,J.slice(1))),J=0):z===" "||z==="\t"||z===`
`||z==="\r"?(U(),J=2):Q+=z),J===3&&Q==="!--"&&(J=4,G=G[0])}return U(),G.length>2?G.slice(1):G[1]}function c10(Z){return typeof Z==="boolean"||Z instanceof Boolean}var p10=c10,i10=function(){function Z(z){this.current=z,this.root=z,this.entering=!0}return Z.prototype.walk=function(){var z=this,X=z.entering,K=z.current;if(!K)return null;if(X)if(K.firstChild)this.current=K.firstChild,this.entering=!0;else this.entering=!1;else if(K===this.root)this.current=null;else if(K.next)this.current=K.next,this.entering=!0;else this.current=K.parent,this.entering=!1;return{vnode:K,entering:X}},Z}(),r0=function(){function Z(z,X,K){if(this.parent=null,this.old=null,this.firstChild=null,this.next=null,this.skip=!1,this.type=z,this.props=X,this.children=K,this.props.children=K,X.ref)this.ref=X.ref,delete X.ref;if(X.key)this.key=X.key,delete X.key}return Z.prototype.walker=function(){return new i10(this)},Z.removalNodes=[],Z}();function d10(Z){return new r0("TEXT_NODE",{nodeValue:Z},[])}function bK(Z,z){var X=Z;if(p10(Z)||Z==null)X=null;else if(k5(Z)||I5(Z))X=d10(String(Z));if(X)z.push(X)}function s10(Z,z){var X=[];for(var K=2;K<arguments.length;K++)X[K-2]=arguments[K];var J=[];return X.forEach(function(Q){if(Array.isArray(Q))Q.forEach(function(Y){bK(Y,J)});else bK(Q,J)}),new r0(Z,z||{},J)}var l=l10.bind(s10);function n10(Z){return Z===Object(Z)}var a10=n10;function r10(Z){var z;if(Z.type==="TEXT_NODE")z=document.createTextNode(Z.props.nodeValue);else z=document.createElement(Z.type),UY(z,{},Z.props);return z}function GY(Z,z){if(Z.node)z.removeChild(Z.node);else GY(Z.firstChild,z)}function o10(Z,z,X){Object.keys(z).forEach(function(K){if(/^on/.test(K)){if(!X[K]||z[K]!==X[K]){var J=K.slice(2).toLowerCase();Z.removeEventListener(J,z[K])}}else if(K!=="children"&&!X[K]&&!r2(Z))Z.removeAttribute(K)}),UY(Z,z,X,function(K){return!v4(z[K],X[K])})}var t10=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function UY(Z,z,X,K){Object.keys(X).forEach(function(J){if(!K||K(J)){if(/^on/.test(J)){var Q=J.slice(2).toLowerCase();Z.addEventListener(Q,X[J])}else if(J==="nodeValue")Z[J]=X[J];else if(J==="style"&&a10(X[J]))e10(Z,z[J],X[J]);else if(J!=="children")if(X[J]===!1)Z.removeAttribute(J);else Z.setAttribute(J,X[J])}})}function e10(Z,z,X){if(z)Object.keys(z).forEach(function(K){Z.style[K]=""});Object.keys(X).forEach(function(K){var J=X[K];Z.style[K]=I5(J)&&!t10.test(K)?J+"px":J})}function U7(Z){if(r0.removalNodes.forEach(function(Q){return NK(Q)}),Z){var z=void 0,X=Z.walker();while(z=X.walk())if(Z=z.vnode,z.entering)NK(Z);else if(c0(Z.type)){var K=Z.component;if(!Z.old&&K.mounted)K.mounted();if(Z.old&&K.updated){var J=K.prevProps||{};K.updated(J)}}}}function kK(Z){var z=Z.parent;while(!z.node)z=z.parent;return z.node}function NK(Z){if(!Z||!Z.parent)return;if(Z.node){var z=kK(Z);if(Z.effect==="A")z.appendChild(Z.node);else if(Z.effect==="U")o10(Z.node,Z.old.props,Z.props)}if(Z.effect==="D"){var X=void 0,K=Z.walker();while(X=K.walk())if(Z=X.vnode,!X.entering)if(c0(Z.type)){var J=Z.component;if(J.beforeDestroy)J.beforeDestroy()}else{var z=kK(Z);GY(Z,z)}}if(Z.ref){if(Z.component)Z.ref(Z.component);else if(Z.node)Z.ref(Z.node)}}function Z90(Z,z){var{props:X,component:K}=z;if(K)return K.prevProps=K.props,K.props=z.props,K;return new Z(X)}function qY(Z){var z=Z;while(Z&&!Z.skip){if(c0(Z.type)){var X=Z90(Z.type,Z);X.vnode=Z,Z.component=X,Z.props.children=Z.children=[X.render()],TK(Z)}else{if(!Z.node)Z.node=r10(Z);TK(Z)}if(Z.firstChild)Z=Z.firstChild;else{while(Z&&Z.parent&&!Z.next)if(Z=Z.parent,Z===z)break;Z=Z.next}}}function z90(Z,z){return Z&&z&&z.type===Z.type&&(!z.key||z.key===Z.key)}function TK(Z){var z=Z.children,X=Z.old?Z.old.firstChild:null,K=null;z.forEach(function(Q,Y){var G=z90(X,Q);if(G)Q.old=X,Q.parent=Z,Q.node=X.node,Q.component=X.component,Q.effect="U";if(Q&&!G)Q.old=null,Q.parent=Z,Q.node=null,Q.effect="A";if(X&&!G)r0.removalNodes.push(X),X.effect="D";if(X)X=X.next;if(Y===0)Z.firstChild=Q;else if(Q)K.next=Q;K=Q});var J=C0(z);if(!z.length)while(X)r0.removalNodes.push(X),X.effect="D",X=X.next;while(X&&J)if(X&&J.old!==X)r0.removalNodes.push(X),X.effect="D",X=X.next}function X90(Z){Z.effect="D",r0.removalNodes=[Z],U7(),r0.removalNodes=[]}function K90(Z){var z=Z.vnode;if(z.effect="U",z.old=z,z.next)z.next.skip=!0;if(r0.removalNodes=[],qY(z),U7(z),z.next)z.next.skip=!1}function J90(Z,z){var X=new r0(Z.tagName.toLowerCase(),{},[z]);return X.node=Z,r0.removalNodes=[],qY(X),U7(X),function(){return X90(X.firstChild)}}var S0=function(){function Z(z){this.props=z,this.state={},this.refs={}}return Z.prototype.setState=function(z){var X=P(P({},this.state),z);if(!v4(this.state,X))this.state=X,K90(this)},Z}(),Q90=function(Z){k(z,Z);function z(X){var K=Z.call(this,X)||this;return K.state={hide:!1},K}return z.prototype.show=function(){this.setState({hide:!1})},z.prototype.hide=function(){this.setState({hide:!0})},z.prototype.render=function(){var X=this.props,K=X.editorType,J=X.eventEmitter;return l(yK||(yK=m([`
      <div class="`,'" style="display: ',`">
        <div
          class="tab-item`,`"
          onClick=`,`
        >
          `,`
        </div>
        <div
          class="tab-item`,`"
          onClick=`,`
        >
          `,`
        </div>
      </div>
    `],[`
      <div class="`,'" style="display: ',`">
        <div
          class="tab-item`,`"
          onClick=`,`
        >
          `,`
        </div>
        <div
          class="tab-item`,`"
          onClick=`,`
        >
          `,`
        </div>
      </div>
    `])),N("mode-switch"),this.state.hide?"none":"block",K==="markdown"?" active":"",function(){J.emit("needChangeMode","markdown")},v.get("Markdown"),K==="wysiwyg"?" active":"",function(){J.emit("needChangeMode","wysiwyg")},v.get("WYSIWYG"))},z}(S0),yK;function Y90(Z,z){var X,K;z=z||0;function J(){K=Array.prototype.slice.call(arguments),window.clearTimeout(X),X=window.setTimeout(function(){Z.apply(null,K)},z)}return J}var G90=Y90,U90=G90;function q90(Z,z){var X,K=!0,J=function(A){Z.apply(null,A),X=null},Q,Y,G;z=z||0,Q=U90(J,z);function U(){if(G=Array.prototype.slice.call(arguments),K){J(G),K=!1;return}if(Y=Number(new Date),X=X||Y,Q(G),Y-X>=z)J(G)}function q(){K=!0,X=null}return U.reset=q,U}var A90=q90,AY=function(){if(typeof Map!=="undefined")return Map;function Z(z,X){var K=-1;return z.some(function(J,Q){if(J[0]===X)return K=Q,!0;return!1}),K}return function(){function z(){this.__entries__=[]}return Object.defineProperty(z.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),z.prototype.get=function(X){var K=Z(this.__entries__,X),J=this.__entries__[K];return J&&J[1]},z.prototype.set=function(X,K){var J=Z(this.__entries__,X);if(~J)this.__entries__[J][1]=K;else this.__entries__.push([X,K])},z.prototype.delete=function(X){var K=this.__entries__,J=Z(K,X);if(~J)K.splice(J,1)},z.prototype.has=function(X){return!!~Z(this.__entries__,X)},z.prototype.clear=function(){this.__entries__.splice(0)},z.prototype.forEach=function(X,K){if(K===void 0)K=null;for(var J=0,Q=this.__entries__;J<Q.length;J++){var Y=Q[J];X.call(K,Y[1],Y[0])}},z}()}(),x4=typeof window!=="undefined"&&typeof document!=="undefined"&&window.document===document,Q1=function(){if(typeof global!=="undefined"&&global.Math===Math)return global;if(typeof self!=="undefined"&&self.Math===Math)return self;if(typeof window!=="undefined"&&window.Math===Math)return window;return Function("return this")()}(),V90=function(){if(typeof requestAnimationFrame==="function")return requestAnimationFrame.bind(Q1);return function(Z){return setTimeout(function(){return Z(Date.now())},16.666666666666668)}}(),W90=2;function H90(Z,z){var X=!1,K=!1,J=0;function Q(){if(X)X=!1,Z();if(K)G()}function Y(){V90(Q)}function G(){var U=Date.now();if(X){if(U-J<W90)return;K=!0}else X=!0,K=!1,setTimeout(Y,z);J=U}return G}var j90=20,R90=["top","right","bottom","left","width","height","size","weight"],F90=typeof MutationObserver!=="undefined",B90=function(){function Z(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=H90(this.refresh.bind(this),j90)}return Z.prototype.addObserver=function(z){if(!~this.observers_.indexOf(z))this.observers_.push(z);if(!this.connected_)this.connect_()},Z.prototype.removeObserver=function(z){var X=this.observers_,K=X.indexOf(z);if(~K)X.splice(K,1);if(!X.length&&this.connected_)this.disconnect_()},Z.prototype.refresh=function(){var z=this.updateObservers_();if(z)this.refresh()},Z.prototype.updateObservers_=function(){var z=this.observers_.filter(function(X){return X.gatherActive(),X.hasActive()});return z.forEach(function(X){return X.broadcastActive()}),z.length>0},Z.prototype.connect_=function(){if(!x4||this.connected_)return;if(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),F90)this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0});else document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0;this.connected_=!0},Z.prototype.disconnect_=function(){if(!x4||!this.connected_)return;if(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_)this.mutationsObserver_.disconnect();if(this.mutationEventsAdded_)document.removeEventListener("DOMSubtreeModified",this.refresh);this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1},Z.prototype.onTransitionEnd_=function(z){var X=z.propertyName,K=X===void 0?"":X,J=R90.some(function(Q){return!!~K.indexOf(Q)});if(J)this.refresh()},Z.getInstance=function(){if(!this.instance_)this.instance_=new Z;return this.instance_},Z.instance_=null,Z}(),VY=function(Z,z){for(var X=0,K=Object.keys(z);X<K.length;X++){var J=K[X];Object.defineProperty(Z,J,{value:z[J],enumerable:!1,writable:!1,configurable:!0})}return Z},q3=function(Z){var z=Z&&Z.ownerDocument&&Z.ownerDocument.defaultView;return z||Q1},WY=O1(0,0,0,0);function Y1(Z){return parseFloat(Z)||0}function xK(Z){var z=[];for(var X=1;X<arguments.length;X++)z[X-1]=arguments[X];return z.reduce(function(K,J){var Q=Z["border-"+J+"-width"];return K+Y1(Q)},0)}function E90(Z){var z=["top","right","bottom","left"],X={};for(var K=0,J=z;K<J.length;K++){var Q=J[K],Y=Z["padding-"+Q];X[Q]=Y1(Y)}return X}function P90(Z){var z=Z.getBBox();return O1(0,0,z.width,z.height)}function O90(Z){var{clientWidth:z,clientHeight:X}=Z;if(!z&&!X)return WY;var K=q3(Z).getComputedStyle(Z),J=E90(K),Q=J.left+J.right,Y=J.top+J.bottom,G=Y1(K.width),U=Y1(K.height);if(K.boxSizing==="border-box"){if(Math.round(G+Q)!==z)G-=xK(K,"left","right")+Q;if(Math.round(U+Y)!==X)U-=xK(K,"top","bottom")+Y}if(!L90(Z)){var q=Math.round(G+Q)-z,A=Math.round(U+Y)-X;if(Math.abs(q)!==1)G-=q;if(Math.abs(A)!==1)U-=A}return O1(J.left,J.top,G,U)}var M90=function(){if(typeof SVGGraphicsElement!=="undefined")return function(Z){return Z instanceof q3(Z).SVGGraphicsElement};return function(Z){return Z instanceof q3(Z).SVGElement&&typeof Z.getBBox==="function"}}();function L90(Z){return Z===q3(Z).document.documentElement}function I90(Z){if(!x4)return WY;if(M90(Z))return P90(Z);return O90(Z)}function D90(Z){var{x:z,y:X,width:K,height:J}=Z,Q=typeof DOMRectReadOnly!=="undefined"?DOMRectReadOnly:Object,Y=Object.create(Q.prototype);return VY(Y,{x:z,y:X,width:K,height:J,top:X,right:z+K,bottom:J+X,left:z}),Y}function O1(Z,z,X,K){return{x:Z,y:z,width:X,height:K}}var C90=function(){function Z(z){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=O1(0,0,0,0),this.target=z}return Z.prototype.isActive=function(){var z=I90(this.target);return this.contentRect_=z,z.width!==this.broadcastWidth||z.height!==this.broadcastHeight},Z.prototype.broadcastRect=function(){var z=this.contentRect_;return this.broadcastWidth=z.width,this.broadcastHeight=z.height,z},Z}(),S90=function(){function Z(z,X){var K=D90(X);VY(this,{target:z,contentRect:K})}return Z}(),b90=function(){function Z(z,X,K){if(this.activeObservations_=[],this.observations_=new AY,typeof z!=="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=z,this.controller_=X,this.callbackCtx_=K}return Z.prototype.observe=function(z){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element==="undefined"||!(Element instanceof Object))return;if(!(z instanceof q3(z).Element))throw new TypeError('parameter 1 is not of type "Element".');var X=this.observations_;if(X.has(z))return;X.set(z,new C90(z)),this.controller_.addObserver(this),this.controller_.refresh()},Z.prototype.unobserve=function(z){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element==="undefined"||!(Element instanceof Object))return;if(!(z instanceof q3(z).Element))throw new TypeError('parameter 1 is not of type "Element".');var X=this.observations_;if(!X.has(z))return;if(X.delete(z),!X.size)this.controller_.removeObserver(this)},Z.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},Z.prototype.gatherActive=function(){var z=this;this.clearActive(),this.observations_.forEach(function(X){if(X.isActive())z.activeObservations_.push(X)})},Z.prototype.broadcastActive=function(){if(!this.hasActive())return;var z=this.callbackCtx_,X=this.activeObservations_.map(function(K){return new S90(K.target,K.broadcastRect())});this.callback_.call(z,X,z),this.clearActive()},Z.prototype.clearActive=function(){this.activeObservations_.splice(0)},Z.prototype.hasActive=function(){return this.activeObservations_.length>0},Z}(),HY=typeof WeakMap!=="undefined"?new WeakMap:new AY,jY=function(){function Z(z){if(!(this instanceof Z))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var X=B90.getInstance(),K=new b90(z,X,this);HY.set(this,K)}return Z}();["observe","unobserve","disconnect"].forEach(function(Z){jY.prototype[Z]=function(){var z;return(z=HY.get(this))[Z].apply(z,arguments)}});var k90=function(){if(typeof Q1.ResizeObserver!=="undefined")return Q1.ResizeObserver;return jY}(),N90=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return z.prototype.execCommand=function(X){var K=q5(X.target,"li");this.props.execCommand("heading",{level:Number(K.getAttribute("data-level"))})},z.prototype.render=function(){var X=this;return l(wK||(wK=m([`
      <ul
        onClick=`,`
        aria-role="menu"
        aria-label="`,`"
      >
        `,`
        <li data-type="Paragraph" aria-role="menuitem">
          <div>`,`</div>
        </li>
      </ul>
    `],[`
      <ul
        onClick=`,`
        aria-role="menu"
        aria-label="`,`"
      >
        `,`
        <li data-type="Paragraph" aria-role="menuitem">
          <div>`,`</div>
        </li>
      </ul>
    `])),function(K){return X.execCommand(K)},v.get("Headings"),[1,2,3,4,5,6].map(function(K){return l(gK||(gK=m([`
              <li data-level="`,`" data-type="Heading" aria-role="menuitem">
                <`,">"," ",`</$>
              </li>
            `],[`
              <li data-level="`,`" data-type="Heading" aria-role="menuitem">
                <`,">"," ",`</$>
              </li>
            `])),K,"h"+K,v.get("Heading"),K)}),v.get("Paragraph"))},z}(S0),gK,wK,RY=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return z.prototype.toggleTab=function(X,K){this.props.onClick(X,K)},z.prototype.render=function(){var X=this;return l(vK||(vK=m([`
      <div class="`,`" aria-role="tabpanel">
        `,`
      </div>
    `],[`
      <div class="`,`" aria-role="tabpanel">
        `,`
      </div>
    `])),N("tabs"),this.props.tabs.map(function(K){var{name:J,text:Q}=K,Y=X.props.activeTab===J;return l(uK||(uK=m([`
            <div
              class="tab-item`,`"
              onClick=`,`
              aria-role="tab"
              aria-label="`,`"
              aria-selected="`,`"
              tabindex="`,`"
            >
              `,`
            </div>
          `],[`
            <div
              class="tab-item`,`"
              onClick=`,`
              aria-role="tab"
              aria-label="`,`"
              aria-selected="`,`"
              tabindex="`,`"
            >
              `,`
            </div>
          `])),Y?" active":"",function(G){return X.toggleTab(G,J)},v.get(Q),Y?"true":"false",Y?"0":"-1",v.get(Q))}))},z}(S0),uK,vK,T90="ui",y90=function(Z){k(z,Z);function z(X){var K=Z.call(this,X)||this;return K.initialize=function(J){if(J===void 0)J="file";var Q=K.refs.url;Q.value="",K.refs.altText.value="",K.refs.file.value="",n0(Q,"wrong"),K.setState({activeTab:J,file:null,fileNameElClassName:""})},K.execCommand=function(){if(K.state.activeTab==="file")K.emitAddImageBlob();else K.emitAddImage()},K.toggleTab=function(J,Q){if(Q!==K.state.activeTab)K.initialize(Q)},K.showFileSelectBox=function(){K.refs.file.click()},K.changeFile=function(J){var Q=J.target.files;if(Q===null||Q===void 0?void 0:Q.length)K.setState({file:Q[0]})},K.state={activeTab:"file",file:null,fileNameElClassName:""},K.tabs=[{name:"file",text:"File"},{name:"url",text:"URL"}],K}return z.prototype.emitAddImageBlob=function(){var X=this,K=this.refs.file.files,J=this.refs.altText,Q=" wrong";if(K===null||K===void 0?void 0:K.length){Q="";var Y=K.item(0),G=function(U,q){return X.props.execCommand("addImage",{imageUrl:U,altText:q||J.value})};this.props.eventEmitter.emit("addImageBlobHook",Y,G,T90)}this.setState({fileNameElClassName:Q})},z.prototype.emitAddImage=function(){var X=this.refs.url,K=this.refs.altText,J=X.value,Q=K.value||"image";if(n0(X,"wrong"),!J.length){U5(X,"wrong");return}if(J)this.props.execCommand("addImage",{imageUrl:J,altText:Q})},z.prototype.preventSelectStart=function(X){X.preventDefault()},z.prototype.updated=function(){if(!this.props.show)this.initialize()},z.prototype.render=function(){var X=this,K=this.state,J=K.activeTab,Q=K.file,Y=K.fileNameElClassName;return l($K||($K=m([`
      <div aria-label="`,`">
        <`," tabs="," activeTab="," onClick=",` />
        <div style="display:`,`">
          <label for="toastuiImageUrlInput">`,`</label>
          <input
            id="toastuiImageUrlInput"
            type="text"
            ref=`,`
          />
        </div>
        <div style="display:`,`;position: relative;">
          <label for="toastuiImageFileInput">`,`</label>
          <span
            class="`,"",`"
            onClick=`,`
            onSelectstart=`,`
          >
            `,`
          </span>
          <button
            type="button"
            class="`,`"
            onClick=`,`
          >
            `,`
          </button>
          <input
            id="toastuiImageFileInput"
            type="file"
            accept="image/*"
            onChange=`,`
            ref=`,`
          />
        </div>
        <label for="toastuiAltTextInput">`,`</label>
        <input
          id="toastuiAltTextInput"
          type="text"
          ref=`,`
        />
        <div class="`,`">
          <button type="button" class="`,'" onClick=',`>
            `,`
          </button>
          <button type="button" class="`,'" onClick=',`>
            `,`
          </button>
        </div>
      </div>
    `],[`
      <div aria-label="`,`">
        <`," tabs="," activeTab="," onClick=",` />
        <div style="display:`,`">
          <label for="toastuiImageUrlInput">`,`</label>
          <input
            id="toastuiImageUrlInput"
            type="text"
            ref=`,`
          />
        </div>
        <div style="display:`,`;position: relative;">
          <label for="toastuiImageFileInput">`,`</label>
          <span
            class="`,"",`"
            onClick=`,`
            onSelectstart=`,`
          >
            `,`
          </span>
          <button
            type="button"
            class="`,`"
            onClick=`,`
          >
            `,`
          </button>
          <input
            id="toastuiImageFileInput"
            type="file"
            accept="image/*"
            onChange=`,`
            ref=`,`
          />
        </div>
        <label for="toastuiAltTextInput">`,`</label>
        <input
          id="toastuiAltTextInput"
          type="text"
          ref=`,`
        />
        <div class="`,`">
          <button type="button" class="`,'" onClick=',`>
            `,`
          </button>
          <button type="button" class="`,'" onClick=',`>
            `,`
          </button>
        </div>
      </div>
    `])),v.get("Insert image"),RY,this.tabs,J,this.toggleTab,J==="url"?"block":"none",v.get("Image URL"),function(G){return X.refs.url=G},J==="file"?"block":"none",v.get("Select image file"),N("file-name"),Q?" has-file":Y,this.showFileSelectBox,this.preventSelectStart,Q?Q.name:v.get("No file"),N("file-select-button"),this.showFileSelectBox,v.get("Choose a file"),this.changeFile,function(G){return X.refs.file=G},v.get("Description"),function(G){return X.refs.altText=G},N("button-container"),N("close-button"),this.props.hidePopup,v.get("Cancel"),N("ok-button"),this.execCommand,v.get("OK"))},z}(S0),$K,x90=function(Z){k(z,Z);function z(){var X=Z!==null&&Z.apply(this,arguments)||this;return X.execCommand=function(){var K=X.refs.url,J=X.refs.text;if(n0(K,"wrong"),n0(J,"wrong"),K.value.length<1){U5(K,"wrong");return}var Q=o0(X.props.initialValues.linkUrl);if(Q&&J.value.length<1){U5(J,"wrong");return}X.props.execCommand("addLink",{linkUrl:K.value,linkText:J.value})},X}return z.prototype.initialize=function(){var X=this.props.initialValues,K=X.linkUrl,J=X.linkText,Q=this.refs.url,Y=this.refs.text;if(n0(Q,"wrong"),n0(Y,"wrong","disabled"),Y.removeAttribute("disabled"),K)U5(Y,"disabled"),Y.setAttribute("disabled","disabled");Q.value=K||"",Y.value=J||""},z.prototype.mounted=function(){this.initialize()},z.prototype.updated=function(X){if(!X.show&&this.props.show)this.initialize()},z.prototype.render=function(){var X=this;return l(fK||(fK=m([`
      <div aria-label="`,`">
        <label for="toastuiLinkUrlInput">`,`</label>
        <input
          id="toastuiLinkUrlInput"
          type="text"
          ref=`,`
        />
        <label for="toastuiLinkTextInput">`,`</label>
        <input
          id="toastuiLinkTextInput"
          type="text"
          ref=`,`
        />
        <div class="`,`">
          <button type="button" class="`,'" onClick=',`>
            `,`
          </button>
          <button type="button" class="`,'" onClick=',`>
            `,`
          </button>
        </div>
      </div>
    `],[`
      <div aria-label="`,`">
        <label for="toastuiLinkUrlInput">`,`</label>
        <input
          id="toastuiLinkUrlInput"
          type="text"
          ref=`,`
        />
        <label for="toastuiLinkTextInput">`,`</label>
        <input
          id="toastuiLinkTextInput"
          type="text"
          ref=`,`
        />
        <div class="`,`">
          <button type="button" class="`,'" onClick=',`>
            `,`
          </button>
          <button type="button" class="`,'" onClick=',`>
            `,`
          </button>
        </div>
      </div>
    `])),v.get("Insert link"),v.get("URL"),function(K){return X.refs.url=K},v.get("Link text"),function(K){return X.refs.text=K},N("button-container"),N("close-button"),this.props.hidePopup,v.get("Cancel"),N("ok-button"),this.execCommand,v.get("OK"))},z}(S0),fK,hK=20,_K=20,mK=5,lK=14,cK=5,pK=9,g90=1,w90=1,iK=1,u90=function(Z){k(z,Z);function z(X){var K=Z.call(this,X)||this;return K.extendSelectionRange=function(J){var{pageX:Q,pageY:Y}=J,G=Q-K.offsetRect.left,U=Y-K.offsetRect.top,q=K.getSelectionRangeByOffset(G,U);K.setState(P({},q))},K.execCommand=function(){K.props.execCommand("addTable",{rowCount:K.state.rowIdx+1,columnCount:K.state.colIdx+1})},K.state={rowIdx:-1,colIdx:-1},K}return z.prototype.getDescription=function(){return this.state.colIdx===-1?"":this.state.colIdx+1+" x "+(this.state.rowIdx+1)},z.prototype.getBoundByRange=function(X,K){return{width:(X+1)*hK,height:(K+1)*_K}},z.prototype.getRangeByOffset=function(X,K){return{colIdx:Math.floor(X/hK),rowIdx:Math.floor(K/_K)}},z.prototype.getTableRange=function(){var X=this.state,K=X.colIdx,J=X.rowIdx,Q=Math.max(K,cK),Y=Math.max(J,mK);if(K>=cK&&Q<pK)Q+=1;if(J>=mK&&Y<lK)Y+=1;return{colIdx:Q+1,rowIdx:Y+1}},z.prototype.getSelectionAreaBound=function(){var X=this.getBoundByRange(this.state.colIdx,this.state.rowIdx),K=X.width,J=X.height;if(!K&&!J)return{display:"none"};return{width:K-iK,height:J-iK,display:"block"}},z.prototype.getSelectionRangeByOffset=function(X,K){var J=this.getRangeByOffset(X,K);return J.rowIdx=Math.min(Math.max(J.rowIdx,g90),lK),J.colIdx=Math.min(Math.max(J.colIdx,w90),pK),J},z.prototype.updated=function(){if(!this.props.show)this.setState({colIdx:-1,rowIdx:-1});else if(this.state.colIdx===-1&&this.state.rowIdx===-1){var X=this.refs.tableEl.getBoundingClientRect(),K=X.left,J=X.top;this.offsetRect={left:window.pageXOffset+K,top:window.pageYOffset+J}}},z.prototype.createTableArea=function(X){var{colIdx:K,rowIdx:J}=X,Q=[];for(var Y=0;Y<J;Y+=1){var G=[];for(var U=0;U<K;U+=1){var q=""+N("table-cell")+(Y>0?"":" header");G.push(l(dK||(dK=m(['<div class="','"></div>'],['<div class="','"></div>'])),q))}Q.push(l(sK||(sK=m(['<div class="','">',"</div>"],['<div class="','">',"</div>"])),N("table-row"),G))}return l(nK||(nK=m(['<div class="','">',"</div>"],['<div class="','">',"</div>"])),N("table"),Q)},z.prototype.render=function(){var X=this,K=this.getTableRange(),J=this.getSelectionAreaBound();return l(aK||(aK=m([`
      <div aria-label="`,`">
        <div
          class="`,`"
          ref=`,`
          onMousemove=`,`
          onClick=`,`
        >
          `,`
          <div class="`,'" style=',`></div>
        </div>
        <p class="`,'">',`</p>
      </div>
    `],[`
      <div aria-label="`,`">
        <div
          class="`,`"
          ref=`,`
          onMousemove=`,`
          onClick=`,`
        >
          `,`
          <div class="`,'" style=',`></div>
        </div>
        <p class="`,'">',`</p>
      </div>
    `])),v.get("Insert table"),N("table-selection"),function(Q){return X.refs.tableEl=Q},this.extendSelectionRange,this.execCommand,this.createTableArea(K),N("table-selection-layer"),J,N("table-description"),this.getDescription())},z}(S0),dK,sK,nK,aK,v90=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return z.prototype.mounted=function(){this.refs.el.appendChild(this.props.body)},z.prototype.updated=function(X){this.refs.el.replaceChild(this.props.body,X.body)},z.prototype.render=function(){var X=this;return l(rK||(rK=m(["<div ref=","></div>"],["<div ref=","></div>"])),function(K){return X.refs.el=K})},z}(S0),rK;function g4(Z){return k5(Z)?f90(Z):Z}function $90(){var Z=document.createElement("label"),z=document.createElement("input"),X=document.createElement("span");Z.className="scroll-sync active",z.type="checkbox",z.checked=!0,X.className="switch";var K=function(J){return z.addEventListener("change",function(Q){var Y=Q.target.checked;if(Y)U5(Z,"active");else n0(Z,"active");J("toggleScrollSync",{active:Y})})};return Z.appendChild(z),Z.appendChild(X),{name:"scrollSync",el:Z,onMounted:K}}function f90(Z){var z;switch(Z){case"heading":z={name:"heading",className:"heading",tooltip:v.get("Headings"),state:"heading"};break;case"bold":z={name:"bold",className:"bold",command:"bold",tooltip:v.get("Bold"),state:"strong"};break;case"italic":z={name:"italic",className:"italic",command:"italic",tooltip:v.get("Italic"),state:"emph"};break;case"strike":z={name:"strike",className:"strike",command:"strike",tooltip:v.get("Strike"),state:"strike"};break;case"hr":z={name:"hr",className:"hrline",command:"hr",tooltip:v.get("Line"),state:"thematicBreak"};break;case"quote":z={name:"quote",className:"quote",command:"blockQuote",tooltip:v.get("Blockquote"),state:"blockQuote"};break;case"ul":z={name:"ul",className:"bullet-list",command:"bulletList",tooltip:v.get("Unordered list"),state:"bulletList"};break;case"ol":z={name:"ol",className:"ordered-list",command:"orderedList",tooltip:v.get("Ordered list"),state:"orderedList"};break;case"task":z={name:"task",className:"task-list",command:"taskList",tooltip:v.get("Task"),state:"taskList"};break;case"table":z={name:"table",className:"table",tooltip:v.get("Insert table"),state:"table"};break;case"image":z={name:"image",className:"image",tooltip:v.get("Insert image")};break;case"link":z={name:"link",className:"link",tooltip:v.get("Insert link")};break;case"code":z={name:"code",className:"code",command:"code",tooltip:v.get("Code"),state:"code"};break;case"codeblock":z={name:"codeblock",className:"codeblock",command:"codeBlock",tooltip:v.get("Insert CodeBlock"),state:"codeBlock"};break;case"indent":z={name:"indent",className:"indent",command:"indent",tooltip:v.get("Indent"),state:"indent"};break;case"outdent":z={name:"outdent",className:"outdent",command:"outdent",tooltip:v.get("Outdent"),state:"outdent"};break;case"scrollSync":z=$90();break;case"more":z={name:"more",className:"more",tooltip:v.get("More")};break}if(z.name!=="scrollSync")z.className+=" "+N("toolbar-icons");return z}function q7(Z,z){var{el:X,pos:K,popup:J,initialValues:Q}=z;switch(Z){case"heading":return{render:function(Y){return l(oK||(oK=m(["<"," ..."," />"],["<"," ..."," />"])),N90,Y)},className:N("popup-add-heading"),fromEl:X,pos:K};case"link":return{render:function(Y){return l(tK||(tK=m(["<"," ..."," />"],["<"," ..."," />"])),x90,Y)},className:N("popup-add-link"),fromEl:X,pos:K,initialValues:Q};case"image":return{render:function(Y){return l(eK||(eK=m(["<"," ..."," />"],["<"," ..."," />"])),y90,Y)},className:N("popup-add-image"),fromEl:X,pos:K};case"table":return{render:function(Y){return l(ZJ||(ZJ=m(["<"," ..."," />"],["<"," ..."," />"])),u90,Y)},className:N("popup-add-table"),fromEl:X,pos:K};case"customPopupBody":if(!J)return null;return P({render:function(Y){return l(zJ||(zJ=m(["<"," ..."," body="," />"],["<"," ..."," body="," />"])),v90,Y,J.body)},fromEl:X,pos:K},J);default:return null}}function G1(Z){Z.hidden=Z.length===Z.filter(function(z){return z.hidden}).length}function h90(Z,z){var X=function(K){return K.hidden=K.name==="scrollSync"&&z,K};return Z.reduce(function(K,J){K.push(J.map(function(Y){return X(g4(Y))}));var Q=K[(K.length||1)-1];if(Q)G1(Q);return K},[])}function _90(Z,z){Z.forEach(function(X){X.forEach(function(K){return K.hidden=K.name==="scrollSync"&&z}),G1(X)})}var oK,tK,eK,ZJ,zJ,m90=20,l90=function(Z){k(z,Z);function z(){var X=Z!==null&&Z.apply(this,arguments)||this;return X.handleMousedown=function(K){if(!q5(K.target,"."+N("popup"))&&!q5(K.target,X.props.info.fromEl))X.props.hidePopup()},X}return z.prototype.mounted=function(){document.addEventListener("mousedown",this.handleMousedown),this.props.eventEmitter.listen("closePopup",this.props.hidePopup)},z.prototype.beforeDestroy=function(){document.removeEventListener("mousedown",this.handleMousedown)},z.prototype.updated=function(X){var K=this.props,J=K.show,Q=K.info;if(J&&Q.pos&&X.show!==J){var Y=P({},Q.pos),G=this.refs.el.offsetWidth,U=q5(this.refs.el,"."+N("toolbar")),q=U.offsetWidth;if(Y.left+G>=q)Y.left=q-G-m90;if(!v4(this.state.popupPos,Y))this.setState({popupPos:Y})}},z.prototype.render=function(){var X=this,K=this.props,J=K.info,Q=K.show,Y=K.hidePopup,G=K.eventEmitter,U=K.execCommand,q=J||{},A=q.className,V=A===void 0?"":A,W=q.style,j=q.render,H=q.initialValues,R=H===void 0?{}:H,F=P(P({display:Q?"block":"none"},W),this.state.popupPos);return l(XJ||(XJ=m([`
      <div
        class="`," ",`"
        style=`,`
        ref=`,`
        aria-role="dialog"
      >
        <div class="`,`">
          `,`
        </div>
      </div>
    `],[`
      <div
        class="`," ",`"
        style=`,`
        ref=`,`
        aria-role="dialog"
      >
        <div class="`,`">
          `,`
        </div>
      </div>
    `])),N("popup"),V,F,function(B){return X.refs.el=B},N("popup-body"),j&&j({eventEmitter:G,show:Q,hidePopup:Y,execCommand:U,initialValues:R}))},z}(S0),XJ,KJ=6;function A7(Z){return function(z){k(X,z);function X(K){var J=z.call(this,K)||this;return J.showTooltip=function(Q){var Y=J.props.item.tooltip;if(!J.props.disabled&&Y){var G=J.getBound(Q),U=G.left+KJ+"px",q=G.top+KJ+"px";A5(J.props.tooltipRef.current,{display:"block",left:U,top:q}),J.props.tooltipRef.current.querySelector(".text").textContent=Y}},J.hideTooltip=function(){A5(J.props.tooltipRef.current,"display","none")},J.state={active:!1,disabled:K.disabled},J.addEvent(),J}return X.prototype.addEvent=function(){var K=this,J=this.props,Q=J.item,Y=J.eventEmitter;if(Q.state)Y.listen("changeToolbarState",function(G){var U,q=G.toolbarState,A=(U=q[Q.state])!==null&&U!==void 0?U:{},V=A.active,W=A.disabled;K.setState({active:!!V,disabled:W!==null&&W!==void 0?W:K.props.disabled})})},X.prototype.getBound=function(K){var J=uJ(K,q5(K,"."+N("toolbar"))),Q=J.offsetLeft,Y=J.offsetTop;return{left:Q,top:K.offsetHeight+Y}},X.prototype.render=function(){return l(JJ||(JJ=m([`
        <`,`
          ...`,`
          active=`,`
          showTooltip=`,`
          hideTooltip=`,`
          getBound=`,`
          disabled=`,`
        />
      `],[`
        <`,`
          ...`,`
          active=`,`
          showTooltip=`,`
          hideTooltip=`,`
          getBound=`,`
          disabled=`,`
        />
      `])),Z,this.props,this.state.active,this.showTooltip,this.hideTooltip,this.getBound,this.state.disabled||this.props.disabled)},X}(S0)}var JJ,c90=80,p90=function(Z){k(z,Z);function z(){var X=Z!==null&&Z.apply(this,arguments)||this;return X.showTooltip=function(){X.props.showTooltip(X.refs.el)},X.execCommand=function(){var K=X.props,J=K.item,Q=K.execCommand,Y=K.setPopupInfo,G=K.getBound,U=K.eventEmitter,q=J.command,A=J.name,V=J.popup;if(q)Q(q);else{var W=V?"customPopupBody":A,j=U.emit("query","getPopupInitialValues",{popupName:W})[0],H=q7(W,{el:X.refs.el,pos:G(X.refs.el),popup:V,initialValues:j});if(H)Y(H)}},X}return z.prototype.mounted=function(){this.setItemWidth()},z.prototype.updated=function(X){if(X.item.name!==this.props.item.name)this.setItemWidth()},z.prototype.setItemWidth=function(){var X=this.props,K=X.setItemWidth,J=X.item;if(K)K(J.name,i4(this.refs.el)+(J.hidden?c90:0))},z.prototype.render=function(){var X=this,K=this.props,J=K.hideTooltip,Q=K.disabled,Y=K.item,G=K.active,U=P({display:Y.hidden?"none":null},Y.style),q=""+(Y.className||"")+(G?" active":"");return l(QJ||(QJ=m([`
      <button
        ref=`,`
        type="button"
        style=`,`
        class=`,`
        onClick=`,`
        onMouseover=`,`
        onMouseout=`,`
        disabled=`,`
        aria-label=`,`
      >
        `,`
      </button>
    `],[`
      <button
        ref=`,`
        type="button"
        style=`,`
        class=`,`
        onClick=`,`
        onMouseover=`,`
        onMouseout=`,`
        disabled=`,`
        aria-label=`,`
      >
        `,`
      </button>
    `])),function(A){return X.refs.el=A},U,q,this.execCommand,this.showTooltip,J,!!Q,Y.text||Y.tooltip||"",Y.text||"")},z}(S0),i90=A7(p90),QJ,d90=function(Z){k(z,Z);function z(){var X=Z!==null&&Z.apply(this,arguments)||this;return X.showTooltip=function(){X.props.showTooltip(X.refs.el)},X.showPopup=function(){var K=q7("customPopupBody",{el:X.refs.el,pos:X.props.getBound(X.refs.el),popup:X.props.item.popup});if(K)X.props.setPopupInfo(K)},X}return z.prototype.mounted=function(){var X=this.props,K=X.setItemWidth,J=X.item;if(this.refs.el.appendChild(J.el),K)K(J.name,i4(this.refs.el));if(J.onMounted)J.onMounted(this.props.execCommand)},z.prototype.updated=function(X){var K,J=this.props,Q=J.item,Y=J.active,G=J.disabled;if(X.active!==Y||X.disabled!==G)(K=Q.onUpdated)===null||K===void 0||K.call(Q,{active:Y,disabled:G})},z.prototype.render=function(){var X=this,K=this.props,J=K.disabled,Q=K.item,Y={display:Q.hidden?"none":"inline-block"},G=function(U){return J?null:U};return l(YJ||(YJ=m([`
      <div
        ref=`,`
        style=`,`
        class=`,`
        onClick=`,`
        onMouseover=`,`
        onMouseout=`,`
      ></div>
    `],[`
      <div
        ref=`,`
        style=`,`
        class=`,`
        onClick=`,`
        onMouseover=`,`
        onMouseout=`,`
      ></div>
    `])),function(U){return X.refs.el=U},Y,N("toolbar-item-wrapper"),G(this.showPopup),G(this.showTooltip),G(this.props.hideTooltip))},z}(S0),s90=A7(d90),YJ,FY=function(Z){k(z,Z);function z(){return Z!==null&&Z.apply(this,arguments)||this}return z.prototype.render=function(){var X=this,K=this.props,J=K.group,Q=K.hiddenDivider,Y=J.hidden?{display:"none"}:null,G=Q?{display:"none"}:null;return l(UJ||(UJ=m([`
      <div class="`,'" style=',`>
        `,`
        <div class="`,'" style=',`></div>
      </div>
    `],[`
      <div class="`,'" style=',`>
        `,`
        <div class="`,'" style=',`></div>
      </div>
    `])),N("toolbar-group"),Y,J.map(function(U){var q=U.el?s90:i90;return l(GJ||(GJ=m(["<"," key="," ..."," item="," />"],["<"," key="," ..."," item="," />"])),q,U.name,X.props,U)}),N("toolbar-divider"),G)},z}(S0),GJ,UJ,n90=4,a90=function(Z){k(z,Z);function z(X){var K=Z.call(this,X)||this;return K.handleClickDocument=function(J){var Q=J.target;if(!q5(Q,"."+N("dropdown-toolbar"))&&!q5(Q,".more"))K.setState({showDropdown:!1,dropdownPos:null})},K.showTooltip=function(){K.props.showTooltip(K.refs.el)},K.state={showDropdown:!1,dropdownPos:null},K}return z.prototype.getBound=function(){var X=this.props.getBound(this.refs.el);return X.top+=n90,P(P({},X),{left:null,right:10})},z.prototype.mounted=function(){document.addEventListener("click",this.handleClickDocument)},z.prototype.updated=function(){if(this.state.showDropdown&&!this.state.dropdownPos)this.setState({dropdownPos:this.getBound()})},z.prototype.beforeDestroy=function(){document.removeEventListener("click",this.handleClickDocument)},z.prototype.render=function(){var X=this,K=this.state,J=K.showDropdown,Q=K.dropdownPos,Y=this.props,G=Y.disabled,U=Y.item,q=Y.items,A=Y.hideTooltip,V=q.filter(function(H){return!H.hidden}),W=V.length?null:{display:"none"},j=J?null:{display:"none"};return l(AJ||(AJ=m([`
      <div class="`,'" style=',`>
        <button
          ref=`,`
          type="button"
          class=`,`
          onClick=`,`
          onMouseover=`,`
          onMouseout=`,`
          disabled=`,`
        ></button>
        <div
          class="`,`"
          style=`,`
          ref=`,`
        >
          `,`
        </div>
      </div>
    `],[`
      <div class="`,'" style=',`>
        <button
          ref=`,`
          type="button"
          class=`,`
          onClick=`,`
          onMouseover=`,`
          onMouseout=`,`
          disabled=`,`
        ></button>
        <div
          class="`,`"
          style=`,`
          ref=`,`
        >
          `,`
        </div>
      </div>
    `])),N("toolbar-group"),W,function(H){return X.refs.el=H},U.className,function(){return X.setState({showDropdown:!0})},this.showTooltip,A,G,N("dropdown-toolbar"),P(P({},j),Q),function(H){return X.refs.dropdownEl=H},V.length?V.map(function(H,R){var F;return l(qJ||(qJ=m([`
                  <`,`
                    group=`,`
                    hiddenDivider=`,`
                    ...`,`
                  />
                `],[`
                  <`,`
                    group=`,`
                    hiddenDivider=`,`
                    ...`,`
                  />
                `])),FY,H,R===V.length-1||((F=V[R+1])===null||F===void 0?void 0:F.hidden),X.props)}):null)},z}(S0),r90=A7(a90),qJ,AJ,o90=50,t90=function(Z){k(z,Z);function z(X){var K=Z.call(this,X)||this;return K.toggleTab=function(J,Q){var Y=K.props.eventEmitter;if(K.state.activeTab!==Q){var G=Q==="write"?"changePreviewTabWrite":"changePreviewTabPreview";Y.emit(G),K.setState({activeTab:Q})}},K.setItemWidth=function(J,Q){K.itemWidthMap[J]=Q},K.setPopupInfo=function(J){K.setState({showPopup:!0,popupInfo:J})},K.openPopup=function(J,Q){if(Q===void 0)Q={};var Y=K.refs.el.querySelector("."+N("toolbar-group")+" ."+J);if(Y){var G=uJ(Y,q5(Y,"."+N("toolbar"))),U=G.offsetLeft,q=G.offsetTop,A=q7(J,{el:Y,pos:{left:U,top:Y.offsetHeight+q},initialValues:Q});if(A)K.setPopupInfo(A)}},K.hidePopup=function(){if(K.state.showPopup)K.setState({showPopup:!1})},K.execCommand=function(J,Q){var Y=K.props.eventEmitter;Y.emit("command",J,Q),K.hidePopup()},K.tabs=[{name:"write",text:"Write"},{name:"preview",text:"Preview"}],K.itemWidthMap={},K.initialItems=h90(X.toolbarItems||[],K.hiddenScrollSync()),K.state={items:K.initialItems,dropdownItems:[],showPopup:!1,popupInfo:{},activeTab:"write"},K.tooltipRef={current:null},K.resizeObserver=new k90(function(){return K.handleResize()}),K.addEvent(),K}return z.prototype.insertToolbarItem=function(X,K){var{groupIndex:J,itemIndex:Q}=X,Y=this.initialItems[J];if(K=g4(K),Y)Y.splice(Q,0,K);else this.initialItems.push([K]);this.setState(this.classifyToolbarItems())},z.prototype.removeToolbarItem=function(X){var K=this;z3(this.initialItems,function(J){var Q=!1;return z3(J,function(Y,G){if(Y.name===X)return Q=!0,J.splice(G,1),K.setState(K.classifyToolbarItems()),!1;return!0}),!Q})},z.prototype.addEvent=function(){var X=this,K=this.props.eventEmitter;this.handleResize=A90(function(){X.setState({items:X.initialItems,dropdownItems:[]}),X.setState(X.classifyToolbarItems())},200),K.listen("openPopup",this.openPopup)},z.prototype.appendTooltipToRoot=function(){var X='<div class="'+N("tooltip")+`" style="display:none">
        <div class="arrow"></div>
        <span class="text"></span>
      </div>`;this.tooltipRef.current=wJ(X,this.refs.el)},z.prototype.hiddenScrollSync=function(){return this.props.editorType==="wysiwyg"||this.props.previewStyle==="tab"},z.prototype.movePrevItemToDropdownToolbar=function(X,K,J,Q){var Y=function(U){var q=U.pop();if(q)Q.push(q)};if(X>1)Y(J);else{var G=C0(K);if(G)Y(G)}},z.prototype.classifyToolbarItems=function(){var X=this,K=0,J=this.refs.el.clientWidth,Q=this.refs.el.querySelector("."+N("toolbar-divider")),Y=Q?i4(Q):0,G=[],U=[],q=!1;return this.initialItems.forEach(function(A,V){var W=[],j=[];if(A.forEach(function(H,R){if(!H.hidden)if(K+=X.itemWidthMap[H.name],K>J-o90){if(!q)X.movePrevItemToDropdownToolbar(R,G,W,j),q=!0;j.push(H)}else W.push(H)}),W.length)G1(W),G.push(W);if(j.length)G1(j),U.push(j);if(V<X.state.items.length-1)K+=Y}),{items:G,dropdownItems:U}},z.prototype.mounted=function(){if(this.props.previewStyle==="tab")this.props.eventEmitter.emit("changePreviewTabWrite",!0);this.setState(this.classifyToolbarItems()),this.appendTooltipToRoot(),this.resizeObserver.observe(this.refs.el)},z.prototype.updated=function(X){var K=this.props,J=K.editorType,Q=K.previewStyle,Y=K.eventEmitter,G=Q!==X.previewStyle,U=J!==X.editorType;if(G||U){_90(this.initialItems,this.hiddenScrollSync());var q=this.classifyToolbarItems();if(G||Q==="tab"&&J==="markdown")Y.emit("changePreviewTabWrite"),q.activeTab="write";this.setState(q)}},z.prototype.beforeDestroy=function(){window.removeEventListener("resize",this.handleResize),this.resizeObserver.disconnect(),B8(this.tooltipRef.current)},z.prototype.render=function(){var X=this,K=this.props,J=K.previewStyle,Q=K.eventEmitter,Y=K.editorType,G=this.state,U=G.popupInfo,q=G.showPopup,A=G.activeTab,V=G.items,W=G.dropdownItems,j={eventEmitter:Q,tooltipRef:this.tooltipRef,disabled:Y==="markdown"&&J==="tab"&&A==="preview",execCommand:this.execCommand,setPopupInfo:this.setPopupInfo},H=J==="tab"?{borderTopLeftRadius:0}:null;return l(WJ||(WJ=m([`
      <div class="`,`">
        <div
          class="`,`"
          style="display: `,`"
        >
          <`," tabs="," activeTab="," onClick=",` />
        </div>
        <div
          class="`,`"
          ref=`,`
          style=`,`
        >
          `,`
          <`,`
            item=`,`
            items=`,`
            ...`,`
          />
        </div>
        <`,`
          info=`,`
          show=`,`
          eventEmitter=`,`
          hidePopup=`,`
          execCommand=`,`
        />
      </div>
    `],[`
      <div class="`,`">
        <div
          class="`,`"
          style="display: `,`"
        >
          <`," tabs="," activeTab="," onClick=",` />
        </div>
        <div
          class="`,`"
          ref=`,`
          style=`,`
        >
          `,`
          <`,`
            item=`,`
            items=`,`
            ...`,`
          />
        </div>
        <`,`
          info=`,`
          show=`,`
          eventEmitter=`,`
          hidePopup=`,`
          execCommand=`,`
        />
      </div>
    `])),N("toolbar"),N("md-tab-container"),Y==="wysiwyg"||J==="vertical"?"none":"block",RY,this.tabs,A,this.toggleTab,N("defaultUI-toolbar"),function(R){return X.refs.el=R},H,V.map(function(R,F){var B;return l(VJ||(VJ=m([`
              <`,`
                group=`,`
                hiddenDivider=`,`
                setItemWidth=`,`
                ...`,`
              />
            `],[`
              <`,`
                group=`,`
                hiddenDivider=`,`
                setItemWidth=`,`
                ...`,`
              />
            `])),FY,R,F===V.length-1||((B=V[F+1])===null||B===void 0?void 0:B.hidden),X.setItemWidth,j)}),r90,g4("more"),W,j,l90,U,q,Q,this.hidePopup,this.execCommand)},z}(S0),VJ,WJ,e90=function(Z){k(z,Z);function z(X){var K=Z.call(this,X)||this;return K.handleClickDocument=function(J){if(!q5(J.target,"."+N("context-menu")))K.setState({pos:null})},K.state={pos:null,menuGroups:[]},K.addEvent(),K}return z.prototype.addEvent=function(){var X=this;this.props.eventEmitter.listen("contextmenu",function(K){var{pos:J,menuGroups:Q}=K;X.setState({pos:J,menuGroups:Q})})},z.prototype.mounted=function(){document.addEventListener("click",this.handleClickDocument)},z.prototype.beforeDestroy=function(){document.removeEventListener("click",this.handleClickDocument)},z.prototype.getMenuGroupElements=function(){var X=this,K=this.state,J=K.pos,Q=K.menuGroups;return J?Q.reduce(function(Y,G){var U=[];return G.forEach(function(q){var{label:A,className:V}=q,W=V===void 0?!1:V,j=q.disabled,H=q.onClick,R=function(){if(!j)H(),X.setState({pos:null})};U.push(l(HJ||(HJ=m([`
                <li
                  onClick=`,`
                  class="menu-item`,`"
                  aria-role="menuitem"
                >
                  <span class="`,'">',`</span>
                </li>
              `],[`
                <li
                  onClick=`,`
                  class="menu-item`,`"
                  aria-role="menuitem"
                >
                  <span class="`,'">',`</span>
                </li>
              `])),R,j?" disabled":"",W,A))}),Y.push(l(jJ||(jJ=m([`<ul class="menu-group">
              `,`
            </ul>`],[`<ul class="menu-group">
              `,`
            </ul>`])),U)),Y},[]):[]},z.prototype.render=function(){var X=P({display:this.state.pos?"block":"none"},this.state.pos);return l(RJ||(RJ=m(['<div class="','" style=',` aria-role="menu">
      `,`
    </div>`],['<div class="','" style=',` aria-role="menu">
      `,`
    </div>`])),N("context-menu"),X,this.getMenuGroupElements())},z}(S0),HJ,jJ,RJ,Z40=function(Z){k(z,Z);function z(X){var K=Z.call(this,X)||this;K.changeMode=function(Y){if(Y!==K.state.editorType)K.setState({editorType:Y})},K.changePreviewStyle=function(Y){if(Y!==K.state.previewStyle)K.setState({previewStyle:Y})},K.hide=function(){K.setState({hide:!0})},K.show=function(){K.setState({hide:!1})};var{editorType:J,previewStyle:Q}=X;return K.state={editorType:J,previewStyle:Q,hide:!1},K.addEvent(),K}return z.prototype.mounted=function(){var X=this.props.slots,K=X.wwEditor,J=X.mdEditor,Q=X.mdPreview;this.refs.wwContainer.appendChild(K),this.refs.mdContainer.insertAdjacentElement("afterbegin",J),this.refs.mdContainer.appendChild(Q)},z.prototype.insertToolbarItem=function(X,K){this.toolbar.insertToolbarItem(X,K)},z.prototype.removeToolbarItem=function(X){this.toolbar.removeToolbarItem(X)},z.prototype.render=function(){var X=this,K=this.props,J=K.eventEmitter,Q=K.hideModeSwitch,Y=K.toolbarItems,G=K.theme,U=this.state,q=U.hide,A=U.previewStyle,V=U.editorType,W=q?" hidden":"",j=N(V==="markdown"?"md-mode":"ww-mode"),H=N("md")+"-"+A+"-style",R=N([G!=="light",G+" "]);return l(BJ||(BJ=m([`
      <div
        class="`,"","",`"
        ref=`,`
      >
        <`,`
          ref=`,`
          eventEmitter=`,`
          previewStyle=`,`
          toolbarItems=`,`
          editorType=`,`
        />
        <div
          class="`," ",`"
          ref=`,`
        >
          <div class="`,`">
            <div
              class="`," ",`"
              ref=`,`
            >
              <div class="`,`"></div>
            </div>
            <div
              class="`,`"
              ref=`,`
            />
          </div>
        </div>
        `,`
        <`," eventEmitter=",` />
      </div>
    `],[`
      <div
        class="`,"","",`"
        ref=`,`
      >
        <`,`
          ref=`,`
          eventEmitter=`,`
          previewStyle=`,`
          toolbarItems=`,`
          editorType=`,`
        />
        <div
          class="`," ",`"
          ref=`,`
        >
          <div class="`,`">
            <div
              class="`," ",`"
              ref=`,`
            >
              <div class="`,`"></div>
            </div>
            <div
              class="`,`"
              ref=`,`
            />
          </div>
        </div>
        `,`
        <`," eventEmitter=",` />
      </div>
    `])),R,N("defaultUI"),W,function(F){return X.refs.el=F},t90,function(F){return X.toolbar=F},J,A,Y,V,N("main"),j,function(F){return X.refs.editorSection=F},N("main-container"),N("md-container"),H,function(F){return X.refs.mdContainer=F},N("md-splitter"),N("ww-container"),function(F){return X.refs.wwContainer=F},!Q&&l(FJ||(FJ=m(["<"," eventEmitter="," editorType="," />"],["<"," eventEmitter="," editorType="," />"])),Q90,J,V),e90,J)},z.prototype.addEvent=function(){var X=this.props.eventEmitter;X.listen("hide",this.hide),X.listen("show",this.show),X.listen("changeMode",this.changeMode),X.listen("changePreviewStyle",this.changePreviewStyle)},z}(S0),FJ,BJ,BY=function(Z){k(z,Z);function z(X){var K,J=Z.call(this,X)||this,Q,Y=J90(J.options.el,l(EJ||(EJ=m([`
        <`,`
          ref=`,`
          eventEmitter=`,`
          slots=`,`
          hideModeSwitch=`,`
          toolbarItems=`,`
          previewStyle=`,`
          editorType=`,`
          theme=`,`
        />
      `],[`
        <`,`
          ref=`,`
          eventEmitter=`,`
          slots=`,`
          hideModeSwitch=`,`
          toolbarItems=`,`
          previewStyle=`,`
          editorType=`,`
          theme=`,`
        />
      `])),Z40,function(G){return Q=G},J.eventEmitter,J.getEditorElements(),J.options.hideModeSwitch,J.options.toolbarItems,J.options.previewStyle,J.options.initialEditType,J.options.theme));return J.setMinHeight(J.options.minHeight),J.setHeight(J.options.height),J.defaultUI={insertToolbarItem:Q.insertToolbarItem.bind(Q),removeToolbarItem:Q.removeToolbarItem.bind(Q),destroy:Y},(K=J.pluginInfo.toolbarItems)===null||K===void 0||K.forEach(function(G){var{groupIndex:U,itemIndex:q,item:A}=G;J.defaultUI.insertToolbarItem({groupIndex:U,itemIndex:q},A)}),J.eventEmitter.emit("loadUI",J),J}return z.factory=function(X){return X.viewer?new JY(X):new z(X)},z.prototype.insertToolbarItem=function(X,K){this.defaultUI.insertToolbarItem(X,K)},z.prototype.removeToolbarItem=function(X){this.defaultUI.removeToolbarItem(X)},z.prototype.destroy=function(){Z.prototype.destroy.call(this),this.defaultUI.destroy()},z}(YY),EJ;YY.setLanguage(["en","en-US"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Write",Preview:"Preview",Headings:"Headings",Paragraph:"Paragraph",Bold:"Bold",Italic:"Italic",Strike:"Strike",Code:"Inline code",Line:"Line",Blockquote:"Blockquote","Unordered list":"Unordered list","Ordered list":"Ordered list",Task:"Task",Indent:"Indent",Outdent:"Outdent","Insert link":"Insert link","Insert CodeBlock":"Insert codeBlock","Insert table":"Insert table","Insert image":"Insert image",Heading:"Heading","Image URL":"Image URL","Select image file":"Select image file","Choose a file":"Choose a file","No file":"No file",Description:"Description",OK:"OK",More:"More",Cancel:"Cancel",File:"File",URL:"URL","Link text":"Link text","Add row to up":"Add row to up","Add row to down":"Add row to down","Add column to left":"Add column to left","Add column to right":"Add column to right","Remove row":"Remove row","Remove column":"Remove column","Align column to left":"Align column to left","Align column to center":"Align column to center","Align column to right":"Align column to right","Remove table":"Remove table","Would you like to paste as table?":"Would you like to paste as table?","Text color":"Text color","Auto scroll enabled":"Auto scroll enabled","Auto scroll disabled":"Auto scroll disabled","Choose language":"Choose language"});var z70=new BY({el:document.querySelector("#editor"),initialEditType:"markdown",height:"1200px",initialValue:document.querySelector("textarea")?.value});
